import{a as C}from"./chunk-IJZG6WC3.js";import{c as w}from"./chunk-T2ZQ5EGI.js";import"./chunk-NTU7HPDP.js";import{Zb as _,_b as z}from"./chunk-NUMEWRMA.js";import"./chunk-YQKVMPSG.js";import{E as u,Lb as l,Mb as e,Nb as t,Ob as p,Z as h,Zb as g,ab as n,cd as E,dd as y,ed as S,gb as f,lc as i,mc as x,md as I,nb as v,nc as c,sb as b}from"./chunk-SN4XSKG7.js";function k(o,s){if(o&1&&(e(0,"div",9),p(1,"lucide-angular",10),i(2),t()),o&2){let a=g();n(),l("size",18),n(),c(" ",a.error)}}function R(o,s){o&1&&(e(0,"div",11),p(1,"div",12),e(2,"p"),i(3,"Cargando extensiones..."),t()())}function F(o,s){if(o&1&&(e(0,"tr")(1,"td",21),i(2),t(),e(3,"td"),i(4),t(),e(5,"td"),i(6),t(),e(7,"td"),i(8),t(),e(9,"td")(10,"span",22),i(11),t()(),e(12,"td",23),i(13),t()()),o&2){let a=s.$implicit,r=g(2);n(2),x(a.extension),n(2),x(a.fullName||a.displayName||"-"),n(2),x(a.ipAddress),n(2),x(a.port),n(2),l("ngClass",r.getStatusClass(a.status)),n(),c(" ",a.status," "),n(2),x(a.pingMs)}}function T(o,s){o&1&&(e(0,"tr")(1,"td",24),p(2,"lucide-angular",25),i(3," No hay extensiones registradas en este momento "),t()()),o&2&&(n(2),l("size",20))}function M(o,s){if(o&1&&(e(0,"div",13)(1,"div",14)(2,"h3"),p(3,"lucide-angular",15),i(4," Extensiones Registradas"),t(),e(5,"div",16),i(6),t()(),e(7,"div",17)(8,"table",18)(9,"thead")(10,"tr")(11,"th"),i(12,"Extensi\xF3n/Anexo"),t(),e(13,"th"),i(14,"Nombre"),t(),e(15,"th"),i(16,"IP"),t(),e(17,"th"),i(18,"Puerto"),t(),e(19,"th"),i(20,"Estado"),t(),e(21,"th"),i(22,"Respuesta"),t()()(),e(23,"tbody"),b(24,F,14,7,"tr",19)(25,T,4,1,"tr",20),t()()()()),o&2){let a=g();n(3),l("size",20),n(3),c(" Total: ",a.extensions.length," "),n(18),l("ngForOf",a.extensions),n(),l("ngIf",a.extensions.length===0)}}var V=(()=>{let s=class s{constructor(r,d){this.router=r,this.monitoringService=d,this.extensions=[],this.loading=!1,this.error=null}ngOnInit(){this.loadExtensions(),this.startPolling()}ngOnDestroy(){this.pollingSubscription&&this.pollingSubscription.unsubscribe()}loadExtensions(){this.loading=!0,this.error=null,this.monitoringService.getExtensionRegistrations().subscribe({next:r=>{this.extensions=r,this.loading=!1},error:r=>{console.error("Error loading extensions:",r),this.error="Error al cargar las extensiones registradas",this.loading=!1}})}startPolling(){this.pollingSubscription=u(5e3).pipe(h(()=>this.monitoringService.getExtensionRegistrations())).subscribe({next:r=>{this.extensions=r},error:r=>{console.error("Error polling extensions:",r)}})}goBack(){this.router.navigate(["/admin/campaigns"])}getStatusClass(r){return r==="REGISTRADO"?"status-registered":"status-unregistered"}};s.\u0275fac=function(d){return new(d||s)(f(w),f(C))},s.\u0275cmp=v({type:s,selectors:[["app-extensions-registry"]],decls:12,vars:4,consts:[[1,"extensions-container"],[1,"flex","items-center","gap-2","mb-2"],[1,"w-8","h-8","bg-gradient-to-br","from-indigo-600","to-indigo-700","rounded-lg","flex","items-center","justify-center"],["name","phone",1,"text-white",3,"size"],[1,"text-lg","font-bold","text-white"],[1,"text-xs","text-gray-400"],["class","error-message",4,"ngIf"],["class","loading-state",4,"ngIf"],["class","extensions-section",4,"ngIf"],[1,"error-message"],["name","x-circle",3,"size"],[1,"loading-state"],[1,"spinner"],[1,"extensions-section"],[1,"table-header"],["name","clipboard-list",3,"size"],[1,"info-badge"],[1,"table-container"],[1,"extensions-table"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"extension-cell"],[1,"status-badge",3,"ngClass"],[1,"ping-cell"],["colspan","6",1,"empty-row"],["name","inbox",3,"size"]],template:function(d,m){d&1&&(e(0,"div",0)(1,"div",1)(2,"div",2),p(3,"lucide-angular",3),t(),e(4,"div")(5,"h1",4),i(6,"Registro de Extensiones"),t(),e(7,"p",5),i(8,"Gesti\xF3n de extensiones telef\xF3nicas registradas"),t()()(),b(9,k,3,2,"div",6)(10,R,4,0,"div",7)(11,M,26,4,"div",8),t()),d&2&&(n(3),l("size",16),n(6),l("ngIf",m.error),n(),l("ngIf",m.loading&&m.extensions.length===0),n(),l("ngIf",!m.loading||m.extensions.length>0))},dependencies:[I,E,y,S,z,_],styles:[`.extensions-container{padding:20px!important;max-width:1400px;margin:0 auto;background:linear-gradient(to bottom right,#0f172a,#1e293b,#0f172a);min-height:100vh;color:#e2e8f0}.header{display:flex;align-items:center;gap:20px;margin-bottom:30px}.header h1{margin:0;color:#f1f5f9;font-size:28px;font-weight:600}.btn-back{display:flex;align-items:center;gap:8px;padding:10px 16px;background:#1e293b;color:#e2e8f0;border:1px solid #334155;border-radius:8px;cursor:pointer;font-size:14px;transition:all .3s}.btn-back:hover{background:#334155;border-color:#475569}.error-message{background:#ef44441a;border:1px solid #EF4444;color:#ef4444;padding:12px 16px;border-radius:8px;margin-bottom:20px;font-size:14px}.loading-state{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px;color:#94a3b8}.spinner{border:4px solid #334155;border-top:4px solid #3B82F6;border-radius:50%;width:40px;height:40px;animation:spin 1s linear infinite;margin-bottom:16px}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.extensions-section{background:#1e293b;border:1px solid #334155;border-radius:12px;padding:20px}.table-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.table-header h3{margin:0;color:#f1f5f9;font-size:20px;font-weight:600}.info-badge{padding:6px 12px;background:#3b82f6;color:#fff;border-radius:6px;font-size:13px;font-weight:500}.table-container{overflow-x:auto}.extensions-table{width:100%;border-collapse:collapse}.extensions-table thead{background:#0f172a}.extensions-table th{padding:12px;text-align:left;color:#94a3b8;font-size:13px;font-weight:600;border-bottom:2px solid #334155}.extensions-table tbody tr{border-bottom:1px solid #334155;transition:all .3s}.extensions-table tbody tr:hover{background:#0f172a}.extensions-table td{padding:12px;color:#e2e8f0;font-size:14px}.extension-cell{font-weight:600;color:#3b82f6}.ping-cell{font-weight:500;color:#10b981}.user-agent-cell{color:#94a3b8;font-size:12px}.empty-row{text-align:center;color:#94a3b8;padding:40px!important;font-size:16px}.status-badge{padding:4px 10px;border-radius:6px;font-size:12px;font-weight:500;display:inline-block}.status-registered{background:#10b98133;color:#10b981;border:1px solid #10B981}.status-unregistered{background:#ef444433;color:#ef4444;border:1px solid #EF4444}@media (max-width: 768px){.extensions-container{padding:15px}.header{flex-direction:column;align-items:flex-start}.table-header{flex-direction:column;align-items:flex-start;gap:10px}}
`],encapsulation:2});let o=s;return o})();export{V as ExtensionsRegistryComponent};
