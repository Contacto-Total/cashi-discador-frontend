import{a as fe,b as xe,c as A}from"./chunk-4F4PQCC5.js";import{a as ge}from"./chunk-MH2R325L.js";import{a as pe}from"./chunk-A45DFSUZ.js";import{a as ue}from"./chunk-6LMWXMMV.js";import{E as me,f as re,k as le,s as de,t as se,u as ce}from"./chunk-E2JO3TS2.js";import{pc as ae,qc as oe}from"./chunk-3IYT5ASU.js";import"./chunk-YQKVMPSG.js";import"./chunk-72Z2NTOL.js";import{Db as ie,Eb as C,Fb as y,Gb as $,Ib as E,Jb as I,Kb as m,Lb as n,Mb as a,Nb as x,Ub as R,Wb as w,Yb as g,ab as o,g as j,gb as X,ic as ee,kc as l,lc as T,ld as ne,ma as k,mc as D,na as z,nb as te,nc as H,pc as W,qc as O,rc as q,wa as S}from"./chunk-BDAG5FYU.js";var P=(t,s)=>s.id;function ve(t,s){t&1&&(n(0,"div",0),x(1,"div",20),n(2,"div",21)(3,"div",22)(4,"div",23),x(5,"div",24)(6,"div",25),a(),n(7,"div",26)(8,"h3",27),l(9,"Importando datos..."),a(),n(10,"p",28),l(11,"Por favor espere, este proceso puede tardar varios minutos dependiendo de la cantidad de registros."),a()(),n(12,"div",29),x(13,"div",30),a(),n(14,"p",31),l(15,"No cierre esta ventana"),a()()()())}function Ce(t,s){if(t&1&&(n(0,"option",14),l(1),a()),t&2){let i=s.$implicit;m("value",i.id),o(),H("",i.tenantCode," - ",i.tenantName)}}function ye(t,s){if(t&1&&(n(0,"option",14),l(1),a()),t&2){let i=s.$implicit;m("value",i.id),o(),H("",i.portfolioCode," - ",i.portfolioName)}}function Se(t,s){if(t&1&&(n(0,"option",14),l(1),a()),t&2){let i=s.$implicit;m("value",i.id),o(),H("",i.subPortfolioCode," - ",i.subPortfolioName)}}function Ee(t,s){if(t&1&&(n(0,"div",47)(1,"div",44)(2,"span",31),l(3,"Total:"),a(),n(4,"span",56),l(5),a()(),n(6,"div",44),x(7,"lucide-angular",57),n(8,"span",58),l(9),a()(),n(10,"div",44),x(11,"lucide-angular",59),n(12,"span",60),l(13),a()()()),t&2){let i=g(2);o(5),T(i.importedData().length),o(2),m("size",12),o(2),T(i.validData().length),o(2),m("size",12),o(2),T(i.invalidData().length)}}function Ie(t,s){if(t&1&&(n(0,"span",31),l(1),a()),t&2){let i=g(2);o(),D("",i.previewHeaders().length," columnas")}}function we(t,s){t&1&&(n(0,"th",52),l(1,"Estado"),a())}function De(t,s){if(t&1&&x(0,"lucide-angular",62),t&2){let i=g().$implicit;m("size",12)("title","Campo transformado desde: "+i.sourceField)}}function Te(t,s){if(t&1&&(n(0,"th",53)(1,"div",61),C(2,De,1,2,"lucide-angular",62),n(3,"div",63)(4,"span",64),l(5),a(),n(6,"span",65),l(7),a()()()()),t&2){let i=s.$implicit;m("title",i.dataType+(i.format?" ("+i.format+")":"")),o(2),y(i.sourceField&&i.regexPattern?2:-1),o(3),T(i.headerName),o(2),H("",i.dataType,"",i.format?" ("+i.format+")":"")}}function Le(t,s){if(t&1&&(n(0,"tr",54)(1,"td",66)(2,"div",67),x(3,"lucide-angular",68),n(4,"span",69),l(5,"No hay datos. Importa un archivo Excel para ver los datos aqu\xED."),a()()()()),t&2){let i=g(2);o(),ie("colspan",i.previewHeaders().length+1),o(2),m("size",24)}}function Pe(t,s){if(t&1&&(n(0,"td",77),l(1),a()),t&2){let i=s.$implicit,e=g().$implicit;ee("text-gray-500",!e[i.headerName]),o(),D(" ",e[i.headerName]||"NULL"," ")}}function Ne(t,s){if(t&1&&(n(0,"tr",70)(1,"td",72),l(2),a(),n(3,"td",73)(4,"span",74),x(5,"lucide-angular",75),l(6," V\xE1lido "),a()(),E(7,Pe,2,3,"td",76,P),a()),t&2){let i=s.$index,e=g(3);o(2),T(i+1),o(3),m("size",10),o(2),I(e.previewHeaders())}}function Me(t,s){if(t&1&&(n(0,"td",77),l(1),a()),t&2){let i=s.$implicit,e=g().$implicit;ee("text-gray-500",!e.data[i.headerName]),o(),D(" ",e.data[i.headerName]||"NULL"," ")}}function Fe(t,s){if(t&1&&(n(0,"tr",71)(1,"td",72),l(2),a(),n(3,"td",73)(4,"span",78),x(5,"lucide-angular",79),l(6," Error "),a()(),E(7,Me,2,3,"td",76,P),a()),t&2){let i=s.$implicit,e=s.$index,r=g(3);o(2),T(r.validData().length+e+1),o(2),m("title",i.error),o(),m("size",10),o(2),I(r.previewHeaders())}}function ke(t,s){if(t&1&&(E(0,Ne,9,2,"tr",70,$),E(2,Fe,9,3,"tr",71,$)),t&2){let i=g(2);I(i.validData()),o(2),I(i.invalidData())}}function ze(t,s){if(t&1&&(n(0,"div",94),l(1),a()),t&2){let i=s.$implicit;o(),D(" ",i," ")}}function $e(t,s){if(t&1&&(n(0,"div",80)(1,"div",88),x(2,"lucide-angular",89),n(3,"div",90)(4,"h3",91),l(5,"Errores al Importar Datos"),a(),n(6,"p",92),l(7," La importaci\xF3n fall\xF3 debido a los siguientes errores. No se insert\xF3 ning\xFAn dato. "),a(),n(8,"div",93),E(9,ze,2,1,"div",94,$),a()()()()),t&2){let i=g(3);o(2),m("size",24),o(7),I(i.backendErrors())}}function He(t,s){if(t&1&&(n(0,"p",83)(1,"span",84),l(2),a(),l(3),a()),t&2){let i=s.$implicit,e=s.$index,r=g(4);o(2),D("Fila ",r.validData().length+e+1,":"),o(),D(" ",i.error," ")}}function Ae(t,s){if(t&1&&(n(0,"div",81)(1,"div",88),x(2,"lucide-angular",95),n(3,"div",90)(4,"h3",96),l(5,"Registros con Errores"),a(),n(6,"div",97),E(7,He,4,2,"p",83,$),a()()()()),t&2){let i=g(3);o(2),m("size",20),o(5),I(i.invalidData())}}function Be(t,s){t&1&&(n(0,"span",84),l(1,"La importaci\xF3n fall\xF3. Corrija los errores e intente nuevamente."),a())}function Ve(t,s){if(t&1&&(n(0,"span",98),l(1),a(),l(2," listo(s) para importar ")),t&2){let i=g(3);o(),D("",i.validData().length," registro(s)")}}function je(t,s){t&1&&(n(0,"span",84),l(1,"No hay registros v\xE1lidos para importar"),a())}function Xe(t,s){if(t&1){let i=R();n(0,"button",99),w("click",function(){k(i);let r=g(3);return z(r.confirmImport())}),l(1," Confirmar Importaci\xF3n "),a()}}function Re(t,s){if(t&1){let i=R();n(0,"div",55),C(1,$e,11,1,"div",80),C(2,Ae,9,1,"div",81),n(3,"div",82)(4,"div",83),C(5,Be,2,0,"span",84)(6,Ve,3,1)(7,je,2,0,"span",84),a(),n(8,"div",85)(9,"button",86),w("click",function(){k(i);let r=g(2);return z(r.clearImportedData())}),l(10," Cancelar "),a(),C(11,Xe,2,0,"button",87),a()()()}if(t&2){let i=g(2);o(),y(i.backendErrors().length>0?1:-1),o(),y(i.invalidData().length>0?2:-1),o(3),y(i.backendErrors().length>0?5:i.validData().length>0?6:7),o(6),y(i.validData().length>0&&i.backendErrors().length===0?11:-1)}}function We(t,s){if(t&1){let i=R();n(0,"div",18)(1,"div",32)(2,"div")(3,"h2",33),l(4,"Importaci\xF3n de Datos"),a(),n(5,"p",34),l(6," Sube un archivo Excel con los datos para esta subcartera "),a()(),n(7,"div",35)(8,"button",36),w("click",function(){k(i);let r=g();return z(r.downloadDataTemplate())}),x(9,"lucide-angular",37),n(10,"span"),l(11,"Descargar Plantilla"),a()(),n(12,"label",38),x(13,"lucide-angular",39),n(14,"span"),l(15,"Importar Datos"),a(),n(16,"input",40),w("change",function(r){k(i);let d=g();return z(d.onDataFileSelected(r))}),a()()()(),n(17,"div",41)(18,"div",42)(19,"div",43)(20,"div",44),x(21,"lucide-angular",45),n(22,"span",46),l(23," Tabla de Datos "),a()(),C(24,Ee,14,5,"div",47)(25,Ie,2,1,"span",31),a()(),n(26,"div",48)(27,"table",49)(28,"thead",50)(29,"tr")(30,"th",51),l(31,"#"),a(),C(32,we,2,0,"th",52),E(33,Te,8,5,"th",53,P),a()(),n(35,"tbody"),C(36,Le,6,2,"tr",54)(37,ke,4,0),a()()()(),C(38,Re,12,4,"div",55),a()}if(t&2){let i=g();o(9),m("size",16),o(4),m("size",16),o(8),m("size",16),o(3),y(i.importedData().length>0?24:25),o(8),y(i.importedData().length>0?32:-1),o(),I(i.previewHeaders()),o(3),y(i.importedData().length===0?36:37),o(2),y(i.importedData().length>0?38:-1)}}function Oe(t,s){t&1&&(n(0,"div",19)(1,"div",88),x(2,"lucide-angular",100),n(3,"div")(4,"h3",101),l(5,"No hay cabeceras configuradas"),a(),n(6,"p",28),l(7," Primero debes configurar las cabeceras para esta subcartera en el m\xF3dulo de Mantenimiento. "),a()()()()),t&2&&(o(2),m("size",20))}var ot=(()=>{let s=class s{constructor(e,r,d){this.tenantService=e,this.portfolioService=r,this.headerConfigService=d,this.tenants=S([]),this.portfolios=S([]),this.subPortfolios=S([]),this.selectedTenantId=0,this.selectedPortfolioId=0,this.selectedSubPortfolioId=0,this.previewHeaders=S([]),this.headersAreSaved=S(!1),this.importedData=S([]),this.validData=S([]),this.invalidData=S([]),this.backendErrors=S([]),this.isLoading=S(!1)}ngOnInit(){this.loadTenants()}loadTenants(){this.tenantService.getAllTenants().subscribe({next:e=>{this.tenants.set(e)},error:e=>{console.error("Error cargando proveedores:",e),alert("Error al cargar los proveedores")}})}onTenantChange(e){this.selectedTenantId=e,this.selectedPortfolioId=0,this.selectedSubPortfolioId=0,this.portfolios.set([]),this.subPortfolios.set([]),this.previewHeaders.set([]),this.headersAreSaved.set(!1),e>0&&this.loadPortfoliosByTenant(e)}loadPortfoliosByTenant(e){this.portfolioService.getPortfoliosByTenant(e).subscribe({next:r=>{this.portfolios.set(r)},error:r=>{console.error("Error cargando carteras:",r),alert("Error al cargar las carteras")}})}onPortfolioChange(e){this.selectedPortfolioId=e,this.selectedSubPortfolioId=0,this.subPortfolios.set([]),this.previewHeaders.set([]),this.headersAreSaved.set(!1),e>0&&this.loadSubPortfoliosByPortfolio(e)}loadSubPortfoliosByPortfolio(e){this.portfolioService.getSubPortfoliosByPortfolio(e).subscribe({next:r=>{this.subPortfolios.set(r)},error:r=>{console.error("Error cargando subcarteras:",r),alert("Error al cargar las subcarteras")}})}onSubPortfolioChange(e){e>0?this.loadHeadersForSubPortfolio(e):(this.previewHeaders.set([]),this.headersAreSaved.set(!1))}loadHeadersForSubPortfolio(e){this.headerConfigService.getBySubPortfolioAndLoadType(e,"INICIAL").subscribe({next:r=>{this.previewHeaders.set(r),this.headersAreSaved.set(r.length>0)},error:r=>{console.error("Error cargando cabeceras:",r),this.previewHeaders.set([]),this.headersAreSaved.set(!1)}})}downloadDataTemplate(){return j(this,null,function*(){if(this.previewHeaders().length===0){alert("No hay cabeceras configuradas para generar la plantilla de datos");return}let e=this.previewHeaders().map(u=>u.headerName),r=A.book_new(),d=A.aoa_to_sheet([e]);d["!cols"]=e.map(u=>({wch:Math.max(u.length+2,15)})),A.book_append_sheet(r,d,"Datos");let c=`plantilla-datos-${this.subPortfolios().find(u=>u.id===this.selectedSubPortfolioId)?.subPortfolioCode||"subcartera"}.xlsx`;xe(r,c),alert("Plantilla de datos descargada exitosamente.")})}onDataFileSelected(e){return j(this,null,function*(){let r=e.target.files[0];if(!r)return;let d=new FileReader;d.onload=h=>j(this,null,function*(){try{let c=new Uint8Array(h.target.result),u=fe(c,{type:"array"}),U=u.Sheets[u.SheetNames[0]],N=A.sheet_to_json(U,{header:1});if(N.length===0){alert("El archivo Excel est\xE1 vac\xEDo");return}let _=N[0].map(v=>String(v).toLowerCase()),Y=this.previewHeaders(),G={},J=[];if(Y.forEach((v,Q)=>{let f=_.findIndex(F=>F===v.headerName.toLowerCase());f!==-1?G[f]=Q:v.sourceField&&v.regexPattern||J.push(v)}),J.length>0){let v=J.map(f=>f.headerName).join(", ");if(!confirm(`\u26A0\uFE0F ADVERTENCIA: Faltan las siguientes columnas en el archivo Excel:

${v}

Estas columnas se guardar\xE1n como NULL.

\xBFDesea continuar con la importaci\xF3n?`))return}let K=N.slice(1);if(K.length===0){alert("El archivo Excel no contiene datos (solo cabeceras)");return}let B=[],M=[];K.forEach((v,Q)=>{let f={},F="";Y.forEach((p,L)=>{let V=Object.keys(G).find(b=>G[parseInt(b)]===L);if(V!==void 0){let b=v[parseInt(V)];if(b!=null&&String(b).trim()!=="")try{if(p.dataType==="FECHA"&&typeof b=="number"){let he=new Date(1899,11,30).getTime()+b*24*60*60*1e3,_e=new Date(he),be=p.format||"dd/MM/yyyy";f[p.headerName]=this.formatDateByPattern(_e,be)}else if(p.dataType==="FECHA"&&b instanceof Date){let Z=p.format||"dd/MM/yyyy";f[p.headerName]=this.formatDateByPattern(b,Z)}else f[p.headerName]=String(b).trim()}catch{F=`Error procesando columna ${p.headerName}`,f[p.headerName]=String(b)}else f[p.headerName]=null}else f[p.headerName]=null}),Y.forEach(p=>{if(p.sourceField&&p.regexPattern)try{let L=f[p.sourceField];if(L){let V=new RegExp(p.regexPattern),b=String(L).match(V);b?f[p.headerName]=b[1]||b[0]:f[p.headerName]=null}else f[p.headerName]=null}catch(L){console.error(`Error aplicando regex en ${p.headerName}:`,L),f[p.headerName]=null}}),Object.values(f).some(p=>p!==null&&p!=="")?F?M.push({error:F,data:f}):B.push(f):M.push({error:"Fila vac\xEDa - no contiene datos",data:f})}),this.importedData.set([...B,...M.map(v=>v.data)]),this.validData.set(B),this.invalidData.set(M),console.log("Previsualizaci\xF3n de datos:",{total:K.length,v\u00E1lidos:B.length,inv\u00E1lidos:M.length})}catch(c){console.error("Error procesando el archivo:",c),alert("Error al procesar el archivo Excel")}}),d.readAsArrayBuffer(r),e.target.value=""})}formatDateByPattern(e,r){let d=e.getFullYear(),h=String(e.getMonth()+1).padStart(2,"0"),c=String(e.getDate()).padStart(2,"0"),u=String(e.getHours()).padStart(2,"0"),U=String(e.getMinutes()).padStart(2,"0"),N=String(e.getSeconds()).padStart(2,"0"),_=r;return _=_.replace(/yyyy/g,String(d)),_=_.replace(/yy/g,String(d).slice(-2)),_=_.replace(/MM/g,h),_=_.replace(/dd/g,c),_=_.replace(/HH/g,u),_=_.replace(/mm/g,U),_=_.replace(/ss/g,N),_}simplifyBackendError(e){let r=e.match(/Fila (\d+):/),d=r?r[1]:"?";if(e.includes("doesn't have a default value")){let c=e.match(/Field '([^']+)'/),u=c?c[1]:"desconocido";return`Fila ${d}: El campo '${u}' est\xE1 vac\xEDo pero es obligatorio. Por favor, proporcione un valor.`}if(e.includes("cannot be null")||e.includes("Column")&&e.includes("cannot be null")){let c=e.match(/Column '([^']+)'/)||e.match(/Field '([^']+)'/),u=c?c[1]:"desconocido";return`Fila ${d}: El campo '${u}' no puede estar vac\xEDo. Es un campo obligatorio.`}if(e.includes("Data too long")||e.includes("too long for column")){let c=e.match(/column '([^']+)'/)||e.match(/Field '([^']+)'/),u=c?c[1]:"desconocido";return`Fila ${d}: El valor del campo '${u}' es demasiado largo. Reduzca el tama\xF1o del texto.`}if(e.includes("Incorrect date")||e.includes("Incorrect datetime")){let c=e.match(/column '([^']+)'/)||e.match(/Field '([^']+)'/),u=c?c[1]:"desconocido";return`Fila ${d}: El campo '${u}' tiene un formato de fecha incorrecto. Verifique el formato.`}if(e.includes("Duplicate entry")){let c=e.match(/Duplicate entry '([^']+)'/),u=c?c[1]:"desconocido";return`Fila ${d}: El valor '${u}' ya existe en la base de datos. No se permiten duplicados.`}if(e.includes("Incorrect integer")||e.includes("Incorrect decimal")){let c=e.match(/column '([^']+)'/)||e.match(/Field '([^']+)'/),u=c?c[1]:"desconocido";return`Fila ${d}: El campo '${u}' debe contener un n\xFAmero v\xE1lido.`}if(e.includes("foreign key constraint fails")||e.includes("Cannot add or update a child row"))return`Fila ${d}: Hay una referencia a un dato que no existe en el sistema. Verifique los datos relacionados.`;let h=e.match(/Fila \d+: Error al insertar datos: (.+?)(?:\s*;|$)/);return h?`Fila ${d}: ${h[1]}`:e.length>200?e.substring(0,200)+"...":e}clearImportedData(){this.importedData.set([]),this.validData.set([]),this.invalidData.set([]),this.backendErrors.set([])}confirmImport(){let e=this.validData();if(e.length===0){alert("No hay datos v\xE1lidos para importar");return}console.log("Datos transformados listos para importar:",e),console.log("Subcartera ID:",this.selectedSubPortfolioId),this.isLoading.set(!0),this.backendErrors.set([]),this.headerConfigService.importData(this.selectedSubPortfolioId,"INICIAL",e).subscribe({next:r=>{if(this.isLoading.set(!1),console.log("Respuesta del servidor:",r),r.errors&&r.errors.length>0){let d=r.errors.map(h=>this.simplifyBackendError(h));this.backendErrors.set(d),console.error("Errores del backend:",r.errors)}else alert(`\u2705 Se importaron ${r.insertedRows||e.length} filas de datos exitosamente a la tabla din\xE1mica.`),this.clearImportedData()},error:r=>{if(this.isLoading.set(!1),console.error("Error HTTP al importar datos:",r),r.error?.errors&&Array.isArray(r.error.errors)){let d=r.error.errors.map(h=>this.simplifyBackendError(h));this.backendErrors.set(d)}else this.backendErrors.set([`Error de conexi\xF3n: ${r.error?.message||r.message}`])}})}};s.\u0275fac=function(r){return new(r||s)(X(pe),X(ue),X(ge))},s.\u0275cmp=te({type:s,selectors:[["app-initial-load"]],decls:43,vars:14,consts:[[1,"fixed","inset-0","z-50","flex","items-center","justify-center"],[1,"min-h-screen","bg-gradient-to-br","from-slate-900","via-slate-800","to-slate-900","p-6"],[1,"max-w-7xl","mx-auto"],[1,"mb-8"],[1,"flex","items-center","gap-2","mb-2"],[1,"w-8","h-8","bg-blue-600","rounded-lg","flex","items-center","justify-center"],["name","folder",1,"text-white",3,"size"],[1,"text-lg","font-bold","text-white"],[1,"text-xs","text-gray-400"],[1,"bg-slate-900","rounded-lg","p-3","shadow-sm","border","border-slate-800","mb-6"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-3"],[1,"block","text-xs","font-semibold","text-gray-300","mb-1.5"],["name","building-2",1,"inline","mr-1",3,"size"],[1,"w-full","px-3","py-2","bg-slate-800","border","border-slate-700","rounded-lg","text-white","text-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],[3,"value"],["name","folder",1,"inline","mr-1",3,"size"],[1,"w-full","px-3","py-2","bg-slate-800","border","border-slate-700","rounded-lg","text-white","text-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","disabled:opacity-50","disabled:cursor-not-allowed",3,"ngModelChange","ngModel","disabled"],["name","folder-tree",1,"inline","mr-1",3,"size"],[1,"bg-slate-800","border","border-slate-700","rounded-xl","p-6"],[1,"bg-yellow-900/20","border","border-yellow-700/50","rounded-xl","p-6"],[1,"absolute","inset-0","bg-black/60","backdrop-blur-sm"],[1,"relative","bg-slate-800","rounded-2xl","p-8","shadow-2xl","border","border-slate-700","max-w-md","w-full","mx-4"],[1,"flex","flex-col","items-center","gap-6"],[1,"relative"],[1,"w-16","h-16","border-4","border-slate-600","rounded-full"],[1,"absolute","top-0","left-0","w-16","h-16","border-4","border-blue-500","rounded-full","border-t-transparent","animate-spin"],[1,"text-center"],[1,"text-xl","font-bold","text-white","mb-2"],[1,"text-gray-400","text-sm"],[1,"w-full","bg-slate-700","rounded-full","h-2","overflow-hidden"],[1,"bg-gradient-to-r","from-blue-500","to-cyan-400","h-full","rounded-full","animate-pulse",2,"width","100%"],[1,"text-xs","text-gray-500"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","gap-4","mb-4"],[1,"text-xl","font-bold","text-white"],[1,"text-gray-400","text-sm","mt-1"],[1,"flex","flex-col","sm:flex-row","gap-2"],[1,"flex","items-center","gap-2","px-4","py-2","bg-purple-600","text-white","rounded-lg","hover:bg-purple-700","transition-all","font-medium","text-sm","cursor-pointer",3,"click"],["name","file-text",3,"size"],[1,"flex","items-center","gap-2","px-4","py-2","bg-green-600","text-white","rounded-lg","hover:bg-green-700","transition-all","font-medium","cursor-pointer","text-sm"],["name","folder-open",3,"size"],["type","file","accept",".xlsx,.xls",1,"hidden",3,"change"],[1,"bg-slate-900","border","border-slate-700","rounded-lg","overflow-hidden"],[1,"px-4","py-2","bg-slate-800","border-b","border-slate-700"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","gap-2"],["name","table",1,"text-blue-400",3,"size"],[1,"text-sm","font-semibold","text-gray-300"],[1,"flex","items-center","gap-4"],[1,"overflow-auto",2,"max-height","500px"],[1,"w-full","text-xs","border-collapse"],[1,"bg-slate-800","sticky","top-0","z-10"],[1,"px-3","py-2","text-left","font-semibold","text-gray-300","border-r","border-slate-700","bg-slate-800",2,"min-width","50px"],[1,"px-3","py-2","text-left","font-semibold","text-gray-300","border-r","border-slate-700","bg-slate-800",2,"min-width","80px"],[1,"px-3","py-2","text-left","font-semibold","text-gray-300","border-r","border-slate-700","bg-slate-800",2,"min-width","150px",3,"title"],[1,"border-b","border-slate-700"],[1,"space-y-4","mt-4"],[1,"text-xs","font-bold","text-white"],["name","check-circle",1,"text-green-400",3,"size"],[1,"text-xs","font-bold","text-green-400"],["name","x-circle",1,"text-red-400",3,"size"],[1,"text-xs","font-bold","text-red-400"],[1,"flex","items-center","gap-1.5"],["name","sparkles",1,"text-amber-400","flex-shrink-0",3,"size","title"],[1,"flex","flex-col","gap-0.5"],[1,"font-semibold"],[1,"text-[10px]","text-blue-400","font-normal"],[1,"px-3","py-8","text-center","text-gray-500","bg-slate-800/30"],[1,"flex","flex-col","items-center","gap-2"],["name","inbox",1,"text-gray-600",3,"size"],[1,"text-sm"],[1,"border-b","border-slate-700","hover:bg-slate-800/50"],[1,"border-b","border-slate-700","hover:bg-slate-800/50","bg-red-900/10"],[1,"px-3","py-2","text-gray-400","border-r","border-slate-700","bg-slate-800/30"],[1,"px-3","py-2","border-r","border-slate-700"],[1,"inline-flex","items-center","gap-1","px-2","py-0.5","bg-green-900/30","text-green-400","rounded","text-[10px]"],["name","check",3,"size"],[1,"px-3","py-2","text-gray-300","border-r","border-slate-700",3,"text-gray-500"],[1,"px-3","py-2","text-gray-300","border-r","border-slate-700"],[1,"inline-flex","items-center","gap-1","px-2","py-0.5","bg-red-900/30","text-red-400","rounded","text-[10px]",3,"title"],["name","x",3,"size"],[1,"bg-red-900/30","border-2","border-red-700","rounded-xl","p-4"],[1,"bg-red-900/20","border","border-red-700/50","rounded-lg","p-4"],[1,"flex","justify-between","items-center"],[1,"text-sm","text-gray-400"],[1,"text-red-400"],[1,"flex","gap-3"],[1,"px-4","py-2","bg-slate-700","text-white","rounded-lg","hover:bg-slate-600","transition-all","font-medium","text-sm",3,"click"],[1,"px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-all","font-medium","text-sm"],[1,"flex","items-start","gap-3"],["name","x-circle",1,"text-red-500","flex-shrink-0","mt-1",3,"size"],[1,"flex-1"],[1,"text-red-500","font-bold","text-lg","mb-2"],[1,"text-red-300","text-sm","mb-3"],[1,"bg-red-950/50","rounded-lg","p-3","max-h-60","overflow-y-auto"],[1,"text-red-200","text-xs","font-mono","mb-2","pb-2","border-b","border-red-800/50","last:border-0"],["name","alert-circle",1,"text-red-400","mt-0.5",3,"size"],[1,"text-red-400","font-semibold","mb-2"],[1,"space-y-1"],[1,"text-green-400"],[1,"px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-all","font-medium","text-sm",3,"click"],["name","alert-circle",1,"text-yellow-500","mt-0.5",3,"size"],[1,"text-yellow-500","font-semibold","mb-1"]],template:function(r,d){r&1&&(C(0,ve,16,0,"div",0),n(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),x(6,"lucide-angular",6),a(),n(7,"div")(8,"h1",7),l(9,"Carga Inicial de Mes"),a(),n(10,"p",8),l(11,"Importaci\xF3n masiva de datos al inicio del mes"),a()()()(),n(12,"div",9)(13,"div",10)(14,"div")(15,"label",11),x(16,"lucide-angular",12),l(17," Proveedor "),a(),n(18,"select",13),q("ngModelChange",function(c){return O(d.selectedTenantId,c)||(d.selectedTenantId=c),c}),w("ngModelChange",function(c){return d.onTenantChange(c)}),n(19,"option",14),l(20,"Seleccione un proveedor..."),a(),E(21,Ce,2,3,"option",14,P),a()(),n(23,"div")(24,"label",11),x(25,"lucide-angular",15),l(26," Cartera "),a(),n(27,"select",16),q("ngModelChange",function(c){return O(d.selectedPortfolioId,c)||(d.selectedPortfolioId=c),c}),w("ngModelChange",function(c){return d.onPortfolioChange(c)}),n(28,"option",14),l(29,"Seleccione una cartera..."),a(),E(30,ye,2,3,"option",14,P),a()(),n(32,"div")(33,"label",11),x(34,"lucide-angular",17),l(35," Subcartera "),a(),n(36,"select",16),q("ngModelChange",function(c){return O(d.selectedSubPortfolioId,c)||(d.selectedSubPortfolioId=c),c}),w("ngModelChange",function(c){return d.onSubPortfolioChange(c)}),n(37,"option",14),l(38,"Seleccione una subcartera..."),a(),E(39,Se,2,3,"option",14,P),a()()()(),C(41,We,39,7,"div",18)(42,Oe,8,1,"div",19),a()()),r&2&&(y(d.isLoading()?0:-1),o(6),m("size",16),o(10),m("size",16),o(2),W("ngModel",d.selectedTenantId),o(),m("value",0),o(2),I(d.tenants()),o(4),m("size",16),o(2),W("ngModel",d.selectedPortfolioId),m("disabled",d.selectedTenantId===0),o(),m("value",0),o(2),I(d.portfolios()),o(4),m("size",16),o(2),W("ngModel",d.selectedSubPortfolioId),m("disabled",d.selectedPortfolioId===0),o(),m("value",0),o(2),I(d.subPortfolios()),o(2),y(d.selectedSubPortfolioId>0&&d.headersAreSaved()?41:d.selectedSubPortfolioId>0&&!d.headersAreSaved()?42:-1))},dependencies:[ne,me,se,ce,de,re,le,oe,ae],styles:["[_nghost-%COMP%]{display:block}"]});let t=s;return t})();export{ot as InitialLoadComponent};
