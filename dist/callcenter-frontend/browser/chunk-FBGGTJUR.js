import{a as ge}from"./chunk-R7PSNTR3.js";import{a as ue}from"./chunk-YUGLJ5U2.js";import{a as fe}from"./chunk-YBTTFGZA.js";import{e as le,h as se,m as de,n as ce,o as me,u as pe}from"./chunk-TFAMJCIP.js";import{$a as G,Ab as U,Cb as N,Db as T,Eb as P,Fb as r,Gb as o,Hb as oe,Ob as J,Qb as A,Sb as v,Va as m,_c as re,cc as ie,ec as s,f as Y,fc as j,gb as ne,gc as V,hc as z,ja as O,jc as K,ka as X,kc as Q,lc as ee,ta as M,xb as ae,yb as w,zb as I}from"./chunk-UY3AUK24.js";var R=(t,c)=>c.id;function ve(t,c){if(t&1&&(r(0,"option",11),s(1),o()),t&2){let i=c.$implicit;P("value",i.id),m(),z("",i.tenantCode," - ",i.tenantName)}}function be(t,c){if(t&1&&(r(0,"option",11),s(1),o()),t&2){let i=c.$implicit;P("value",i.id),m(),z("",i.portfolioCode," - ",i.portfolioName)}}function Ce(t,c){if(t&1&&(r(0,"option",11),s(1),o()),t&2){let i=c.$implicit;P("value",i.id),m(),z("",i.subPortfolioCode," - ",i.subPortfolioName)}}function ye(t,c){if(t&1&&(r(0,"div",26)(1,"div",24)(2,"span",27),s(3,"Total:"),o(),r(4,"span",36),s(5),o()(),r(6,"div",24)(7,"span",37),s(8),o()(),r(9,"div",24)(10,"span",38),s(11),o()()()),t&2){let i=v(2);m(5),j(i.importedData().length),m(3),j(i.validData().length),m(3),j(i.invalidData().length)}}function Se(t,c){if(t&1&&(r(0,"span",27),s(1),o()),t&2){let i=v(2);m(),V("",i.previewHeaders().length," columnas")}}function Ee(t,c){t&1&&(r(0,"th",32),s(1,"Estado"),o())}function De(t,c){t&1&&s(0,` name="sparkles" [size]="12" class="text-amber-400 flex-shrink-0" [title]="'Campo transformado desde: ' + header.sourceField"> `)}function we(t,c){if(t&1&&(r(0,"th",33)(1,"div",39),w(2,De,1,0),r(3,"div",40)(4,"span",41),s(5),o(),r(6,"span",42),s(7),o()()()()),t&2){let i=c.$implicit;P("title",i.dataType+(i.format?" ("+i.format+")":"")),m(2),I(i.sourceField&&i.regexPattern?2:-1),m(3),j(i.headerName),m(2),z("",i.dataType,"",i.format?" ("+i.format+")":"")}}function Ie(t,c){if(t&1&&(r(0,"tr",34)(1,"td",43)(2,"div",44)(3,"span",45),s(4,"No hay datos. Importa un archivo Excel para ver los datos aqu\xED."),o()()()()),t&2){let i=v(2);m(),ae("colspan",i.previewHeaders().length+1)}}function Ne(t,c){if(t&1&&(r(0,"td",52),s(1),o()),t&2){let i=c.$implicit,e=v().$implicit;ie("text-gray-500",!e[i.headerName]),m(),V(" ",e[i.headerName]||"NULL"," ")}}function Te(t,c){if(t&1&&(r(0,"tr",46)(1,"td",48),s(2),o(),r(3,"td",49)(4,"span",50),s(5," V\xE1lido "),o()(),N(6,Ne,2,3,"td",51,R),o()),t&2){let i=c.$index,e=v(3);m(2),j(i+1),m(4),T(e.previewHeaders())}}function Pe(t,c){if(t&1&&(r(0,"td",52),s(1),o()),t&2){let i=c.$implicit,e=v().$implicit;ie("text-gray-500",!e.data[i.headerName]),m(),V(" ",e.data[i.headerName]||"NULL"," ")}}function Fe(t,c){if(t&1&&(r(0,"tr",47)(1,"td",48),s(2),o(),r(3,"td",49)(4,"span",53),s(5," Error "),o()(),N(6,Pe,2,3,"td",51,R),o()),t&2){let i=c.$implicit,e=c.$index,n=v(3);m(2),j(n.validData().length+e+1),m(2),P("title",i.error),m(2),T(n.previewHeaders())}}function Me(t,c){if(t&1&&(N(0,Te,8,1,"tr",46,U),N(2,Fe,8,2,"tr",47,U)),t&2){let i=v(2);T(i.validData()),m(2),T(i.invalidData())}}function Le(t,c){if(t&1&&(r(0,"div",67),s(1),o()),t&2){let i=c.$implicit;m(),V(" ",i," ")}}function $e(t,c){if(t&1&&(r(0,"div",54)(1,"div",62)(2,"div",63)(3,"h3",64),s(4,"Errores al Importar Datos"),o(),r(5,"p",65),s(6," La importaci\xF3n fall\xF3 debido a los siguientes errores. No se insert\xF3 ning\xFAn dato. "),o(),r(7,"div",66),N(8,Le,2,1,"div",67,U),o()()()()),t&2){let i=v(3);m(8),T(i.backendErrors())}}function ke(t,c){if(t&1&&(r(0,"p",57)(1,"span",58),s(2),o(),s(3),o()),t&2){let i=c.$implicit,e=c.$index,n=v(4);m(2),V("Fila ",n.validData().length+e+1,":"),m(),V(" ",i.error," ")}}function He(t,c){if(t&1&&(r(0,"div",55)(1,"div",62)(2,"div",63)(3,"h3",68),s(4,"Registros con Errores"),o(),r(5,"div",69),N(6,ke,4,2,"p",57,U),o()()()()),t&2){let i=v(3);m(6),T(i.invalidData())}}function Ae(t,c){t&1&&(r(0,"span",58),s(1,"La importaci\xF3n fall\xF3. Corrija los errores e intente nuevamente."),o())}function Ve(t,c){if(t&1&&(r(0,"span",70),s(1),o(),s(2," listo(s) para importar ")),t&2){let i=v(3);m(),V("",i.validData().length," registro(s)")}}function Be(t,c){t&1&&(r(0,"span",58),s(1,"No hay registros v\xE1lidos para importar"),o())}function je(t,c){if(t&1){let i=J();r(0,"button",71),A("click",function(){O(i);let n=v(3);return X(n.confirmImport())}),s(1," Confirmar Importaci\xF3n "),o()}}function Re(t,c){if(t&1){let i=J();r(0,"div",35),w(1,$e,10,0,"div",54),w(2,He,8,0,"div",55),r(3,"div",56)(4,"div",57),w(5,Ae,2,0,"span",58)(6,Ve,3,1)(7,Be,2,0,"span",58),o(),r(8,"div",59)(9,"button",60),A("click",function(){O(i);let n=v(2);return X(n.clearImportedData())}),s(10," Cancelar "),o(),w(11,je,2,0,"button",61),o()()()}if(t&2){let i=v(2);m(),I(i.backendErrors().length>0?1:-1),m(),I(i.invalidData().length>0?2:-1),m(3),I(i.backendErrors().length>0?5:i.validData().length>0?6:7),m(6),I(i.validData().length>0&&i.backendErrors().length===0?11:-1)}}function We(t,c){if(t&1){let i=J();r(0,"div",13)(1,"div",15)(2,"div")(3,"h2",16),s(4,"Importaci\xF3n de Datos"),o(),r(5,"p",6),s(6," Sube un archivo Excel con los datos para esta subcartera "),o()(),r(7,"div",17)(8,"button",18),A("click",function(){O(i);let n=v();return X(n.downloadDataTemplate())}),r(9,"span"),s(10,"Descargar Plantilla"),o()(),r(11,"label",19)(12,"span"),s(13,"Importar Datos"),o(),r(14,"input",20),A("change",function(n){O(i);let l=v();return X(l.onDataFileSelected(n))}),o()()()(),r(15,"div",21)(16,"div",22)(17,"div",23)(18,"div",24)(19,"span",25),s(20," Tabla de Datos "),o()(),w(21,ye,12,3,"div",26)(22,Se,2,1,"span",27),o()(),r(23,"div",28)(24,"table",29)(25,"thead",30)(26,"tr")(27,"th",31),s(28,"#"),o(),w(29,Ee,2,0,"th",32),N(30,we,8,5,"th",33,R),o()(),r(32,"tbody"),w(33,Ie,5,1,"tr",34)(34,Me,4,0),o()()()(),w(35,Re,12,4,"div",35),o()}if(t&2){let i=v();m(21),I(i.importedData().length>0?21:22),m(8),I(i.importedData().length>0?29:-1),m(),T(i.previewHeaders()),m(3),I(i.importedData().length===0?33:34),m(2),I(i.importedData().length>0?35:-1)}}function Oe(t,c){t&1&&(r(0,"div",14)(1,"div",62)(2,"div")(3,"h3",72),s(4,"No hay cabeceras configuradas"),o(),r(5,"p",73),s(6," Primero debes configurar las cabeceras para esta subcartera en el m\xF3dulo de Mantenimiento. "),o()()()())}var Qe=(()=>{let c=class c{constructor(e,n,l){this.tenantService=e,this.portfolioService=n,this.headerConfigService=l,this.tenants=M([]),this.portfolios=M([]),this.subPortfolios=M([]),this.selectedTenantId=0,this.selectedPortfolioId=0,this.selectedSubPortfolioId=0,this.previewHeaders=M([]),this.headersAreSaved=M(!1),this.importedData=M([]),this.validData=M([]),this.invalidData=M([]),this.backendErrors=M([])}ngOnInit(){this.loadTenants()}loadTenants(){this.tenantService.getAllTenants().subscribe({next:e=>{this.tenants.set(e)},error:e=>{console.error("Error cargando proveedores:",e),alert("Error al cargar los proveedores")}})}onTenantChange(e){this.selectedTenantId=e,this.selectedPortfolioId=0,this.selectedSubPortfolioId=0,this.portfolios.set([]),this.subPortfolios.set([]),this.previewHeaders.set([]),this.headersAreSaved.set(!1),e>0&&this.loadPortfoliosByTenant(e)}loadPortfoliosByTenant(e){this.portfolioService.getPortfoliosByTenant(e).subscribe({next:n=>{this.portfolios.set(n)},error:n=>{console.error("Error cargando carteras:",n),alert("Error al cargar las carteras")}})}onPortfolioChange(e){this.selectedPortfolioId=e,this.selectedSubPortfolioId=0,this.subPortfolios.set([]),this.previewHeaders.set([]),this.headersAreSaved.set(!1),e>0&&this.loadSubPortfoliosByPortfolio(e)}loadSubPortfoliosByPortfolio(e){this.portfolioService.getSubPortfoliosByPortfolio(e).subscribe({next:n=>{this.subPortfolios.set(n)},error:n=>{console.error("Error cargando subcarteras:",n),alert("Error al cargar las subcarteras")}})}onSubPortfolioChange(e){e>0?this.loadHeadersForSubPortfolio(e):(this.previewHeaders.set([]),this.headersAreSaved.set(!1))}loadHeadersForSubPortfolio(e){this.headerConfigService.getBySubPortfolioAndLoadType(e,"ACTUALIZACION").subscribe({next:n=>{this.previewHeaders.set(n),this.headersAreSaved.set(n.length>0)},error:n=>{console.error("Error cargando cabeceras:",n),this.previewHeaders.set([]),this.headersAreSaved.set(!1)}})}downloadDataTemplate(){return Y(this,null,function*(){if(this.previewHeaders().length===0){alert("No hay cabeceras configuradas para generar la plantilla de datos");return}let e=window.XLSX,n=this.previewHeaders().map(g=>g.headerName),l=e.utils.book_new(),h=e.utils.aoa_to_sheet([n]);h["!cols"]=n.map(g=>({wch:Math.max(g.length+2,15)})),e.utils.book_append_sheet(l,h,"Datos");let u=`plantilla-datos-${this.subPortfolios().find(g=>g.id===this.selectedSubPortfolioId)?.subPortfolioCode||"subcartera"}.xlsx`;e.writeFile(l,u),alert("Plantilla de datos descargada exitosamente.")})}onDataFileSelected(e){return Y(this,null,function*(){let n=e.target.files[0];if(!n)return;if(n.name.toLowerCase().endsWith(".csv")){this.parseCSVFile(n),e.target.value="";return}let a=window.XLSX,u=new FileReader;u.onload=g=>Y(this,null,function*(){try{let y=new Uint8Array(g.target.result),f=a.read(y,{type:"array"}),$=f.Sheets[f.SheetNames[0]],F=a.utils.sheet_to_json($,{header:1});if(F.length===0){alert("El archivo Excel est\xE1 vac\xEDo");return}let k=F[0].map(b=>String(b).toLowerCase()),H=this.previewHeaders(),L={},_=[];if(H.forEach((b,q)=>{let d=k.findIndex(S=>S===b.headerName.toLowerCase());d!==-1?L[d]=q:b.sourceField&&b.regexPattern||_.push(b)}),_.length>0){let b=_.map(d=>d.headerName).join(", ");if(!confirm(`\u26A0\uFE0F ADVERTENCIA: Faltan las siguientes columnas en el archivo Excel:

${b}

Estas columnas se guardar\xE1n como NULL.

\xBFDesea continuar con la importaci\xF3n?`))return}let B=F.slice(1);if(B.length===0){alert("El archivo Excel no contiene datos (solo cabeceras)");return}let E=[],x=[];B.forEach((b,q)=>{let d={},S="";H.forEach((p,D)=>{let Z=Object.keys(L).find(C=>L[parseInt(C)]===D);if(Z!==void 0){let C=b[parseInt(Z)];if(C!=null&&String(C).trim()!=="")try{if(p.dataType==="FECHA"&&typeof C=="number"){let xe=new Date(1899,11,30).getTime()+C*24*60*60*1e3,he=new Date(xe),_e=p.format||"dd/MM/yyyy";d[p.headerName]=this.formatDateByPattern(he,_e)}else if(p.dataType==="FECHA"&&C instanceof Date){let te=p.format||"dd/MM/yyyy";d[p.headerName]=this.formatDateByPattern(C,te)}else d[p.headerName]=String(C).trim()}catch{S=`Error procesando columna ${p.headerName}`,d[p.headerName]=String(C)}else d[p.headerName]=null}else d[p.headerName]=null}),H.forEach(p=>{if(p.sourceField&&p.regexPattern)try{let D=d[p.sourceField];if(D){let Z=new RegExp(p.regexPattern),C=String(D).match(Z);C?d[p.headerName]=C[1]||C[0]:d[p.headerName]=null}else d[p.headerName]=null}catch(D){console.error(`Error aplicando regex en ${p.headerName}:`,D),d[p.headerName]=null}}),Object.values(d).some(p=>p!==null&&p!=="")?S?x.push({error:S,data:d}):E.push(d):x.push({error:"Fila vac\xEDa - no contiene datos",data:d})}),this.importedData.set([...E,...x.map(b=>b.data)]),this.validData.set(E),this.invalidData.set(x),console.log("Previsualizaci\xF3n de datos:",{total:B.length,v\u00E1lidos:E.length,inv\u00E1lidos:x.length})}catch(y){console.error("Error procesando el archivo:",y),alert("Error al procesar el archivo Excel")}}),u.readAsArrayBuffer(n),e.target.value=""})}parseCSVFile(e){let n=new FileReader;n.onload=l=>{try{let a=l.target.result.split(`
`).map(_=>_.trim()).filter(_=>_.length>0);if(a.length===0){alert("El archivo CSV est\xE1 vac\xEDo");return}let u=a[0],g=";";u.includes(";")?g=";":u.includes(",")?g=",":u.includes("|")?g="|":u.includes("	")&&(g="	");let y=a[0].split(g).map(_=>_.trim().toLowerCase()),f=this.previewHeaders(),$={},F=[];if(f.forEach((_,B)=>{let E=y.findIndex(x=>x===_.headerName.toLowerCase());E!==-1?$[E]=B:_.sourceField&&_.regexPattern||F.push(_)}),F.length>0){let _=F.map(E=>E.headerName).join(", ");if(!confirm(`\u26A0\uFE0F ADVERTENCIA: Faltan las siguientes columnas en el archivo CSV:

${_}

Estas columnas se guardar\xE1n como NULL.

\xBFDesea continuar con la importaci\xF3n?`))return}let k=a.slice(1);if(k.length===0){alert("El archivo CSV no contiene datos (solo cabeceras)");return}let H=[],L=[];k.forEach((_,B)=>{let E=_.split(g).map(d=>d.trim()),x={},b="";f.forEach((d,S)=>{let W=Object.keys($).find(p=>$[parseInt(p)]===S);if(W!==void 0){let p=E[parseInt(W)];if(p!=null&&p!=="")try{if(d.dataType==="FECHA"){let D=this.parseCSVDate(p,d.format||"dd/MM/yyyy");D?x[d.headerName]=D:(b=`Valor no es fecha v\xE1lida para campo ${d.headerName}: ${p} (formato esperado: ${d.format||"dd/MM/yyyy"})`,x[d.headerName]=p)}else x[d.headerName]=p}catch(D){b=`Error procesando columna ${d.headerName}: ${D}`,x[d.headerName]=p}else x[d.headerName]=null}else x[d.headerName]=null}),f.forEach(d=>{if(d.sourceField&&d.regexPattern)try{let S=x[d.sourceField];if(S){let W=new RegExp(d.regexPattern),p=String(S).match(W);p?x[d.headerName]=p[1]||p[0]:x[d.headerName]=null}else x[d.headerName]=null}catch(S){console.error(`Error aplicando regex en ${d.headerName}:`,S),x[d.headerName]=null}}),Object.values(x).some(d=>d!==null&&d!=="")?b?L.push({error:b,data:x}):H.push(x):L.push({error:"Fila vac\xEDa - no contiene datos",data:x})}),this.importedData.set([...H,...L.map(_=>_.data)]),this.validData.set(H),this.invalidData.set(L),console.log("Previsualizaci\xF3n de datos CSV:",{total:k.length,v\u00E1lidos:H.length,inv\u00E1lidos:L.length})}catch(h){console.error("Error procesando el archivo CSV:",h),alert("Error al procesar el archivo CSV")}},n.readAsText(e)}parseCSVDate(e,n){try{let l=n.replace(/dd/g,"\\d{2}").replace(/MM/g,"\\d{2}").replace(/yyyy/g,"\\d{4}").replace(/yy/g,"\\d{2}").replace(/HH/g,"\\d{2}").replace(/mm/g,"\\d{2}").replace(/ss/g,"\\d{2}");if(new RegExp("^"+l+"$").test(e.trim()))return e.trim();let a=e.split(/[-\/\s:]/);if(a.length<3)return null;let u,g,y,f=0,$=0,F=0;if(n.startsWith("dd")?(u=parseInt(a[0]),g=parseInt(a[1]),y=parseInt(a[2])):n.startsWith("MM")?(g=parseInt(a[0]),u=parseInt(a[1]),y=parseInt(a[2])):(y=parseInt(a[0]),g=parseInt(a[1]),u=parseInt(a[2])),a.length>3&&(f=parseInt(a[3])||0,$=parseInt(a[4])||0,F=parseInt(a[5])||0),isNaN(u)||isNaN(g)||isNaN(y)||u<1||u>31||g<1||g>12||y<1900)return null;let k=new Date(y,g-1,u,f,$,F);return isNaN(k.getTime())?null:this.formatDateByPattern(k,n)}catch(l){return console.error("Error parseando fecha:",l),null}}formatDateByPattern(e,n){let l=e.getFullYear(),h=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0"),u=String(e.getHours()).padStart(2,"0"),g=String(e.getMinutes()).padStart(2,"0"),y=String(e.getSeconds()).padStart(2,"0"),f=n;return f=f.replace(/yyyy/g,String(l)),f=f.replace(/yy/g,String(l).slice(-2)),f=f.replace(/MM/g,h),f=f.replace(/dd/g,a),f=f.replace(/HH/g,u),f=f.replace(/mm/g,g),f=f.replace(/ss/g,y),f}simplifyBackendError(e){let n=e.match(/Fila (\d+):/),l=n?n[1]:"?";if(e.includes("doesn't have a default value")){let a=e.match(/Field '([^']+)'/),u=a?a[1]:"desconocido";return`Fila ${l}: El campo '${u}' est\xE1 vac\xEDo pero es obligatorio. Por favor, proporcione un valor.`}if(e.includes("cannot be null")||e.includes("Column")&&e.includes("cannot be null")){let a=e.match(/Column '([^']+)'/)||e.match(/Field '([^']+)'/),u=a?a[1]:"desconocido";return`Fila ${l}: El campo '${u}' no puede estar vac\xEDo. Es un campo obligatorio.`}if(e.includes("Data too long")||e.includes("too long for column")){let a=e.match(/column '([^']+)'/)||e.match(/Field '([^']+)'/),u=a?a[1]:"desconocido";return`Fila ${l}: El valor del campo '${u}' es demasiado largo. Reduzca el tama\xF1o del texto.`}if(e.includes("Incorrect date")||e.includes("Incorrect datetime")){let a=e.match(/column '([^']+)'/)||e.match(/Field '([^']+)'/),u=a?a[1]:"desconocido";return`Fila ${l}: El campo '${u}' tiene un formato de fecha incorrecto. Verifique el formato.`}if(e.includes("Duplicate entry")){let a=e.match(/Duplicate entry '([^']+)'/),u=a?a[1]:"desconocido";return`Fila ${l}: El valor '${u}' ya existe en la base de datos. No se permiten duplicados.`}if(e.includes("Incorrect integer")||e.includes("Incorrect decimal")){let a=e.match(/column '([^']+)'/)||e.match(/Field '([^']+)'/),u=a?a[1]:"desconocido";return`Fila ${l}: El campo '${u}' debe contener un n\xFAmero v\xE1lido.`}if(e.includes("foreign key constraint fails")||e.includes("Cannot add or update a child row"))return`Fila ${l}: Hay una referencia a un dato que no existe en el sistema. Verifique los datos relacionados.`;let h=e.match(/Fila \d+: Error al insertar datos: (.+?)(?:\s*;|$)/);return h?`Fila ${l}: ${h[1]}`:e.length>200?e.substring(0,200)+"...":e}clearImportedData(){this.importedData.set([]),this.validData.set([]),this.invalidData.set([]),this.backendErrors.set([])}confirmImport(){let e=this.validData();if(e.length===0){alert("No hay datos v\xE1lidos para importar");return}console.log("Datos transformados listos para importar:",e),console.log("Subcartera ID:",this.selectedSubPortfolioId),this.headerConfigService.importData(this.selectedSubPortfolioId,"ACTUALIZACION",e).subscribe({next:n=>{if(console.log("Respuesta del servidor:",n),n.errors&&n.errors.length>0){let l=n.errors.map(h=>this.simplifyBackendError(h));this.backendErrors.set(l),console.error("Errores del backend:",n.errors)}else alert(`\u2705 Se importaron ${n.insertedRows||e.length} filas de datos exitosamente a la tabla din\xE1mica.`),this.clearImportedData()},error:n=>{if(console.error("Error HTTP al importar datos:",n),n.error?.errors&&Array.isArray(n.error.errors)){let l=n.error.errors.map(h=>this.simplifyBackendError(h));this.backendErrors.set(l)}else this.backendErrors.set([`Error de conexi\xF3n: ${n.error?.message||n.message}`])}})}};c.\u0275fac=function(n){return new(n||c)(G(ue),G(fe),G(ge))},c.\u0275cmp=ne({type:c,selectors:[["app-daily-load"]],decls:38,vars:9,consts:[[1,"min-h-screen","bg-gradient-to-br","from-slate-900","via-slate-800","to-slate-900","p-6"],[1,"max-w-7xl","mx-auto"],[1,"mb-8"],[1,"flex","items-center","gap-3","mb-2"],[1,"p-2","bg-green-600","rounded-lg"],[1,"text-3xl","font-bold","text-white"],[1,"text-gray-400","text-sm","mt-1"],[1,"bg-slate-900","rounded-lg","p-3","shadow-sm","border","border-slate-800","mb-6"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-3"],[1,"block","text-xs","font-semibold","text-gray-300","mb-1.5"],[1,"w-full","px-3","py-2","bg-slate-800","border","border-slate-700","rounded-lg","text-white","text-sm","focus:outline-none","focus:ring-2","focus:ring-green-500",3,"ngModelChange","ngModel"],[3,"value"],[1,"w-full","px-3","py-2","bg-slate-800","border","border-slate-700","rounded-lg","text-white","text-sm","focus:outline-none","focus:ring-2","focus:ring-green-500","disabled:opacity-50","disabled:cursor-not-allowed",3,"ngModelChange","ngModel","disabled"],[1,"bg-slate-800","border","border-slate-700","rounded-xl","p-6"],[1,"bg-yellow-900/20","border","border-yellow-700/50","rounded-xl","p-6"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","gap-4","mb-4"],[1,"text-xl","font-bold","text-white"],[1,"flex","flex-col","sm:flex-row","gap-2"],[1,"flex","items-center","gap-2","px-4","py-2","bg-purple-600","text-white","rounded-lg","hover:bg-purple-700","transition-all","font-medium","text-sm","cursor-pointer",3,"click"],[1,"flex","items-center","gap-2","px-4","py-2","bg-green-600","text-white","rounded-lg","hover:bg-green-700","transition-all","font-medium","cursor-pointer","text-sm"],["type","file","accept",".xlsx,.xls,.csv",1,"hidden",3,"change"],[1,"bg-slate-900","border","border-slate-700","rounded-lg","overflow-hidden"],[1,"px-4","py-2","bg-slate-800","border-b","border-slate-700"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","gap-2"],[1,"text-sm","font-semibold","text-gray-300"],[1,"flex","items-center","gap-4"],[1,"text-xs","text-gray-500"],[1,"overflow-auto",2,"max-height","500px"],[1,"w-full","text-xs","border-collapse"],[1,"bg-slate-800","sticky","top-0","z-10"],[1,"px-3","py-2","text-left","font-semibold","text-gray-300","border-r","border-slate-700","bg-slate-800",2,"min-width","50px"],[1,"px-3","py-2","text-left","font-semibold","text-gray-300","border-r","border-slate-700","bg-slate-800",2,"min-width","80px"],[1,"px-3","py-2","text-left","font-semibold","text-gray-300","border-r","border-slate-700","bg-slate-800",2,"min-width","150px",3,"title"],[1,"border-b","border-slate-700"],[1,"space-y-4","mt-4"],[1,"text-xs","font-bold","text-white"],[1,"text-xs","font-bold","text-green-400"],[1,"text-xs","font-bold","text-red-400"],[1,"flex","items-center","gap-1.5"],[1,"flex","flex-col","gap-0.5"],[1,"font-semibold"],[1,"text-[10px]","text-green-400","font-normal"],[1,"px-3","py-8","text-center","text-gray-500","bg-slate-800/30"],[1,"flex","flex-col","items-center","gap-2"],[1,"text-sm"],[1,"border-b","border-slate-700","hover:bg-slate-800/50"],[1,"border-b","border-slate-700","hover:bg-slate-800/50","bg-red-900/10"],[1,"px-3","py-2","text-gray-400","border-r","border-slate-700","bg-slate-800/30"],[1,"px-3","py-2","border-r","border-slate-700"],[1,"inline-flex","items-center","gap-1","px-2","py-0.5","bg-green-900/30","text-green-400","rounded","text-[10px]"],[1,"px-3","py-2","text-gray-300","border-r","border-slate-700",3,"text-gray-500"],[1,"px-3","py-2","text-gray-300","border-r","border-slate-700"],[1,"inline-flex","items-center","gap-1","px-2","py-0.5","bg-red-900/30","text-red-400","rounded","text-[10px]",3,"title"],[1,"bg-red-900/30","border-2","border-red-700","rounded-xl","p-4"],[1,"bg-red-900/20","border","border-red-700/50","rounded-lg","p-4"],[1,"flex","justify-between","items-center"],[1,"text-sm","text-gray-400"],[1,"text-red-400"],[1,"flex","gap-3"],[1,"px-4","py-2","bg-slate-700","text-white","rounded-lg","hover:bg-slate-600","transition-all","font-medium","text-sm",3,"click"],[1,"px-4","py-2","bg-green-600","text-white","rounded-lg","hover:bg-green-700","transition-all","font-medium","text-sm"],[1,"flex","items-start","gap-3"],[1,"flex-1"],[1,"text-red-500","font-bold","text-lg","mb-2"],[1,"text-red-300","text-sm","mb-3"],[1,"bg-red-950/50","rounded-lg","p-3","max-h-60","overflow-y-auto"],[1,"text-red-200","text-xs","font-mono","mb-2","pb-2","border-b","border-red-800/50","last:border-0"],[1,"text-red-400","font-semibold","mb-2"],[1,"space-y-1"],[1,"text-green-400"],[1,"px-4","py-2","bg-green-600","text-white","rounded-lg","hover:bg-green-700","transition-all","font-medium","text-sm",3,"click"],[1,"text-yellow-500","font-semibold","mb-1"],[1,"text-gray-400","text-sm"]],template:function(n,l){n&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),oe(4,"div",4),r(5,"div")(6,"h1",5),s(7,"Carga Diaria"),o(),r(8,"p",6),s(9,"Actualizaci\xF3n diaria de datos"),o()()()(),r(10,"div",7)(11,"div",8)(12,"div")(13,"label",9),s(14," Proveedor "),o(),r(15,"select",10),ee("ngModelChange",function(a){return Q(l.selectedTenantId,a)||(l.selectedTenantId=a),a}),A("ngModelChange",function(a){return l.onTenantChange(a)}),r(16,"option",11),s(17,"Seleccione un proveedor..."),o(),N(18,ve,2,3,"option",11,R),o()(),r(20,"div")(21,"label",9),s(22," Cartera "),o(),r(23,"select",12),ee("ngModelChange",function(a){return Q(l.selectedPortfolioId,a)||(l.selectedPortfolioId=a),a}),A("ngModelChange",function(a){return l.onPortfolioChange(a)}),r(24,"option",11),s(25,"Seleccione una cartera..."),o(),N(26,be,2,3,"option",11,R),o()(),r(28,"div")(29,"label",9),s(30," Subcartera "),o(),r(31,"select",12),ee("ngModelChange",function(a){return Q(l.selectedSubPortfolioId,a)||(l.selectedSubPortfolioId=a),a}),A("ngModelChange",function(a){return l.onSubPortfolioChange(a)}),r(32,"option",11),s(33,"Seleccione una subcartera..."),o(),N(34,Ce,2,3,"option",11,R),o()()()(),w(36,We,36,4,"div",13)(37,Oe,7,0,"div",14),o()()),n&2&&(m(15),K("ngModel",l.selectedTenantId),m(),P("value",0),m(2),T(l.tenants()),m(5),K("ngModel",l.selectedPortfolioId),P("disabled",l.selectedTenantId===0),m(),P("value",0),m(2),T(l.portfolios()),m(5),K("ngModel",l.selectedSubPortfolioId),P("disabled",l.selectedPortfolioId===0),m(),P("value",0),m(2),T(l.subPortfolios()),m(2),I(l.selectedSubPortfolioId>0&&l.headersAreSaved()?36:l.selectedSubPortfolioId>0&&!l.headersAreSaved()?37:-1))},dependencies:[re,pe,ce,me,de,le,se],styles:["[_nghost-%COMP%]{display:block}"]});let t=c;return t})();export{Qe as DailyLoadComponent};
