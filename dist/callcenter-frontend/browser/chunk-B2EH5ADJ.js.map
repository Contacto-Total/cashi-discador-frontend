{
  "version": 3,
  "sources": ["src/app/features/legacy/agreements/services/agreements.service.ts"],
  "sourcesContent": ["import { HttpClient, HttpErrorResponse, HttpHeaders } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { catchError, retry, throwError } from 'rxjs';\r\nimport { environment } from '../../../../../environments/environment';\r\nimport { CreatePaymentAgreementRequest } from '../models/create-payment-agreement.request';\r\nimport { AgreementDataResponse } from '../models/agreement-data.response';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AgreementsService {\r\n\r\n  baseUrl = environment.webServiceUrl + '/cartas';\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  httpOptions = {\r\n    headers: new HttpHeaders({\r\n      'Content-Type': 'application/json'\r\n    })\r\n  };\r\n\r\n  fileHttpOptions = {\r\n    headers: new HttpHeaders({\r\n      'Content-Type': 'application/json'\r\n    }),\r\n    responseType: 'blob' as 'json'\r\n  };\r\n\r\n  handleError(error: HttpErrorResponse) {\r\n    if (typeof ErrorEvent !== 'undefined' && error.error instanceof ErrorEvent) {\r\n      console.log(\r\n        `An error occurred ${error.status}, body was: ${error.error.message}`\r\n      );\r\n    } else {\r\n      console.log(\r\n        `Backend returned code ${error.status}, body was: ${error.error.message}`\r\n      );\r\n    }\r\n    return throwError(() => ({ status: error.status, message: error.error.message }));\r\n  }\r\n\r\n  downloadAgreementCard(createPaymentAgreementRequest: CreatePaymentAgreementRequest) {\r\n    return this.http.post(this.baseUrl + '/carta-acuerdo', createPaymentAgreementRequest, {\r\n      ...this.fileHttpOptions, responseType: 'blob'\r\n    }).pipe(retry(2), catchError(this.handleError));\r\n  }\r\n\r\n  downloadNoDebtLetter(request: any) {\r\n    return this.http.post(this.baseUrl + '/carta-no-adeudo', request, {\r\n      ...this.fileHttpOptions, responseType: 'blob'\r\n    }).pipe(retry(2), catchError(this.handleError));\r\n  }\r\n\r\n  getAgreementData(dni: string) {\r\n    return this.http.get<AgreementDataResponse>(this.baseUrl + `/datos-cliente/${dni}`, this.httpOptions);\r\n  }\r\n}\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAUM,IAAO,qBAAP,MAAO,mBAAiB;EAI5B,YAAoB,MAAgB;AAAhB,SAAA,OAAA;AAFpB,SAAA,UAAU,YAAY,gBAAgB;AAItC,SAAA,cAAc;MACZ,SAAS,IAAI,YAAY;QACvB,gBAAgB;OACjB;;AAGH,SAAA,kBAAkB;MAChB,SAAS,IAAI,YAAY;QACvB,gBAAgB;OACjB;MACD,cAAc;;EAZwB;EAexC,YAAY,OAAwB;AAClC,QAAI,OAAO,eAAe,eAAe,MAAM,iBAAiB,YAAY;AAC1E,cAAQ,IACN,qBAAqB,MAAM,MAAM,eAAe,MAAM,MAAM,OAAO,EAAE;IAEzE,OAAO;AACL,cAAQ,IACN,yBAAyB,MAAM,MAAM,eAAe,MAAM,MAAM,OAAO,EAAE;IAE7E;AACA,WAAO,WAAW,OAAO,EAAE,QAAQ,MAAM,QAAQ,SAAS,MAAM,MAAM,QAAO,EAAG;EAClF;EAEA,sBAAsB,+BAA4D;AAChF,WAAO,KAAK,KAAK,KAAK,KAAK,UAAU,kBAAkB,+BAA+B,iCACjF,KAAK,kBAD4E;MAC3D,cAAc;MACxC,EAAE,KAAK,MAAM,CAAC,GAAG,WAAW,KAAK,WAAW,CAAC;EAChD;EAEA,qBAAqB,SAAY;AAC/B,WAAO,KAAK,KAAK,KAAK,KAAK,UAAU,oBAAoB,SAAS,iCAC7D,KAAK,kBADwD;MACvC,cAAc;MACxC,EAAE,KAAK,MAAM,CAAC,GAAG,WAAW,KAAK,WAAW,CAAC;EAChD;EAEA,iBAAiB,KAAW;AAC1B,WAAO,KAAK,KAAK,IAA2B,KAAK,UAAU,kBAAkB,GAAG,IAAI,KAAK,WAAW;EACtG;;;mCA9CW,oBAAiB,mBAAA,UAAA,CAAA;AAAA;sFAAjB,oBAAiB,SAAjB,mBAAiB,WAAA,YAFhB,OAAM,CAAA;AAEd,IAAO,oBAAP;;sEAAO,mBAAiB,CAAA;UAH7B;WAAW;MACV,YAAY;KACb;;;",
  "names": []
}
