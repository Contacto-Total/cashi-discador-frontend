import{b as te,c as ne,f as oe}from"./chunk-N5CN2EOD.js";import{a as ie}from"./chunk-XQTBPFDA.js";import"./chunk-RIMEIBS7.js";import"./chunk-VUSOBWTB.js";import{a as ee}from"./chunk-5WCX53RV.js";import{A as J,C as Z,D as K,E as Q,F as X,c as V,e as p,f as j,g as G,l as U,m as B,o as q,p as $,q as W,r as Y,w as H}from"./chunk-E2JO3TS2.js";import{hc as z,ic as R}from"./chunk-55452F6D.js";import"./chunk-YQKVMPSG.js";import"./chunk-72Z2NTOL.js";import{Gc as S,Kb as s,Lb as o,Mb as t,Nb as f,Rb as x,Sb as b,Ub as y,Wb as _,Yb as g,ab as r,bd as F,cd as I,dd as N,gb as E,ic as C,kc as n,lc as A,ld as L,ma as P,mc as O,na as v,nb as k,nc as D,sb as u}from"./chunk-BDAG5FYU.js";function se(a,l){if(a&1&&(o(0,"div",19),n(1),t()),a&2){let d=g();r(),O(" Tramo: ",d.tramoDetectado," ")}}function me(a,l){if(a&1&&(o(0,"div",20),n(1),t()),a&2){let d=g();C("bg-blue-50",d.selectedEntidad==="financiera_oh")("border-blue-500",d.selectedEntidad==="financiera_oh")("text-blue-700",d.selectedEntidad==="financiera_oh")("bg-purple-50",d.selectedEntidad==="nsoluciones")("border-purple-500",d.selectedEntidad==="nsoluciones")("text-purple-700",d.selectedEntidad==="nsoluciones")("border",!0),r(),O(" Plantilla: ",d.selectedEntidad==="financiera_oh"?"Financiera Oh":"NSoluciones"," ")}}function ge(a,l){a&1&&f(0,"span",21)}function pe(a,l){if(a&1&&(o(0,"div",22)(1,"div",23)(2,"div",24),f(3,"lucide-angular",25),t(),o(4,"h3",26),n(5," Busca un cliente para comenzar "),t(),o(6,"p",27),n(7," Ingresa el DNI del cliente en el buscador para cargar autom\xE1ticamente los datos y generar el acuerdo de pago. "),t()()()),a&2){let d=g();r(),C("bg-white",!d.isDarkMode)("bg-slate-800",d.isDarkMode),r(2),s("size",48),r(),C("text-slate-900",!d.isDarkMode)("text-white",d.isDarkMode),r(2),C("text-slate-600",!d.isDarkMode)("text-slate-400",d.isDarkMode)}}function ue(a,l){if(a&1&&(o(0,"div",82),n(1),t()),a&2){let d,i=g(2);r(),O(" ",i.formatDisplayDate((d=i.agreementForm.get("fechaActual"))==null?null:d.value)," ")}}function fe(a,l){if(a&1&&(o(0,"div",83),n(1),t()),a&2){let d=g(2);r(),O(" ",d.getFieldError("fechaActual")," ")}}function xe(a,l){a&1&&(x(0),n(1," ACUERDO DE PAGO - CAMPA\xD1A LIMPIA TU DEUDA "),b())}function be(a,l){a&1&&(x(0),n(1," ACUERDO DE PAGO - CANCELACI\xD3N TOTAL "),b())}function he(a,l){a&1&&(o(0,"span",85),n(1," (Fecha del 1er pago) "),t())}function _e(a,l){if(a&1&&(o(0,"div",82),n(1),u(2,he,2,0,"span",84),t()),a&2){let d,i=g(2);r(),O(" ",i.formatDisplayDate((d=i.agreementForm.get("fechaCompromiso"))==null?null:d.value)," "),r(),s("ngIf",i.formasDePagoArray.length>0)}}function Ce(a,l){if(a&1&&(o(0,"div",83),n(1),t()),a&2){let d=g(2);r(),O(" ",d.getFieldError("fechaCompromiso")," ")}}function Pe(a,l){if(a&1){let d=y();o(0,"tr",86)(1,"td",87)(2,"div",88)(3,"div",89)(4,"strong"),n(5),t(),n(6),t(),o(7,"div",90)(8,"button",91),_("click",function(){let e=P(d).index,c=g(2);return v(c.abrirEditorFormaPago(e))}),n(9,"Editar"),t(),o(10,"button",92),_("click",function(){let e=P(d).index,c=g(2);return v(c.removeFormaPago(e))}),n(11,"Eliminar"),t()()()()()}if(a&2){let d,i=l.$implicit,e=l.index,c=g(2);s("formGroupName",e),r(5),D("",e+1,"",c.getOrdinalSuffix(e+1)," PAGO"),r(),D(" \u2014 ",(d=i.get("fechaPago"))==null?null:d.value," \u2014 S/ ",(d=i.get("montoPago"))==null?null:d.value," SOLES "),r(4),s("disabled",c.formasDePagoArray.length<=1)}}function ve(a,l){if(a&1&&(o(0,"tr")(1,"td",93)(2,"div",94),n(3,"Observaci\xF3n:"),t(),o(4,"div",95),n(5),t()()()),a&2){let d=g(2);r(5),A(d.observacionTexto)}}function Oe(a,l){a&1&&(o(0,"tr")(1,"td",96)(2,"em"),n(3,"No hay formas de pago definidas."),t()()())}function ye(a,l){a&1&&(o(0,"div",97),n(1," Acercarse con su DNI, tarjeta Oh! y este documento; Indicar en los cajeros que va a realizar un "),o(2,"strong"),n(3,"pago o abono"),t(),n(4," a su Tarjeta Oh por el monto "),o(5,"strong"),n(6,"APROBADO"),t(),n(7,", en caso de no tener la tarjeta puede pagar con el n\xFAmero de cuenta de su tarjeta consignada en la parte superior de este documento. "),t())}function Me(a,l){a&1&&(x(0),n(1," Con su n\xFAmero de DNI "),b())}function Ee(a,l){a&1&&(x(0),n(1," PAGO POR SERVICIO - NSOLUCIONES CONSULTING "),b())}function ke(a,l){a&1&&(x(0),n(1," Presentando su DNI "),b())}function Ae(a,l){a&1&&(x(0),n(1," PAGO POR SERVICIO - NSOLUCIONES CONSULTING "),b())}function we(a,l){a&1&&(x(0),n(1," Enviar foto del voucher de transacci\xF3n al WhatsApp corporativo de Financiera Oh para su validaci\xF3n, registro, cancelaci\xF3n de deuda y retiro de cobranza. "),b())}function Te(a,l){a&1&&(x(0),n(1," Enviar foto del v\xF3ucher de transacci\xF3n al WhatsApp corporativo de NSOLUCIONES para su validaci\xF3n, registro, cancelaci\xF3n de deuda y retiro de cobranza. "),b())}function De(a,l){a&1&&(x(0),n(1," A partir de 15 d\xEDas h\xE1biles de la cancelaci\xF3n ya puede solicitar el tr\xE1mite su carta de no adeudo escribiendo al "),o(2,"strong"),n(3,"WhatsApp: 980732405 - OPCION 2"),t(),n(4," o llamando al (01) 619-4800; (01) 631-5400; para que lo pueda recoger en plataforma o solicitar el env\xEDo a su correo. "),b())}function Se(a,l){a&1&&(x(0),n(1," A partir de 24 HORAS posterior al pago ya podr\xE1 solicitar el tr\xE1mite su carta de no adeudo escribiendo al WhatsApp: 915326798 para coordinar el env\xEDo a su correo. "),b())}function Fe(a,l){a&1&&(x(0),n(1," Si desea mayor informaci\xF3n, comun\xEDquese a los siguientes n\xFAmeros de contacto directo: V\xEDa Telf.: o v\xEDa WhatsApp: "),o(2,"strong"),n(3,"968437436"),t(),b())}function Ie(a,l){a&1&&(x(0),n(1," Si desea mayor informaci\xF3n, comun\xEDquese a los siguientes n\xFAmeros de contacto directo: V\xEDa Telf.: o v\xEDa WhatsApp: "),o(2,"strong"),n(3,"915257493"),t(),b())}function Ne(a,l){a&1&&(x(0),o(1,"div",79),n(2,"LOGO BCP"),t(),o(3,"div",98)(4,"strong"),n(5,"Romina Tapia Albinagorta \xA0\xA0\xA0\xA0\xA0\xA0 Dpto."),t(),f(6,"br"),o(7,"strong"),n(8,"COBRANZAS Oh!"),t()(),b())}function Le(a,l){a&1&&(x(0),o(1,"div",79),n(2,"FIRMA"),t(),o(3,"div",98)(4,"strong"),n(5,"Emily Dayana Saenz Martinez"),t(),f(6,"br"),o(7,"strong"),n(8,"NSOLUCIONES CONSULTING S.A.C"),t()(),b())}function ze(a,l){if(a&1){let d=y();o(0,"div",99)(1,"div",100)(2,"div",101)(3,"h3"),n(4,"Editar forma de pago"),t(),o(5,"button",102),_("click",function(){P(d);let e=g(2);return v(e.cerrarEditor())}),n(6,"\xD7"),t()(),o(7,"div",103)(8,"div",104)(9,"label",105),n(10,"\u{1F4C5} Fecha del pago"),t(),f(11,"input",106),t(),o(12,"div",104)(13,"label",107),n(14,"\u{1F4B0} Monto (S/)"),t(),f(15,"input",108),t()(),o(16,"div",109)(17,"button",110),_("click",function(){P(d);let e=g(2);return v(e.cerrarEditor())}),n(18,"Cancelar"),t(),o(19,"button",111),_("click",function(){P(d);let e=g(2);return v(e.guardarEdicionFormaPago())}),n(20,"Guardar"),t()()()()}if(a&2){let d=g(2);r(7),s("formGroup",d.formaPagoTemporal)}}function Re(a,l){if(a&1){let d=y();o(0,"div",22)(1,"form",28)(2,"div",29)(3,"div",30)(4,"div",31)(5,"div",32),n(6,"LOGO 1"),t()(),o(7,"div",33)(8,"div",32),n(9,"LOGO 2"),t()()()(),f(10,"div",34),o(11,"div",35)(12,"div",36),f(13,"input",37),u(14,ue,2,1,"div",38),t(),u(15,fe,2,1,"div",39),t(),o(16,"div",40),u(17,xe,2,0,"ng-container",41)(18,be,2,0,"ng-container",41),t(),o(19,"table",42)(20,"tr")(21,"td",43),n(22,"NOMBRE DEL TITULAR"),t(),o(23,"td",44),f(24,"input",45),t()(),o(25,"tr")(26,"td",43),n(27,"NUMERO DNI"),t(),o(28,"td",44),f(29,"input",46),t()(),o(30,"tr")(31,"td",43),n(32,"Nro. CUENTA TARJETA Oh!"),t(),o(33,"td",44),f(34,"input",47),t()()(),o(35,"div",48),n(36," \xA1Felicitaciones!, ya se encuentra "),o(37,"strong"),n(38,"APROBADO"),t(),n(39," su "),o(40,"strong"),n(41,"CAMPA\xD1A ESPECIAL"),t(),n(42," con el cual estar\xEDa cancelando "),o(43,"strong"),n(44,"TODA SU DEUDA"),t(),n(45,", lo puede pagar desde el d\xEDa de hoy, se encontrar\xE1 habilitado hasta este: "),t(),o(46,"div",49)(47,"div",36),f(48,"input",50),u(49,_e,3,2,"div",38),t(),u(50,Ce,2,1,"div",39),t(),o(51,"div",51),n(52," DETALLE DE DEUDA Y PROMOCI\xD3N APROBADA "),t(),o(53,"table",52)(54,"tr")(55,"th",53),n(56,"DEUDA TOTAL"),t(),o(57,"th",53),n(58,"DESCUENTO"),t(),o(59,"th",53),n(60,"MONTO APROBADO"),t()(),o(61,"tr")(62,"td",54)(63,"div",55),n(64," S/ "),f(65,"input",56),t()(),o(66,"td",54)(67,"div",55),n(68," S/ "),f(69,"input",57),t()(),o(70,"td",58)(71,"div",55),n(72," S/ "),o(73,"input",59),_("input",function(){P(d);let e=g();return v(e.calculateDiscount())}),t(),o(74,"button",60),_("click",function(){P(d);let e=g();return v(e.toggleBlackoutMode())}),n(75),t()()()(),o(76,"tr")(77,"td",61)(78,"div",62)(79,"span",63),n(80,"Formas de pago"),t(),o(81,"button",64),_("click",function(){P(d);let e=g();return v(e.addFormaPago())}),n(82,"+ Agregar"),t()()()(),x(83,65),u(84,Pe,12,6,"tr",66),b(),u(85,ve,6,1,"tr",41)(86,Oe,4,0,"tr",41),t(),u(87,ye,8,0,"div",67),o(88,"div",68),n(89,"CENTROS DE PAGO VIRTUAL:"),t(),o(90,"div",69)(91,"div",70)(92,"div",71),n(93,"BCP"),t(),o(94,"div",72),n(95,"APP/WEB"),t(),o(96,"div",73),u(97,Me,2,0,"ng-container",41)(98,Ee,2,0,"ng-container",41),t()()(),o(99,"div",68),n(100,"CENTROS DE PAGO PRESENCIAL :"),t(),o(101,"div",69)(102,"div",70)(103,"div",71),n(104,"BCP"),t(),o(105,"div",72),n(106,"AGENTE/VENTANILLA"),t(),o(107,"div",73),u(108,ke,2,0,"ng-container",41)(109,Ae,2,0,"ng-container",41),t()()(),o(110,"div",68),n(111,"CONFIRMACI\xD3N DE PAGO:"),t(),o(112,"div",69),u(113,we,2,0,"ng-container",41)(114,Te,2,0,"ng-container",41),t(),o(115,"div",68),n(116,"TRAMITE DE CARTA DE NO ADEUDO:"),t(),o(117,"div",69),u(118,De,5,0,"ng-container",41)(119,Se,2,0,"ng-container",41),t(),o(120,"div",74),u(121,Fe,4,0,"ng-container",41)(122,Ie,4,0,"ng-container",41),t(),o(123,"div",75)(124,"div",76)(125,"span"),n(126,"Atentamente,"),t()(),o(127,"div",77),u(128,Ne,9,0,"ng-container",41)(129,Le,9,0,"ng-container",41),t(),o(130,"div",78)(131,"div",79),n(132,"COMPROMISO"),t()()(),o(133,"div",80)(134,"p"),n(135,"(*) Si al recibir esta comunicaci\xF3n Ud. Ha cancelado o regularizado su deuda, por favor desestimar su contenido."),t(),o(136,"p"),n(137,"(*) Para acceder a las facilidades deber\xE1 estar incluida en la relaci\xF3n de cuentas pre -aprobado."),t(),o(138,"p"),n(139,"(*) Sujeto a variaci\xF3n, por negativa a facilidad."),t()()(),u(140,ze,21,1,"div",81),t()}if(a&2){let d,i,e=g();r(),s("formGroup",e.agreementForm),r(12),C("is-invalid",e.isFieldInvalid("fechaActual")),r(),s("ngIf",(d=e.agreementForm.get("fechaActual"))==null?null:d.value),r(),s("ngIf",e.isFieldInvalid("fechaActual")),r(),C("bg-[#d32f2f]",e.selectedEntidad==="financiera_oh")("bg-black",e.selectedEntidad==="nsoluciones"),r(),s("ngIf",e.selectedEntidad==="financiera_oh"),r(),s("ngIf",e.selectedEntidad==="nsoluciones"),r(30),C("is-invalid",e.isFieldInvalid("fechaCompromiso")),s("readonly",e.isFechaCompromisoReadonly),r(),s("ngIf",(i=e.agreementForm.get("fechaCompromiso"))==null?null:i.value),r(),s("ngIf",e.isFieldInvalid("fechaCompromiso")),r(),C("bg-[#d32f2f]",e.selectedEntidad==="financiera_oh")("bg-black",e.selectedEntidad==="nsoluciones"),r(14),C("blackout",e.isBlackoutMode),r(4),C("blackout",e.isBlackoutMode),r(4),C("is-invalid",e.isFieldInvalid("montoAprobado")),r(),C("active",e.isBlackoutMode),s("title",e.getToggleTitle()),r(),O(" ",e.getToggleIcon()," "),r(9),s("ngForOf",e.formasDePagoArray.controls),r(),s("ngIf",e.mostrarObservacion),r(),s("ngIf",e.formasDePagoArray.length===0),r(),s("ngIf",e.selectedEntidad==="financiera_oh"),r(10),s("ngIf",e.selectedEntidad==="financiera_oh"),r(),s("ngIf",e.selectedEntidad==="nsoluciones"),r(10),s("ngIf",e.selectedEntidad==="financiera_oh"),r(),s("ngIf",e.selectedEntidad==="nsoluciones"),r(4),s("ngIf",e.selectedEntidad==="financiera_oh"),r(),s("ngIf",e.selectedEntidad==="nsoluciones"),r(4),s("ngIf",e.selectedEntidad==="financiera_oh"),r(),s("ngIf",e.selectedEntidad==="nsoluciones"),r(2),s("ngIf",e.selectedEntidad==="financiera_oh"),r(),s("ngIf",e.selectedEntidad==="nsoluciones"),r(6),s("ngIf",e.selectedEntidad==="financiera_oh"),r(),s("ngIf",e.selectedEntidad==="nsoluciones"),r(11),s("ngIf",e.formaPagoSeleccionadaIndex!==null)}}function Ve(a,l){if(a&1){let d=y();o(0,"div",112)(1,"span",113),n(2),t(),o(3,"div",114),n(4),t(),o(5,"button",115),_("click",function(){let e=P(d).$implicit,c=g();return v(c.removeToast(e.id))}),n(6,"\xD7"),t()()}if(a&2){let d=l.$implicit;s("ngClass",d.type),r(2),A(d.icon),r(2),A(d.message)}}var ae=(()=>{let l=class l{constructor(i,e,c){this.fb=i,this.agreementsService=e,this.themeService=c,this.isDarkMode=!1,this.readonlyInputs=!1,this.isLoading=!1,this.isBlackoutMode=!1,this.isDeudaTotalReset=!1,this.tramoDetectado="",this.mostrarObservacion=!1,this.observacionTexto="",this.mostrarDocumento=!1,this.toasts=[],this.toastIdCounter=0,this.formaPagoSeleccionadaIndex=null,this.formaPagoTemporal=this.fb.group({fechaPago:[""],montoPago:[0]}),this.agreementForm=this.createForm(),this.searchForm=this.fb.group({dniBusqueda:["",[p.required,p.pattern(/^\d{8}$/)]]}),S(()=>{this.isDarkMode=this.themeService.isDarkMode()})}ngOnInit(){this.setupFormValueChanges(),this.setupFormasPagoListener()}createForm(){return this.fb.group({entidad:["financiera_oh",p.required],fechaActual:[this.formatDate(new Date),p.required],nombreTitular:["",[p.required,p.minLength(2)]],dni:["",[p.required,p.pattern(/^\d{8}$/)]],cuentaTarjeta:["",[p.required,p.minLength(10)]],fechaCompromiso:[this.formatDate(new Date(Date.now()+720*60*60*1e3)),p.required],deudaTotal:[0,[p.required,p.min(.01)]],descuento:[0,[p.required,p.min(0)]],montoAprobado:[0,[p.required,p.min(.01)]],formasDePago:this.fb.array([])})}createFormaPago(){return this.fb.group({fechaPago:[this.formatDate(new Date),p.required],montoPago:[0,[p.required,p.min(.01)]]})}get formasDePagoArray(){return this.agreementForm.get("formasDePago")}get isFechaCompromisoReadonly(){return this.formasDePagoArray.length>0||this.readonlyInputs}setupFormValueChanges(){this.agreementForm.get("deudaTotal")?.valueChanges.subscribe(()=>{this.isDeudaTotalReset||this.calculateDiscount()}),this.agreementForm.get("descuento")?.valueChanges.subscribe(()=>{this.isDeudaTotalReset||this.calculateDiscount()}),this.agreementForm.get("montoAprobado")?.valueChanges.subscribe(()=>{this.isDeudaTotalReset||this.calculateDiscount()})}setupFormasPagoListener(){this.formasDePagoArray.valueChanges.subscribe(()=>{this.updateFechaCompromisoFromFirstPayment()})}updateFechaCompromisoFromFirstPayment(){if(this.formasDePagoArray.length>0){let e=this.formasDePagoArray.at(0).get("fechaPago")?.value;e&&this.agreementForm.patchValue({fechaCompromiso:e},{emitEvent:!1})}}formatDate(i){return i.toISOString().split("T")[0]}formatDisplayDate(i){if(!i)return"";let[e,c,m]=i.split("-").map(Number);return new Date(e,c-1,m).toLocaleDateString("es-PE",{weekday:"long",year:"numeric",month:"long",day:"numeric"}).replace("septiembre","setiembre")}determinarEntidadPorTramo(i){return i==="Tramo 3"||i==="Tramo 5"?"financiera_oh":i==="CONTACTO_TOTAL"?"nsoluciones":"financiera_oh"}calculateDiscount(){let i=this.agreementForm.get("deudaTotal")?.value||0,e=this.agreementForm.get("montoAprobado")?.value||0,c=i-e;c<0&&(c=0),this.agreementForm.patchValue({descuento:Number(c.toFixed(2))},{emitEvent:!1})}addFormaPago(){this.formasDePagoArray.length<10&&this.formasDePagoArray.push(this.createFormaPago())}removeFormaPago(i){this.formasDePagoArray.removeAt(i)}buscarPorDni(){if(this.searchForm.invalid){this.searchForm.markAllAsTouched();return}let i=this.searchForm.get("dniBusqueda")?.value;this.limpiarCampos(),this.searchForm.reset(),this.isLoading=!0,this.agreementsService.getAgreementData(i).subscribe({next:e=>{let c=this.determinarEntidadPorTramo(e.tramo),m=Math.ceil(Number(e.deudaTotal)).toFixed(2);this.agreementForm.patchValue({entidad:c,fechaActual:e.fechaActual,nombreTitular:e.nombreDelTitular,dni:i,cuentaTarjeta:e.cuentaTarjeta,fechaCompromiso:e.fechaCompromiso,deudaTotal:parseFloat(m)}),this.readonlyInputs=!0,this.tramoDetectado=e.tramo,this.observacionTexto=`Deuda total: ${e.deudaTotal}
Saldo capital asignado: ${e.saldoCapitalAsig}
LTD: ${e.ltd}
LTDE: ${e.ltde}
Asesor: ${e.asesor}
Tipificaci\xF3n: ${e.observacion}`,this.mostrarObservacion=!0,this.mostrarDocumento=!0,this.isLoading=!1},error:e=>{this.isLoading=!1,this.readonlyInputs=!1,e.status===404?this.showToast("error","Cliente no encontrado en la base de datos."):e.status===422?this.showToast("warning","El cliente no tiene promesa de pago registrada."):this.showToast("error","Error al obtener datos del cliente.")}})}toggleBlackoutMode(){if(this.isBlackoutMode)confirm("Desea volver a mostrar los campos?")&&(this.isBlackoutMode=!1);else{let i=this.agreementForm.get("montoAprobado")?.value||0;if(i<=0){this.showToast("error","Ingrese un monto aprobado v\xE1lido.");return}confirm("Usar monto aprobado como deuda total?")&&(this.isDeudaTotalReset=!0,this.isBlackoutMode=!0,this.agreementForm.patchValue({deudaTotal:i,descuento:0},{emitEvent:!1}),setTimeout(()=>{this.isDeudaTotalReset=!1},100))}}calculateFromPercentage(){let i=this.agreementForm.get("deudaTotal")?.value||0;if(i<=0){this.showToast("error","Ingrese primero el monto de la deuda total.");return}let e=prompt("Ingrese porcentaje de descuento (0-100):");if(e&&!isNaN(Number(e))&&Number(e)>=0&&Number(e)<=100){let c=i*Number(e)/100,m=i-c;this.agreementForm.patchValue({descuento:Number(c.toFixed(2)),montoAprobado:Number(m.toFixed(2))})}}onSubmit(){if(!this.agreementForm.valid){this.markFormGroupTouched(),this.showToast("error","Campos requeridos incompletos.");return}let i=this.agreementForm.get("montoAprobado")?.value||0;if(this.formasDePagoArray.length>0){let h=this.formasDePagoArray.controls.reduce((w,T)=>w+Number(T.get("montoPago")?.value||0),0);if(Math.abs(h-i)>.01){this.showToast("error","Suma de pagos no coincide con monto aprobado");return}}this.isLoading=!0;let e=this.agreementForm.value,c=this.isBlackoutMode?e.montoAprobado:e.deudaTotal,m={entidad:e.entidad,fechaActual:this.formatDisplayDate(e.fechaActual),nombreTitular:e.nombreTitular,dni:e.dni,cuentaTarjeta:e.cuentaTarjeta,fechaCompromiso:this.formatDisplayDate(e.fechaCompromiso),deudaTotal:c,descuento:e.descuento,montoAprobado:e.montoAprobado,formasDePago:this.formasDePagoArray.controls.map((h,M)=>{let w=h.get("fechaPago")?.value,T=h.get("montoPago")?.value,[je,re,de]=w.split("-"),le=`${de}/${re}`;return`${M+1}${this.getOrdinalSuffix(M+1)} PAGO - ${le} - ${T} SOLES`})};this.agreementsService.downloadAgreementCard(m).subscribe({next:h=>{this.downloadFile(h,`ACUERDO_DE_PAGO_${m.dni}.pdf`),this.isLoading=!1,this.showToast("success","Acuerdo descargado.")},error:h=>{console.error("Error completo:",h),console.error("Status:",h.status),console.error("Mensaje:",h.message),console.error("Request enviado:",m),this.isLoading=!1,this.showToast("error",`Error ${h.status}: ${h.message||"Error al generar documento"}`)}})}limpiarCampos(){for(;this.formasDePagoArray.length>0;)this.formasDePagoArray.removeAt(0);this.isDeudaTotalReset=!1,this.mostrarObservacion=!1,this.observacionTexto="",this.readonlyInputs=!1,this.isBlackoutMode=!1,this.tramoDetectado="",this.mostrarDocumento=!1,this.toasts=[];let i=this.agreementForm.get("entidad")?.value||"financiera_oh";this.agreementForm.patchValue({entidad:i,fechaActual:this.formatDate(new Date),nombreTitular:"",dni:"",cuentaTarjeta:"",fechaCompromiso:this.formatDate(new Date(Date.now()+720*60*60*1e3)),deudaTotal:0,descuento:0,montoAprobado:0})}resetForm(){confirm("Limpiar todos los campos?")&&this.limpiarCampos()}isFieldInvalid(i){let e=this.agreementForm.get(i);return!!(e?.invalid&&(e?.touched||e?.dirty))}getFieldError(i){let e=this.agreementForm.get(i);if(e?.errors&&(e?.touched||e?.dirty)){if(e.errors.required)return`${this.getFieldLabel(i)} requerido`;if(e.errors.pattern)return i==="dni"?"DNI: 8 d\xEDgitos":`${this.getFieldLabel(i)} inv\xE1lido`;if(e.errors.minLength)return`${this.getFieldLabel(i)} m\xEDn ${e.errors.minLength.requiredLength}`;if(e.errors.min)return`${this.getFieldLabel(i)} > ${e.errors.min.min}`}return""}getFieldLabel(i){return{fechaActual:"Fecha",nombreTitular:"Nombre",dni:"DNI",cuentaTarjeta:"Cuenta",fechaCompromiso:"Fecha Compromiso",deudaTotal:"Deuda",descuento:"Descuento",montoAprobado:"Monto Aprobado"}[i]||i}getOrdinalSuffix(i){let e=["ER","DO","ER","TO","TO","TO","MO","VO","NO","MO"];return i<=10?e[i-1]:""}downloadFile(i,e){let c=window.URL.createObjectURL(i),m=document.createElement("a");m.href=c,m.download=e,document.body.appendChild(m),m.click(),document.body.removeChild(m),window.URL.revokeObjectURL(c)}markFormGroupTouched(){Object.keys(this.agreementForm.controls).forEach(i=>{let e=this.agreementForm.get(i);e?.markAsTouched(),e instanceof Z&&e.controls.forEach(c=>c.markAsTouched())})}showToast(i,e){let c=i==="error"?"\u274C":i==="warning"?"\u26A0\uFE0F":"\u2705",m=this.toastIdCounter++;this.toasts.push({id:m,type:i,message:e,icon:c}),setTimeout(()=>this.removeToast(m),5e3)}removeToast(i){this.toasts=this.toasts.filter(e=>e.id!==i)}onlyNumbers(i){let e=i.target;e.value=e.value.replace(/[^0-9]/g,"")}getFormGroupAt(i){return this.formasDePagoArray.at(i)}abrirEditorFormaPago(i){this.formaPagoSeleccionadaIndex=i;let e=this.formasDePagoArray.at(i);this.formaPagoTemporal.setValue({fechaPago:e.get("fechaPago")?.value,montoPago:e.get("montoPago")?.value})}guardarEdicionFormaPago(){if(this.formaPagoTemporal.invalid){this.formaPagoTemporal.markAllAsTouched(),this.showToast("error","Complete todos los campos del pago.");return}this.formaPagoSeleccionadaIndex!==null&&(this.formasDePagoArray.at(this.formaPagoSeleccionadaIndex).patchValue({fechaPago:this.formaPagoTemporal.get("fechaPago")?.value,montoPago:this.formaPagoTemporal.get("montoPago")?.value}),this.cerrarEditor())}cerrarEditor(){this.formaPagoSeleccionadaIndex=null,this.formaPagoTemporal.reset({fechaPago:"",montoPago:0})}getToggleIcon(){return this.isBlackoutMode?"\u21B6":"\xD7"}getToggleTitle(){return this.isBlackoutMode?"Restaurar vista de deuda total":"Ocultar deuda total y usar monto aprobado como deuda"}get selectedEntidad(){return this.agreementForm.get("entidad")?.value||"financiera_oh"}};l.\u0275fac=function(e){return new(e||l)(E(K),E(ie),E(ee))},l.\u0275cmp=k({type:l,selectors:[["app-agreements-page"]],decls:26,vars:11,consts:[[1,"payment-agreement-container"],[1,"flex","items-center","gap-2","mb-3"],[1,"w-8","h-8","bg-gradient-to-br","from-blue-600","to-purple-700","rounded-lg","flex","items-center","justify-center"],["name","file-text",1,"text-white!",3,"size"],[1,"text-lg","font-bold","text-slate-900","dark:text-white"],[1,"text-xs","text-slate-600","dark:text-slate-400"],[1,"document-header"],[1,"flex","gap-2","items-center",3,"formGroup"],["formControlName","dniBusqueda","type","text","placeholder","DNI","maxlength","8",1,"h-10","w-[120px]","px-3","text-sm","border","border-slate-300","dark:border-slate-600","rounded-lg","bg-white","dark:bg-slate-700","text-slate-900","dark:text-white","placeholder:text-slate-400","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-colors"],["type","button",1,"h-10","px-4","text-sm","font-medium","text-white","bg-gradient-to-r","from-emerald-500","to-emerald-600","hover:from-emerald-600","hover:to-emerald-700","rounded-lg","transition-all","duration-200","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["class","ml-2 px-3 py-1 bg-green-50 border border-green-500 rounded text-sm font-bold text-green-700",4,"ngIf"],["class","ml-2 px-3 py-1 rounded text-sm font-bold",3,"bg-blue-50","border-blue-500","text-blue-700","bg-purple-50","border-purple-500","text-purple-700","border",4,"ngIf"],["class","spinner",4,"ngIf"],[1,"document-actions"],["type","button",1,"h-10","px-4","text-sm","font-medium","text-white","bg-gradient-to-r","from-red-500","to-red-600","hover:from-red-600","hover:to-red-700","rounded-lg","transition-all","duration-200",3,"click"],["type","button",1,"h-10","px-4","text-sm","font-medium","text-white","bg-gradient-to-r","from-blue-600","to-purple-700","hover:from-blue-700","hover:to-purple-800","rounded-lg","transition-all","duration-200","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["class","document-container",4,"ngIf"],[1,"toast-container"],["class","toast",3,"ngClass",4,"ngFor","ngForOf"],[1,"ml-2","px-3","py-1","bg-green-50","border","border-green-500","rounded","text-sm","font-bold","text-green-700"],[1,"ml-2","px-3","py-1","rounded","text-sm","font-bold"],[1,"spinner"],[1,"document-container"],[1,"flex","flex-col","items-center","justify-center","py-20","px-8","rounded-lg","shadow-sm"],[1,"w-24","h-24","bg-gradient-to-br","from-blue-600","to-purple-700","rounded-full","flex","items-center","justify-center","mb-6","shadow-lg"],["name","search",2,"color","white !important",3,"size"],[1,"text-xl","font-bold","mb-2"],[1,"text-sm","text-center","max-w-md"],[1,"document","bg-white","text-black",3,"formGroup"],[1,"header"],[1,"logo-section"],[1,"logo-left"],[1,"logo-placeholder"],[1,"logo-right"],[1,"line"],[1,"date-location"],[1,"date-input-container"],["type","date","formControlName","fechaActual",1,"editable-input","date-input"],["class","formatted-date",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"red-header","text-white"],[4,"ngIf"],[1,"client-table","bg-white","text-black"],[1,"label-cell","bg-[#f8f9fa]","text-black"],[1,"highlight","input-cell","bg-white","text-black"],["type","text","formControlName","nombreTitular","readonly","","placeholder","JUAN CARLOS PEREZ GARCIA",1,"editable-input","large-input","readonly-input"],["type","text","formControlName","dni","readonly","","placeholder","12345678",1,"editable-input","readonly-input"],["type","text","formControlName","cuentaTarjeta","readonly","","placeholder","1234567890123456",1,"editable-input","large-input","readonly-input"],[1,"congratulations","text-black"],[1,"date-highlight","text-black"],["type","date","formControlName","fechaCompromiso",1,"editable-input","date-input",3,"readonly"],[1,"debt-header","text-white"],[1,"debt-table","bg-white","text-black"],[1,"bg-white","text-black"],[1,"amount","bg-white","text-black"],[1,"amount-input-container"],["type","number","formControlName","deudaTotal","readonly","","step","0.01","min","0",1,"editable-input","number-input","readonly-input"],["type","number","formControlName","descuento","readonly","",1,"editable-input","number-input"],[1,"highlight-amount","bg-yellow-300","text-black"],["type","number","formControlName","montoAprobado","step","1","min","0",1,"editable-input","number-input",3,"input"],["type","button",1,"btn-toggle-debt",3,"click","title"],["colspan","3",1,"payment-header-clean"],[1,"payment-header-container"],[1,"payment-title"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],["formArrayName","formasDePago"],[3,"formGroupName",4,"ngFor","ngForOf"],["class","instructions text-black",4,"ngIf"],[1,"section-header","bg-[#e0e0e0]","text-black"],[1,"section-content","text-black"],[1,"centers-content"],[1,"bcp-logo"],[1,"center"],[1,"dni","text-black"],[1,"contact-info","text-black"],[1,"signature-section","text-black"],[1,"signature-left","text-black"],[1,"signature-center","text-black"],[1,"signature-right"],[1,"logo-placeholder","small"],[1,"footer-notes"],["class","modal-backdrop",4,"ngIf"],[1,"formatted-date"],[1,"error-message"],["style","font-size: 0.8em; color: #666; margin-left: 5px;",4,"ngIf"],[2,"font-size","0.8em","color","#666","margin-left","5px"],[3,"formGroupName"],["colspan","3",1,"payment-row"],[1,"payment-row-content"],[1,"payment-info"],[1,"payment-actions"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"click"],["type","button",1,"btn","btn-outline-danger","btn-sm",3,"click","disabled"],["colspan","3",1,"payment-observation-unique"],[1,"observation-header"],[1,"observation-content"],["colspan","3",1,"payment-section"],[1,"instructions","text-black"],[2,"text-align","center","padding","10px"],[1,"modal-backdrop"],["cdkDrag","",1,"modal-dialog","enhanced"],["cdkDragHandle","",1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body",3,"formGroup"],[1,"modal-field"],["for","fechaPago"],["type","date","formControlName","fechaPago","id","fechaPago",1,"editable-input","date-input"],["for","montoPago"],["type","number","formControlName","montoPago","step","0.01","min","0","id","montoPago",1,"editable-input","number-input"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click"],[1,"toast",3,"ngClass"],[1,"toast-icon"],[1,"toast-content"],[1,"toast-close",3,"click"]],template:function(e,c){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2),f(3,"lucide-angular",3),t(),o(4,"div")(5,"h1",4),n(6,"Generador de Acuerdo de Pago"),t(),o(7,"p",5),n(8,"Creaci\xF3n de acuerdos de pago para clientes"),t()()(),o(9,"div",6)(10,"form",7),f(11,"input",8),o(12,"button",9),_("click",function(){return c.buscarPorDni()}),n(13," Buscar "),t(),u(14,se,2,1,"div",10)(15,me,2,15,"div",11)(16,ge,1,0,"span",12),t(),o(17,"div",13)(18,"button",14),_("click",function(){return c.resetForm()}),n(19," Limpiar "),t(),o(20,"button",15),_("click",function(){return c.onSubmit()}),n(21),t()()(),u(22,pe,8,13,"div",16)(23,Re,141,47,"div",16),t(),o(24,"div",17),u(25,Ve,7,3,"div",18),t()),e&2&&(r(3),s("size",16),r(7),s("formGroup",c.searchForm),r(2),s("disabled",c.searchForm.invalid),r(2),s("ngIf",c.tramoDetectado),r(),s("ngIf",c.tramoDetectado),r(),s("ngIf",c.isLoading),r(4),s("disabled",c.agreementForm.invalid||c.isLoading),r(),O(" ",c.isLoading?"Generando...":"Generar PDF"," "),r(),s("ngIf",!c.mostrarDocumento),r(),s("ngIf",c.mostrarDocumento),r(2),s("ngForOf",c.toasts))},dependencies:[L,F,I,N,X,U,V,B,j,G,J,H,q,Y,$,W,Q,R,z,oe,ne,te],styles:["body[_ngcontent-%COMP%]{margin-top:5rem;margin-bottom:2rem}.payment-agreement-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh;font-family:Arial,sans-serif;background-color:#f5f5f5;padding:2rem 20px 20px;transition:background-color .3s ease}.dark[_nghost-%COMP%]   .payment-agreement-container[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .payment-agreement-container[_ngcontent-%COMP%]{background-color:#0f172a}.dark[_nghost-%COMP%]   .document-header[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .document-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1e293b,#0f172a);border-color:#334155}.dark[_nghost-%COMP%]   .document-title[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .document-title[_ngcontent-%COMP%]{color:#e2e8f0}.document-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;padding:1.5rem 2rem;background:linear-gradient(135deg,#fff,#f8fafc);border-radius:16px;box-shadow:0 4px 20px #00000014;border:1px solid #e2e8f0;gap:1rem}.document-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:center}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:8px;cursor:pointer;font-size:.95rem;font-weight:500;transition:all .3s ease;text-decoration:none;display:inline-flex;align-items:center;gap:8px;box-shadow:0 2px 8px #0000000a;position:relative;overflow:hidden}.btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #0000001f}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#8b5cf6);color:#fff;border:none}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#2563eb,#7c3aed);box-shadow:0 4px 16px #3b82f64d}.btn-primary[_ngcontent-%COMP%]:disabled{background:linear-gradient(135deg,#94a3b8,#cbd5e1);cursor:not-allowed;transform:none}.btn-secondary[_ngcontent-%COMP%]{background:#64748b;color:#fff;border:none}.btn-secondary[_ngcontent-%COMP%]:hover{background:#475569}.btn-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff;border:none}.btn-success[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#059669,#047857);box-shadow:0 4px 16px #10b9814d}.btn-search[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff;border:none}.btn-search[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#059669,#047857);box-shadow:0 4px 16px #10b9814d}.btn-clean[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626);color:#fff;border:none}.btn-clean[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#dc2626,#b91c1c);box-shadow:0 4px 16px #ef44444d}.spinner[_ngcontent-%COMP%]{width:20px;height:20px;border:2px solid rgba(255,255,255,.3);border-top:2px solid currentColor;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.document-container[_ngcontent-%COMP%]{display:flex;justify-content:center;background:linear-gradient(135deg,#fff,#f8fafc);border-radius:8px;padding:40px;box-shadow:0 4px 8px #0000001a}.dark[_nghost-%COMP%]   .document-container[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .document-container[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1e293b,#0f172a)}.document[_ngcontent-%COMP%]{width:100%;max-width:800px;margin:0 auto;padding:30px;border:2px solid black;background:#fff;font-family:Arial,sans-serif;font-size:12px;position:relative}.editable-input[_ngcontent-%COMP%]{border:1px dashed #3498db;background:#f8f9fa;padding:6px 10px;border-radius:4px;font-family:inherit;font-size:inherit;font-weight:inherit;color:inherit;display:inline-block;transition:all .3s ease;vertical-align:middle;box-sizing:border-box}.editable-input.blackout[_ngcontent-%COMP%]{background:#000!important;color:transparent!important;border-color:#000!important}.editable-input.blackout[_ngcontent-%COMP%]:focus{background:#000!important;color:transparent!important;box-shadow:none!important}.editable-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#2980b9;background:#fff;box-shadow:0 0 0 2px #3498db33}.editable-input.is-invalid[_ngcontent-%COMP%]{border-color:#e74c3c;background:#fdf2f2}.readonly-input[_ngcontent-%COMP%]{background:#e2e8f0!important;border:1px solid #94a3b8!important;cursor:not-allowed!important;color:#475569!important;font-weight:500!important;box-shadow:inset 0 1px 3px #00000026!important}.readonly-input[_ngcontent-%COMP%]::placeholder{color:#94a3b8!important;opacity:.9!important;font-style:normal!important}.editable-input[_ngcontent-%COMP%]:readonly{background:#d1d5db;opacity:.85;border:1px solid #9ca3af;border-style:solid;cursor:not-allowed;color:#4b5563;font-weight:500;box-shadow:inset 0 2px 4px #00000026}.editable-input[_ngcontent-%COMP%]:readonly::placeholder{color:#9ca3af;opacity:1;font-style:italic}.date-input-container[_ngcontent-%COMP%]{position:relative;display:inline-block}.amount-input-container[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;justify-content:center;position:relative}.btn-toggle-debt[_ngcontent-%COMP%]{background:#e74c3c;color:#fff;border:none;border-radius:50%;width:22px;height:22px;font-size:12px;font-weight:700;cursor:pointer;display:flex;align-items:center;justify-content:center;margin-left:6px;transition:all .2s ease;line-height:1;padding:0}.btn-toggle-debt[_ngcontent-%COMP%]:hover{background:#c0392b;transform:scale(1.1)}.btn-toggle-debt[_ngcontent-%COMP%]:active{transform:scale(.95)}.btn-toggle-debt.active[_ngcontent-%COMP%]{background:#28a745}.btn-toggle-debt.active[_ngcontent-%COMP%]:hover{background:#218838}.editable-input.date-input[_ngcontent-%COMP%]{min-width:140px;width:140px}input[type=date][_ngcontent-%COMP%]{color-scheme:light}input[type=date][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{filter:none;opacity:1;cursor:pointer}.editable-input.number-input[_ngcontent-%COMP%]{text-align:right;min-width:110px;width:110px}.editable-input.large-input[_ngcontent-%COMP%]{min-width:280px;width:280px}.editable-input.dni-input[_ngcontent-%COMP%]{min-width:100px;width:100px;text-align:center}.header[_ngcontent-%COMP%]{padding:5px 0;position:relative;width:100%}.logo-section[_ngcontent-%COMP%]{width:100%;display:table}.logo-left[_ngcontent-%COMP%]{display:table-cell;width:50%;text-align:left;vertical-align:top}.logo-right[_ngcontent-%COMP%]{display:table-cell;width:50%;text-align:right;vertical-align:top}.logo-placeholder[_ngcontent-%COMP%]{display:inline-block;padding:10px 20px;background:#ecf0f1;border:2px dashed #bdc3c7;color:#7f8c8d;font-weight:700;font-size:12px}.logo-placeholder.small[_ngcontent-%COMP%]{padding:5px 10px;font-size:10px}.date-location[_ngcontent-%COMP%]{text-align:right;font-size:11px;margin:10px 0}.formatted-date[_ngcontent-%COMP%]{margin-top:8px;font-size:12px;color:#2c3e50;font-weight:500}.line[_ngcontent-%COMP%]{border-top:2px solid black;margin:5px 0 10px}.red-header[_ngcontent-%COMP%]{color:#fff;text-align:center;padding:10px;font-weight:700;font-size:13px;margin:10px 0}.client-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin:15px 0}.client-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #ccc;font-size:12px}.client-table[_ngcontent-%COMP%]   td.label-cell[_ngcontent-%COMP%]{background:#f8f9fa}.label-cell[_ngcontent-%COMP%]{width:40%;font-weight:400;background:#f8f9fa}.input-cell[_ngcontent-%COMP%]{width:60%;position:relative}.highlight[_ngcontent-%COMP%]{font-weight:700}.congratulations[_ngcontent-%COMP%]{padding:15px;text-align:center;font-size:12px;line-height:1.5;margin:15px 0}.date-highlight[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:14px;padding:15px 0}.debt-header[_ngcontent-%COMP%]{color:#fff;text-align:center;padding:10px;font-weight:700;font-size:12px;margin:15px 0 0}.debt-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;table-layout:fixed}.debt-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .debt-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ccc;padding:12px;text-align:center;font-size:12px;vertical-align:middle}.highlight-amount[_ngcontent-%COMP%]{background:#ff0;font-weight:700;font-size:13px}.amount[_ngcontent-%COMP%]{font-weight:700}.payment-header-clean[_ngcontent-%COMP%]{background:none;padding:12px;font-size:14px;font-weight:700;border:none}.payment-header-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.payment-title[_ngcontent-%COMP%]{font-weight:700;font-size:14px}.payment-row[_ngcontent-%COMP%]{padding:12px;border:1px solid #ccc;font-size:13px;background:#f8f9fa}.payment-row-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:15px;flex-wrap:wrap}.payment-info[_ngcontent-%COMP%]{flex:1;font-weight:500;order:1}.payment-actions[_ngcontent-%COMP%]{display:flex;gap:8px;flex-shrink:0;order:2}.payment-observation-unique[_ngcontent-%COMP%]{border:1px solid #ccc;padding:15px;background:#fff9e6;font-size:12px}.observation-header[_ngcontent-%COMP%]{font-weight:700;color:#d32f2f;margin-bottom:8px;font-size:13px}.observation-content[_ngcontent-%COMP%]{white-space:pre-line;line-height:1.4;color:#2c3e50}.btn-sm[_ngcontent-%COMP%]{font-size:12px;padding:6px 12px;border-radius:4px}.btn-outline-primary[_ngcontent-%COMP%]{background:#fff;color:#3498db;border:1px solid #3498db}.btn-outline-primary[_ngcontent-%COMP%]:hover{background:#3498db;color:#fff}.btn-outline-danger[_ngcontent-%COMP%]{background:#fff;color:#e74c3c;border:1px solid #e74c3c}.btn-outline-danger[_ngcontent-%COMP%]:hover{background:#e74c3c;color:#fff}.btn-outline-danger[_ngcontent-%COMP%]:disabled{background:#f8f9fa;color:#6c757d;border-color:#dee2e6;cursor:not-allowed}.payment-section[_ngcontent-%COMP%]{padding:20px;text-align:center;color:#6c757d;font-style:italic;background:#f8f9fa}.instructions[_ngcontent-%COMP%]{padding:15px;text-align:justify;font-size:12px;line-height:1.4;margin:15px 0}.section-header[_ngcontent-%COMP%]{background:#e0e0e0;padding:8px 12px;font-weight:700;font-size:11px;margin:10px 0 0}.section-content[_ngcontent-%COMP%]{padding:10px 12px;font-size:12px;border:1px solid #e0e0e0;border-top:none}.centers-content[_ngcontent-%COMP%]{width:100%;display:table}.bcp-logo[_ngcontent-%COMP%]{color:#203764;font-weight:700;font-size:14px;display:table-cell;width:80px;text-align:center;vertical-align:middle}.center[_ngcontent-%COMP%]{display:table-cell;width:120px;text-align:center;color:red;vertical-align:middle}.dni[_ngcontent-%COMP%]{display:table-cell;width:150px;text-align:center;vertical-align:middle;padding-left:20px}.contact-info[_ngcontent-%COMP%]{padding:10px 12px;font-size:12px;text-align:justify;margin:10px 0}.signature-section[_ngcontent-%COMP%]{margin-top:30px;padding:10px 12px;width:100%;display:table}.signature-left[_ngcontent-%COMP%]{display:table-cell;width:25%;vertical-align:top;text-align:left}.signature-center[_ngcontent-%COMP%]{display:table-cell;width:50%;vertical-align:top;text-align:center;padding:0 10px}.signature-right[_ngcontent-%COMP%]{display:table-cell;width:25%;vertical-align:top;text-align:center}.footer-notes[_ngcontent-%COMP%]{padding:10px 12px;font-size:9px;border-top:1px solid #ccc;margin-top:20px}.footer-notes[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:3px 0;line-height:1.3}.error-message[_ngcontent-%COMP%]{color:#e74c3c;font-size:10px;font-style:italic;margin-top:4px;display:block}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:9999}.modal-dialog[_ngcontent-%COMP%]{background:#fff;border-radius:16px;width:420px;max-width:90%;box-shadow:0 20px 25px -5px #0000001a,0 10px 10px -5px #0000000a;position:relative;overflow:hidden;animation:_ngcontent-%COMP%_fadeInUp .3s ease-out}.modal-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#8b5cf6);color:#fff;padding:20px 24px;display:flex;justify-content:space-between;align-items:center;cursor:move}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#fff!important}.close-btn[_ngcontent-%COMP%]{border:none;background:#fff3;color:#fff;font-size:24px;cursor:pointer;width:32px;height:32px;border-radius:8px;display:flex;align-items:center;justify-content:center;transition:all .2s}.close-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d}.modal-dialog.enhanced[_ngcontent-%COMP%]{width:420px}.modal-body[_ngcontent-%COMP%]{padding:24px;display:flex;flex-direction:column;gap:20px}.modal-field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.modal-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#374151;display:flex;align-items:center;gap:6px}.modal-body[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #e5e7eb;border-radius:10px;font-size:14px;transition:all .2s;background:#f9fafb}.modal-body[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;background:#fff;box-shadow:0 0 0 3px #3b82f61a}.modal-footer[_ngcontent-%COMP%]{padding:16px 24px 24px;display:flex;gap:12px;justify-content:flex-end}.modal-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:12px 24px;border-radius:10px;font-weight:600;font-size:14px;transition:all .2s;border:none;cursor:pointer}.modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background:#f3f4f6;color:#374151}.modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover{background:#e5e7eb}.modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#8b5cf6);color:#fff;box-shadow:0 4px 6px #3b82f64d}.modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 12px #3b82f666}.dark[_nghost-%COMP%]   .modal-backdrop[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .modal-backdrop[_ngcontent-%COMP%]{background:#000000b3;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px)}.dark[_nghost-%COMP%]   .modal-dialog[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{background:#1f2937;box-shadow:0 20px 25px -5px #00000080,0 10px 10px -5px #0000004d}.dark[_nghost-%COMP%]   .modal-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .modal-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#e5e7eb}.dark[_nghost-%COMP%]   .modal-body[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .modal-body[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:#374151;border-color:#4b5563;color:#f9fafb}.dark[_nghost-%COMP%]   .modal-body[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .dark   [_nghost-%COMP%]   .modal-body[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#3b82f6;background:#374151;box-shadow:0 0 0 3px #3b82f633}.dark[_nghost-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background:#374151;color:#e5e7eb}.dark[_nghost-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover, .dark   [_nghost-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover{background:#4b5563}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(15px)}to{opacity:1;transform:translateY(0)}}.toast-container[_ngcontent-%COMP%]{position:fixed;top:100px;right:20px;z-index:10000;display:flex;flex-direction:column;gap:10px;max-width:400px}.toast[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:16px 20px;box-shadow:0 4px 12px #00000026;display:flex;align-items:center;gap:12px;border-left:4px solid;animation:_ngcontent-%COMP%_slideInRight .3s ease-out;min-width:300px}.toast.error[_ngcontent-%COMP%]{border-left-color:#ef4444;background:#fef2f2}.toast.warning[_ngcontent-%COMP%]{border-left-color:#f59e0b;background:#fffbeb}.toast-icon[_ngcontent-%COMP%]{font-size:20px}.toast-content[_ngcontent-%COMP%]{flex:1;font-size:14px;color:#374151;line-height:1.4}.toast-close[_ngcontent-%COMP%]{background:0 0;border:0;font-size:18px;cursor:pointer;color:#9ca3af;padding:0;width:20px;height:20px;display:flex;align-items:center;justify-content:center}.toast-close[_ngcontent-%COMP%]:hover{color:#374151}@keyframes _ngcontent-%COMP%_slideInRight{0%{transform:translate(400px);opacity:0}to{transform:translate(0);opacity:1}}@media (max-width: 1024px){.document-container[_ngcontent-%COMP%], .document[_ngcontent-%COMP%]{padding:20px}}@media (max-width: 768px){.payment-agreement-container[_ngcontent-%COMP%]{padding:10px}.document-header[_ngcontent-%COMP%]{flex-direction:column;gap:15px;text-align:center}.document-actions[_ngcontent-%COMP%]{justify-content:center}.document-container[_ngcontent-%COMP%]{padding:15px}.document[_ngcontent-%COMP%]{padding:15px;font-size:11px}.editable-input[_ngcontent-%COMP%]{min-width:100px;font-size:11px}.editable-input.large-input[_ngcontent-%COMP%]{min-width:200px;width:200px}}@media (max-width: 480px){.document[_ngcontent-%COMP%]{font-size:10px;padding:10px}.editable-input[_ngcontent-%COMP%]{min-width:80px;font-size:10px;padding:4px 6px}.editable-input.large-input[_ngcontent-%COMP%]{min-width:160px;width:160px}.editable-input.number-input[_ngcontent-%COMP%]{min-width:85px;width:85px}.client-table[_ngcontent-%COMP%]{font-size:10px}.client-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:6px 8px}}"]});let a=l;return a})();var tt=(()=>{let l=class l{};l.\u0275fac=function(e){return new(e||l)},l.\u0275cmp=k({type:l,selectors:[["app-agreements"]],decls:1,vars:0,template:function(e,c){e&1&&f(0,"app-agreements-page")},dependencies:[ae],encapsulation:2});let a=l;return a})();export{tt as AgreementsComponent};
