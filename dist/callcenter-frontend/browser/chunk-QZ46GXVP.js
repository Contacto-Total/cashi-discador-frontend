import{a as H,b as Ee}from"./chunk-HFM63KZ2.js";import{c as ne}from"./chunk-2JQMTGI5.js";import"./chunk-NO4444JX.js";import{C as X,E as Y,b as ve,c as j,d as ee,e as $,f as he,k as _e,l as ye,m as U,n as ke,q as Ce,r as J,s as G,t as q,v as we}from"./chunk-5CXVSPU7.js";import{Fa as F,Ka as ue,L as de,Ma as xe,O as se,Va as fe,X as ce,bb as R,da as me,e as ae,ea as pe,ha as ge,mb as P,ob as B,pb as z,ra as be,x as le}from"./chunk-7OAV6HC2.js";import"./chunk-CVSECBKN.js";import{$a as l,Bc as S,Fc as D,Gc as oe,Kb as c,Lb as o,Mb as a,Nb as b,O as re,Rb as L,Sb as O,Ub as k,Wb as f,X as ie,Yb as p,cd as N,dd as I,fb as Q,ga as T,gc as E,jc as C,jd as V,kc as d,lc as _,ma as u,mb as A,mc as w,na as x,rb as h,ub as Z,wa as y}from"./chunk-3MKZGHO3.js";function Se(n=new Date){let s=String(n.getDate()).padStart(2,"0"),r=String(n.getMonth()+1).padStart(2,"0");return`${s}/${r}`}function Me(n){return n.trim().toUpperCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"")}function K(n,s){if(!n)return"";let r={HOY:Se(new Date),MANANA:Se(new Date(Date.now()+1440*60*1e3))};for(let[e,t]of Object.entries(s||{}))r[Me(e)]=String(t??"");return!r.MORA&&r.SALDO_MORA&&(r.MORA=r.SALDO_MORA),!r.BAJA30&&r.BAJA_30&&(r.BAJA30=r.BAJA_30),n.replace(/\{([^}]+)\}/g,(e,t)=>{let i=Me(t);return i in r?r[i]:`{${t}}`})}function W(n){let s=(n||"").length;return s===0?{chars:0,segs:0}:s<=160?{chars:s,segs:1}:{chars:s,segs:Math.ceil(s/153)}}function Ie(n,s){if(n&1){let r=k();o(0,"button",42),f("click",function(){let t=u(r).$implicit,i=p(3);return x(i.toggleChip(t.key,t.affectsSelects!==!1))}),d(1),a()}if(n&2){let r=s.$implicit,e=p(3);C(e.isActive(r.key)?"px-2.5 py-1 rounded-md text-white text-[11px] font-bold bg-gradient-to-r from-blue-600 to-violet-600 hover:from-blue-700 hover:to-violet-700 shadow-sm transition-all cursor-pointer":"px-2.5 py-1 rounded-md text-gray-700 dark:text-gray-300 text-[11px] font-semibold bg-white dark:bg-gray-700 hover:bg-blue-50 dark:hover:bg-gray-600 hover:text-blue-700 dark:hover:text-blue-300 border border-gray-300 dark:border-gray-600 hover:border-blue-400 dark:hover:border-blue-500 transition-all cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed"),c("disabled",e.isChipDisabled(r.key)),l(),w(" ",r.label," ")}}function Ve(n,s){if(n&1&&(L(0),o(1,"div",38)(2,"div",39),d(3),a(),o(4,"div",40),h(5,Ie,2,4,"button",41),a()(),O()),n&2){let r=s.$implicit;l(3),_(r.title),l(2),c("ngForOf",r.items)}}function Fe(n,s){n&1&&(o(0,"div",43)(1,"div",44)(2,"label",45),d(3,"Sumar:"),a(),b(4,"input",46),a()())}function Re(n,s){if(n&1&&(o(0,"div",34)(1,"div",35),h(2,Ve,6,2,"ng-container",36),a(),h(3,Fe,5,0,"div",37),a()),n&2){let r=p();l(2),c("ngForOf",r.chipGroups),l(),c("ngIf",r.selectedChips.has("LTD")||r.selectedChips.has("LTDE")||r.selectedChips.has("LTD_LTDE"))}}function Pe(n,s){if(n&1&&(o(0,"option",56),d(1),a()),n&2){let r=s.$implicit;c("value",r.key),l(),_(r.label)}}function Be(n,s){if(n&1&&(o(0,"div",57),b(1,"input",58),o(2,"label",59),b(3,"input",60),o(4,"span",61),d(5),a()(),o(6,"span",62),d(7),a(),o(8,"label",59),b(9,"input",63),o(10,"span",61),d(11),a()(),b(12,"input",64),a()),n&2){let r,e,t,i=p().$implicit,m=p(2);l(5),_((r=i.get("inclusiveMin"))!=null&&r.value?"\u2264":"<"),l(2),_(m.fieldLabel((e=i.get("field"))==null?null:e.value)),l(4),_((t=i.get("inclusiveMax"))!=null&&t.value?"\u2264":"<")}}function ze(n,s){if(n&1&&(o(0,"div",71)(1,"span",62),d(2),a(),o(3,"label",59),b(4,"input",60),o(5,"span",72),d(6),a()(),b(7,"input",73),a()),n&2){let r,e,t=p(2).$implicit,i=p(2);l(2),_(i.fieldLabel((r=t.get("field"))==null?null:r.value)),l(4),_((e=t.get("inclusiveMin"))!=null&&e.value?"\u2265":">")}}function je(n,s){if(n&1&&(o(0,"div",71)(1,"span",62),d(2),a(),o(3,"label",59),b(4,"input",63),o(5,"span",72),d(6),a()(),b(7,"input",74),a()),n&2){let r,e,t=p(2).$implicit,i=p(2);l(2),_(i.fieldLabel((r=t.get("field"))==null?null:r.value)),l(4),_((e=t.get("inclusiveMax"))!=null&&e.value?"\u2264":"<")}}function $e(n,s){if(n&1){let r=k();o(0,"div")(1,"div",65)(2,"button",66),f("click",function(){u(r);let t=p().index,i=p(2);return x(i.changeOperator(t,"gt"))}),d(3," Mayor "),a(),o(4,"button",66),f("click",function(){u(r);let t=p().index,i=p(2);return x(i.changeOperator(t,"lt"))}),d(5," Menor "),a()(),o(6,"div",67),h(7,ze,8,2,"div",68)(8,je,8,2,"div",68),a(),o(9,"label",69)(10,"input",70),f("change",function(t){u(r);let i=p().index,m=p(2);return x(m.toggleInterval(i,t.target.checked))}),a(),o(11,"span"),d(12,"Usar intervalo"),a()()()}if(n&2){let r,e,t,i,m,g=p().$implicit;l(2),C(((r=g.get("mode"))==null?null:r.value)==="gt"?"flex-1 px-2 py-1 rounded-md text-white text-[11px] font-bold bg-gradient-to-r from-blue-600 to-violet-600 transition-all cursor-pointer":"flex-1 px-2 py-1 rounded-md text-gray-700 dark:text-gray-300 text-[11px] font-semibold bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 transition-all cursor-pointer"),l(2),C(((e=g.get("mode"))==null?null:e.value)==="lt"?"flex-1 px-2 py-1 rounded-md text-white text-[11px] font-bold bg-gradient-to-r from-blue-600 to-violet-600 transition-all cursor-pointer":"flex-1 px-2 py-1 rounded-md text-gray-700 dark:text-gray-300 text-[11px] font-semibold bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 transition-all cursor-pointer"),l(3),c("ngIf",(t=g.get("useMin"))==null?null:t.value),l(),c("ngIf",(i=g.get("useMax"))==null?null:i.value),l(2),c("checked",((m=g.get("useMin"))==null?null:m.value)&&((m=g.get("useMax"))==null?null:m.value))}}function Ue(n,s){if(n&1){let r=k();o(0,"div",49)(1,"div",50)(2,"select",51),h(3,Pe,2,2,"option",52),a(),o(4,"button",53),f("click",function(){let t=u(r).index,i=p(2);return x(i.removeRange(t))}),b(5,"lucide-angular",12),a()(),h(6,Be,13,3,"div",54)(7,$e,13,7,"div",55),a()}if(n&2){let r,e,t=s.$implicit,i=p(2);c("formGroup",t),l(3),c("ngForOf",i.rangeFields),l(2),c("img",i.Trash2)("size",12),l(),c("ngIf",((r=t.get("useMin"))==null?null:r.value)&&((r=t.get("useMax"))==null?null:r.value)),l(),c("ngIf",!((e=t.get("useMin"))!=null&&e.value&&((e=t.get("useMax"))!=null&&e.value)))}}function Je(n,s){if(n&1){let r=k();o(0,"div",34)(1,"button",47),f("click",function(){u(r);let t=p();return x(t.addRange())}),b(2,"lucide-angular",12),d(3," A\xF1adir rango "),a(),o(4,"div",35),h(5,Ue,8,6,"div",48),a()()}if(n&2){let r=p();l(2),c("img",r.Plus)("size",14),l(3),c("ngForOf",r.rangosFA.controls)}}function Ge(n,s){if(n&1){let r=k();o(0,"div",34)(1,"div",75)(2,"label",76)(3,"input",77),f("change",function(t){u(r);let i=p();return x(i.toggleCond(t,"PROMESAS_HOY"))}),a(),o(4,"span",78),d(5,"Promesas para hoy"),a()(),o(6,"label",76)(7,"input",77),f("change",function(t){u(r);let i=p();return x(i.toggleCond(t,"PROMESAS_MANANA"))}),a(),o(8,"span",78),d(9,"Promesas para ma\xF1ana"),a()(),o(10,"label",76)(11,"input",77),f("change",function(t){u(r);let i=p();return x(i.toggleCond(t,"PROMESAS_MANANA2"))}),a(),o(12,"span",78),d(13,"Promesas pasado ma\xF1ana"),a()(),o(14,"label",76)(15,"input",77),f("change",function(t){u(r);let i=p();return x(i.toggleCond(t,"PROMESAS_ROTAS"))}),a(),o(16,"span",78),d(17,"Promesas rotas"),a()()()()}if(n&2){let r=p();l(3),c("checked",r.isConditionChecked("PROMESAS_HOY")),l(4),c("checked",r.isConditionChecked("PROMESAS_MANANA")),l(4),c("checked",r.isConditionChecked("PROMESAS_MANANA2")),l(4),c("checked",r.isConditionChecked("PROMESAS_ROTAS"))}}function qe(n,s){n&1&&(o(0,"div",34)(1,"div",75)(2,"label",76),b(3,"input",79),o(4,"span",78),d(5,"Sin contenido"),a()(),o(6,"label",76),b(7,"input",80),o(8,"span",78),d(9,"Excluir promesas periodo actual"),a()(),o(10,"label",76),b(11,"input",81),o(12,"span",78),d(13,"Excluir compromisos"),a()(),o(14,"label",76),b(15,"input",82),o(16,"span",78),d(17,"Excluir blacklist"),a()()()())}function Xe(n,s){if(n&1&&(o(0,"div",83),d(1),a()),n&2){let r=p();l(),w(" ",r.previewText()," ")}}function Ye(n,s){n&1&&(o(0,"div",84),d(1," Sin preview "),a())}var Te=(()=>{let s=class s{get rangosFA(){return this.form.get("rangos")}constructor(e,t){this.fb=e,this.api=t,this.closed=new Z,this.saved=new Z,this.X=P,this.Settings=xe,this.Filter=ce,this.ListChecks=ge,this.Ban=ae,this.Plus=F,this.Trash2=R,this.activeTab=y("variables"),this.saving=y(!1),this.selectedChips=new Set,this.chipGroups=[{title:"Informaci\xF3n Personal",items:[{key:"NOMBRE",label:"Nombre"},{key:"NOMBRECOMPLETO",label:"Nombre Completo"},{key:"EMAIL",label:"Correo"}]},{title:"Informaci\xF3n Financiera",items:[{key:"LTD",label:"LTD"},{key:"LTDE",label:"LTDE"},{key:"LTD_LTDE",label:"LTD + LTDE"},{key:"BAJA30",label:"Baja 30"},{key:"SALDO_MORA",label:"Mora"},{key:"BAJA30_SALDOMORA",label:"Baja30 + Mora"},{key:"PKM",label:"PKM"},{key:"CAPITAL",label:"Capital"},{key:"DEUDA_TOTAL",label:"Deuda Total"},{key:"DIASMORA",label:"D\xEDas Mora"}]},{title:"Fechas",items:[{key:"HOY",label:"Hoy"},{key:"MANANA",label:"Ma\xF1ana"}]},{title:"Cuenta",items:[{key:"NUMCUENTAPMCP",label:"N\xFAmero de Cuenta"}]}],this.rangeFields=[{key:"BAJA30",label:"Baja 30"},{key:"SALDO_MORA",label:"Mora"},{key:"DEUDA_TOTAL",label:"Deuda Total"},{key:"CAPITAL",label:"Capital"},{key:"DIASMORA",label:"D\xEDas Mora"}],this.form=this.fb.nonNullable.group({nombre:["",ee.required],tramo:["3"],plantillaTexto:["",ee.required],importeExtra:[0],rangos:this.fb.array([]),noContenido:[!1],excluirPromesasPeriodoActual:[!1],excluirCompromisos:[!1],excluirBlacklist:[!1]}),this.condiciones=[],this.previewSample=y(null),this.previewText=D(()=>{let i=this.form.get("plantillaTexto")?.value||"",m=this.previewSample();return!m||!i?"":K(i,m)}),this.smsLen=i=>W(i)}ngOnInit(){this.combo&&this.loadComboData()}loadComboData(){this.form.patchValue({nombre:this.combo.name||"",tramo:this.combo.tramo||"3",plantillaTexto:this.combo.plantillaTexto||"",importeExtra:this.combo.importeExtra||0,noContenido:this.combo.restricciones?.noContenido||!1,excluirPromesasPeriodoActual:this.combo.restricciones?.excluirPromesasPeriodoActual||!1,excluirCompromisos:this.combo.restricciones?.excluirCompromisos||!1,excluirBlacklist:this.combo.restricciones?.excluirBlacklist||!1}),this.selectedChips.clear(),this.combo.selects&&this.combo.selects.forEach(t=>this.selectedChips.add(t)),this.rangosFA.clear(),(this.combo.rangos||[]).forEach(t=>{this.rangosFA.push(this.fb.nonNullable.group({field:[t.field||"BAJA30"],min:[t.min||0],max:[t.max||0],inclusiveMin:[t.inclusiveMin!==!1],inclusiveMax:[t.inclusiveMax!==!1],useMin:[t.useMin!==!1],useMax:[t.useMax!==!1],mode:[t.mode||"gt"]}))}),this.condiciones=this.combo.condiciones||[],this.loadPreviewSample()}loadPreviewSample(){this.api.previewFromCombo(this.combo.id,1).subscribe({next:e=>{e&&e.length>0&&this.previewSample.set(e[0])}})}toggleChip(e,t=!0){this.selectedChips.has(e)?this.selectedChips.delete(e):(this.selectedChips.add(e),e==="LTD_LTDE"?(this.selectedChips.delete("LTD"),this.selectedChips.delete("LTDE")):(e==="LTD"||e==="LTDE")&&this.selectedChips.delete("LTD_LTDE"),e==="BAJA30_SALDOMORA"?(this.selectedChips.delete("BAJA30"),this.selectedChips.delete("SALDO_MORA")):(e==="BAJA30"||e==="SALDO_MORA")&&this.selectedChips.delete("BAJA30_SALDOMORA"))}isActive(e){return this.selectedChips.has(e)}isChipDisabled(e){return!1}addRange(){this.rangosFA.push(this.fb.nonNullable.group({field:["BAJA30"],min:[0],max:[0],inclusiveMin:[!0],inclusiveMax:[!0],useMin:[!0],useMax:[!1],mode:["gt"]}))}removeRange(e){this.rangosFA.removeAt(e)}changeOperator(e,t){this.rangosFA.at(e).patchValue({mode:t,useMin:t==="gt",useMax:t==="lt"})}toggleInterval(e,t){this.rangosFA.at(e).patchValue({useMin:t,useMax:t})}fieldLabel(e){return this.rangeFields.find(t=>t.key===e)?.label||e}toggleCond(e,t){if(e.target.checked)this.condiciones.includes(t)||this.condiciones.push(t);else{let i=this.condiciones.indexOf(t);i>=0&&this.condiciones.splice(i,1)}}isConditionChecked(e){return this.condiciones.includes(e)}close(){this.closed.emit()}save(){if(this.form.invalid)return;this.saving.set(!0);let e=this.form.getRawValue(),t={name:e.nombre,tramo:e.tramo,selects:Array.from(this.selectedChips),plantillaTexto:e.plantillaTexto,importeExtra:e.importeExtra,rangos:e.rangos,condiciones:this.condiciones,restricciones:{noContenido:e.noContenido,excluirPromesasPeriodoActual:e.excluirPromesasPeriodoActual,excluirCompromisos:e.excluirCompromisos,excluirBlacklist:e.excluirBlacklist}};this.api.update(this.combo.id,t).subscribe({next:()=>{this.saving.set(!1),this.saved.emit(),this.close()},error:i=>{console.error("Error saving combo:",i),this.saving.set(!1)}})}};s.\u0275fac=function(t){return new(t||s)(Q(X),Q(H))},s.\u0275cmp=A({type:s,selectors:[["app-edit-combo-modal"]],inputs:{combo:"combo"},outputs:{closed:"closed",saved:"saved"},decls:60,vars:32,consts:[["noPreview",""],[1,"fixed","inset-0","bg-black/60","dark:bg-black/70","backdrop-blur-sm","z-[999]","animate-fade-in",3,"click"],[1,"fixed","inset-0","z-[1000]","flex","items-center","justify-center","p-4","pointer-events-none"],[1,"bg-white","dark:bg-gray-800","rounded-xl","shadow-2xl","border","border-gray-200","dark:border-gray-700","w-full","max-w-5xl","max-h-[90vh]","flex","flex-col","overflow-hidden","animate-scale-in","pointer-events-auto"],[1,"flex","items-center","justify-between","px-4","py-3","border-b","border-gray-200","dark:border-gray-700","bg-gradient-to-r","from-blue-600","to-violet-600"],[1,"flex","items-center","gap-3","flex-1","min-w-0"],[1,"text-lg","font-bold","text-white","truncate"],[1,"px-2","py-1","border-0","rounded-md","bg-white/20","text-white","text-sm","font-medium","cursor-pointer","focus:outline-none","focus:ring-2","focus:ring-white/50","backdrop-blur-sm",3,"formControl"],["value","3",1,"text-gray-900"],["value","5",1,"text-gray-900"],["value","CONTACTO_TOTAL",1,"text-gray-900"],[1,"p-1.5","hover:bg-white/20","rounded-lg","text-white","transition-colors","cursor-pointer","flex-shrink-0",3,"click"],[3,"img","size"],[1,"flex-1","overflow-y-auto",3,"formGroup"],[1,"grid","grid-cols-[1fr_340px]","divide-x","divide-gray-200","dark:divide-gray-700","h-full"],[1,"flex","flex-col"],[1,"p-3","border-b","border-gray-200","dark:border-gray-700","bg-gray-50","dark:bg-gray-900/50"],["type","text","formControlName","nombre","placeholder","Nombre del tenor",1,"w-full","px-3","py-1.5","border","border-gray-300","dark:border-gray-600","rounded-lg","bg-white","dark:bg-gray-700","text-gray-900","dark:text-gray-100","text-sm","font-medium","focus:outline-none","focus:ring-2","focus:ring-blue-500","dark:focus:ring-blue-400","focus:border-blue-500","dark:focus:border-blue-400","transition-all","shadow-sm"],[1,"flex","border-b","border-gray-200","dark:border-gray-700","bg-gray-50","dark:bg-gray-800/50"],["type","button",1,"flex-1","flex","items-center","justify-center","gap-1","px-3","py-2","text-xs","font-medium","transition-all","cursor-pointer","border-b-2",3,"click"],[1,"flex-1","overflow-y-auto","p-3","bg-white","dark:bg-gray-900"],["class","animate-fade-in",4,"ngIf"],[1,"flex","flex-col","bg-gray-50","dark:bg-gray-900/50"],[1,"p-3","border-b","border-gray-200","dark:border-gray-700"],[1,"block","text-[10px]","font-bold","text-gray-500","dark:text-gray-400","uppercase","tracking-wider","mb-1.5"],["formControlName","plantillaTexto","rows","5","placeholder","Escribe tu mensaje SMS...",1,"w-full","px-2","py-1.5","border","border-gray-300","dark:border-gray-600","rounded-lg","bg-white","dark:bg-gray-700","text-gray-900","dark:text-gray-100","text-xs","focus:outline-none","focus:ring-1","focus:ring-blue-500","dark:focus:ring-blue-400","transition-all","resize-none"],[1,"flex","items-center","justify-between","mt-1.5"],[1,"text-[10px]","font-semibold","text-gray-500","dark:text-gray-400"],[1,"text-[10px]","font-bold"],[1,"flex-1","p-3","overflow-y-auto"],["class","p-2.5 bg-gradient-to-r from-blue-600 to-violet-600 text-white rounded-lg text-xs leading-relaxed shadow-lg min-h-[80px]",4,"ngIf","ngIfElse"],[1,"flex","gap-2","px-4","py-2.5","border-t","border-gray-200","dark:border-gray-700","bg-gray-50","dark:bg-gray-800/50"],["type","button",1,"flex-1","px-3","py-1.5","bg-white","dark:bg-gray-700","border","border-gray-300","dark:border-gray-600","rounded-lg","text-gray-700","dark:text-gray-300","text-xs","font-medium","hover:bg-gray-100","dark:hover:bg-gray-600","transition-all","cursor-pointer",3,"click"],["type","button",1,"flex-1","px-3","py-1.5","bg-gradient-to-r","from-blue-600","to-violet-600","hover:from-blue-700","hover:to-violet-700","text-white","rounded-lg","text-xs","font-medium","transition-all","shadow-sm","cursor-pointer","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"animate-fade-in"],[1,"space-y-2"],[4,"ngFor","ngForOf"],["class","mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",4,"ngIf"],[1,"border-b","border-gray-200","dark:border-gray-700","pb-2","last:border-0","last:pb-0"],[1,"text-[10px]","font-bold","text-gray-500","dark:text-gray-400","uppercase","tracking-wider","mb-1.5"],[1,"flex","flex-wrap","gap-1.5"],["type","button",3,"class","disabled","click",4,"ngFor","ngForOf"],["type","button",3,"click","disabled"],[1,"mt-3","pt-3","border-t","border-gray-200","dark:border-gray-700"],[1,"flex","items-center","gap-2"],[1,"text-xs","font-semibold","text-gray-700","dark:text-gray-300"],["type","number","min","0","step","1","formControlName","importeExtra","placeholder","0",1,"w-20","px-2","py-1","border","border-gray-300","dark:border-gray-600","rounded-md","bg-white","dark:bg-gray-700","text-gray-900","dark:text-gray-100","text-xs","focus:outline-none","focus:ring-1","focus:ring-blue-500","dark:focus:ring-blue-400","transition-all"],["type","button",1,"w-full","flex","items-center","justify-center","gap-1.5","px-3","py-1.5","bg-gradient-to-r","from-blue-600","to-violet-600","hover:from-blue-700","hover:to-violet-700","text-white","rounded-lg","text-xs","font-medium","transition-all","shadow-sm","cursor-pointer","mb-2",3,"click"],["class","bg-gray-50 dark:bg-gray-700/50 border border-gray-200 dark:border-gray-600 rounded-lg p-2",3,"formGroup",4,"ngFor","ngForOf"],[1,"bg-gray-50","dark:bg-gray-700/50","border","border-gray-200","dark:border-gray-600","rounded-lg","p-2",3,"formGroup"],[1,"flex","items-center","gap-2","mb-2"],["formControlName","field",1,"flex-1","px-2","py-1","border","border-gray-300","dark:border-gray-600","rounded-md","bg-white","dark:bg-gray-700","text-gray-900","dark:text-gray-100","text-xs","cursor-pointer","focus:outline-none","focus:ring-1","focus:ring-blue-500"],[3,"value",4,"ngFor","ngForOf"],["type","button",1,"p-1","bg-red-50","dark:bg-red-900/30","border","border-red-300","dark:border-red-700","rounded-md","text-red-700","dark:text-red-300","hover:bg-red-100","dark:hover:bg-red-900/50","transition-all","cursor-pointer",3,"click"],["class","flex items-center gap-1.5 flex-wrap text-xs",4,"ngIf"],[4,"ngIf"],[3,"value"],[1,"flex","items-center","gap-1.5","flex-wrap","text-xs"],["type","number","formControlName","min","placeholder","m\xEDn",1,"w-16","px-2","py-1","border","border-gray-300","dark:border-gray-600","rounded-md","bg-white","dark:bg-gray-700","text-gray-900","dark:text-gray-100","text-xs"],[1,"flex","items-center","gap-0.5","cursor-pointer"],["type","checkbox","formControlName","inclusiveMin",1,"w-3","h-3"],[1,"font-bold","text-gray-700","dark:text-gray-300"],[1,"px-2","py-0.5","bg-blue-100","dark:bg-blue-900/30","text-blue-700","dark:text-blue-300","rounded","text-[10px]","font-bold"],["type","checkbox","formControlName","inclusiveMax",1,"w-3","h-3"],["type","number","formControlName","max","placeholder","m\xE1x",1,"w-16","px-2","py-1","border","border-gray-300","dark:border-gray-600","rounded-md","bg-white","dark:bg-gray-700","text-gray-900","dark:text-gray-100","text-xs"],[1,"flex","gap-1.5","mb-2"],["type","button",3,"click"],[1,"space-y-1.5","text-xs"],["class","flex items-center gap-1.5",4,"ngIf"],[1,"flex","items-center","gap-1.5","mt-2","cursor-pointer","text-xs","text-gray-700","dark:text-gray-300"],["type","checkbox",1,"w-3","h-3",3,"change","checked"],[1,"flex","items-center","gap-1.5"],[1,"font-bold"],["type","number","formControlName","min","placeholder","valor",1,"w-20","px-2","py-1","border","border-gray-300","dark:border-gray-600","rounded-md","bg-white","dark:bg-gray-700","text-xs"],["type","number","formControlName","max","placeholder","valor",1,"w-20","px-2","py-1","border","border-gray-300","dark:border-gray-600","rounded-md","bg-white","dark:bg-gray-700","text-xs"],[1,"grid","grid-cols-1","gap-2"],[1,"flex","items-center","gap-2","p-2","bg-gray-50","dark:bg-gray-700/50","border","border-gray-200","dark:border-gray-600","rounded-lg","cursor-pointer","hover:bg-blue-50","dark:hover:bg-gray-600","transition-all"],["type","checkbox",1,"w-3.5","h-3.5",3,"change","checked"],[1,"text-xs","font-medium","text-gray-700","dark:text-gray-300"],["type","checkbox","formControlName","noContenido",1,"w-3.5","h-3.5"],["type","checkbox","formControlName","excluirPromesasPeriodoActual",1,"w-3.5","h-3.5"],["type","checkbox","formControlName","excluirCompromisos",1,"w-3.5","h-3.5"],["type","checkbox","formControlName","excluirBlacklist",1,"w-3.5","h-3.5"],[1,"p-2.5","bg-gradient-to-r","from-blue-600","to-violet-600","text-white","rounded-lg","text-xs","leading-relaxed","shadow-lg","min-h-[80px]"],[1,"p-4","text-center","text-xs","text-gray-500","dark:text-gray-400","bg-white","dark:bg-gray-800","rounded-lg","border","border-gray-200","dark:border-gray-700","border-dashed","min-h-[80px]","flex","items-center","justify-center"]],template:function(t,i){if(t&1){let m=k();o(0,"div",1),f("click",function(){return u(m),x(i.close())}),a(),o(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h2",6),d(6),a(),o(7,"select",7)(8,"option",8),d(9,"Tramo 3"),a(),o(10,"option",9),d(11,"Tramo 5"),a(),o(12,"option",10),d(13,"Cartera Propia"),a()()(),o(14,"button",11),f("click",function(){return u(m),x(i.close())}),b(15,"lucide-angular",12),a()(),o(16,"form",13)(17,"div",14)(18,"div",15)(19,"div",16),b(20,"input",17),a(),o(21,"div",18)(22,"button",19),f("click",function(){return u(m),x(i.activeTab.set("variables"))}),b(23,"lucide-angular",12),d(24," Variables "),a(),o(25,"button",19),f("click",function(){return u(m),x(i.activeTab.set("rangos"))}),b(26,"lucide-angular",12),d(27," Rangos "),a(),o(28,"button",19),f("click",function(){return u(m),x(i.activeTab.set("condiciones"))}),b(29,"lucide-angular",12),d(30," Condiciones "),a(),o(31,"button",19),f("click",function(){return u(m),x(i.activeTab.set("restricciones"))}),b(32,"lucide-angular",12),d(33," Restricciones "),a()(),o(34,"div",20),h(35,Re,4,2,"div",21)(36,Je,6,3,"div",21)(37,Ge,18,4,"div",21)(38,qe,18,0,"div",21),a()(),o(39,"div",22)(40,"div",23)(41,"label",24),d(42,"Plantilla SMS"),a(),b(43,"textarea",25),o(44,"div",26)(45,"span",27),d(46,"Caracteres:"),a(),o(47,"span",28),d(48),a()()(),o(49,"div",29)(50,"label",24),d(51,"Vista Previa"),a(),h(52,Xe,2,1,"div",30)(53,Ye,2,0,"ng-template",null,0,S),a()()()(),o(55,"div",31)(56,"button",32),f("click",function(){return u(m),x(i.close())}),d(57," Cancelar "),a(),o(58,"button",33),f("click",function(){return u(m),x(i.save())}),d(59),a()()()()}if(t&2){let m,g,v=E(54);l(6),_(i.combo.name),l(),c("formControl",i.form.controls.tramo),l(8),c("img",i.X)("size",20),l(),c("formGroup",i.form),l(6),C(i.activeTab()==="variables"?"border-blue-600 dark:border-blue-400 text-blue-600 dark:text-blue-400 bg-white dark:bg-gray-800":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700"),l(),c("img",i.Settings)("size",14),l(2),C(i.activeTab()==="rangos"?"border-blue-600 dark:border-blue-400 text-blue-600 dark:text-blue-400 bg-white dark:bg-gray-800":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700"),l(),c("img",i.Filter)("size",14),l(2),C(i.activeTab()==="condiciones"?"border-blue-600 dark:border-blue-400 text-blue-600 dark:text-blue-400 bg-white dark:bg-gray-800":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700"),l(),c("img",i.ListChecks)("size",14),l(2),C(i.activeTab()==="restricciones"?"border-blue-600 dark:border-blue-400 text-blue-600 dark:text-blue-400 bg-white dark:bg-gray-800":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700"),l(),c("img",i.Ban)("size",14),l(3),c("ngIf",i.activeTab()==="variables"),l(),c("ngIf",i.activeTab()==="rangos"),l(),c("ngIf",i.activeTab()==="condiciones"),l(),c("ngIf",i.activeTab()==="restricciones"),l(9),C((((m=i.form.get("plantillaTexto"))==null||m.value==null?null:m.value.length)||0)>160?"text-red-600 dark:text-red-400":"text-blue-700 dark:text-blue-400"),l(),w(" ",((g=i.form.get("plantillaTexto"))==null||g.value==null?null:g.value.length)||0,"/160 "),l(4),c("ngIf",i.previewText())("ngIfElse",v),l(6),c("disabled",i.form.invalid||i.saving()),l(),w(" ",i.saving()?"Guardando...":"Guardar"," ")}},dependencies:[V,N,I,Y,_e,G,q,j,ye,ve,J,$,he,we,U,ke,Ce,z,B],encapsulation:2});let n=s;return n})();function He(n,s){if(n&1){let r=k();o(0,"button",28),f("click",function(){let t=u(r).$implicit,i=p();return x(i.toggleChip(t.key))}),d(1),a()}if(n&2){let r=s.$implicit,e=p();C(e.isSelected(r.key)?"px-3.5 py-2 rounded-lg text-white text-xs font-bold bg-gradient-to-r from-blue-600 to-violet-600 hover:from-blue-700 hover:to-violet-700 shadow-md shadow-blue-500/25 hover:shadow-lg hover:shadow-blue-500/35 transition-all cursor-pointer":"px-3.5 py-2 rounded-lg text-gray-700 dark:text-gray-300 text-xs font-semibold bg-white dark:bg-gray-700 hover:bg-blue-50 dark:hover:bg-gray-600 hover:text-blue-700 dark:hover:text-blue-300 border border-gray-300 dark:border-gray-600 hover:border-blue-400 dark:hover:border-blue-500 transition-all cursor-pointer shadow-sm"),l(),w(" ",r.label," ")}}function Ke(n,s){if(n&1&&(o(0,"span",45),d(1),a()),n&2){let r=s.$implicit;l(),w(" ",r==="SALDO_MORA"?"MORA":r==="LTD_LTDE"?"LTD+LTDE":r," ")}}function We(n,s){if(n&1){let r=k();o(0,"div",31)(1,"div",32)(2,"div",33)(3,"div",34),b(4,"lucide-angular",35),a(),o(5,"h3",36),d(6),a()(),o(7,"div",37)(8,"button",38),f("click",function(){let t=u(r).$implicit,i=p(2);return x(i.preview(t))}),b(9,"lucide-angular",19),o(10,"span"),d(11,"Ver"),a()(),o(12,"button",39),f("click",function(){let t=u(r).$implicit,i=p(2);return x(i.openEdit(t))}),b(13,"lucide-angular",19),o(14,"span"),d(15,"Editar"),a()()()(),o(16,"p",40),d(17),a(),o(18,"div",41)(19,"span",42),d(20,"Variables:"),a(),o(21,"div",43),h(22,Ke,2,1,"span",44),a()()()}if(n&2){let r=s.$implicit,e=p(2);l(4),c("img",e.MessageSquare)("size",16),l(2),w(" ",r.name||"(Sin nombre)"," "),l(3),c("img",e.Eye)("size",14),l(4),c("img",e.Edit)("size",14),l(4),_(r.plantillaTexto||"(sin mensaje)"),l(5),c("ngForOf",e.visibleTags(r))}}function Qe(n,s){if(n&1&&(o(0,"div",29),h(1,We,23,9,"div",30),a()),n&2){let r=p();l(),c("ngForOf",r.filtered())("ngForTrackBy",r.trackById)}}function Ze(n,s){if(n&1&&(o(0,"div",46),b(1,"lucide-angular",47),o(2,"h3",48),d(3,"No hay tenores disponibles"),a(),o(4,"p",49),d(5,"Crea un nuevo tenor o ajusta los filtros"),a()()),n&2){let r=p();l(),c("img",r.Inbox)("size",48)}}function et(n,s){if(n&1){let r=k();o(0,"div",50),f("click",function(){u(r);let t=p();return x(t.closePreview())}),a()}}function tt(n,s){if(n&1&&(o(0,"div",65)(1,"span",66),d(2),a(),o(3,"span",67),d(4),a()()),n&2){let r=s.$implicit;l(2),_(r[0]),l(2),_(r[1])}}function rt(n,s){if(n&1&&(o(0,"div",68)(1,"label",69),d(2,"Vista previa SMS"),a(),o(3,"div",70),d(4),a(),o(5,"div",71)(6,"span",72),d(7,"Caracteres:"),a(),o(8,"span",73),d(9),a()()()),n&2){let r=p(4);l(4),_(r.previewSms()),l(5),w("",r.smsLen(r.previewSms()).chars,"/160")}}function it(n,s){if(n&1&&(L(0),o(1,"div",61)(2,"div",62),h(3,tt,5,2,"div",63),a()(),h(4,rt,10,2,"div",64),O()),n&2){let r=p(3);l(3),c("ngForOf",r.previewPairs()),l(),c("ngIf",r.previewSms())}}function ot(n,s){if(n&1&&(o(0,"div",59),h(1,it,5,2,"ng-container",60),a()),n&2){let r=p(2),e=E(36);l(),c("ngIf",r.previewRow())("ngIfElse",e)}}function nt(n,s){if(n&1){let r=k();o(0,"aside",51)(1,"div",52)(2,"h3",53),d(3),a(),o(4,"button",54),f("click",function(){u(r);let t=p();return x(t.closePreview())}),b(5,"lucide-angular",19),a()(),h(6,ot,2,2,"div",55),o(7,"div",56)(8,"button",57),f("click",function(){u(r);let t=p();return x(t.exportSelected())}),b(9,"lucide-angular",19),o(10,"span"),d(11,"Exportar"),a()(),o(12,"button",58),f("click",function(){u(r);let t=p();return x(t.removeSelected())}),b(13,"lucide-angular",19),o(14,"span"),d(15,"Eliminar"),a()()()()}if(n&2){let r=p(),e=E(34);l(3),_(r.previewTitle()),l(2),c("img",r.X)("size",18),l(),c("ngIf",!r.previewLoading())("ngIfElse",e),l(3),c("img",r.Download)("size",16),l(4),c("img",r.Trash2)("size",16)}}function at(n,s){n&1&&(o(0,"div",74),b(1,"div",75),o(2,"p",76),d(3,"Cargando..."),a()())}function lt(n,s){if(n&1&&(o(0,"div",74),b(1,"lucide-angular",77),o(2,"p",76),d(3,"Sin informaci\xF3n"),a()()),n&2){let r=p();l(),c("img",r.Info)("size",32)}}function dt(n,s){if(n&1){let r=k();o(0,"div",78)(1,"div",79)(2,"div",80),d(3,"\u26A0\uFE0F"),a(),o(4,"h3",81),d(5,"Atenci\xF3n"),a(),o(6,"p",82),d(7),a(),o(8,"button",83),f("click",function(){u(r);let t=p();return x(t.closeAlert())}),d(9," Entendido "),a()()()}if(n&2){let r=p();l(7),_(r.alertMessage())}}function st(n,s){if(n&1&&(o(0,"small",87),d(1),a()),n&2){let r,e=p(2);l(),_((r=e.loadingModal().data)==null?null:r.subtitle)}}function ct(n,s){if(n&1&&(o(0,"div",78)(1,"div",79),b(2,"div",84),o(3,"p",85),d(4),a(),h(5,st,2,1,"small",86),a()()),n&2){let r,e,t=p();l(4),_(((r=t.loadingModal().data)==null?null:r.title)||"Procesando..."),l(),c("ngIf",(e=t.loadingModal().data)==null?null:e.subtitle)}}function mt(n,s){if(n&1){let r=k();o(0,"app-edit-combo-modal",88),f("closed",function(){u(r);let t=p();return x(t.closeEditModal())})("saved",function(){u(r);let t=p();return x(t.onComboSaved())}),a()}if(n&2){let r=p();c("combo",r.editingCombo())}}var It=(()=>{let s=class s{openEdit(e){this.editingCombo.set(e),this.editModalOpen.set(!0),this.lockBodyScroll(!0)}closeEditModal(){this.editModalOpen.set(!1),this.editingCombo.set(null),this.lockBodyScroll(!1)}onComboSaved(){this.load()}labelOf(e){return e==="TELEFONOCELULAR"?"TEL\xC9FONO":e==="DEUDA_TOTAL"?"DEUDA TOTAL":e.replaceAll("_"," ").toUpperCase()}preview(e){this.lockBodyScroll(!0),this.previewOpen.set(!0),this.previewTitle.set(`${e.name}`),this.previewLoading.set(!0),this.previewRow.set(null),this.previewSms.set(null),this.selectedCombo.set(e),this.api.previewFromCombo(e.id,1e3).subscribe({next:t=>{let i=t?.[0]??{};this.previewRow.set(i);let m=g=>{let v=K(g||"",i);this.previewSms.set(v||"(sin texto)"),this.previewLoading.set(!1)};e.plantillaTexto?m(e.plantillaTexto):e.plantillaSmsId?this.api.getPlantillaTexto(e.plantillaSmsId).subscribe({next:g=>m(typeof g=="string"?g:g?.template??""),error:g=>{this.previewSms.set("(no se pudo cargar el texto)"),this.previewLoading.set(!1)}}):(this.previewSms.set("(sin texto de SMS)"),this.previewLoading.set(!1))},error:t=>{this.previewLoading.set(!1),this.previewSms.set("(error al obtener preview)")}})}constructor(){this.Plus=F,this.Eye=se,this.Edit=fe,this.X=P,this.XCircle=le,this.Download=de,this.Trash2=R,this.Inbox=me,this.Info=pe,this.Search=ue,this.MessageSquare=be,this.api=T(H),this.fb=T(X),this.router=T(ne),this.previewSms=y(null),this.smsLen=e=>W(e),this.editModalOpen=y(!1),this.editingCombo=y(null),this.selectedCombo=y(null),this.previewOpen=y(!1),this.previewTitle=y(""),this.previewRow=y(null),this.previewLoading=y(!1),this.previewOrder=["DOCUMENTO","TELEFONOCELULAR","NOMBRE","BAJA30","DEUDA_TOTAL"],this.all=y([]),this.loading=y(!1),this.chips=[{key:"NOMBRE",label:"Nombre"},{key:"LTD",label:"LTD"},{key:"LTDE",label:"LTDE"},{key:"LTD_LTDE",label:"LTD + LTDE"},{key:"BAJA30",label:"Baja 30"},{key:"SALDO_MORA",label:"Mora"},{key:"BAJA30_SALDOMORA",label:"Baja30 + Mora"},{key:"PKM",label:"PKM"},{key:"CAPITAL",label:"Capital"},{key:"DEUDA_TOTAL",label:"Deuda Total"},{key:"MANANA",label:"Ma\xF1ana"},{key:"HOY",label:"Hoy"},{key:"NOMBRECOMPLETO",label:"Nombre Completo"},{key:"EMAIL",label:"Correo"},{key:"NUMCUENTAPMCP",label:"N\xFAmero de Cuenta"},{key:"DIASMORA",label:"D\xEDas Mora"}],this.selected=y(new Set),this.form=this.fb.nonNullable.group({q:"",tramo:"ALL",soloActivos:!0}),this.filtersSig=Ee(this.form.valueChanges.pipe(ie(this.form.getRawValue())),{initialValue:this.form.getRawValue()}),this.filtered=D(()=>{let{q:e,tramo:t,soloActivos:i}=this.filtersSig(),m=this.selected(),g=(e??"").trim().toLowerCase();return this.all().filter(v=>{if(i&&!v.isActive||t!=="ALL"&&v.tramo!==t)return!1;if(m.size){let M=new Set(v.selects??[]),Ae=M.has("NOMBRE")||/\{NOMBRE\}/i.test(v.plantillaTexto||"");for(let te of m){if(te==="NOMBRE"){if(!Ae)return!1;continue}if(!M.has(te))return!1}}return!(g&&!((v.name??"").toLowerCase().includes(g)||(v.plantillaTexto??"").toLowerCase().includes(g)))})}),this.alertMessage=y(""),this.loadingModal=y({isOpen:!1}),this.savedScrollTop=0,this.Math=Math,this.load(),oe(()=>this.filtered())}load(){this.loading.set(!0),this.api.list().subscribe({next:e=>{this.all.set(e??[]),this.loading.set(!1)},error:e=>{this.all.set([]),this.loading.set(!1)}})}trackById(e,t){return t.id}isSelected(e){return this.selected().has(e)}toggleChip(e){let t=new Set(this.selected());t.has(e)?t.delete(e):t.add(e),this.selected.set(t)}clearChips(){this.selected.set(new Set)}buildDownloadName(e){let t=new Date().toISOString().slice(0,10);return`${(e.name??`combo_${e.id}`).trim().replace(/[<>:"/\\|?*]+/g,"").replace(/\s+/g," ").slice(0,150)} - ${t}.xlsx`}alert(e,t="Aviso"){this.alertMessage.set(e)}closeAlert(){this.alertMessage.set("")}export(e){let t=e.id;this.loadingModal.set({isOpen:!0,data:{title:"Generando Excel\u2026",subtitle:"Preparando datos y creando archivo"}}),this.api.precheck(t).subscribe({next:i=>{if(!i.ok){this.loadingModal.set({isOpen:!1});let m=`${i.excedidos} ${i.excedidos===1?"fila":"filas"} superan los caracteres.`,g=(i.ejemplos??[]).map((v,M)=>`\u2022 ${v.len} caracteres \u2014 DNI: ${v.documento||"(sin DNI)"}`).join(`
`);this.alert(`${m}

Primeros ${Math.min((i.ejemplos??[]).length,3)} casos:
${g}`,"Mensaje demasiado largo");return}this.api.exportFromCombo(t).pipe(re(()=>this.loadingModal.set({isOpen:!1}))).subscribe({next:m=>{let g=URL.createObjectURL(m),v=document.createElement("a");v.href=g,v.download=this.buildDownloadName(e),document.body.appendChild(v),v.click(),v.remove(),URL.revokeObjectURL(g)},error:m=>{this.loadingModal.set({isOpen:!1});let g=m?.status===422?m?.error?.message||"No hay filas para exportar con los filtros seleccionados.":m?.error?.message||m?.message||"Ocurri\xF3 un error al exportar.";this.alert(g,m?.status===422?"Sin resultados":"Error")}})},error:i=>{let m=i?.error?.message||i?.message||"No se pudo validar el SMS del combo.";this.alert(m,"Error en precheck")}})}exportSelected(){let e=this.selectedCombo();e&&this.export(e)}removeSelected(){let e=this.selectedCombo();e&&confirm(`\xBFEliminar el combo "${e.name}"?`)&&this.api.delete(e.id).subscribe(()=>{this.closePreview(),this.load()})}closePreview(){this.previewOpen.set(!1),this.lockBodyScroll(!1),this.previewSms.set(""),this.previewSms.set(null),this.previewRow.set(null),this.selectedCombo.set(null)}previewPairs(){let e=this.previewRow();if(!e)return[];let t=new Set,i=[];for(let g of this.previewOrder)e[g]!==void 0&&(i.push([this.labelOf(String(g)),e[g]]),t.add(String(g)));let m=[];for(let[g,v]of Object.entries(e))t.has(g)||m.push([this.labelOf(g),v]);return[...i,...m]}New(){this.router.navigate(["/sms/dynamic"])}remove(e){confirm(`\xBFEliminar el combo "${e.name}"?`)&&this.api.delete(e.id).subscribe(()=>this.load())}lockBodyScroll(e){let t=document.body;e?(this.savedScrollTop=window.scrollY||window.pageYOffset||0,t.style.top=`-${this.savedScrollTop}px`,t.classList.add("no-scroll")):(t.classList.remove("no-scroll"),t.style.top="",window.scrollTo(0,this.savedScrollTop||0))}visibleTags(e){let t=[...e.selects??[]];return/\{NOMBRE\}/i.test(e.plantillaTexto||"")&&!t.includes("NOMBRE")&&t.unshift("NOMBRE"),t}};s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=A({type:s,selectors:[["app-combo-list"]],decls:40,vars:16,consts:[["noData",""],["loadingTpl",""],["emptyTpl",""],[1,"bg-gray-50","dark:bg-gray-900","min-h-screen","pt-24","px-8"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold","text-gray-900","dark:text-white"],[1,"group","flex","items-center","gap-2","px-4","py-2","bg-gradient-to-r","from-blue-600","to-violet-600","hover:from-blue-700","hover:to-violet-700","text-white","rounded-lg","text-sm","font-medium","transition-all","shadow-lg","shadow-blue-500/20","hover:shadow-xl","hover:shadow-blue-500/30","cursor-pointer",3,"click"],[1,"group-hover:rotate-90","transition-transform",3,"img","size"],[1,"bg-white","dark:bg-gray-800","rounded-xl","shadow-lg","border","border-gray-200","dark:border-gray-700","overflow-hidden"],[1,"p-4","border-b","border-gray-200","dark:border-gray-700","bg-white","dark:bg-gray-800"],[1,"flex","gap-3"],[1,"relative","flex-1","min-w-[300px]"],[1,"absolute","left-3","top-1/2","-translate-y-1/2","text-gray-400","dark:text-gray-500","pointer-events-none",3,"img","size"],["type","text","placeholder","Buscar tenor por nombre o texto...",1,"w-full","pl-10","pr-4","py-2.5","border","border-gray-300","dark:border-gray-600","rounded-lg","text-sm","bg-white","dark:bg-gray-700","text-gray-900","dark:text-gray-100","placeholder-gray-400","dark:placeholder-gray-500","focus:outline-none","focus:ring-2","focus:ring-blue-500","dark:focus:ring-blue-400","focus:border-blue-500","dark:focus:border-blue-400","transition-all","hover:border-gray-400","dark:hover:border-gray-500","shadow-sm",3,"formControl"],[1,"px-3","py-2.5","border","border-gray-300","dark:border-gray-600","rounded-lg","bg-white","dark:bg-gray-700","text-gray-900","dark:text-gray-100","text-sm","font-medium","cursor-pointer","focus:outline-none","focus:ring-2","focus:ring-blue-500","dark:focus:ring-blue-400","focus:border-blue-500","dark:focus:border-blue-400","transition-all","hover:border-gray-400","dark:hover:border-gray-500","shadow-sm",3,"formControl"],["value","ALL"],["value","3"],["value","5"],[1,"flex","items-center","gap-1.5","px-3","py-2.5","bg-white","dark:bg-gray-700","border","border-gray-300","dark:border-gray-600","rounded-lg","text-gray-700","dark:text-gray-300","text-sm","font-medium","hover:bg-gray-100","dark:hover:bg-gray-600","hover:border-gray-400","dark:hover:border-gray-500","transition-all","cursor-pointer","shadow-sm",3,"click"],[3,"img","size"],[1,"p-4","border-b","border-gray-200","dark:border-gray-700","bg-gray-50","dark:bg-gray-800/50"],[1,"flex","flex-wrap","gap-2"],[3,"class","click",4,"ngFor","ngForOf"],["class","p-4 flex flex-col gap-3 bg-gray-50 dark:bg-gray-900",4,"ngIf","ngIfElse"],["class","fixed inset-0 bg-black/50 dark:bg-black/70 backdrop-blur-sm z-[999] animate-fade-in cursor-pointer",3,"click",4,"ngIf"],["class","fixed top-0 right-0 bottom-0 w-[400px] bg-white dark:bg-gray-800 shadow-2xl z-[1000] flex flex-col animate-slide-in border-l border-gray-300 dark:border-gray-700",4,"ngIf"],["class","fixed inset-0 bg-black/60 dark:bg-black/70 z-[2000] flex items-center justify-center animate-fade-in",4,"ngIf"],[3,"combo","closed","saved",4,"ngIf"],[3,"click"],[1,"p-4","flex","flex-col","gap-3","bg-gray-50","dark:bg-gray-900"],["class","group bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-xl p-4 hover:border-blue-400 dark:hover:border-blue-500 hover:shadow-lg transition-all",4,"ngFor","ngForOf","ngForTrackBy"],[1,"group","bg-white","dark:bg-gray-800","border","border-gray-200","dark:border-gray-600","rounded-xl","p-4","hover:border-blue-400","dark:hover:border-blue-500","hover:shadow-lg","transition-all"],[1,"flex","justify-between","items-start","mb-3"],[1,"flex","items-center","gap-2.5","flex-1"],[1,"p-2","bg-blue-100","dark:bg-blue-900/40","rounded-lg","group-hover:scale-110","transition-transform"],[1,"text-blue-600","dark:text-blue-400",3,"img","size"],[1,"text-sm","font-bold","text-gray-900","dark:text-gray-100"],[1,"flex","gap-2"],[1,"flex","items-center","gap-1.5","px-3","py-2","bg-blue-50","dark:bg-blue-900/30","border","border-blue-300","dark:border-blue-700","rounded-lg","text-blue-700","dark:text-blue-300","text-xs","font-semibold","hover:bg-blue-100","dark:hover:bg-blue-900/50","hover:border-blue-400","dark:hover:border-blue-600","transition-all","cursor-pointer",3,"click"],[1,"flex","items-center","gap-1.5","px-3","py-2","bg-gray-100","dark:bg-gray-600","border","border-gray-300","dark:border-gray-500","rounded-lg","text-gray-700","dark:text-gray-200","text-xs","font-semibold","hover:bg-gray-200","dark:hover:bg-gray-500","hover:border-gray-400","dark:hover:border-gray-400","transition-all","cursor-pointer",3,"click"],[1,"text-sm","text-gray-700","dark:text-gray-300","mb-3","leading-relaxed"],[1,"flex","items-center","gap-2"],[1,"text-[10px]","font-bold","text-gray-500","dark:text-gray-400","uppercase","tracking-wider"],[1,"flex","flex-wrap","gap-1.5"],["class","inline-flex items-center px-2.5 py-1 bg-blue-100 dark:bg-blue-900/30 border border-blue-300 dark:border-blue-800/50 text-blue-700 dark:text-blue-300 rounded-md text-[10px] font-bold uppercase tracking-wide",4,"ngFor","ngForOf"],[1,"inline-flex","items-center","px-2.5","py-1","bg-blue-100","dark:bg-blue-900/30","border","border-blue-300","dark:border-blue-800/50","text-blue-700","dark:text-blue-300","rounded-md","text-[10px]","font-bold","uppercase","tracking-wide"],[1,"p-16","text-center","bg-gray-50","dark:bg-gray-900"],[1,"mx-auto","mb-4","text-gray-400","dark:text-gray-500",3,"img","size"],[1,"text-base","font-semibold","text-gray-900","dark:text-gray-100","mb-2"],[1,"text-sm","text-gray-600","dark:text-gray-400"],[1,"fixed","inset-0","bg-black/50","dark:bg-black/70","backdrop-blur-sm","z-[999]","animate-fade-in","cursor-pointer",3,"click"],[1,"fixed","top-0","right-0","bottom-0","w-[400px]","bg-white","dark:bg-gray-800","shadow-2xl","z-[1000]","flex","flex-col","animate-slide-in","border-l","border-gray-300","dark:border-gray-700"],[1,"flex","justify-between","items-center","p-4","border-b","border-gray-300","dark:border-gray-700","bg-white","dark:bg-gray-800"],[1,"text-base","font-bold","text-gray-900","dark:text-white"],[1,"p-1.5","hover:bg-gray-100","dark:hover:bg-gray-700","rounded-lg","text-gray-600","dark:text-gray-300","transition-colors","cursor-pointer",3,"click"],["class","flex-1 overflow-y-auto p-4 bg-gray-50 dark:bg-gray-900",4,"ngIf","ngIfElse"],[1,"flex","gap-2","p-4","border-t","border-gray-300","dark:border-gray-700","bg-white","dark:bg-gray-800"],[1,"flex-1","flex","items-center","justify-center","gap-1.5","px-3","py-2","bg-gradient-to-r","from-blue-600","to-violet-600","hover:from-blue-700","hover:to-violet-700","text-white","rounded-lg","text-sm","font-medium","shadow-lg","shadow-blue-500/20","hover:shadow-xl","hover:shadow-blue-500/30","transition-all","cursor-pointer",3,"click"],[1,"flex-1","flex","items-center","justify-center","gap-1.5","px-3","py-2","bg-gradient-to-r","from-red-600","to-rose-600","hover:from-red-700","hover:to-rose-700","text-white","rounded-lg","text-sm","font-medium","shadow-lg","shadow-red-500/20","hover:shadow-xl","hover:shadow-red-500/30","transition-all","cursor-pointer",3,"click"],[1,"flex-1","overflow-y-auto","p-4","bg-gray-50","dark:bg-gray-900"],[4,"ngIf","ngIfElse"],[1,"mb-4"],[1,"space-y-2"],["class","grid grid-cols-[120px_1fr] gap-3 p-3 bg-white dark:bg-gray-700/50 border border-gray-200 dark:border-gray-700 rounded-lg text-xs hover:border-blue-300 dark:hover:border-blue-800 transition-colors shadow-sm",4,"ngFor","ngForOf"],["class","mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-300 dark:border-blue-800",4,"ngIf"],[1,"grid","grid-cols-[120px_1fr]","gap-3","p-3","bg-white","dark:bg-gray-700/50","border","border-gray-200","dark:border-gray-700","rounded-lg","text-xs","hover:border-blue-300","dark:hover:border-blue-800","transition-colors","shadow-sm"],[1,"font-bold","text-gray-700","dark:text-gray-400"],[1,"text-gray-900","dark:text-gray-100"],[1,"mt-4","p-4","bg-blue-50","dark:bg-blue-900/20","rounded-lg","border","border-blue-300","dark:border-blue-800"],[1,"block","text-xs","font-bold","text-gray-700","dark:text-gray-300","mb-2","uppercase","tracking-wide"],[1,"p-3","bg-gradient-to-r","from-blue-600","to-violet-600","text-white","rounded-lg","text-sm","leading-relaxed","mb-2","shadow-lg"],[1,"flex","items-center","justify-between","text-xs","text-gray-700","dark:text-gray-400"],[1,"font-semibold"],[1,"font-bold","text-blue-700","dark:text-blue-400"],[1,"p-12","text-center"],[1,"w-10","h-10","border-3","border-gray-300","dark:border-gray-600","border-t-blue-600","dark:border-t-blue-400","rounded-full","animate-spin","mx-auto","mb-3"],[1,"text-sm","text-gray-700","dark:text-gray-400","font-medium"],[1,"mx-auto","mb-2","text-gray-400","dark:text-gray-500",3,"img","size"],[1,"fixed","inset-0","bg-black/60","dark:bg-black/70","z-[2000]","flex","items-center","justify-center","animate-fade-in"],[1,"bg-white","dark:bg-gray-800","rounded-lg","p-6","max-w-md","w-11/12","shadow-2xl","text-center","animate-scale-in","border","border-gray-200","dark:border-gray-700"],[1,"text-4xl","mb-3"],[1,"text-lg","font-bold","text-gray-900","dark:text-gray-100","mb-2"],[1,"text-sm","text-gray-700","dark:text-gray-300","mb-4","whitespace-pre-line"],[1,"w-full","px-4","py-2","bg-gradient-to-r","from-blue-600","to-violet-600","hover:from-blue-700","hover:to-violet-700","text-white","rounded-lg","text-sm","font-medium","transition-all","shadow-lg",3,"click"],[1,"w-10","h-10","border-3","border-gray-300","dark:border-gray-600","border-t-blue-600","dark:border-t-blue-400","rounded-full","animate-spin","mx-auto","mb-4"],[1,"text-base","font-bold","text-gray-900","dark:text-gray-100"],["class","block mt-1 text-sm text-gray-700 dark:text-gray-400",4,"ngIf"],[1,"block","mt-1","text-sm","text-gray-700","dark:text-gray-400"],[3,"closed","saved","combo"]],template:function(t,i){if(t&1){let m=k();o(0,"div",3)(1,"div",4)(2,"h1",5),d(3,"Gesti\xF3n de Tenores"),a(),o(4,"button",6),f("click",function(){return u(m),x(i.New())}),b(5,"lucide-angular",7),o(6,"span"),d(7,"Nuevo"),a()()(),o(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11),b(12,"lucide-angular",12)(13,"input",13),a(),o(14,"select",14)(15,"option",15),d(16,"Todos los tramos"),a(),o(17,"option",16),d(18,"Tramo 3"),a(),o(19,"option",17),d(20,"Tramo 5"),a()(),o(21,"button",18),f("click",function(){return u(m),x(i.clearChips())}),b(22,"lucide-angular",19),o(23,"span"),d(24,"Limpiar"),a()()()(),o(25,"div",20)(26,"div",21),h(27,He,2,3,"button",22),a()(),h(28,Qe,2,2,"div",23)(29,Ze,6,2,"ng-template",null,0,S),a()(),h(31,et,1,0,"div",24)(32,nt,16,9,"aside",25)(33,at,4,0,"ng-template",null,1,S)(35,lt,4,2,"ng-template",null,2,S)(37,dt,10,1,"div",26)(38,ct,6,2,"div",26)(39,mt,1,1,"app-edit-combo-modal",27)}if(t&2){let m=E(30);l(5),c("img",i.Plus)("size",18),l(7),c("img",i.Search)("size",16),l(),c("formControl",i.form.controls.q),l(),c("formControl",i.form.controls.tramo),l(8),c("img",i.XCircle)("size",16),l(5),c("ngForOf",i.chips),l(),c("ngIf",i.filtered().length)("ngIfElse",m),l(3),c("ngIf",i.previewOpen()),l(),c("ngIf",i.previewOpen()),l(5),c("ngIf",i.alertMessage()),l(),c("ngIf",i.loadingModal().isOpen),l(),c("ngIf",i.editModalOpen()&&i.editingCombo())}},dependencies:[V,N,I,Y,G,q,j,J,$,U,z,B,Te],styles:['@charset "UTF-8";[_ngcontent-%COMP%]:global(body.no-scroll){overflow:hidden;position:fixed;width:100%}']});let n=s;return n})();export{It as ComboListComponent};
