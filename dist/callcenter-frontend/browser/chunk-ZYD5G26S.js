import{a as p}from"./chunk-DF6EJM3T.js";import{da as f,ha as c,sd as n,td as g}from"./chunk-QOPKCBWK.js";var U=(()=>{let a=class a{constructor(t){this.http=t,this.baseUrl=p.tipificacionUrl}getAllClassifications(){return this.http.get(`${this.baseUrl}/typifications`)}getTypificationsByType(t){return this.http.get(`${this.baseUrl}/typifications/type/${t}`)}getTypificationsByLevel(t){return this.http.get(`${this.baseUrl}/typifications/level/${t}`)}getTypificationsByParent(t){return this.http.get(`${this.baseUrl}/typifications/${t}/children`)}getClassificationById(t){return this.http.get(`${this.baseUrl}/typifications/${t}`)}createTypification(t){return this.http.post(`${this.baseUrl}/typifications`,t)}updateTypification(t,e){return this.http.put(`${this.baseUrl}/typifications/${t}`,e)}deleteTypification(t){return this.http.delete(`${this.baseUrl}/typifications/${t}`)}updateDisplayOrder(t){return this.http.patch(`${this.baseUrl}/typifications/display-order`,t)}getTenantClassifications(t,e,s){let i=new n;return e&&(i=i.set("portfolioId",e.toString())),s&&(i=i.set("includeDisabled","true")),this.http.get(`${this.baseUrl}/tenants/${t}/typifications`,{params:i})}getTenantClassificationsByType(t,e,s){let i=new n;return s&&(i=i.set("portfolioId",s.toString())),this.http.get(`${this.baseUrl}/tenants/${t}/typifications/type/${e}`,{params:i})}getTenantClassificationsByLevel(t,e,s){let i=new n;return s&&(i=i.set("portfolioId",s.toString())),this.http.get(`${this.baseUrl}/tenants/${t}/typifications/level/${e}`,{params:i})}getEnabledClassifications(t,e){let s=new n;return e&&(s=s.set("portfolioId",e.toString())),this.http.get(`${this.baseUrl}/tenants/${t}/typifications/enabled`,{params:s})}updateTenantTypificationConfig(t,e,s,i){let r=new n;return i&&(r=r.set("portfolioId",i.toString())),this.http.put(`${this.baseUrl}/tenants/${t}/typifications/${e}/config`,s,{params:r})}enableClassification(t,e,s){let i=new n;return s&&(i=i.set("portfolioId",s.toString())),this.http.post(`${this.baseUrl}/tenants/${t}/typifications/${e}/enable`,{},{params:i})}disableClassification(t,e,s){let i=new n;return s&&(i=i.set("portfolioId",s.toString())),this.http.post(`${this.baseUrl}/tenants/${t}/typifications/${e}/disable`,{},{params:i})}getAllTenants(){return this.http.get(`${this.baseUrl}/system-config/tenants`)}createTenant(t){return this.http.post(`${this.baseUrl}/system-config/tenants`,t)}updateTenant(t,e){return this.http.put(`${this.baseUrl}/system-config/tenants/${t}`,e)}deleteTenant(t){return this.http.delete(`${this.baseUrl}/system-config/tenants/${t}`)}getPortfoliosByTenant(t){return this.http.get(`${this.baseUrl}/system-config/tenants/${t}/portfolios`)}createPortfolio(t){return this.http.post(`${this.baseUrl}/system-config/portfolios`,t)}updatePortfolio(t,e){return this.http.put(`${this.baseUrl}/system-config/portfolios/${t}`,e)}deletePortfolio(t){return this.http.delete(`${this.baseUrl}/system-config/portfolios/${t}`)}getSubPortfoliosByPortfolio(t){return this.http.get(`${this.baseUrl}/system-config/portfolios/${t}/subportfolios`)}saveCsvMappings(t,e){return this.http.post(`${this.baseUrl}/portfolios/${t}/csv-mappings`,{csvHeaders:e})}getCsvMappings(t){return this.http.get(`${this.baseUrl}/portfolios/${t}/csv-mappings`)}deleteCsvMappings(t){return this.http.delete(`${this.baseUrl}/portfolios/${t}/csv-mappings`)}getEffectiveTypifications(t,e,s){return this.http.get(`${p.gatewayUrl}/v2/typifications/config/effective/tenant/${t}/portfolio/${e}/subportfolio/${s}`)}getAdditionalFields(t){return this.http.get(`${p.gatewayUrl}/v2/typifications/catalog/${t}/additional-fields`)}saveManagementRecord(t){return this.http.post(`${p.gatewayUrl}/v2/management-records`,t)}buildClassificationTree(t){let e=new Map,s=[];t.forEach(r=>{e.set(r.id,{typification:r,children:[],level:r.hierarchyLevel})}),t.forEach(r=>{let o=e.get(r.id);if(r.parentTypificationId){let l=e.get(r.parentTypificationId);l&&l.children.push(o)}else s.push(o)});let i=r=>{r.children.length>0&&(r.children.sort((o,l)=>{let $=o.typification.displayOrder||0,y=l.typification.displayOrder||0;return $-y}),r.children.forEach(o=>i(o)))};return s.forEach(r=>i(r)),s}};a.\u0275fac=function(e){return new(e||a)(c(g))},a.\u0275prov=f({token:a,factory:a.\u0275fac,providedIn:"root"});let h=a;return h})();export{U as a};
