import{a as te}from"./chunk-RVBUCTPQ.js";import{a as j,d as W,g as G,i as Y,l as q,m as J,n as K,o as Q,p as X,q as Z,s as ee}from"./chunk-2EQX5ULE.js";import{$a as C,Bb as F,Da as x,Db as V,K as w,L as P,Q as D,Ra as _,Sa as t,T as I,Ta as n,Ua as y,W as d,Wb as L,X as p,Xb as N,_b as z,ac as R,bb as u,db as c,ec as B,gc as $,mc as H,ob as O,pa as r,qb as A,rb as i,rc as U,sb as g,ta as S,tb as f,ub as T,wb as b,x as E,xb as h,ya as k,yb as v}from"./chunk-OVXRDAV3.js";var ne=(()=>{let m=class m{constructor(e){this.http=e,this.apiUrl=`${U.gatewayUrl}/admin/autodialer`}getHeaders(){let e=localStorage.getItem("token");return new B({"Content-Type":"application/json",Authorization:e?`Bearer ${e}`:""})}activar(e="admin",o="Activaci\xF3n desde panel"){return this.http.post(`${this.apiUrl}/activar`,{usuario:e,notas:o},{headers:this.getHeaders()})}desactivar(e="Desactivaci\xF3n desde panel"){return this.http.post(`${this.apiUrl}/desactivar`,{notas:e},{headers:this.getHeaders()})}toggle(e="admin"){return this.http.post(`${this.apiUrl}/toggle`,{usuario:e},{headers:this.getHeaders()})}getEstado(){return this.http.get(`${this.apiUrl}/estado`,{headers:this.getHeaders()})}getEstadisticas(){return this.http.get(`${this.apiUrl}/estadisticas`,{headers:this.getHeaders()})}healthCheck(){return this.http.get(`${this.apiUrl}/health`,{headers:this.getHeaders()})}startStatsPolling(){return E(5e3).pipe(w(0),P(()=>this.getEstadisticas()))}getAgentesMonitoreo(){return this.http.get(`${this.apiUrl}/agentes-monitoreo`,{headers:this.getHeaders()})}startAgentesPolling(){return E(3e3).pipe(w(0),P(()=>this.getAgentesMonitoreo()))}};m.\u0275fac=function(o){return new(o||m)(I($))},m.\u0275prov=D({token:m,factory:m.\u0275fac,providedIn:"root"});let l=m;return l})();function oe(l,m){if(l&1&&(t(0,"div",22),i(1),n()),l&2){let a=c();r(),f("\u274C ",a.error)}}function re(l,m){if(l&1&&(t(0,"div",23),i(1),n()),l&2){let a=c();r(),f("\u2705 ",a.successMessage)}}function le(l,m){if(l&1){let a=C();t(0,"div",27)(1,"p"),i(2,"\u{1F4ED} No hay campa\xF1as creadas todav\xEDa"),n(),t(3,"button",4),u("click",function(){d(a);let o=c(2);return p(o.openCreateModal())}),i(4,"Crear Primera Campa\xF1a"),n()()}}function se(l,m){if(l&1){let a=C();t(0,"button",43),u("click",function(){d(a);let o=c().$implicit,s=c(2);return p(s.activarCampaign(o))}),i(1," \u25B6\uFE0F "),n()}}function ce(l,m){if(l&1){let a=C();t(0,"button",44),u("click",function(){d(a);let o=c().$implicit,s=c(2);return p(s.pausarCampaign(o))}),i(1," \u23F8\uFE0F "),n()}}function me(l,m){if(l&1){let a=C();t(0,"button",45),u("click",function(){d(a);let o=c().$implicit,s=c(2);return p(s.deleteCampaign(o))}),i(1," \u{1F5D1}\uFE0F "),n()}}function de(l,m){if(l&1&&(t(0,"p",46),i(1),n()),l&2){let a=c().$implicit;r(),f(" ",a.description," ")}}function pe(l,m){if(l&1&&(t(0,"div",47)(1,"div",48)(2,"span",49),i(3,"Total:"),n(),t(4,"span",50),i(5),n()(),t(6,"div",48)(7,"span",49),i(8,"Pendientes:"),n(),t(9,"span",50),i(10),n()(),t(11,"div",48)(12,"span",49),i(13,"Contactados:"),n(),t(14,"span",50),i(15),n()()()),l&2){let a=c().$implicit;r(5),g(a.totalContacts||0),r(5),g(a.pendingContacts||0),r(5),g(a.contactedContacts||0)}}function ge(l,m){if(l&1&&(t(0,"span"),i(1),F(2,"date"),n()),l&2){let a=c().$implicit;r(),g(V(2,1,a.createdAt,"short"))}}function ue(l,m){if(l&1){let a=C();t(0,"div",28)(1,"div",29)(2,"div",30),u("click",function(){let o=d(a).$implicit,s=c(2);return p(s.viewCampaignDetail(o))}),t(3,"h3"),i(4),n(),t(5,"span",31),i(6),n()(),t(7,"div",32)(8,"button",33),u("click",function(){let o=d(a).$implicit,s=c(2);return p(s.viewCampaignDetail(o))}),i(9," \u{1F441}\uFE0F "),n(),x(10,se,2,0,"button",34)(11,ce,2,0,"button",35),t(12,"button",36),u("click",function(){let o=d(a).$implicit,s=c(2);return p(s.openImportModal(o))}),i(13," \u{1F4E5} "),n(),x(14,me,2,0,"button",37),n()(),t(15,"div",38),x(16,de,2,1,"p",39)(17,pe,16,3,"div",40),t(18,"div",41)(19,"span"),i(20),n(),t(21,"span"),i(22),n(),x(23,ge,3,4,"span",42),n()()()}if(l&2){let a=m.$implicit,e=c(2);r(4),g(a.name),r(),O("background-color",e.getStatusColor(a.status)),r(),f(" ",e.getStatusText(a.status)," "),r(4),_("ngIf",e.canActivate(a)),r(),_("ngIf",e.canPause(a)),r(3),_("ngIf",a.status==="DRAFT"||a.status==="COMPLETED"),r(2),_("ngIf",a.description),r(),_("ngIf",a.totalContacts!==void 0),r(3),g(a.dialMode),r(2),f("Max: ",a.maxAttempts),r(),_("ngIf",a.createdAt)}}function _e(l,m){if(l&1&&(t(0,"div",24),x(1,le,5,0,"div",25)(2,ue,24,12,"div",26),n()),l&2){let a=c();r(),_("ngIf",a.campaigns.length===0),r(),_("ngForOf",a.campaigns)}}function xe(l,m){l&1&&(t(0,"div",51),y(1,"div",52),t(2,"p"),i(3,"Cargando..."),n()())}function fe(l,m){if(l&1&&(t(0,"div",53)(1,"h3"),i(2,"\u{1F4CA} M\xE9tricas del Auto-Dialer en Tiempo Real"),n(),t(3,"div",54)(4,"div",55)(5,"span",56),i(6,"\u{1F4CA}"),n(),t(7,"div",57)(8,"span",58),i(9),n(),t(10,"span",59),i(11,"Total llamadas"),n()()(),t(12,"div",55)(13,"span",56),i(14,"\u23F3"),n(),t(15,"div",57)(16,"span",58),i(17),n(),t(18,"span",59),i(19,"Llamadas en cola"),n()()(),t(20,"div",55)(21,"span",56),i(22,"\u2705"),n(),t(23,"div",57)(24,"span",58),i(25),n(),t(26,"span",59),i(27,"Llamadas conectadas"),n()()(),t(28,"div",55)(29,"span",56),i(30,"\u{1F4CB}"),n(),t(31,"div",57)(32,"span",58),i(33),n(),t(34,"span",59),i(35,"Llamadas por realizar"),n()()(),t(36,"div",55)(37,"span",56),i(38,"\u{1F4DE}"),n(),t(39,"div",57)(40,"span",58),i(41),n(),t(42,"span",59),i(43,"Llamadas siendo marcadas"),n()()(),t(44,"div",55)(45,"span",56),i(46,"\u{1F535}"),n(),t(47,"div",57)(48,"span",58),i(49),n(),t(50,"span",59),i(51,"Llamadas siendo procesadas"),n()()(),t(52,"div",55)(53,"span",56),i(54,"\u274C"),n(),t(55,"div",57)(56,"span",58),i(57),n(),t(58,"span",59),i(59,"Llamadas fallidas"),n()()(),t(60,"div",55)(61,"span",56),i(62,"\u{1F4F5}"),n(),t(63,"div",57)(64,"span",58),i(65),n(),t(66,"span",59),i(67,"Llamadas no contestadas"),n()()(),t(68,"div",55)(69,"span",56),i(70,"\u{1F6AB}"),n(),t(71,"div",57)(72,"span",58),i(73),n(),t(74,"span",59),i(75,"Llamadas abandonadas"),n()()(),t(76,"div",55)(77,"span",56),i(78,"\u23F1\uFE0F"),n(),t(79,"div",57)(80,"span",58),i(81),n(),t(82,"span",59),i(83,"Duraci\xF3n promedio de llamada"),n()()(),t(84,"div",55)(85,"span",56),i(86,"\u23F0"),n(),t(87,"div",57)(88,"span",58),i(89),n(),t(90,"span",59),i(91,"Duraci\xF3n m\xE1xima de llamada"),n()()()()()),l&2){let a=c();r(9),g(a.autoDialerStats.totalLlamadas),r(8),g(a.autoDialerStats.llamadasEnCola),r(8),g(a.autoDialerStats.llamadasConectadas),r(8),g(a.autoDialerStats.contactosPendientes),r(8),g(a.autoDialerStats.llamadasMarcando),r(8),g(a.autoDialerStats.llamadasActivas),r(8),g(a.autoDialerStats.contactosFallidos),r(8),g(a.autoDialerStats.llamadasNoContestadas),r(8),g(a.autoDialerStats.llamadasAbandonadas),r(8),g(a.autoDialerStats.duracionPromedioFormato),r(8),g(a.autoDialerStats.duracionMaximaFormato)}}function Ce(l,m){if(l&1&&(t(0,"tr",60)(1,"td",61)(2,"div",62),i(3),n(),t(4,"div",63),i(5),n()(),t(6,"td",64)(7,"span",65),i(8),n()(),t(9,"td",66),i(10),n(),t(11,"td",67),i(12),n()()),l&2){let a=m.$implicit,e=c();r(3),f("SIP/",a.sipExtension),r(2),g(a.nombreCompleto),r(2),O("background-color",e.getEstadoColor(a.estadoActual)),r(),T(" ",e.getEstadoIcon(a.estadoActual)," ",e.getEstadoTexto(a.estadoActual)," "),r(2),f(" ",a.telefonoDestino||"-"," "),r(2),f(" ",e.formatTiempo(a.segundosEnEstado)," ")}}function be(l,m){l&1&&(t(0,"tr",68)(1,"td",69),i(2," No hay agentes registrados "),n()())}function he(l,m){if(l&1){let a=C();t(0,"div",70),u("click",function(){d(a);let o=c();return p(o.closeCreateModal())}),t(1,"div",71),u("click",function(o){return d(a),p(o.stopPropagation())}),t(2,"div",72)(3,"h2"),i(4,"\u2795 Nueva Campa\xF1a"),n(),t(5,"button",73),u("click",function(){d(a);let o=c();return p(o.closeCreateModal())}),i(6,"\u2716"),n()(),t(7,"div",74)(8,"div",75)(9,"label"),i(10,"Nombre de la Campa\xF1a *"),n(),t(11,"input",76),v("ngModelChange",function(o){d(a);let s=c();return h(s.newCampaign.name,o)||(s.newCampaign.name=o),p(o)}),n()(),t(12,"div",75)(13,"label"),i(14,"Descripci\xF3n"),n(),t(15,"textarea",77),v("ngModelChange",function(o){d(a);let s=c();return h(s.newCampaign.description,o)||(s.newCampaign.description=o),p(o)}),n()(),t(16,"div",78)(17,"div",75)(18,"label"),i(19,"Modo de Discado"),n(),t(20,"select",79),v("ngModelChange",function(o){d(a);let s=c();return h(s.newCampaign.dialMode,o)||(s.newCampaign.dialMode=o),p(o)}),t(21,"option",80),i(22,"Manual"),n(),t(23,"option",81),i(24,"Progresivo"),n(),t(25,"option",82),i(26,"Predictivo"),n()()(),t(27,"div",75)(28,"label"),i(29,"Intentos M\xE1ximos"),n(),t(30,"input",83),v("ngModelChange",function(o){d(a);let s=c();return h(s.newCampaign.maxAttempts,o)||(s.newCampaign.maxAttempts=o),p(o)}),n()()()(),t(31,"div",84)(32,"button",85),u("click",function(){d(a);let o=c();return p(o.closeCreateModal())}),i(33,"Cancelar"),n(),t(34,"button",86),u("click",function(){d(a);let o=c();return p(o.createCampaign())}),i(35,"Crear Campa\xF1a"),n()()()()}if(l&2){let a=c();r(11),b("ngModel",a.newCampaign.name),r(4),b("ngModel",a.newCampaign.description),r(5),b("ngModel",a.newCampaign.dialMode),r(10),b("ngModel",a.newCampaign.maxAttempts)}}function ve(l,m){if(l&1){let a=C();t(0,"div",70),u("click",function(){d(a);let o=c();return p(o.closeImportModal())}),t(1,"div",71),u("click",function(o){return d(a),p(o.stopPropagation())}),t(2,"div",72)(3,"h2"),i(4,"\u{1F4E5} Importar Contactos"),n(),t(5,"button",73),u("click",function(){d(a);let o=c();return p(o.closeImportModal())}),i(6,"\u2716"),n()(),t(7,"div",74)(8,"p")(9,"strong"),i(10,"Campa\xF1a:"),n(),i(11),n(),t(12,"div",75)(13,"label"),i(14,"L\xEDmite de Contactos a Importar"),n(),t(15,"input",87),v("ngModelChange",function(o){d(a);let s=c();return h(s.importLimit,o)||(s.importLimit=o),p(o)}),n(),t(16,"small"),i(17),n()(),t(18,"div",88)(19,"p"),i(20,"\u2139\uFE0F Los contactos se importar\xE1n desde: "),t(21,"strong"),i(22),n()(),t(23,"p"),i(24,"\u{1F4CA} Disponibles: "),t(25,"strong"),i(26),n(),i(27," tel\xE9fonos activos"),n()()(),t(28,"div",84)(29,"button",85),u("click",function(){d(a);let o=c();return p(o.closeImportModal())}),i(30,"Cancelar"),n(),t(31,"button",86),u("click",function(){d(a);let o=c();return p(o.importarContactos())}),i(32,"Importar"),n()()()()}if(l&2){let a=c();r(11),f(" ",a.selectedCampaign==null?null:a.selectedCampaign.name),r(4),b("ngModel",a.importLimit),r(2),f("Se importar\xE1n hasta ",a.importLimit," contactos desde la tabla externa"),r(5),g(a.importStats==null?null:a.importStats.fuenteDatos),r(4),g(a.importStats==null?null:a.importStats.totalTelefonosActivos)}}var Ae=(()=>{let m=class m{constructor(e,o,s){this.campaignService=e,this.autoDialerService=o,this.router=s,this.campaigns=[],this.loading=!1,this.error=null,this.successMessage=null,this.showCreateModal=!1,this.showImportModal=!1,this.selectedCampaign=null,this.importStats=null,this.newCampaign={name:"",description:"",status:"DRAFT",dialMode:"PROGRESSIVE",maxAttempts:3,retryInterval:60},this.importLimit=100,this.isAutoDialerActive=!1,this.autoDialerLoading=!1,this.autoDialerStats=null,this.agentesMonitoreo=[]}ngOnInit(){this.loadCampaigns(),this.loadImportStats(),this.loadAutoDialerState(),this.startAutoDialerPolling(),this.startAgentesPolling()}ngOnDestroy(){this.autoDialerSubscription&&this.autoDialerSubscription.unsubscribe(),this.agentesSubscription&&this.agentesSubscription.unsubscribe()}loadCampaigns(){this.loading=!0,this.error=null,this.campaignService.getAllCampaigns().subscribe({next:e=>{this.campaigns=e,this.loading=!1},error:e=>{console.error("Error loading campaigns:",e),this.error="Error al cargar las campa\xF1as",this.loading=!1}})}loadImportStats(){this.campaignService.getImportStats().subscribe({next:e=>{this.importStats=e},error:e=>{console.error("Error loading import stats:",e)}})}openCreateModal(){this.newCampaign={name:"",description:"",status:"DRAFT",dialMode:"PROGRESSIVE",maxAttempts:3,retryInterval:60},this.showCreateModal=!0}closeCreateModal(){this.showCreateModal=!1}createCampaign(){if(!this.newCampaign.name){this.error="El nombre de la campa\xF1a es requerido";return}this.loading=!0,this.error=null,this.campaignService.createCampaign(this.newCampaign).subscribe({next:e=>{this.successMessage="Campa\xF1a creada exitosamente",this.showCreateModal=!1,this.loadCampaigns(),this.loading=!1,setTimeout(()=>{this.successMessage=null},3e3)},error:e=>{console.error("Error creating campaign:",e),this.error="Error al crear la campa\xF1a",this.loading=!1}})}activarCampaign(e){e.id&&(this.loading=!0,this.error=null,this.campaignService.activarCampaign(e.id).subscribe({next:()=>{this.successMessage=`Campa\xF1a "${e.name}" activada`,this.loadCampaigns(),this.loading=!1,setTimeout(()=>{this.successMessage=null},3e3)},error:o=>{console.error("Error activating campaign:",o),this.error=o.error?.error||"Error al activar la campa\xF1a",this.loading=!1}}))}pausarCampaign(e){e.id&&(this.loading=!0,this.error=null,this.campaignService.pausarCampaign(e.id).subscribe({next:()=>{this.successMessage=`Campa\xF1a "${e.name}" pausada`,this.loadCampaigns(),this.loading=!1,setTimeout(()=>{this.successMessage=null},3e3)},error:o=>{console.error("Error pausing campaign:",o),this.error="Error al pausar la campa\xF1a",this.loading=!1}}))}openImportModal(e){this.selectedCampaign=e,this.importLimit=100,this.showImportModal=!0}closeImportModal(){this.showImportModal=!1,this.selectedCampaign=null}importarContactos(){this.selectedCampaign?.id&&(this.loading=!0,this.error=null,this.campaignService.importarContactos(this.selectedCampaign.id,this.importLimit).subscribe({next:e=>{this.successMessage=`${e.contactosImportados} contactos importados`,this.showImportModal=!1,this.loadCampaigns(),this.loading=!1,setTimeout(()=>{this.successMessage=null},3e3)},error:e=>{console.error("Error importing contacts:",e),this.error="Error al importar contactos",this.loading=!1}}))}deleteCampaign(e){e.id&&confirm(`\xBFEst\xE1s seguro de eliminar la campa\xF1a "${e.name}"?`)&&(this.loading=!0,this.error=null,this.campaignService.deleteCampaign(e.id).subscribe({next:()=>{this.successMessage=`Campa\xF1a "${e.name}" eliminada`,this.loadCampaigns(),this.loading=!1,setTimeout(()=>{this.successMessage=null},3e3)},error:o=>{console.error("Error deleting campaign:",o),this.error=o.error?.error||"Error al eliminar la campa\xF1a",this.loading=!1}}))}getStatusColor(e){return this.campaignService.getStatusColor(e)}getStatusText(e){return this.campaignService.getStatusText(e)}canActivate(e){return e.status==="DRAFT"||e.status==="PAUSED"}canPause(e){return e.status==="ACTIVE"}loadAutoDialerState(){this.autoDialerService.getEstado().subscribe({next:e=>{this.isAutoDialerActive=e.activo},error:e=>{console.error("Error loading auto-dialer state:",e)}})}startAutoDialerPolling(){this.autoDialerSubscription=this.autoDialerService.startStatsPolling().subscribe({next:e=>{this.isAutoDialerActive=e.activo,this.autoDialerStats=e},error:e=>{console.error("Error polling auto-dialer stats:",e)}})}toggleAutoDialer(){this.autoDialerLoading=!0,this.autoDialerService.toggle("admin").subscribe({next:e=>{this.autoDialerLoading=!1,this.isAutoDialerActive=e.activo,console.log("Auto-Dialer toggled:",e.mensaje)},error:e=>{console.error("Error toggling auto-dialer:",e),this.autoDialerLoading=!1}})}getAutoDialerButtonText(){return this.autoDialerLoading?"Procesando...":this.isAutoDialerActive?"PAUSAR DISCADO":"INICIAR DISCADO"}getAutoDialerButtonIcon(){return this.isAutoDialerActive?"\u23F8\uFE0F":"\u25B6\uFE0F"}getAutoDialerButtonClass(){return this.isAutoDialerActive?"btn-pause":"btn-activate"}startAgentesPolling(){this.agentesSubscription=this.autoDialerService.startAgentesPolling().subscribe({next:e=>{this.agentesMonitoreo=e},error:e=>{console.error("Error polling agentes:",e)}})}getEstadoColor(e){switch(e){case"DISPONIBLE":return"#10B981";case"EN_LLAMADA":return"#3B82F6";case"DESCONECTADO":return"#EF4444";case"PAUSADO":return"#F59E0B";case"EN_REUNION":return"#8B5CF6";case"REFRIGERIO":return"#F59E0B";case"SSHH":return"#F59E0B";case"TIPIFICANDO":return"#06B6D4";default:return"#6B7280"}}getEstadoIcon(e){switch(e){case"DISPONIBLE":return"\u{1F7E2}";case"EN_LLAMADA":return"\u{1F4DE}";case"DESCONECTADO":return"\u{1F534}";case"PAUSADO":return"\u23F8\uFE0F";case"EN_REUNION":return"\u{1F465}";case"REFRIGERIO":return"\u2615";case"SSHH":return"\u{1F6BB}";case"TIPIFICANDO":return"\u{1F4DD}";default:return"\u26AB"}}formatTiempo(e){if(!e||e<0)return"-";let o=Math.floor(e/3600),s=Math.floor(e%3600/60),M=e%60;return o>0?`${o.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}:${M.toString().padStart(2,"0")}`:`${s.toString().padStart(2,"0")}:${M.toString().padStart(2,"0")}`}getEstadoTexto(e){switch(e){case"DISPONIBLE":return"Libre";case"EN_LLAMADA":return"En Llamada";case"DESCONECTADO":return"Desconectado";case"PAUSADO":return"Pausado";case"EN_REUNION":return"En Reuni\xF3n";case"REFRIGERIO":return"Refrigerio";case"SSHH":return"SSHH";case"TIPIFICANDO":return"Tipificando";default:return e}}viewCampaignDetail(e){e.id&&this.router.navigate(["/admin/campaigns",e.id])}navigateToExtensions(){this.router.navigate(["/admin/extensions"])}};m.\u0275fac=function(o){return new(o||m)(S(te),S(ne),S(H))},m.\u0275cmp=k({type:m,selectors:[["app-campaign-management"]],decls:48,vars:15,consts:[[1,"campaign-container"],[1,"header"],[1,"header-actions"],[3,"click","disabled","title"],[1,"btn-create",3,"click"],["class","error-message",4,"ngIf"],["class","success-message",4,"ngIf"],[1,"two-column-layout"],[1,"left-column"],[1,"section-title"],["class","campaigns-scrollable",4,"ngIf"],["class","loading-state",4,"ngIf"],[1,"right-column"],["class","metrics-panel",4,"ngIf"],[1,"agentes-panel"],[1,"agentes-header"],[1,"btn-view-all",3,"click"],[1,"agentes-table-container"],[1,"agentes-table"],["class","agente-row",4,"ngFor","ngForOf"],["class","empty-row",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"error-message"],[1,"success-message"],[1,"campaigns-scrollable"],["class","empty-state",4,"ngIf"],["class","campaign-card-compact",4,"ngFor","ngForOf"],[1,"empty-state"],[1,"campaign-card-compact"],[1,"campaign-header-compact"],[1,"campaign-title-compact",2,"cursor","pointer",3,"click"],[1,"status-badge"],[1,"campaign-actions"],["title","Ver detalle",1,"btn-action-small","btn-view",3,"click"],["class","btn-action-small btn-activate","title","Activar campa\xF1a",3,"click",4,"ngIf"],["class","btn-action-small btn-pause","title","Pausar campa\xF1a",3,"click",4,"ngIf"],["title","Importar contactos",1,"btn-action-small","btn-import",3,"click"],["class","btn-action-small btn-delete","title","Eliminar campa\xF1a",3,"click",4,"ngIf"],[1,"campaign-body-compact"],["class","campaign-description-compact",4,"ngIf"],["class","campaign-stats-compact",4,"ngIf"],[1,"campaign-meta-compact"],[4,"ngIf"],["title","Activar campa\xF1a",1,"btn-action-small","btn-activate",3,"click"],["title","Pausar campa\xF1a",1,"btn-action-small","btn-pause",3,"click"],["title","Eliminar campa\xF1a",1,"btn-action-small","btn-delete",3,"click"],[1,"campaign-description-compact"],[1,"campaign-stats-compact"],[1,"stat-compact"],[1,"stat-label-compact"],[1,"stat-value-compact"],[1,"loading-state"],[1,"spinner"],[1,"metrics-panel"],[1,"metrics-grid"],[1,"metric-item"],[1,"metric-icon"],[1,"metric-info"],[1,"metric-value"],[1,"metric-label"],[1,"agente-row"],[1,"agente-info"],[1,"agente-extension"],[1,"agente-nombre"],[1,"agente-estado"],[1,"estado-badge"],[1,"agente-telefono"],[1,"agente-tiempo"],[1,"empty-row"],["colspan","4",2,"text-align","center","color","#94a3b8"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"btn-close",3,"click"],[1,"modal-body"],[1,"form-group"],["type","text","placeholder","Ej: Campa\xF1a Cobranza Enero 2025","required","",1,"form-input",3,"ngModelChange","ngModel"],["placeholder","Descripci\xF3n de la campa\xF1a...","rows","3",1,"form-textarea",3,"ngModelChange","ngModel"],[1,"form-row"],[1,"form-select",3,"ngModelChange","ngModel"],["value","MANUAL"],["value","PROGRESSIVE"],["value","PREDICTIVE"],["type","number","min","1","max","10",1,"form-input",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn-cancel",3,"click"],[1,"btn-submit",3,"click"],["type","number","min","1","max","10000","placeholder","100",1,"form-input",3,"ngModelChange","ngModel"],[1,"info-box"]],template:function(o,s){o&1&&(t(0,"div",0)(1,"div",1)(2,"h1"),i(3,"\u{1F4CB} Gesti\xF3n de Campa\xF1as"),n(),t(4,"div",2)(5,"button",3),u("click",function(){return s.toggleAutoDialer()}),t(6,"span"),i(7),n(),t(8,"span"),i(9),n()(),t(10,"button",4),u("click",function(){return s.openCreateModal()}),t(11,"span"),i(12,"\u2795"),n(),t(13,"span"),i(14,"Nueva Campa\xF1a"),n()()()(),x(15,oe,2,1,"div",5)(16,re,2,1,"div",6),t(17,"div",7)(18,"div",8)(19,"h2",9),i(20,"\u{1F4CB} Campa\xF1as"),n(),x(21,_e,3,2,"div",10)(22,xe,4,0,"div",11),n(),t(23,"div",12),x(24,fe,92,11,"div",13),t(25,"div",14)(26,"div",15)(27,"h3"),i(28,"\u{1F465} Agentes en Tiempo Real"),n(),t(29,"button",16),u("click",function(){return s.navigateToExtensions()}),i(30," \u{1F4DE} Ver Extensiones "),n()(),t(31,"div",17)(32,"table",18)(33,"thead")(34,"tr")(35,"th"),i(36,"Agente"),n(),t(37,"th"),i(38,"Estado"),n(),t(39,"th"),i(40,"Tel\xE9fono"),n(),t(41,"th"),i(42,"Desde"),n()()(),t(43,"tbody"),x(44,Ce,13,8,"tr",19)(45,be,3,0,"tr",20),n()()()()()()(),x(46,he,36,4,"div",21)(47,ve,33,5,"div",21)),o&2&&(r(5),A("btn-action "+s.getAutoDialerButtonClass()),_("disabled",s.autoDialerLoading)("title",s.isAutoDialerActive?"Pausar el sistema de discado autom\xE1tico":"Iniciar el sistema de discado autom\xE1tico"),r(2),g(s.getAutoDialerButtonIcon()),r(2),g(s.getAutoDialerButtonText()),r(6),_("ngIf",s.error),r(),_("ngIf",s.successMessage),r(5),_("ngIf",!s.loading),r(),_("ngIf",s.loading),r(2),_("ngIf",s.autoDialerStats),r(20),_("ngForOf",s.agentesMonitoreo),r(),_("ngIf",s.agentesMonitoreo.length===0),r(),_("ngIf",s.showCreateModal),r(),_("ngIf",s.showImportModal))},dependencies:[R,L,N,ee,J,K,j,Y,q,W,Z,X,Q,G,z],styles:[".campaign-container[_ngcontent-%COMP%]{min-height:100vh;background:#0a0e27;padding:1.5rem;max-width:1400px;margin:0 auto}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;padding-bottom:1rem;border-bottom:1px solid #334155}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;color:#fff;font-weight:600}.header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.btn-create[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background:#10b981;color:#fff;border:none;padding:.7rem 1.5rem;border-radius:8px;cursor:pointer;font-size:.9rem;font-weight:600;transition:all .3s}.btn-create[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #10b98166;background:#059669}.error-message[_ngcontent-%COMP%], .success-message[_ngcontent-%COMP%]{padding:1rem;border-radius:8px;margin-bottom:1rem;font-weight:500}.error-message[_ngcontent-%COMP%]{background:#ef444426;color:#ef4444;border:1px solid rgba(239,68,68,.3)}.success-message[_ngcontent-%COMP%]{background:#10b98126;color:#10b981;border:1px solid rgba(16,185,129,.3)}.metrics-panel[_ngcontent-%COMP%]{background:#1e293b;border:1px solid #334155;border-radius:8px;padding:1rem;margin-bottom:1.5rem}.metrics-panel[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:.95rem;color:#fff;font-weight:600}.metrics-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:.8rem}.metric-item[_ngcontent-%COMP%]{background:#0a0e27;border:1px solid #334155;border-radius:6px;padding:.7rem;display:flex;align-items:center;gap:.7rem;transition:transform .2s,box-shadow .2s}.metric-item[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000004d}.metric-icon[_ngcontent-%COMP%]{font-size:1.5rem;flex-shrink:0}.metric-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:0}.metric-value[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;color:#10b981;line-height:1.2}.metric-label[_ngcontent-%COMP%]{font-size:.7rem;color:#94a3b8;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.two-column-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem;height:calc(100vh - 200px);min-height:600px}.left-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;background:#1e293b;border:1px solid #334155;border-radius:8px;overflow:hidden}.section-title[_ngcontent-%COMP%]{margin:0;padding:1rem;font-size:1.2rem;color:#fff;background:#0a0e27;border-bottom:1px solid #334155}.campaigns-scrollable[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:1rem;display:flex;flex-direction:column;gap:.8rem}.campaigns-scrollable[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.campaigns-scrollable[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#0a0e27}.campaigns-scrollable[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#334155;border-radius:4px}.campaigns-scrollable[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#475569}.right-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.agentes-panel[_ngcontent-%COMP%]{flex:1;background:#1e293b;border:1px solid #334155;border-radius:8px;overflow:hidden;display:flex;flex-direction:column}.agentes-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem;background:#0a0e27;border-bottom:1px solid #334155}.agentes-panel[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:.95rem;color:#fff;font-weight:600}.btn-view-all[_ngcontent-%COMP%]{padding:6px 12px;background:#3b82f6;color:#fff;border:none;border-radius:6px;cursor:pointer;font-size:13px;font-weight:500;transition:all .3s}.btn-view-all[_ngcontent-%COMP%]:hover{background:#2563eb;transform:translateY(-2px)}.agentes-table-container[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:auto}.agentes-table-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}.agentes-table-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#0a0e27}.agentes-table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#334155;border-radius:4px}.agentes-table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#475569}.agentes-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:.8rem}.agentes-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{position:sticky;top:0;background:#0a0e27;z-index:10}.agentes-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.7rem .8rem;text-align:left;font-weight:600;color:#94a3b8;font-size:.75rem;text-transform:uppercase;border-bottom:1px solid #334155}.agentes-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .2s}.agente-row[_ngcontent-%COMP%]:hover{background:#10b9810d}.agentes-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.7rem .8rem;border-bottom:1px solid #334155;color:#e2e8f0}.agente-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.2rem}.agente-extension[_ngcontent-%COMP%]{font-size:.75rem;color:#10b981;font-weight:600;font-family:monospace}.agente-nombre[_ngcontent-%COMP%]{font-size:.7rem;color:#94a3b8;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:180px}.agente-estado[_ngcontent-%COMP%]{text-align:center}.estado-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.3rem;padding:.3rem .6rem;border-radius:50px;color:#fff;font-size:.7rem;font-weight:600;white-space:nowrap}.agente-telefono[_ngcontent-%COMP%]{font-family:monospace;font-size:.75rem;color:#e2e8f0}.agente-tiempo[_ngcontent-%COMP%]{font-family:monospace;font-size:.75rem;font-weight:600;color:#10b981;text-align:center}.empty-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:2rem 1rem}.campaign-card-compact[_ngcontent-%COMP%]{background:#0a0e27;border:1px solid #334155;border-radius:6px;overflow:hidden;transition:transform .2s,box-shadow .2s}.campaign-card-compact[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 15px #0006}.campaign-header-compact[_ngcontent-%COMP%]{padding:.8rem;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #334155}.campaign-title-compact[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;flex:1}.campaign-title-compact[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:.9rem;color:#fff;font-weight:600}.status-badge[_ngcontent-%COMP%]{padding:.2rem .6rem;border-radius:50px;color:#fff;font-size:.65rem;font-weight:600;text-transform:uppercase;white-space:nowrap}.campaign-actions[_ngcontent-%COMP%]{display:flex;gap:.4rem}.btn-action-small[_ngcontent-%COMP%]{background:#ffffff1a;border:none;padding:.4rem;border-radius:4px;cursor:pointer;font-size:.85rem;transition:all .2s;display:flex;align-items:center;justify-content:center;min-width:28px;height:28px}.btn-action-small[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.btn-action[_ngcontent-%COMP%]{background:#ffffff1a;border:none;padding:.5rem;border-radius:6px;cursor:pointer;font-size:1rem;transition:all .3s;display:flex;align-items:center;gap:.5rem}.btn-action[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.btn-action[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-activate[_ngcontent-%COMP%]{background:#10b981;color:#fff;padding:.7rem 1.5rem;font-weight:600}.btn-activate[_ngcontent-%COMP%]:hover{background:#059669;box-shadow:0 6px 20px #10b98166}.btn-pause[_ngcontent-%COMP%]{background:#f59e0b;color:#fff;padding:.7rem 1.5rem;font-weight:600}.btn-pause[_ngcontent-%COMP%]:hover{background:#d97706;box-shadow:0 6px 20px #f59e0b66}.btn-import[_ngcontent-%COMP%]:hover{background:#3b82f633}.btn-delete[_ngcontent-%COMP%]:hover{background:#ef444433}.campaign-body-compact[_ngcontent-%COMP%]{padding:.7rem .8rem}.campaign-description-compact[_ngcontent-%COMP%]{color:#94a3b8;font-size:.75rem;margin:0 0 .6rem;line-height:1.3;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.campaign-stats-compact[_ngcontent-%COMP%]{display:flex;gap:.8rem;margin-bottom:.6rem;padding:.5rem;background:#1e293b;border-radius:4px}.stat-compact[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.1rem}.stat-label-compact[_ngcontent-%COMP%]{font-size:.65rem;color:#64748b}.stat-value-compact[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:#10b981}.campaign-meta-compact[_ngcontent-%COMP%]{display:flex;gap:.7rem;font-size:.7rem;color:#64748b;flex-wrap:wrap}.empty-state[_ngcontent-%COMP%]{grid-column:1 / -1;text-align:center;padding:4rem 2rem;color:#94a3b8}.loading-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;color:#94a3b8}.spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:4px solid #334155;border-top-color:#10b981;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000c;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#1e293b;border-radius:12px;width:90%;max-width:600px;max-height:90vh;overflow-y:auto;box-shadow:0 20px 60px #00000080}.modal-header[_ngcontent-%COMP%]{padding:1.5rem;border-bottom:1px solid #334155;display:flex;justify-content:space-between;align-items:center}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.3rem;color:#fff}.btn-close[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer;color:#94a3b8;transition:color .3s}.btn-close[_ngcontent-%COMP%]:hover{color:#ef4444}.modal-body[_ngcontent-%COMP%]{padding:1.5rem}.modal-footer[_ngcontent-%COMP%]{padding:1.5rem;border-top:1px solid #334155;display:flex;justify-content:flex-end;gap:1rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:#fff;font-weight:500;font-size:.9rem}.form-group[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;margin-top:.3rem;color:#64748b;font-size:.8rem}.form-input[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{width:100%;background:#0a0e27;border:1px solid #334155;border-radius:6px;padding:.7rem;color:#fff;font-size:.9rem;transition:border .3s}.form-input[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#10b981}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem}.btn-cancel[_ngcontent-%COMP%], .btn-submit[_ngcontent-%COMP%]{padding:.7rem 1.5rem;border:none;border-radius:6px;cursor:pointer;font-weight:600;transition:all .3s}.btn-cancel[_ngcontent-%COMP%]{background:#6b7280;color:#fff}.btn-cancel[_ngcontent-%COMP%]:hover{background:#4b5563}.btn-submit[_ngcontent-%COMP%]{background:#10b981;color:#fff}.btn-submit[_ngcontent-%COMP%]:hover{background:#059669}.info-box[_ngcontent-%COMP%]{background:#3b82f61a;border-left:4px solid #3B82F6;padding:1rem;border-radius:4px;margin-top:1rem}.info-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.3rem 0;color:#94a3b8;font-size:.85rem}@media (max-width: 1200px){.two-column-layout[_ngcontent-%COMP%]{grid-template-columns:1fr;height:auto}.left-column[_ngcontent-%COMP%]{min-height:400px;max-height:500px}.metrics-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(120px,1fr))}}@media (max-width: 768px){.campaign-container[_ngcontent-%COMP%]{padding:1rem}.header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.header-actions[_ngcontent-%COMP%]{width:100%;flex-direction:column}.header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.two-column-layout[_ngcontent-%COMP%]{gap:1rem}.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.metrics-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}"]});let l=m;return l})();export{Ae as CampaignManagementComponent};
