import{b as re,c as A}from"./chunk-4F4PQCC5.js";import{E as oe,c as Q,f as Z,k as ee,m as te,s as ie,t as ne,u as ae}from"./chunk-7GV7UZOL.js";import{a as K}from"./chunk-YQKVMPSG.js";import{Bc as R,Fb as k,Gb as y,Hb as L,Ib as j,Jb as S,Kb as E,Lb as g,Mb as n,Nb as a,Ob as w,Vb as V,Xb as _,Zb as c,a as P,ab as r,b as B,ca as q,ga as G,gb as H,kc as D,lc as s,ld as X,mc as T,md as J,na as m,nb as z,nc as b,oa as p,oc as N,pa as f,pc as $,qa as F,qc as h,rc as C,sc as v,td as W,ud as Y,vc as O,xa as M,zc as U}from"./chunk-SN4XSKG7.js";var se=(()=>{let d=class d{constructor(e){this.http=e,this.baseUrl=`${K.gatewayUrl}/comisiones`}obtenerInquilinos(){return this.http.get(`${this.baseUrl}/inquilinos`)}obtenerCarteras(e){let i=new W().set("idInquilino",e.toString());return this.http.get(`${this.baseUrl}/carteras`,{params:i})}obtenerSubcarteras(e){let i=new W().set("idCartera",e.toString());return this.http.get(`${this.baseUrl}/subcarteras`,{params:i})}obtenerJerarquiaSubcartera(e){return this.http.get(`${this.baseUrl}/subcarteras/${e}/jerarquia`)}obtenerMetas(e,i){let l=new W().set("anio",e.toString()).set("mes",i.toString());return this.http.get(`${this.baseUrl}/metas`,{params:l})}obtenerMeta(e){return this.http.get(`${this.baseUrl}/metas/${e}`)}guardarMeta(e){return console.log("[COMISIONES] Guardando meta:",e),this.http.post(`${this.baseUrl}/metas`,e)}eliminarMeta(e){return console.log("[COMISIONES] Eliminando meta ID:",e),this.http.delete(`${this.baseUrl}/metas/${e}`)}obtenerBonos(){return this.http.get(`${this.baseUrl}/bonos`)}obtenerBonosActivos(){return this.http.get(`${this.baseUrl}/bonos/activos`)}obtenerBono(e){return this.http.get(`${this.baseUrl}/bonos/${e}`)}guardarBono(e){return console.log("[COMISIONES] Guardando bono:",e),this.http.post(`${this.baseUrl}/bonos`,e)}eliminarBono(e){return console.log("[COMISIONES] Eliminando bono ID:",e),this.http.delete(`${this.baseUrl}/bonos/${e}`)}obtenerCamposDisponibles(){return this.http.get(`${this.baseUrl}/bonos/campos-disponibles`)}calcularComisiones(e,i,l){let u=new W().set("anio",e.toString()).set("mes",i.toString());return l&&(u=u.set("idSubcartera",l.toString())),console.log("[COMISIONES] Calculando comisiones:",{anio:e,mes:i,idSubcartera:l}),this.http.get(`${this.baseUrl}/calcular`,{params:u})}obtenerResumenConfig(e,i){let l=new W().set("anio",e.toString()).set("mes",i.toString());return this.http.get(`${this.baseUrl}/resumen-config`,{params:l})}getNombreCampo(e){return{campo_monto_origen:"Campo Monto Origen",ruta_nivel_1:"Tipificaci\xF3n Nivel 1",ruta_nivel_2:"Tipificaci\xF3n Nivel 2",ruta_nivel_3:"Tipificaci\xF3n Nivel 3",ruta_nivel_4:"Tipificaci\xF3n Nivel 4",nombre_subcartera:"Subcartera",nombre_cartera:"Cartera",estado_gestion:"Estado Gesti\xF3n",metodo_contacto:"M\xE9todo Contacto",canal_contacto:"Canal Contacto"}[e]||e}getNombreMes(e){return["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][e-1]||""}};d.\u0275fac=function(i){return new(i||d)(G(Y))},d.\u0275prov=q({token:d,factory:d.\u0275fac,providedIn:"root"});let o=d;return o})();var me=()=>[],le=(o,d)=>d.value,I=(o,d)=>d.id,pe=(o,d)=>d.idAgente,_e=(o,d)=>d.bonoId;function ge(o,d){if(o&1&&(n(0,"option",16),s(1),a()),o&2){let t=d.$implicit;g("value",t),r(),T(t)}}function ue(o,d){if(o&1&&(n(0,"option",16),s(1),a()),o&2){let t=d.$implicit;g("value",t.value),r(),T(t.label)}}function xe(o,d){if(o&1&&(n(0,"option",16),s(1),a()),o&2){let t=d.$implicit;g("value",t.id),r(),T(t.nombreInquilino)}}function be(o,d){if(o&1&&(n(0,"option",16),s(1),a()),o&2){let t=d.$implicit;g("value",t.id),r(),T(t.nombreCartera)}}function he(o,d){if(o&1&&(n(0,"option",16),s(1),a()),o&2){let t=d.$implicit;g("value",t.id),r(),T(t.nombreSubcartera)}}function Ce(o,d){if(o&1){let t=V();n(0,"div",33)(1,"span",38),s(2,"Desde"),a(),n(3,"input",39),v("ngModelChange",function(i){let l=m(t).$implicit;return C(l.porcentajeDesde,i)||(l.porcentajeDesde=i),p(i)}),a(),n(4,"span",38),s(5,"% hasta"),a(),n(6,"input",40),v("ngModelChange",function(i){let l=m(t).$implicit;return C(l.porcentajeHasta,i)||(l.porcentajeHasta=i),p(i)}),a(),n(7,"span",38),s(8,"% ="),a(),n(9,"span",38),s(10,"S/"),a(),n(11,"input",41),v("ngModelChange",function(i){let l=m(t).$implicit;return C(l.montoComision,i)||(l.montoComision=i),p(i)}),a(),n(12,"button",42),_("click",function(){let i=m(t).$index,l=c(3);return p(l.eliminarEscalaMeta(i))}),f(),n(13,"svg",31),w(14,"path",43),a()()()}if(o&2){let t=d.$implicit;r(3),h("ngModel",t.porcentajeDesde),r(3),h("ngModel",t.porcentajeHasta),r(5),h("ngModel",t.montoComision)}}function ve(o,d){o&1&&(n(0,"p",34),s(1,"No hay escalas configuradas. Agrega al menos una escala."),a())}function fe(o,d){if(o&1){let t=V();n(0,"div",19)(1,"h3",22),s(2),a(),n(3,"div",23)(4,"div")(5,"label",14),s(6,"Inquilino"),a(),n(7,"select",24),v("ngModelChange",function(i){m(t);let l=c(2);return C(l.selectedInquilino,i)||(l.selectedInquilino=i),p(i)}),_("change",function(){m(t);let i=c(2);return p(i.onInquilinoChange())}),n(8,"option",16),s(9,"Seleccionar..."),a(),S(10,xe,2,2,"option",16,I),a()(),n(12,"div")(13,"label",14),s(14,"Cartera"),a(),n(15,"select",25),v("ngModelChange",function(i){m(t);let l=c(2);return C(l.selectedCartera,i)||(l.selectedCartera=i),p(i)}),_("change",function(){m(t);let i=c(2);return p(i.onCarteraChange())}),n(16,"option",16),s(17,"Seleccionar..."),a(),S(18,be,2,2,"option",16,I),a()(),n(20,"div")(21,"label",14),s(22,"Subcartera"),a(),n(23,"select",25),v("ngModelChange",function(i){m(t);let l=c(2);return C(l.metaEditando().idSubcartera,i)||(l.metaEditando().idSubcartera=i),p(i)}),_("change",function(){m(t);let i=c(2);return p(i.onSubcarteraChange())}),n(24,"option",16),s(25,"Seleccionar..."),a(),S(26,he,2,2,"option",16,I),a()(),n(28,"div")(29,"label",14),s(30,"Meta Grupal (S/)"),a(),n(31,"input",26),v("ngModelChange",function(i){m(t);let l=c(2);return C(l.metaEditando().metaGrupal,i)||(l.metaEditando().metaGrupal=i),p(i)}),a()()(),n(32,"div",27)(33,"div",28)(34,"label",29),s(35," Escalas de Comisi\xF3n (por % de cumplimiento) "),a(),n(36,"button",30),_("click",function(){m(t);let i=c(2);return p(i.agregarEscalaMeta())}),f(),n(37,"svg",31),w(38,"path",18),a(),s(39," Agregar escala "),a()(),F(),n(40,"div",32),S(41,Ce,15,3,"div",33,L),k(43,ve,2,0,"p",34),a()(),n(44,"div",35)(45,"button",36),_("click",function(){m(t);let i=c(2);return p(i.guardarMeta())}),s(46),a(),n(47,"button",37),_("click",function(){m(t);let i=c(2);return p(i.cancelarMeta())}),s(48," Cancelar "),a()()()}if(o&2){let t,e=c(2);r(2),b(" ",(t=e.metaEditando())!=null&&t.id?"Editar Meta":"Nueva Meta"," "),r(5),h("ngModel",e.selectedInquilino),r(),g("value",0),r(2),E(e.inquilinos()),r(5),h("ngModel",e.selectedCartera),g("disabled",!e.selectedInquilino),r(),g("value",0),r(2),E(e.carteras()),r(5),h("ngModel",e.metaEditando().idSubcartera),g("disabled",!e.selectedCartera),r(),g("value",0),r(2),E(e.subcarteras()),r(5),h("ngModel",e.metaEditando().metaGrupal),r(10),E(e.metaEditando().escalas),r(2),y(e.metaEditando().escalas.length===0?43:-1),r(2),g("disabled",e.isLoading()),r(),b(" ",e.isLoading()?"Guardando...":"Guardar"," ")}}function Se(o,d){if(o&1&&(n(0,"span",55),s(1),a()),o&2){let t=d.$implicit;r(),$(" ",t.porcentajeDesde,"-",t.porcentajeHasta||"100+","% = S/",t.montoComision," ")}}function Ee(o,d){o&1&&(n(0,"span",56),s(1,"Sin escalas"),a())}function we(o,d){if(o&1){let t=V();n(0,"tr",50)(1,"td",51),s(2),a(),n(3,"td",52),s(4),a(),n(5,"td",53)(6,"div",54),S(7,Se,2,3,"span",55,I),k(9,Ee,2,0,"span",56),a()(),n(10,"td",57)(11,"span",58),s(12),a()(),n(13,"td",57)(14,"button",59),_("click",function(){let i=m(t).$implicit,l=c(3);return p(l.editarMeta(i))}),f(),n(15,"svg",60),w(16,"path",61),a()(),F(),n(17,"button",62),_("click",function(){let i=m(t).$implicit,l=c(3);return p(l.eliminarMeta(i))}),f(),n(18,"svg",60),w(19,"path",63),a()()()()}if(o&2){let t=d.$implicit,e=c(3);r(2),b(" ",t.nombreSubcartera||"Subcartera "+t.idSubcartera," "),r(2),b(" S/ ",e.formatMonto(t.metaGrupal)," "),r(3),E(t.escalas||O(6,me)),r(2),y(!t.escalas||t.escalas.length===0?9:-1),r(2),D(t.activo?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-400"),r(),b(" ",t.activo?"Activo":"Inactivo"," ")}}function Me(o,d){if(o&1&&(n(0,"div",20)(1,"table",44)(2,"thead",45)(3,"tr")(4,"th",46),s(5,"Subcartera"),a(),n(6,"th",47),s(7,"Meta Grupal"),a(),n(8,"th",46),s(9,"Escalas de Comisi\xF3n"),a(),n(10,"th",48),s(11,"Estado"),a(),n(12,"th",48),s(13,"Acciones"),a()()(),n(14,"tbody",49),S(15,we,20,7,"tr",50,I),a()()()),o&2){let t=c(2);r(15),E(t.metas())}}function ke(o,d){o&1&&(n(0,"div",21),s(1," No hay metas configuradas para este per\xEDodo "),a())}function ye(o,d){if(o&1){let t=V();n(0,"div",11)(1,"div",13)(2,"div")(3,"label",14),s(4,"A\xF1o"),a(),n(5,"select",15),v("ngModelChange",function(i){m(t);let l=c();return C(l.filtroAnio,i)||(l.filtroAnio=i),p(i)}),_("change",function(){m(t);let i=c();return p(i.cargarMetas())}),S(6,ge,2,2,"option",16,j),a()(),n(8,"div")(9,"label",14),s(10,"Mes"),a(),n(11,"select",15),v("ngModelChange",function(i){m(t);let l=c();return C(l.filtroMes,i)||(l.filtroMes=i),p(i)}),_("change",function(){m(t);let i=c();return p(i.cargarMetas())}),S(12,ue,2,2,"option",16,le),a()(),n(14,"button",17),_("click",function(){m(t);let i=c();return p(i.nuevaMeta())}),f(),n(15,"svg",7),w(16,"path",18),a(),s(17," Nueva Meta "),a()(),k(18,fe,49,13,"div",19),k(19,Me,17,0,"div",20)(20,ke,2,0,"div",21),a()}if(o&2){let t=c();r(5),h("ngModel",t.filtroAnio),r(),E(t.aniosDisponibles),r(5),h("ngModel",t.filtroMes),r(),E(t.mesesDisponibles),r(6),y(t.mostrarFormMeta()?18:-1),r(),y(t.metas().length>0?19:20)}}function Te(o,d){if(o&1&&(n(0,"option",16),s(1),a()),o&2){let t=d.$implicit,e=c(3);g("value",t),r(),T(e.comisionesService.getNombreCampo(t))}}function Ve(o,d){if(o&1){let t=V();n(0,"div",76)(1,"input",78),v("ngModelChange",function(i){let l=m(t).$implicit;return C(l.cantidadMinima,i)||(l.cantidadMinima=i),p(i)}),a(),n(2,"span",79),s(3,"pagos ="),a(),n(4,"input",80),v("ngModelChange",function(i){let l=m(t).$implicit;return C(l.monto,i)||(l.monto=i),p(i)}),a(),n(5,"span",79),s(6,"S/"),a(),n(7,"button",81),_("click",function(){let i=m(t).$index,l=c(3);return p(l.eliminarEscala(i))}),f(),n(8,"svg",7),w(9,"path",43),a()()()}if(o&2){let t=d.$implicit;r(),h("ngModel",t.cantidadMinima),r(3),h("ngModel",t.monto)}}function Pe(o,d){if(o&1){let t=V();n(0,"div",67)(1,"h3",22),s(2),a(),n(3,"div",69)(4,"div")(5,"label",14),s(6,"Nombre del Bono"),a(),n(7,"input",70),v("ngModelChange",function(i){m(t);let l=c(2);return C(l.bonoEditando().nombre,i)||(l.bonoEditando().nombre=i),p(i)}),a()(),n(8,"div")(9,"label",14),s(10,"Descripci\xF3n"),a(),n(11,"input",71),v("ngModelChange",function(i){m(t);let l=c(2);return C(l.bonoEditando().descripcion,i)||(l.bonoEditando().descripcion=i),p(i)}),a()(),n(12,"div")(13,"label",14),s(14,"Campo a Evaluar"),a(),n(15,"select",72),v("ngModelChange",function(i){m(t);let l=c(2);return C(l.bonoEditando().campoEvaluar,i)||(l.bonoEditando().campoEvaluar=i),p(i)}),n(16,"option",73),s(17,"Seleccionar campo..."),a(),S(18,Te,2,2,"option",16,j),a()(),n(20,"div")(21,"label",14),s(22,"Valor a Buscar"),a(),n(23,"input",74),v("ngModelChange",function(i){m(t);let l=c(2);return C(l.bonoEditando().valorBuscar,i)||(l.bonoEditando().valorBuscar=i),p(i)}),a()()(),n(24,"div",27)(25,"div",28)(26,"label",29),s(27,"Escalas"),a(),n(28,"button",75),_("click",function(){m(t);let i=c(2);return p(i.agregarEscala())}),f(),n(29,"svg",31),w(30,"path",18),a(),s(31," Agregar escala "),a()(),F(),n(32,"div",32),S(33,Ve,10,2,"div",76,L),a()(),n(35,"div",35)(36,"button",77),_("click",function(){m(t);let i=c(2);return p(i.guardarBono())}),s(37),a(),n(38,"button",37),_("click",function(){m(t);let i=c(2);return p(i.cancelarBono())}),s(39," Cancelar "),a()()()}if(o&2){let t,e=c(2);r(2),b(" ",(t=e.bonoEditando())!=null&&t.id?"Editar Bono":"Nuevo Bono"," "),r(5),h("ngModel",e.bonoEditando().nombre),r(4),h("ngModel",e.bonoEditando().descripcion),r(4),h("ngModel",e.bonoEditando().campoEvaluar),r(3),E(e.camposDisponibles()),r(5),h("ngModel",e.bonoEditando().valorBuscar),r(10),E(e.bonoEditando().escalas),r(3),g("disabled",e.isLoading()),r(),b(" ",e.isLoading()?"Guardando...":"Guardar"," ")}}function Be(o,d){if(o&1&&(n(0,"p",86),s(1),a()),o&2){let t=c().$implicit;r(),T(t.descripcion)}}function Ie(o,d){if(o&1&&(n(0,"span",91),s(1),a()),o&2){let t=d.$implicit;r(),N(" ",t.cantidadMinima,"+ pagos = S/ ",t.monto," ")}}function Fe(o,d){if(o&1&&(n(0,"div",90),S(1,Ie,2,2,"span",91,I),a()),o&2){let t=c().$implicit;r(),E(t.escalas)}}function De(o,d){if(o&1){let t=V();n(0,"div",82)(1,"div",83)(2,"div")(3,"h4",84),s(4),a(),n(5,"p",85),s(6),a(),k(7,Be,2,1,"p",86),a(),n(8,"div",87)(9,"span",58),s(10),a(),n(11,"button",88),_("click",function(){let i=m(t).$implicit,l=c(3);return p(l.editarBono(i))}),f(),n(12,"svg",7),w(13,"path",61),a()(),F(),n(14,"button",89),_("click",function(){let i=m(t).$implicit,l=c(3);return p(l.eliminarBono(i))}),f(),n(15,"svg",7),w(16,"path",63),a()()()(),k(17,Fe,3,0,"div",90),a()}if(o&2){let t=d.$implicit,e=c(3);r(4),T(t.nombre),r(2),N(" ",e.comisionesService.getNombreCampo(t.campoEvaluar),' = "',t.valorBuscar,'" '),r(),y(t.descripcion?7:-1),r(2),D(t.activo?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-400"),r(),b(" ",t.activo?"Activo":"Inactivo"," "),r(7),y(t.escalas&&t.escalas.length>0?17:-1)}}function We(o,d){if(o&1&&(n(0,"div",68),S(1,De,18,8,"div",82,I),a()),o&2){let t=c(2);r(),E(t.bonos())}}function je(o,d){o&1&&(n(0,"div",21),s(1," No hay bonos configurados "),a())}function Ae(o,d){if(o&1){let t=V();n(0,"div",11)(1,"div",64)(2,"h2",65),s(3,"Configuraci\xF3n de Bonos"),a(),n(4,"button",66),_("click",function(){m(t);let i=c();return p(i.nuevoBono())}),f(),n(5,"svg",7),w(6,"path",18),a(),s(7," Nuevo Bono "),a()(),k(8,Pe,40,7,"div",67),k(9,We,3,0,"div",68)(10,je,2,0,"div",21),a()}if(o&2){let t=c();r(8),y(t.mostrarFormBono()?8:-1),r(),y(t.bonos().length>0?9:10)}}function Le(o,d){if(o&1&&(n(0,"option",16),s(1),a()),o&2){let t=d.$implicit;g("value",t),r(),T(t)}}function Ne(o,d){if(o&1&&(n(0,"option",16),s(1),a()),o&2){let t=d.$implicit;g("value",t.value),r(),T(t.label)}}function $e(o,d){if(o&1&&(n(0,"option",16),s(1),a()),o&2){let t=d.$implicit;g("value",t.id),r(),T(t.nombreInquilino)}}function qe(o,d){if(o&1&&(n(0,"option",16),s(1),a()),o&2){let t=d.$implicit;g("value",t.id),r(),T(t.nombreCartera)}}function Ge(o,d){if(o&1&&(n(0,"option",16),s(1),a()),o&2){let t=d.$implicit;g("value",t.id),r(),T(t.nombreSubcartera)}}function He(o,d){o&1&&(f(),n(0,"svg",97),w(1,"circle",98)(2,"path",99),a(),s(3," Calculando... "))}function ze(o,d){o&1&&(f(),n(0,"svg",7),w(1,"path",100),a(),s(2," Calcular Comisiones "))}function Oe(o,d){if(o&1){let t=V();n(0,"button",127),_("click",function(){m(t);let i=c().$implicit,l=c(4);return p(l.toggleDetalleBonos(i))}),f(),n(1,"svg",128),w(2,"path",129),a()()}}function Ue(o,d){if(o&1&&(n(0,"span",133),s(1),a()),o&2){let t=d.$implicit;r(),$(" ",t.nombreBono,": ",t.cantidadPagos," pagos = S/ ",t.montoGanado," ")}}function Re(o,d){if(o&1&&(n(0,"tr",126)(1,"td",130)(2,"div",131)(3,"span",132),s(4,"Bonos ganados:"),a(),S(5,Ue,2,3,"span",133,_e),a()()()),o&2){let t=c().$implicit;r(5),E(t.bonosGanados)}}function Xe(o,d){if(o&1&&(n(0,"tr",50)(1,"td",118),s(2),a(),n(3,"td",119),s(4),a(),n(5,"td",52),s(6),a(),n(7,"td",120),s(8),a(),n(9,"td",121)(10,"span"),s(11),U(12,"number"),a()(),n(13,"td",122),s(14),a(),n(15,"td",123),s(16),k(17,Oe,3,0,"button",124),a(),n(18,"td",125),s(19),a()(),k(20,Re,7,0,"tr",126)),o&2){let t=d.$implicit,e=c(4);r(2),b(" ",t.nombreAgente||"Agente "+t.idAgente," "),r(2),b(" ",t.nombreSubcartera," "),r(2),b(" S/ ",e.formatMonto(t.recaudoTotal)," "),r(2),b(" S/ ",e.formatMonto(t.metaIndividual)," "),r(2),D(t.metaAlcanzada?"text-green-600 font-semibold":"text-amber-600"),r(),b(" ",R(12,12,t.porcentajeCumplimiento,"1.1-1"),"% "),r(3),b(" S/ ",e.formatMonto(t.comisionBase)," "),r(2),b(" S/ ",e.formatMonto(t.totalBonos)," "),r(),y(t.bonosGanados&&t.bonosGanados.length>0?17:-1),r(2),b(" S/ ",e.formatMonto(t.totalComision)," "),r(),y(e.agenteExpandido()===t.idAgente&&t.bonosGanados&&t.bonosGanados.length>0?20:-1)}}function Je(o,d){if(o&1&&(n(0,"div",20)(1,"table",44)(2,"thead",45)(3,"tr")(4,"th",46),s(5,"Agente"),a(),n(6,"th",46),s(7,"Subcartera"),a(),n(8,"th",47),s(9,"Recaudo"),a(),n(10,"th",47),s(11,"Meta"),a(),n(12,"th",47),s(13,"% Cumpl."),a(),n(14,"th",47),s(15,"Comisi\xF3n"),a(),n(16,"th",47),s(17,"Bonos"),a(),n(18,"th",47),s(19,"Total"),a()()(),n(20,"tbody",49),S(21,Xe,21,15,null,null,pe),a()()()),o&2){let t=c(3);r(21),E(t.reporte().agentes)}}function Ye(o,d){o&1&&(n(0,"div",21),s(1," No hay datos para mostrar "),a())}function Ke(o,d){if(o&1){let t=V();n(0,"div",101)(1,"div",102)(2,"p",103),s(3,"Total Recaudo"),a(),n(4,"p",104),s(5),a()(),n(6,"div",105)(7,"p",106),s(8,"Total Comisiones"),a(),n(9,"p",107),s(10),a()(),n(11,"div",108)(12,"p",109),s(13,"Total Bonos"),a(),n(14,"p",110),s(15),a()(),n(16,"div",111)(17,"p",112),s(18,"Agentes"),a(),n(19,"p",113),s(20),a()()(),n(21,"div",114)(22,"button",66),_("click",function(){m(t);let i=c(2);return p(i.exportarExcel())}),f(),n(23,"svg",7),w(24,"path",115),a(),s(25," Exportar Excel "),a(),F(),n(26,"button",116),_("click",function(){m(t);let i=c(2);return p(i.exportarPdf())}),f(),n(27,"svg",7),w(28,"path",117),a(),s(29," Exportar PDF "),a()(),k(30,Je,23,0,"div",20)(31,Ye,2,0,"div",21)}if(o&2){let t=c(2);r(5),b("S/ ",t.formatMonto(t.reporte().totalRecaudo)),r(5),b("S/ ",t.formatMonto(t.reporte().totalComisiones)),r(5),b("S/ ",t.formatMonto(t.reporte().totalBonos)),r(5),T(t.reporte().totalAgentes),r(10),y(t.reporte().agentes&&t.reporte().agentes.length>0?30:31)}}function Qe(o,d){o&1&&(n(0,"div",96),f(),n(1,"svg",134),w(2,"path",10),a(),F(),n(3,"p"),s(4,'Selecciona un per\xEDodo y haz clic en "Calcular Comisiones"'),a()())}function Ze(o,d){if(o&1){let t=V();n(0,"div",11)(1,"div",13)(2,"div")(3,"label",14),s(4,"A\xF1o"),a(),n(5,"select",92),v("ngModelChange",function(i){m(t);let l=c();return C(l.filtroAnio,i)||(l.filtroAnio=i),p(i)}),S(6,Le,2,2,"option",16,j),a()(),n(8,"div")(9,"label",14),s(10,"Mes"),a(),n(11,"select",92),v("ngModelChange",function(i){m(t);let l=c();return C(l.filtroMes,i)||(l.filtroMes=i),p(i)}),S(12,Ne,2,2,"option",16,le),a()(),n(14,"div")(15,"label",14),s(16,"Inquilino"),a(),n(17,"select",15),v("ngModelChange",function(i){m(t);let l=c();return C(l.reporteInquilino,i)||(l.reporteInquilino=i),p(i)}),_("change",function(){m(t);let i=c();return p(i.onReporteInquilinoChange())}),n(18,"option",16),s(19,"Todos"),a(),S(20,$e,2,2,"option",16,I),a()(),n(22,"div")(23,"label",14),s(24,"Cartera"),a(),n(25,"select",93),v("ngModelChange",function(i){m(t);let l=c();return C(l.reporteCartera,i)||(l.reporteCartera=i),p(i)}),_("change",function(){m(t);let i=c();return p(i.onReporteCarteraChange())}),n(26,"option",16),s(27,"Todas"),a(),S(28,qe,2,2,"option",16,I),a()(),n(30,"div")(31,"label",14),s(32,"Subcartera"),a(),n(33,"select",94),v("ngModelChange",function(i){m(t);let l=c();return C(l.reporteSubcartera,i)||(l.reporteSubcartera=i),p(i)}),n(34,"option",16),s(35,"Todas"),a(),S(36,Ge,2,2,"option",16,I),a()(),n(38,"button",95),_("click",function(){m(t);let i=c();return p(i.calcularComisiones())}),k(39,He,4,0)(40,ze,3,0),a()(),k(41,Ke,32,5)(42,Qe,5,0,"div",96),a()}if(o&2){let t=c();r(5),h("ngModel",t.filtroAnio),r(),E(t.aniosDisponibles),r(5),h("ngModel",t.filtroMes),r(),E(t.mesesDisponibles),r(5),h("ngModel",t.reporteInquilino),r(),g("value",0),r(2),E(t.inquilinos()),r(5),h("ngModel",t.reporteCartera),g("disabled",!t.reporteInquilino),r(),g("value",0),r(2),E(t.reporteCarteras()),r(5),h("ngModel",t.reporteSubcartera),g("disabled",!t.reporteCartera),r(),g("value",0),r(2),E(t.reporteSubcarteras()),r(2),g("disabled",t.isLoading()),r(),y(t.isLoading()?39:40),r(2),y(t.reporte()?41:42)}}function et(o,d){if(o&1&&(n(0,"div",135)(1,"p"),s(2),a()()),o&2){let t=c();D(t.mensajeError()?"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-800":"bg-green-50 border-green-200 dark:bg-green-900/20 dark:border-green-800"),r(),D(t.mensajeError()?"text-red-700 dark:text-red-400":"text-green-700 dark:text-green-400"),r(),b(" ",t.mensaje()," ")}}var mt=(()=>{let d=class d{constructor(e){this.comisionesService=e,this.activeTab=M("metas"),this.isLoading=M(!1),this.mensaje=M(""),this.mensajeError=M(!1),this.inquilinos=M([]),this.carteras=M([]),this.subcarteras=M([]),this.selectedInquilino=0,this.selectedCartera=0,this.metas=M([]),this.mostrarFormMeta=M(!1),this.metaEditando=M(null),this.bonos=M([]),this.mostrarFormBono=M(!1),this.bonoEditando=M(null),this.camposDisponibles=M([]),this.reporte=M(null),this.agenteExpandido=M(null),this.reporteInquilino=0,this.reporteCartera=0,this.reporteSubcartera=0,this.reporteCarteras=M([]),this.reporteSubcarteras=M([]),this.filtroAnio=new Date().getFullYear(),this.filtroMes=new Date().getMonth()+1,this.aniosDisponibles=[2024,2025,2026],this.mesesDisponibles=[{value:1,label:"Enero"},{value:2,label:"Febrero"},{value:3,label:"Marzo"},{value:4,label:"Abril"},{value:5,label:"Mayo"},{value:6,label:"Junio"},{value:7,label:"Julio"},{value:8,label:"Agosto"},{value:9,label:"Septiembre"},{value:10,label:"Octubre"},{value:11,label:"Noviembre"},{value:12,label:"Diciembre"}]}ngOnInit(){this.cargarInquilinos(),this.cargarMetas(),this.cargarCamposDisponibles()}cargarInquilinos(){this.comisionesService.obtenerInquilinos().subscribe({next:e=>this.inquilinos.set(e),error:e=>console.error("Error al cargar inquilinos:",e)})}onInquilinoChange(){this.carteras.set([]),this.subcarteras.set([]),this.selectedCartera=0,this.metaEditando()&&this.metaEditando.set(B(P({},this.metaEditando()),{idSubcartera:0,nombreSubcartera:""})),this.selectedInquilino&&this.comisionesService.obtenerCarteras(this.selectedInquilino).subscribe({next:e=>this.carteras.set(e),error:e=>console.error("Error al cargar carteras:",e)})}onCarteraChange(){this.subcarteras.set([]),this.metaEditando()&&this.metaEditando.set(B(P({},this.metaEditando()),{idSubcartera:0,nombreSubcartera:""})),this.selectedCartera&&this.comisionesService.obtenerSubcarteras(this.selectedCartera).subscribe({next:e=>this.subcarteras.set(e),error:e=>console.error("Error al cargar subcarteras:",e)})}onReporteInquilinoChange(){this.reporteCarteras.set([]),this.reporteSubcarteras.set([]),this.reporteCartera=0,this.reporteSubcartera=0,this.reporteInquilino&&this.comisionesService.obtenerCarteras(this.reporteInquilino).subscribe({next:e=>this.reporteCarteras.set(e),error:e=>console.error("Error al cargar carteras:",e)})}onReporteCarteraChange(){this.reporteSubcarteras.set([]),this.reporteSubcartera=0,this.reporteCartera&&this.comisionesService.obtenerSubcarteras(this.reporteCartera).subscribe({next:e=>this.reporteSubcarteras.set(e),error:e=>console.error("Error al cargar subcarteras:",e)})}cargarMetas(){this.comisionesService.obtenerMetas(this.filtroAnio,this.filtroMes).subscribe({next:e=>this.metas.set(e),error:e=>this.mostrarMensaje("Error al cargar metas: "+e.message,!0)})}nuevaMeta(){this.selectedInquilino=0,this.selectedCartera=0,this.carteras.set([]),this.subcarteras.set([]),this.metaEditando.set({idSubcartera:0,nombreSubcartera:"",anio:this.filtroAnio,mes:this.filtroMes,metaGrupal:0,escalas:[],activo:!0}),this.mostrarFormMeta.set(!0)}editarMeta(e){this.metaEditando.set(B(P({},e),{escalas:e.escalas?[...e.escalas]:[]})),this.mostrarFormMeta.set(!0),e.idSubcartera&&this.comisionesService.obtenerJerarquiaSubcartera(e.idSubcartera).subscribe({next:i=>{this.selectedInquilino=i.idInquilino,this.selectedCartera=i.idCartera,this.comisionesService.obtenerCarteras(i.idInquilino).subscribe({next:l=>{this.carteras.set(l),this.comisionesService.obtenerSubcarteras(i.idCartera).subscribe({next:u=>this.subcarteras.set(u),error:u=>console.error("Error al cargar subcarteras:",u)})},error:l=>console.error("Error al cargar carteras:",l)})},error:i=>console.error("Error al cargar jerarqu\xEDa:",i)})}onSubcarteraChange(){if(!this.metaEditando())return;let e=this.subcarteras().find(i=>i.id==this.metaEditando().idSubcartera);e&&this.metaEditando.set(B(P({},this.metaEditando()),{nombreSubcartera:e.nombreSubcartera}))}agregarEscalaMeta(){if(!this.metaEditando())return;let e=[...this.metaEditando().escalas,{porcentajeDesde:0,porcentajeHasta:void 0,montoComision:0}];this.metaEditando.set(B(P({},this.metaEditando()),{escalas:e}))}eliminarEscalaMeta(e){if(!this.metaEditando())return;let i=this.metaEditando().escalas.filter((l,u)=>u!==e);this.metaEditando.set(B(P({},this.metaEditando()),{escalas:i}))}guardarMeta(){if(!this.metaEditando())return;let e=B(P({},this.metaEditando()),{idSubcartera:Number(this.metaEditando().idSubcartera)});this.isLoading.set(!0),this.comisionesService.guardarMeta(e).subscribe({next:()=>{this.mostrarMensaje("Meta guardada correctamente",!1),this.cargarMetas(),this.cancelarMeta()},error:i=>this.mostrarMensaje("Error: "+i.error?.message||i.message,!0),complete:()=>this.isLoading.set(!1)})}eliminarMeta(e){confirm("\xBFEliminar esta meta?")&&this.comisionesService.eliminarMeta(e.id).subscribe({next:()=>{this.mostrarMensaje("Meta eliminada",!1),this.cargarMetas()},error:i=>this.mostrarMensaje("Error: "+i.message,!0)})}cancelarMeta(){this.metaEditando.set(null),this.mostrarFormMeta.set(!1),this.selectedInquilino=0,this.selectedCartera=0,this.carteras.set([]),this.subcarteras.set([])}cargarBonos(){this.comisionesService.obtenerBonos().subscribe({next:e=>this.bonos.set(e),error:e=>this.mostrarMensaje("Error al cargar bonos: "+e.message,!0)})}cargarCamposDisponibles(){this.comisionesService.obtenerCamposDisponibles().subscribe({next:e=>this.camposDisponibles.set(e),error:()=>{}})}nuevoBono(){this.bonoEditando.set({nombre:"",descripcion:"",campoEvaluar:"",valorBuscar:"",activo:!0,escalas:[]}),this.mostrarFormBono.set(!0)}editarBono(e){this.bonoEditando.set(B(P({},e),{escalas:e.escalas?[...e.escalas]:[]})),this.mostrarFormBono.set(!0)}agregarEscala(){if(!this.bonoEditando())return;let e=[...this.bonoEditando().escalas,{cantidadMinima:0,monto:0}];this.bonoEditando.set(B(P({},this.bonoEditando()),{escalas:e}))}eliminarEscala(e){if(!this.bonoEditando())return;let i=this.bonoEditando().escalas.filter((l,u)=>u!==e);this.bonoEditando.set(B(P({},this.bonoEditando()),{escalas:i}))}guardarBono(){this.bonoEditando()&&(this.isLoading.set(!0),this.comisionesService.guardarBono(this.bonoEditando()).subscribe({next:()=>{this.mostrarMensaje("Bono guardado correctamente",!1),this.cargarBonos(),this.cancelarBono()},error:e=>this.mostrarMensaje("Error: "+e.error?.message||e.message,!0),complete:()=>this.isLoading.set(!1)}))}eliminarBono(e){confirm("\xBFEliminar este bono?")&&this.comisionesService.eliminarBono(e.id).subscribe({next:()=>{this.mostrarMensaje("Bono eliminado",!1),this.cargarBonos()},error:i=>this.mostrarMensaje("Error: "+i.message,!0)})}cancelarBono(){this.bonoEditando.set(null),this.mostrarFormBono.set(!1)}calcularComisiones(){this.isLoading.set(!0),this.reporte.set(null);let e=this.reporteSubcartera||void 0;this.comisionesService.calcularComisiones(this.filtroAnio,this.filtroMes,e).subscribe({next:i=>{this.reporte.set(i),i.agentes.length===0&&this.mostrarMensaje("No hay datos para el per\xEDodo seleccionado",!1)},error:i=>this.mostrarMensaje("Error al calcular: "+i.message,!0),complete:()=>this.isLoading.set(!1)})}toggleDetalleBonos(e){this.agenteExpandido()===e.idAgente?this.agenteExpandido.set(null):this.agenteExpandido.set(e.idAgente)}formatMonto(e){return e==null?"0.00":e.toLocaleString("es-PE",{minimumFractionDigits:2,maximumFractionDigits:2})}mostrarMensaje(e,i){this.mensaje.set(e),this.mensajeError.set(i),setTimeout(()=>this.mensaje.set(""),4e3)}exportarExcel(){if(!this.reporte())return;let e=this.reporte().agentes.map(x=>({Agente:x.nombreAgente||`Agente ${x.idAgente}`,Subcartera:x.nombreSubcartera||"","Recaudo (S/)":x.recaudoTotal,"Meta (S/)":x.metaIndividual,"% Cumplimiento":x.porcentajeCumplimiento,"Comisi\xF3n Base (S/)":x.comisionBase,"Bonos (S/)":x.totalBonos,"Total (S/)":x.totalComision}));e.push({Agente:"TOTALES",Subcartera:"","Recaudo (S/)":this.reporte().totalRecaudo,"Meta (S/)":0,"% Cumplimiento":0,"Comisi\xF3n Base (S/)":this.reporte().totalComisiones,"Bonos (S/)":this.reporte().totalBonos,"Total (S/)":this.reporte().totalComisiones+this.reporte().totalBonos});let i=A.json_to_sheet(e),l=A.book_new();A.book_append_sheet(l,i,"Comisiones");let u=`Comisiones_${this.filtroAnio}_${this.filtroMes}.xlsx`;re(l,u),this.mostrarMensaje("Excel exportado correctamente",!1)}exportarPdf(){if(!this.reporte())return;let e=this.mesesDisponibles.find(x=>x.value===this.filtroMes)?.label||"",i=this.reporte().agentes.map(x=>`
      <tr>
        <td style="padding: 10px; border: 1px solid #e2e8f0;">${x.nombreAgente||"Agente "+x.idAgente}</td>
        <td style="padding: 10px; border: 1px solid #e2e8f0;">${x.nombreSubcartera||""}</td>
        <td style="padding: 10px; border: 1px solid #e2e8f0; text-align: right;">S/ ${this.formatMonto(x.recaudoTotal)}</td>
        <td style="padding: 10px; border: 1px solid #e2e8f0; text-align: right;">S/ ${this.formatMonto(x.metaIndividual)}</td>
        <td style="padding: 10px; border: 1px solid #e2e8f0; text-align: center;">${x.porcentajeCumplimiento?.toFixed(1)}%</td>
        <td style="padding: 10px; border: 1px solid #e2e8f0; text-align: right; color: #16a34a; font-weight: 600;">S/ ${this.formatMonto(x.comisionBase)}</td>
        <td style="padding: 10px; border: 1px solid #e2e8f0; text-align: right; color: #d97706;">S/ ${this.formatMonto(x.totalBonos)}</td>
        <td style="padding: 10px; border: 1px solid #e2e8f0; text-align: right; font-weight: bold; color: #7c3aed;">S/ ${this.formatMonto(x.totalComision)}</td>
      </tr>
    `).join(""),l=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Reporte de Comisiones - ${e} ${this.filtroAnio}</title>
        <style>
          * { margin: 0; padding: 0; box-sizing: border-box; }
          body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; padding: 30px; background: #fff; }
          .header { text-align: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 3px solid #7c3aed; }
          .header h1 { color: #1e293b; font-size: 24px; margin-bottom: 5px; }
          .header p { color: #64748b; font-size: 14px; }
          .summary { display: flex; justify-content: space-between; margin-bottom: 25px; gap: 15px; }
          .summary-card { flex: 1; padding: 15px; border-radius: 8px; text-align: center; }
          .summary-card.recaudo { background: #dbeafe; border: 1px solid #3b82f6; }
          .summary-card.comision { background: #dcfce7; border: 1px solid #22c55e; }
          .summary-card.bonos { background: #fef3c7; border: 1px solid #f59e0b; }
          .summary-card.agentes { background: #f3e8ff; border: 1px solid #a855f7; }
          .summary-card .label { font-size: 12px; color: #475569; margin-bottom: 5px; }
          .summary-card .value { font-size: 20px; font-weight: bold; color: #1e293b; }
          table { width: 100%; border-collapse: collapse; margin-top: 20px; }
          th { background: #7c3aed; color: white; padding: 12px 10px; text-align: left; font-size: 12px; text-transform: uppercase; }
          th:nth-child(n+3) { text-align: right; }
          th:nth-child(5) { text-align: center; }
          tr:nth-child(even) { background: #f8fafc; }
          tr:hover { background: #f1f5f9; }
          .footer { margin-top: 30px; text-align: center; color: #94a3b8; font-size: 11px; padding-top: 20px; border-top: 1px solid #e2e8f0; }
          .totals-row { background: #1e293b !important; color: white; font-weight: bold; }
          .totals-row td { padding: 12px 10px; border: none; }
          @media print {
            body { padding: 15px; }
            .summary-card { padding: 10px; }
          }
        </style>
      </head>
      <body>
        <div class="header">
          <h1>Reporte de Comisiones</h1>
          <p>${e} ${this.filtroAnio}</p>
        </div>

        <div class="summary">
          <div class="summary-card recaudo">
            <div class="label">Total Recaudo</div>
            <div class="value">S/ ${this.formatMonto(this.reporte().totalRecaudo)}</div>
          </div>
          <div class="summary-card comision">
            <div class="label">Total Comisiones</div>
            <div class="value">S/ ${this.formatMonto(this.reporte().totalComisiones)}</div>
          </div>
          <div class="summary-card bonos">
            <div class="label">Total Bonos</div>
            <div class="value">S/ ${this.formatMonto(this.reporte().totalBonos)}</div>
          </div>
          <div class="summary-card agentes">
            <div class="label">Agentes</div>
            <div class="value">${this.reporte().totalAgentes}</div>
          </div>
        </div>

        <table>
          <thead>
            <tr>
              <th>Agente</th>
              <th>Subcartera</th>
              <th>Recaudo</th>
              <th>Meta</th>
              <th>% Cumpl.</th>
              <th>Comision</th>
              <th>Bonos</th>
              <th>Total</th>
            </tr>
          </thead>
          <tbody>
            ${i}
            <tr class="totals-row">
              <td colspan="2">TOTALES</td>
              <td style="text-align: right;">S/ ${this.formatMonto(this.reporte().totalRecaudo)}</td>
              <td></td>
              <td></td>
              <td style="text-align: right;">S/ ${this.formatMonto(this.reporte().totalComisiones)}</td>
              <td style="text-align: right;">S/ ${this.formatMonto(this.reporte().totalBonos)}</td>
              <td style="text-align: right;">S/ ${this.formatMonto(this.reporte().totalComisiones+this.reporte().totalBonos)}</td>
            </tr>
          </tbody>
        </table>

        <div class="footer">
          Generado el ${new Date().toLocaleDateString("es-PE")} a las ${new Date().toLocaleTimeString("es-PE")}
        </div>
      </body>
      </html>
    `,u=window.open("","_blank");u&&(u.document.write(l),u.document.close(),u.onload=()=>{u.print()})}};d.\u0275fac=function(i){return new(i||d)(H(se))},d.\u0275cmp=z({type:d,selectors:[["app-comisiones"]],decls:25,vars:10,consts:[[1,"min-h-screen","bg-slate-50","dark:bg-slate-900","p-6"],[1,"mb-6"],[1,"text-2xl","font-bold","text-slate-800","dark:text-white"],[1,"text-slate-600","dark:text-slate-400"],[1,"border-b","border-slate-200","dark:border-slate-700"],[1,"-mb-px","flex","space-x-8"],[1,"whitespace-nowrap","py-4","px-1","border-b-2","font-medium","text-sm","transition-colors","flex","items-center","gap-2",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"bg-white","dark:bg-slate-800","rounded-xl","shadow-sm","border","border-slate-200","dark:border-slate-700","p-6","mb-6"],[1,"fixed","bottom-4","right-4","p-4","border","rounded-lg","shadow-lg","max-w-md",3,"class"],[1,"flex","flex-wrap","gap-4","items-end","mb-6"],[1,"block","text-sm","font-medium","text-slate-700","dark:text-slate-300","mb-1"],[1,"px-3","py-2","border","border-slate-300","dark:border-slate-600","rounded-lg","bg-white","dark:bg-slate-700","text-slate-800","dark:text-white",3,"ngModelChange","change","ngModel"],[3,"value"],[1,"px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-colors","flex","items-center","gap-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"mb-6","p-4","border","border-blue-200","dark:border-blue-800","bg-blue-50","dark:bg-blue-900/20","rounded-lg"],[1,"overflow-x-auto"],[1,"text-center","py-8","text-slate-500","dark:text-slate-400"],[1,"text-lg","font-semibold","text-slate-800","dark:text-white","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-4","mb-4"],[1,"w-full","px-3","py-2","border","border-slate-300","dark:border-slate-600","rounded-lg","bg-white","dark:bg-slate-700","text-slate-800","dark:text-white",3,"ngModelChange","change","ngModel"],[1,"w-full","px-3","py-2","border","border-slate-300","dark:border-slate-600","rounded-lg","bg-white","dark:bg-slate-700","text-slate-800","dark:text-white","disabled:opacity-50",3,"ngModelChange","change","ngModel","disabled"],["type","number","placeholder","0.00",1,"w-full","px-3","py-2","border","border-slate-300","dark:border-slate-600","rounded-lg","bg-white","dark:bg-slate-700","text-slate-800","dark:text-white",3,"ngModelChange","ngModel"],[1,"mb-4"],[1,"flex","justify-between","items-center","mb-2"],[1,"block","text-sm","font-medium","text-slate-700","dark:text-slate-300"],[1,"text-sm","text-blue-600","hover:text-blue-800","dark:text-blue-400","flex","items-center","gap-1",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],[1,"space-y-2"],[1,"flex","gap-2","items-center","flex-wrap"],[1,"text-sm","text-slate-400","italic"],[1,"flex","gap-2"],[1,"px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","disabled:bg-slate-400","transition-colors",3,"click","disabled"],[1,"px-4","py-2","bg-slate-200","dark:bg-slate-700","text-slate-700","dark:text-slate-300","rounded-lg","hover:bg-slate-300","dark:hover:bg-slate-600","transition-colors",3,"click"],[1,"text-slate-500","text-sm"],["type","number","placeholder","0",1,"w-20","px-2","py-1.5","border","border-slate-300","dark:border-slate-600","rounded","bg-white","dark:bg-slate-700","text-slate-800","dark:text-white","text-sm",3,"ngModelChange","ngModel"],["type","number","placeholder","100",1,"w-20","px-2","py-1.5","border","border-slate-300","dark:border-slate-600","rounded","bg-white","dark:bg-slate-700","text-slate-800","dark:text-white","text-sm",3,"ngModelChange","ngModel"],["type","number","step","0.01","placeholder","0.00",1,"w-24","px-2","py-1.5","border","border-slate-300","dark:border-slate-600","rounded","bg-white","dark:bg-slate-700","text-slate-800","dark:text-white","text-sm",3,"ngModelChange","ngModel"],[1,"text-red-500","hover:text-red-700","p-1",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"min-w-full","divide-y","divide-slate-200","dark:divide-slate-700"],[1,"bg-slate-50","dark:bg-slate-700/50"],[1,"px-4","py-3","text-left","text-xs","font-medium","text-slate-500","uppercase"],[1,"px-4","py-3","text-right","text-xs","font-medium","text-slate-500","uppercase"],[1,"px-4","py-3","text-center","text-xs","font-medium","text-slate-500","uppercase"],[1,"divide-y","divide-slate-200","dark:divide-slate-700"],[1,"hover:bg-slate-50","dark:hover:bg-slate-700/50"],[1,"px-4","py-3","text-sm","text-slate-800","dark:text-white","font-medium"],[1,"px-4","py-3","text-sm","text-right","text-green-600","font-semibold"],[1,"px-4","py-3","text-sm"],[1,"flex","flex-wrap","gap-1"],[1,"px-2","py-0.5","bg-blue-100","dark:bg-blue-900/30","rounded","text-xs","text-blue-700","dark:text-blue-300"],[1,"text-slate-400","italic","text-xs"],[1,"px-4","py-3","text-center"],[1,"px-2","py-1","rounded-full","text-xs","font-medium"],[1,"text-blue-600","hover:text-blue-800","dark:text-blue-400","dark:hover:text-blue-300","mr-2",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","inline"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"text-red-600","hover:text-red-800","dark:text-red-400","dark:hover:text-red-300",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-lg","font-semibold","text-slate-800","dark:text-white"],[1,"px-4","py-2","bg-green-600","text-white","rounded-lg","hover:bg-green-700","transition-colors","flex","items-center","gap-2",3,"click"],[1,"mb-6","p-4","border","border-green-200","dark:border-green-800","bg-green-50","dark:bg-green-900/20","rounded-lg"],[1,"space-y-4"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","mb-4"],["type","text","placeholder","Ej: Bono LTD T5",1,"w-full","px-3","py-2","border","border-slate-300","dark:border-slate-600","rounded-lg","bg-white","dark:bg-slate-700","text-slate-800","dark:text-white",3,"ngModelChange","ngModel"],["type","text","placeholder","Descripci\xF3n opcional",1,"w-full","px-3","py-2","border","border-slate-300","dark:border-slate-600","rounded-lg","bg-white","dark:bg-slate-700","text-slate-800","dark:text-white",3,"ngModelChange","ngModel"],[1,"w-full","px-3","py-2","border","border-slate-300","dark:border-slate-600","rounded-lg","bg-white","dark:bg-slate-700","text-slate-800","dark:text-white",3,"ngModelChange","ngModel"],["value",""],["type","text","placeholder","Ej: ltd_t5",1,"w-full","px-3","py-2","border","border-slate-300","dark:border-slate-600","rounded-lg","bg-white","dark:bg-slate-700","text-slate-800","dark:text-white",3,"ngModelChange","ngModel"],[1,"text-sm","text-green-600","hover:text-green-800","dark:text-green-400","flex","items-center","gap-1",3,"click"],[1,"flex","gap-2","items-center"],[1,"px-4","py-2","bg-green-600","text-white","rounded-lg","hover:bg-green-700","disabled:bg-slate-400","transition-colors",3,"click","disabled"],["type","number","placeholder","Cantidad",1,"w-32","px-3","py-2","border","border-slate-300","dark:border-slate-600","rounded-lg","bg-white","dark:bg-slate-700","text-slate-800","dark:text-white",3,"ngModelChange","ngModel"],[1,"text-slate-500"],["type","number","step","0.01","placeholder","Monto",1,"w-32","px-3","py-2","border","border-slate-300","dark:border-slate-600","rounded-lg","bg-white","dark:bg-slate-700","text-slate-800","dark:text-white",3,"ngModelChange","ngModel"],[1,"text-red-500","hover:text-red-700",3,"click"],[1,"border","border-slate-200","dark:border-slate-700","rounded-lg","p-4"],[1,"flex","justify-between","items-start"],[1,"font-semibold","text-slate-800","dark:text-white"],[1,"text-sm","text-slate-600","dark:text-slate-400"],[1,"text-sm","text-slate-500","dark:text-slate-500","mt-1"],[1,"flex","items-center","gap-2"],[1,"text-blue-600","hover:text-blue-800","dark:text-blue-400",3,"click"],[1,"text-red-600","hover:text-red-800","dark:text-red-400",3,"click"],[1,"mt-3","flex","flex-wrap","gap-2"],[1,"px-2","py-1","bg-slate-100","dark:bg-slate-700","rounded","text-sm","text-slate-700","dark:text-slate-300"],[1,"px-3","py-2","border","border-slate-300","dark:border-slate-600","rounded-lg","bg-white","dark:bg-slate-700","text-slate-800","dark:text-white",3,"ngModelChange","ngModel"],[1,"px-3","py-2","border","border-slate-300","dark:border-slate-600","rounded-lg","bg-white","dark:bg-slate-700","text-slate-800","dark:text-white","disabled:opacity-50",3,"ngModelChange","change","ngModel","disabled"],[1,"px-3","py-2","border","border-slate-300","dark:border-slate-600","rounded-lg","bg-white","dark:bg-slate-700","text-slate-800","dark:text-white","disabled:opacity-50",3,"ngModelChange","ngModel","disabled"],[1,"px-6","py-2","bg-purple-600","text-white","rounded-lg","hover:bg-purple-700","disabled:bg-slate-400","transition-colors","flex","items-center","gap-2",3,"click","disabled"],[1,"text-center","py-12","text-slate-500","dark:text-slate-400"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-4","mb-6"],[1,"bg-blue-50","dark:bg-blue-900/20","rounded-lg","p-4"],[1,"text-sm","text-blue-600","dark:text-blue-400","font-medium"],[1,"text-2xl","font-bold","text-blue-800","dark:text-blue-300"],[1,"bg-green-50","dark:bg-green-900/20","rounded-lg","p-4"],[1,"text-sm","text-green-600","dark:text-green-400","font-medium"],[1,"text-2xl","font-bold","text-green-800","dark:text-green-300"],[1,"bg-amber-50","dark:bg-amber-900/20","rounded-lg","p-4"],[1,"text-sm","text-amber-600","dark:text-amber-400","font-medium"],[1,"text-2xl","font-bold","text-amber-800","dark:text-amber-300"],[1,"bg-purple-50","dark:bg-purple-900/20","rounded-lg","p-4"],[1,"text-sm","text-purple-600","dark:text-purple-400","font-medium"],[1,"text-2xl","font-bold","text-purple-800","dark:text-purple-300"],[1,"flex","gap-2","mb-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"px-4","py-2","bg-red-600","text-white","rounded-lg","hover:bg-red-700","transition-colors","flex","items-center","gap-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"],[1,"px-4","py-3","text-sm","font-medium","text-slate-800","dark:text-white"],[1,"px-4","py-3","text-sm","text-slate-600","dark:text-slate-400"],[1,"px-4","py-3","text-sm","text-right","text-slate-600","dark:text-slate-400"],[1,"px-4","py-3","text-sm","text-right"],[1,"px-4","py-3","text-sm","text-right","text-blue-600"],[1,"px-4","py-3","text-sm","text-right","text-amber-600"],[1,"ml-1","text-slate-400","hover:text-slate-600"],[1,"px-4","py-3","text-sm","text-right","font-bold","text-purple-600"],[1,"bg-amber-50","dark:bg-amber-900/10"],[1,"ml-1","text-slate-400","hover:text-slate-600",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","inline"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],["colspan","8",1,"px-4","py-2"],[1,"text-sm"],[1,"font-medium","text-amber-700","dark:text-amber-400"],[1,"ml-2","px-2","py-1","bg-amber-100","dark:bg-amber-900/30","rounded","text-amber-800","dark:text-amber-300"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12","mx-auto","mb-4","text-slate-300","dark:text-slate-600"],[1,"fixed","bottom-4","right-4","p-4","border","rounded-lg","shadow-lg","max-w-md"]],template:function(i,l){i&1&&(n(0,"div",0)(1,"div",1)(2,"h1",2),s(3," Comisiones "),a(),n(4,"p",3),s(5," Configuraci\xF3n de metas, bonos y c\xE1lculo de comisiones por agente "),a()(),n(6,"div",1)(7,"div",4)(8,"nav",5)(9,"button",6),_("click",function(){return l.activeTab.set("metas")}),f(),n(10,"svg",7),w(11,"path",8),a(),s(12," Metas "),a(),F(),n(13,"button",6),_("click",function(){return l.activeTab.set("bonos"),l.cargarBonos()}),f(),n(14,"svg",7),w(15,"path",9),a(),s(16," Bonos "),a(),F(),n(17,"button",6),_("click",function(){return l.activeTab.set("reporte")}),f(),n(18,"svg",7),w(19,"path",10),a(),s(20," Reporte "),a()()()(),k(21,ye,21,4,"div",11),k(22,Ae,11,2,"div",11),k(23,Ze,43,13,"div",11),k(24,et,3,5,"div",12),a()),i&2&&(r(9),D(l.activeTab()==="metas"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300 hover:border-slate-300"),r(4),D(l.activeTab()==="bonos"?"border-green-500 text-green-600 dark:text-green-400":"border-transparent text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300 hover:border-slate-300"),r(4),D(l.activeTab()==="reporte"?"border-purple-500 text-purple-600 dark:text-purple-400":"border-transparent text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300 hover:border-slate-300"),r(4),y(l.activeTab()==="metas"?21:-1),r(),y(l.activeTab()==="bonos"?22:-1),r(),y(l.activeTab()==="reporte"?23:-1),r(),y(l.mensaje()?24:-1))},dependencies:[J,oe,ne,ae,Q,te,ie,Z,ee,X],encapsulation:2});let o=d;return o})();export{mt as ComisionesPage};
