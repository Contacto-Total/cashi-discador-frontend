import{a as ae}from"./chunk-QEFW7LKZ.js";import{a as re}from"./chunk-VVSSGT66.js";import{e as w,n as oe}from"./chunk-EJXPUYOC.js";import{E as ie,c as J,f as K,k as X,s as ee,t as te,u as ne}from"./chunk-2YC26MZ7.js";import{pc as Y,qc as q}from"./chunk-YLTLMO6P.js";import{a as Z}from"./chunk-YQKVMPSG.js";import{b as S,c as $}from"./chunk-LYMJIISJ.js";import{Ac as M,Bc as O,Lb as d,Mb as t,Nb as n,Ob as p,Sb as A,Tb as F,Vb as L,Xb as x,Zb as C,bb as r,bc as k,ca as B,cc as I,cd as G,dc as D,dd as N,ed as U,ga as W,hb as E,ic as R,jc as V,lc as o,ld as Q,mc as h,md as H,na as T,nc as u,oa as z,ob as j,qc as v,rc as _,sc as P,tb as y,zc as b}from"./chunk-BMTIWWAP.js";var le=(()=>{let m=class m{constructor(e){this.http=e,this.apiUrl=`${Z.apiUrl}/reports`}getDashboardStats(){return this.http.get(`${this.apiUrl}/dashboard`)}getCallsByHour(e,l){let i=new S;return e&&(i=i.set("date",e.toISOString())),l&&(i=i.set("campaignId",l.toString())),this.http.get(`${this.apiUrl}/calls-by-hour`,{params:i})}getAgentPerformance(e,l,i){let c=new S;return e&&(c=c.set("dateFrom",e.toISOString())),l&&(c=c.set("dateTo",l.toISOString())),i&&(c=c.set("agentId",i.toString())),this.http.get(`${this.apiUrl}/agent-performance`,{params:c})}getCampaignStats(e){return this.http.get(`${this.apiUrl}/campaign-stats/${e}`)}getAllCampaignStats(e,l){let i=new S;return e&&(i=i.set("dateFrom",e.toISOString())),l&&(i=i.set("dateTo",l.toISOString())),this.http.get(`${this.apiUrl}/campaign-stats`,{params:i})}getAgentProductivity(e,l,i,c,g){let f=new S().set("fechaInicio",e).set("fechaFin",l);return i&&(f=f.set("tenantId",i.toString())),c&&(f=f.set("carteraId",c.toString())),g&&(f=f.set("subcarteraId",g.toString())),this.http.get(`${this.apiUrl}/agent-productivity`,{params:f})}};m.\u0275fac=function(l){return new(l||m)(W($))},m.\u0275prov=B({token:m,factory:m.\u0275fac,providedIn:"root"});let s=m;return s})();var ce=["barChart"],me=["lineChart"],ge=["doughnutChart"];function pe(s,m){if(s&1&&(t(0,"option",12),o(1),n()),s&2){let a=m.$implicit;d("ngValue",a.id),r(),h(a.tenantName)}}function ue(s,m){if(s&1&&(t(0,"option",12),o(1),n()),s&2){let a=m.$implicit;d("ngValue",a.id),r(),h(a.portfolioName)}}function he(s,m){if(s&1&&(t(0,"option",12),o(1),n()),s&2){let a=m.$implicit;d("ngValue",a.id),r(),h(a.subPortfolioName)}}function fe(s,m){if(s&1){let a=L();A(0),t(1,"div",10)(2,"label"),o(3,"Desde"),n(),t(4,"input",28),P("ngModelChange",function(l){T(a);let i=C();return _(i.customDateFrom,l)||(i.customDateFrom=l),z(l)}),n()(),t(5,"div",10)(6,"label"),o(7,"Hasta"),n(),t(8,"input",28),P("ngModelChange",function(l){T(a);let i=C();return _(i.customDateTo,l)||(i.customDateTo=l),z(l)}),n()(),F()}if(s&2){let a=C();r(4),v("ngModel",a.customDateFrom),r(4),v("ngModel",a.customDateTo)}}function be(s,m){s&1&&(t(0,"div",29)(1,"div",30),p(2,"lucide-angular",31),t(3,"span"),o(4,"Cargando datos..."),n()()()),s&2&&(r(2),d("size",32))}function ye(s,m){if(s&1&&(t(0,"div",32),p(1,"lucide-angular",33),t(2,"span"),o(3),n()()),s&2){let a=C();r(),d("size",20),r(2),h(a.error)}}function Ce(s,m){if(s&1&&(t(0,"tr")(1,"td",62)(2,"span",71),o(3),n()(),t(4,"td",63)(5,"div",72)(6,"div",73),p(7,"lucide-angular",74),n(),t(8,"span",75),o(9),n()()(),t(10,"td",64),o(11),b(12,"number"),n(),t(13,"td",64)(14,"span",76),o(15),b(16,"number"),n()(),t(17,"td",65),o(18),n(),t(19,"td",65),o(20),n(),t(21,"td",77)(22,"div",78),p(23,"div",79),t(24,"span",80),o(25),b(26,"number"),n()()(),t(27,"td",77)(28,"div",81),p(29,"div",79),t(30,"span",80),o(31),b(32,"number"),n()()(),t(33,"td",68)(34,"div",82),p(35,"lucide-angular",83),n()()()),s&2){let a=m.$implicit,e=C(2);r(2),V("top-3",a.ranking<=3),r(),h(a.ranking),r(4),d("size",16),r(2),h(a.nombreAgente),r(2),h(M(12,18,a.totalGestiones)),r(4),h(M(16,20,a.totalPromesas)),r(3),u("S/ ",e.formatMoney(a.proyeccion)),r(2),u("S/ ",e.formatMoney(a.recaudo)),r(3),R("width",e.Math.min(a.efectividadProyeccion,100),"%"),r(2),u("",O(26,22,a.efectividadProyeccion,"1.0-0"),"%"),r(4),R("width",e.Math.min(a.efectividadGeneral,100),"%"),r(2),u("",O(32,25,a.efectividadGeneral,"1.0-0"),"%"),r(3),d("ngClass",e.getTrendClass(a.trend)),r(),d("name",e.getTrendIcon(a.trend))("size",16)}}function ve(s,m){s&1&&(t(0,"div",84),p(1,"lucide-angular",85),t(2,"p"),o(3,"No hay datos de agentes para el periodo seleccionado"),n()()),s&2&&(r(),d("size",48))}function _e(s,m){if(s&1&&(A(0),t(1,"div",34)(2,"div",35)(3,"div",36),p(4,"lucide-angular",37),n(),t(5,"div",38)(6,"span",39),o(7),b(8,"number"),n(),t(9,"span",40),o(10,"Total Gestiones"),n(),t(11,"span",41),o(12),n()()(),t(13,"div",35)(14,"div",42),p(15,"lucide-angular",43),n(),t(16,"div",38)(17,"span",39),o(18),b(19,"number"),n(),t(20,"span",40),o(21,"Promesas Generadas"),n(),t(22,"span",41),o(23),n()()(),t(24,"div",35)(25,"div",44),p(26,"lucide-angular",45),n(),t(27,"div",38)(28,"span",39),o(29),n(),t(30,"span",40),o(31,"Monto Comprometido"),n(),t(32,"span",41),o(33),n()()(),t(34,"div",35)(35,"div",46),p(36,"lucide-angular",47),n(),t(37,"div",38)(38,"span",39),o(39),b(40,"number"),n(),t(41,"span",40),o(42,"% Efectividad Proyecci\xF3n"),n(),t(43,"span",41),o(44),n()()(),t(45,"div",35)(46,"div",48),p(47,"lucide-angular",49),n(),t(48,"div",38)(49,"span",39),o(50),b(51,"number"),n(),t(52,"span",40),o(53,"% Efectividad General"),n(),t(54,"span",41),o(55),n()()()(),t(56,"div",50)(57,"div",51)(58,"div",52)(59,"h3"),o(60,"Top Agentes por Promesas"),n(),t(61,"span",53),o(62),n()(),t(63,"div",54),p(64,"canvas",null,0),n()(),t(66,"div",51)(67,"div",52)(68,"h3"),o(69,"Tendencia de Promesas"),n(),t(70,"span",53),o(71,"Por dia"),n()(),t(72,"div",54),p(73,"canvas",null,1),n()(),t(75,"div",55)(76,"div",52)(77,"h3"),o(78,"Distribucion de Tipificaciones"),n(),t(79,"span",53),o(80,"Por categoria"),n()(),t(81,"div",56),p(82,"canvas",null,2),n()()(),t(84,"div",57)(85,"div",58)(86,"h3"),o(87,"Detalle por Agente"),n(),t(88,"span",59),o(89),n()(),t(90,"div",60)(91,"table",61)(92,"thead")(93,"tr")(94,"th",62),o(95,"#"),n(),t(96,"th",63),o(97,"Agente"),n(),t(98,"th",64),o(99,"Gestiones"),n(),t(100,"th",64),o(101,"Promesas"),n(),t(102,"th",65),o(103,"Proyecci\xF3n"),n(),t(104,"th",65),o(105,"Recaudo"),n(),t(106,"th",66),o(107,"% Efectividad Proyecci\xF3n"),n(),t(108,"th",67),o(109,"% Efectividad General"),n(),t(110,"th",68),o(111,"Tendencia"),n()()(),t(112,"tbody"),y(113,Ce,36,28,"tr",69),n()()(),y(114,ve,4,1,"div",70),n(),F()),s&2){let a=C();r(4),d("size",24),r(3),h(M(8,24,a.summary==null?null:a.summary.totalGestiones)),r(4),d("ngClass",a.getChangeClass(a.summary==null?null:a.summary.cambioGestiones)),r(),u(" ",a.formatPercent(a.summary==null?null:a.summary.cambioGestiones)," "),r(3),d("size",24),r(3),h(M(19,26,a.summary==null?null:a.summary.totalPromesas)),r(4),d("ngClass",a.getChangeClass(a.summary==null?null:a.summary.cambioPromesas)),r(),u(" ",a.formatPercent(a.summary==null?null:a.summary.cambioPromesas)," "),r(3),d("size",24),r(3),u("S/ ",a.formatMoney((a.summary==null?null:a.summary.montoTotalPromesas)||0)),r(3),d("ngClass",a.getChangeClass(a.summary==null?null:a.summary.cambioMonto)),r(),u(" ",a.formatPercent(a.summary==null?null:a.summary.cambioMonto)," "),r(3),d("size",24),r(3),u("",O(40,28,a.summary==null?null:a.summary.efectividadProyeccion,"1.1-1"),"%"),r(4),d("ngClass",a.getChangeClass(a.summary==null?null:a.summary.cambioEfectividadProyeccion)),r(),u(" ",a.formatPercent(a.summary==null?null:a.summary.cambioEfectividadProyeccion)," "),r(3),d("size",24),r(3),u("",O(51,31,a.summary==null?null:a.summary.efectividadGeneral,"1.1-1"),"%"),r(4),d("ngClass",a.getChangeClass(a.summary==null?null:a.summary.cambioEfectividadGeneral)),r(),u(" ",a.formatPercent(a.summary==null?null:a.summary.cambioEfectividadGeneral)," "),r(7),h(a.getPeriodLabel()),r(27),u("",a.agents.length," agentes"),r(24),d("ngForOf",a.agents),r(),d("ngIf",a.agents.length===0)}}w.register(...oe);var Ae=(()=>{let m=class m{constructor(e,l,i){this.reportService=e,this.tenantService=l,this.portfolioService=i,this.Math=Math,this.tenants=[],this.portfolios=[],this.subPortfolios=[],this.selectedTenantId=null,this.selectedCarteraId=null,this.selectedSubcarteraId=null,this.selectedPeriod="today",this.customDateFrom="",this.customDateTo="",this.loading=!1,this.error=null,this.productivityData=null,this.barChart=null,this.lineChart=null,this.doughnutChart=null,this.subscriptions=[]}ngOnInit(){this.loadTenants(),this.setDefaultDates(),this.loadData()}ngAfterViewInit(){}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe()),this.destroyCharts()}setDefaultDates(){let e=new Date;this.customDateTo=this.formatDate(e),this.customDateFrom=this.formatDate(e)}formatDate(e){return e.toISOString().split("T")[0]}getDateRange(){let e=new Date,l,i=e;switch(this.selectedPeriod){case"today":l=e;break;case"week":l=new Date(e),l.setDate(e.getDate()-7);break;case"month":l=new Date(e.getFullYear(),e.getMonth(),1);break;case"lastMonth":l=new Date(e.getFullYear(),e.getMonth()-1,1),i=new Date(e.getFullYear(),e.getMonth(),0);break;case"year":l=new Date(e.getFullYear(),0,1);break;case"custom":return{fechaInicio:this.customDateFrom,fechaFin:this.customDateTo};default:l=e}return{fechaInicio:this.formatDate(l),fechaFin:this.formatDate(i)}}loadTenants(){this.tenantService.getAllTenants().subscribe({next:e=>{this.tenants=e},error:e=>{console.error("Error loading tenants:",e)}})}onTenantChange(){this.portfolios=[],this.subPortfolios=[],this.selectedCarteraId=null,this.selectedSubcarteraId=null,this.selectedTenantId&&this.portfolioService.getPortfoliosByTenant(this.selectedTenantId).subscribe({next:e=>{this.portfolios=e},error:e=>{console.error("Error loading portfolios:",e)}})}onCarteraChange(){this.subPortfolios=[],this.selectedSubcarteraId=null,this.selectedCarteraId&&this.portfolioService.getActiveSubPortfoliosByPortfolio(this.selectedCarteraId).subscribe({next:e=>{this.subPortfolios=e},error:e=>{console.error("Error loading subportfolios:",e)}})}onPeriodChange(){this.selectedPeriod!=="custom"&&this.loadData()}loadData(){this.loading=!0,this.error=null;let{fechaInicio:e,fechaFin:l}=this.getDateRange();this.reportService.getAgentProductivity(e,l,this.selectedTenantId||void 0,this.selectedCarteraId||void 0,this.selectedSubcarteraId||void 0).subscribe({next:i=>{this.productivityData=i,this.loading=!1,setTimeout(()=>this.initCharts(),100)},error:i=>{console.error("Error loading productivity data:",i),this.error="Error al cargar los datos de productividad",this.loading=!1}})}destroyCharts(){this.barChart&&(this.barChart.destroy(),this.barChart=null),this.lineChart&&(this.lineChart.destroy(),this.lineChart=null),this.doughnutChart&&(this.doughnutChart.destroy(),this.doughnutChart=null)}initCharts(){this.destroyCharts(),this.productivityData?.chartData&&(this.initBarChart(),this.initLineChart(),this.initDoughnutChart())}initBarChart(){if(!this.barChartRef?.nativeElement||!this.productivityData?.chartData.topAgentesPorPromesas)return;let e=this.productivityData.chartData.topAgentesPorPromesas,l=document.body.classList.contains("dark-theme");this.barChart=new w(this.barChartRef.nativeElement,{type:"bar",data:{labels:e.map(i=>this.truncateName(i.nombre)),datasets:[{label:"Promesas",data:e.map(i=>i.cantidad),backgroundColor:"rgba(59, 130, 246, 0.8)",borderColor:"rgb(59, 130, 246)",borderWidth:1,borderRadius:4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:i=>{let c=e[i.dataIndex];return[`Promesas: ${c.cantidad}`,`Monto: S/ ${c.monto.toLocaleString()}`]}}}},scales:{y:{beginAtZero:!0,ticks:{color:l?"#94a3b8":"#64748b"},grid:{color:l?"rgba(148, 163, 184, 0.1)":"rgba(0, 0, 0, 0.1)"}},x:{ticks:{color:l?"#94a3b8":"#64748b",maxRotation:45,minRotation:45},grid:{display:!1}}}}})}initLineChart(){if(!this.lineChartRef?.nativeElement||!this.productivityData?.chartData.promesasPorDia)return;let e=this.productivityData.chartData.promesasPorDia,l=document.body.classList.contains("dark-theme");this.lineChart=new w(this.lineChartRef.nativeElement,{type:"line",data:{labels:e.map(i=>this.formatChartDate(i.fecha)),datasets:[{label:"Promesas",data:e.map(i=>i.cantidad),borderColor:"rgb(16, 185, 129)",backgroundColor:"rgba(16, 185, 129, 0.1)",fill:!0,tension:.3,pointRadius:4,pointHoverRadius:6}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:i=>{let c=e[i.dataIndex];return[`Promesas: ${c.cantidad}`,`Monto: S/ ${c.monto.toLocaleString()}`]}}}},scales:{y:{beginAtZero:!0,ticks:{color:l?"#94a3b8":"#64748b"},grid:{color:l?"rgba(148, 163, 184, 0.1)":"rgba(0, 0, 0, 0.1)"}},x:{ticks:{color:l?"#94a3b8":"#64748b"},grid:{display:!1}}}}})}initDoughnutChart(){if(!this.doughnutChartRef?.nativeElement||!this.productivityData?.chartData.tipificacionesDistribucion)return;let e=this.productivityData.chartData.tipificacionesDistribucion,l=Object.keys(e),i=Object.values(e),c=document.body.classList.contains("dark-theme"),g=["rgba(59, 130, 246, 0.8)","rgba(16, 185, 129, 0.8)","rgba(245, 158, 11, 0.8)","rgba(239, 68, 68, 0.8)","rgba(139, 92, 246, 0.8)","rgba(236, 72, 153, 0.8)","rgba(20, 184, 166, 0.8)","rgba(251, 146, 60, 0.8)"];this.doughnutChart=new w(this.doughnutChartRef.nativeElement,{type:"doughnut",data:{labels:l.map(f=>this.truncateName(f,20)),datasets:[{data:i,backgroundColor:g.slice(0,l.length),borderWidth:2,borderColor:c?"#1e293b":"#ffffff"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{color:c?"#e2e8f0":"#334155",padding:12,usePointStyle:!0,pointStyle:"circle"}}}}})}truncateName(e,l=15){return e?e.length>l?e.substring(0,l)+"...":e:""}formatChartDate(e){return new Date(e).toLocaleDateString("es-PE",{day:"2-digit",month:"short"})}get summary(){return this.productivityData?.summary||null}get agents(){return this.productivityData?.agents||[]}formatMoney(e){return e?.toLocaleString("es-PE",{minimumFractionDigits:2,maximumFractionDigits:2})||"0.00"}formatPercent(e){return e==null?"0%":`${e>0?"+":""}${e.toFixed(1)}%`}getTrendIcon(e){switch(e){case"up":return"trending-up";case"down":return"trending-down";default:return"minus"}}getTrendClass(e){switch(e){case"up":return"trend-up";case"down":return"trend-down";default:return"trend-stable"}}getChangeClass(e){return e?e>0?"change-positive":e<0?"change-negative":"":""}getPeriodLabel(){switch(this.selectedPeriod){case"today":return"Hoy";case"week":return"\xDAltimos 7 d\xEDas";case"month":return"Este mes";case"lastMonth":return"Mes anterior";case"year":return"Este a\xF1o";case"custom":return"Personalizado";default:return""}}};m.\u0275fac=function(l){return new(l||m)(E(le),E(ae),E(re))},m.\u0275cmp=j({type:m,selectors:[["app-agent-productivity"]],viewQuery:function(l,i){if(l&1&&(k(ce,5),k(me,5),k(ge,5)),l&2){let c;I(c=D())&&(i.barChartRef=c.first),I(c=D())&&(i.lineChartRef=c.first),I(c=D())&&(i.doughnutChartRef=c.first)}},decls:58,vars:19,consts:[["barChart",""],["lineChart",""],["doughnutChart",""],[1,"productivity-container"],[1,"page-header"],[1,"header-content"],[1,"header-icon"],["name","bar-chart-3",3,"size"],[1,"filters-section"],[1,"filters-row"],[1,"filter-group"],[3,"ngModelChange","change","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngModelChange","change","ngModel","disabled"],[3,"ngModelChange","ngModel","disabled"],["value","today"],["value","week"],["value","month"],["value","lastMonth"],["value","year"],["value","custom"],[4,"ngIf"],[1,"filter-group","filter-action"],[1,"btn-primary",3,"click","disabled"],["name","search",3,"size"],["class","loading-overlay",4,"ngIf"],["class","error-message",4,"ngIf"],["type","date",3,"ngModelChange","ngModel"],[1,"loading-overlay"],[1,"loading-spinner"],["name","loader",1,"spin",3,"size"],[1,"error-message"],["name","alert-circle",3,"size"],[1,"kpi-grid"],[1,"kpi-card"],[1,"kpi-icon","blue"],["name","clipboard-list",3,"size"],[1,"kpi-content"],[1,"kpi-value"],[1,"kpi-label"],[1,"kpi-change",3,"ngClass"],[1,"kpi-icon","green"],["name","handshake",3,"size"],[1,"kpi-icon","purple"],["name","banknote",3,"size"],[1,"kpi-icon","orange"],["name","percent",3,"size"],[1,"kpi-icon","teal"],["name","target",3,"size"],[1,"charts-grid"],[1,"chart-card"],[1,"chart-header"],[1,"chart-subtitle"],[1,"chart-container"],[1,"chart-card","chart-full"],[1,"chart-container","doughnut-container"],[1,"table-card"],[1,"table-header"],[1,"agent-count"],[1,"table-wrapper"],[1,"agents-table"],[1,"col-rank"],[1,"col-agent"],[1,"col-num"],[1,"col-money"],["title","(Recaudo / Proyecci\xF3n) \xD7 100",1,"col-pct"],["title","(Promesas / Gestiones) \xD7 100",1,"col-pct"],[1,"col-trend"],[4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],[1,"rank-badge"],[1,"agent-info"],[1,"agent-avatar"],["name","user",3,"size"],[1,"agent-name"],[1,"promesas-badge"],[1,"col-pct"],[1,"efectividad-bar"],[1,"bar-fill"],[1,"bar-label"],[1,"efectividad-bar","efectividad-general"],[1,"trend-indicator",3,"ngClass"],[3,"name","size"],[1,"empty-state"],["name","users",3,"size"]],template:function(l,i){l&1&&(t(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6),p(4,"lucide-angular",7),n(),t(5,"div")(6,"h1"),o(7,"Productividad de Agentes"),n(),t(8,"p"),o(9,"Analiza el rendimiento y las promesas generadas por cada agente"),n()()()(),t(10,"div",8)(11,"div",9)(12,"div",10)(13,"label"),o(14,"Inquilino"),n(),t(15,"select",11),P("ngModelChange",function(g){return _(i.selectedTenantId,g)||(i.selectedTenantId=g),g}),x("change",function(){return i.onTenantChange()}),t(16,"option",12),o(17,"Todos"),n(),y(18,pe,2,2,"option",13),n()(),t(19,"div",10)(20,"label"),o(21,"Cartera"),n(),t(22,"select",14),P("ngModelChange",function(g){return _(i.selectedCarteraId,g)||(i.selectedCarteraId=g),g}),x("change",function(){return i.onCarteraChange()}),t(23,"option",12),o(24,"Todas"),n(),y(25,ue,2,2,"option",13),n()(),t(26,"div",10)(27,"label"),o(28,"Subcartera"),n(),t(29,"select",15),P("ngModelChange",function(g){return _(i.selectedSubcarteraId,g)||(i.selectedSubcarteraId=g),g}),t(30,"option",12),o(31,"Todas"),n(),y(32,he,2,2,"option",13),n()(),t(33,"div",10)(34,"label"),o(35,"Periodo"),n(),t(36,"select",11),P("ngModelChange",function(g){return _(i.selectedPeriod,g)||(i.selectedPeriod=g),g}),x("change",function(){return i.onPeriodChange()}),t(37,"option",16),o(38,"Hoy"),n(),t(39,"option",17),o(40,"Ultimos 7 dias"),n(),t(41,"option",18),o(42,"Este mes"),n(),t(43,"option",19),o(44,"Mes anterior"),n(),t(45,"option",20),o(46,"Este anio"),n(),t(47,"option",21),o(48,"Personalizado"),n()()(),y(49,fe,9,2,"ng-container",22),t(50,"div",23)(51,"button",24),x("click",function(){return i.loadData()}),p(52,"lucide-angular",25),t(53,"span"),o(54,"Buscar"),n()()()()(),y(55,be,5,1,"div",26)(56,ye,4,2,"div",27)(57,_e,115,34,"ng-container",22),n()),l&2&&(r(4),d("size",24),r(11),v("ngModel",i.selectedTenantId),r(),d("ngValue",null),r(2),d("ngForOf",i.tenants),r(4),v("ngModel",i.selectedCarteraId),d("disabled",!i.selectedTenantId),r(),d("ngValue",null),r(2),d("ngForOf",i.portfolios),r(4),v("ngModel",i.selectedSubcarteraId),d("disabled",!i.selectedCarteraId),r(),d("ngValue",null),r(2),d("ngForOf",i.subPortfolios),r(4),v("ngModel",i.selectedPeriod),r(13),d("ngIf",i.selectedPeriod==="custom"),r(2),d("disabled",i.loading),r(),d("size",16),r(3),d("ngIf",i.loading),r(),d("ngIf",i.error),r(),d("ngIf",!i.loading&&!i.error&&i.productivityData))},dependencies:[H,G,N,U,ie,te,ne,J,ee,K,X,q,Y,Q],styles:[".productivity-container[_ngcontent-%COMP%]{padding:1.5rem;max-width:1600px;margin:0 auto}.page-header[_ngcontent-%COMP%]{margin-bottom:1.5rem}.header-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.header-icon[_ngcontent-%COMP%]{width:48px;height:48px;background:linear-gradient(135deg,#3b82f6,#1d4ed8);border-radius:12px;display:flex;align-items:center;justify-content:center;color:#fff}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:var(--text-primary, #1e293b);margin:0}.header-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-secondary, #64748b);margin:.25rem 0 0}.filters-section[_ngcontent-%COMP%]{background:var(--card-bg, white);border-radius:12px;padding:1rem 1.25rem;margin-bottom:1.5rem;border:1px solid var(--border-color, #e2e8f0)}.filters-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;align-items:flex-end}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.375rem;min-width:140px}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.75rem;font-weight:500;color:var(--text-secondary, #64748b);text-transform:uppercase;letter-spacing:.05em}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .filter-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:38px;padding:0 .75rem;border:1px solid var(--border-color, #e2e8f0);border-radius:8px;background:var(--input-bg, white);color:var(--text-primary, #1e293b);font-size:.875rem}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.filter-action[_ngcontent-%COMP%]{margin-left:auto}.btn-primary[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;height:38px;padding:0 1rem;background:linear-gradient(135deg,#3b82f6,#1d4ed8);color:#fff;border:none;border-radius:8px;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 12px #3b82f659}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.loading-overlay[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:4rem}.loading-spinner[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem;color:var(--text-secondary, #64748b)}.spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:1rem 1.25rem;background:#fef2f2;border:1px solid #fecaca;border-radius:8px;color:#dc2626;margin-bottom:1.5rem}.kpi-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:1rem;margin-bottom:1.5rem}.kpi-card[_ngcontent-%COMP%]{background:var(--card-bg, white);border-radius:12px;padding:1.25rem;border:1px solid var(--border-color, #e2e8f0);display:flex;gap:1rem;align-items:flex-start}.kpi-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.kpi-icon.blue[_ngcontent-%COMP%]{background:#3b82f61a;color:#3b82f6}.kpi-icon.green[_ngcontent-%COMP%]{background:#10b9811a;color:#10b981}.kpi-icon.purple[_ngcontent-%COMP%]{background:#8b5cf61a;color:#8b5cf6}.kpi-icon.orange[_ngcontent-%COMP%]{background:#f59e0b1a;color:#f59e0b}.kpi-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.kpi-value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:var(--text-primary, #1e293b);line-height:1.2}.kpi-label[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-secondary, #64748b);margin-top:.25rem}.kpi-change[_ngcontent-%COMP%]{font-size:.75rem;font-weight:500;margin-top:.5rem}.change-positive[_ngcontent-%COMP%]{color:#10b981}.change-negative[_ngcontent-%COMP%]{color:#ef4444}.charts-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem;margin-bottom:1.5rem}.chart-card[_ngcontent-%COMP%]{background:var(--card-bg, white);border-radius:12px;padding:1.25rem;border:1px solid var(--border-color, #e2e8f0)}.chart-card.chart-full[_ngcontent-%COMP%]{grid-column:1 / -1}.chart-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.chart-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--text-primary, #1e293b);margin:0}.chart-subtitle[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-secondary, #64748b)}.chart-container[_ngcontent-%COMP%]{height:280px;position:relative}.doughnut-container[_ngcontent-%COMP%]{height:320px;max-width:600px;margin:0 auto}.table-card[_ngcontent-%COMP%]{background:var(--card-bg, white);border-radius:12px;border:1px solid var(--border-color, #e2e8f0);overflow:hidden}.table-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem 1.25rem;border-bottom:1px solid var(--border-color, #e2e8f0)}.table-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--text-primary, #1e293b);margin:0}.agent-count[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-secondary, #64748b);background:var(--bg-secondary, #f1f5f9);padding:.25rem .75rem;border-radius:9999px}.table-wrapper[_ngcontent-%COMP%]{overflow-x:auto}.agents-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.agents-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left;padding:.75rem 1rem;font-size:.7rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;color:var(--text-secondary, #64748b);background:var(--bg-secondary, #f8fafc);border-bottom:1px solid var(--border-color, #e2e8f0)}.agents-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.875rem 1rem;font-size:.875rem;color:var(--text-primary, #1e293b);border-bottom:1px solid var(--border-color, #e2e8f0)}.agents-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:var(--bg-hover, #f8fafc)}.col-rank[_ngcontent-%COMP%]{width:50px;text-align:center}.col-agent[_ngcontent-%COMP%]{min-width:180px}.col-num[_ngcontent-%COMP%]{width:100px;text-align:right}.col-money[_ngcontent-%COMP%]{width:130px;text-align:right;font-weight:500}.col-pct[_ngcontent-%COMP%]{width:140px}.col-status[_ngcontent-%COMP%]{width:200px}.col-trend[_ngcontent-%COMP%]{width:60px;text-align:center}.rank-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:28px;height:28px;border-radius:8px;font-size:.8rem;font-weight:600;background:var(--bg-secondary, #f1f5f9);color:var(--text-secondary, #64748b)}.rank-badge.top-3[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fbbf24,#f59e0b);color:#fff}.agent-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.agent-avatar[_ngcontent-%COMP%]{width:32px;height:32px;background:linear-gradient(135deg,#e0e7ff,#c7d2fe);border-radius:8px;display:flex;align-items:center;justify-content:center;color:#6366f1}.agent-name[_ngcontent-%COMP%]{font-weight:500}.promesas-badge[_ngcontent-%COMP%]{background:#10b9811a;color:#10b981;padding:.25rem .5rem;border-radius:6px;font-weight:600}.efectividad-bar[_ngcontent-%COMP%]{position:relative;height:20px;background:var(--bg-secondary, #e2e8f0);border-radius:10px;overflow:hidden}.bar-fill[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background:linear-gradient(90deg,#3b82f6,#60a5fa);border-radius:10px;transition:width .3s ease}.bar-label[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:.7rem;font-weight:600;color:var(--text-primary, #1e293b)}.status-pills[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.375rem}.pill[_ngcontent-%COMP%]{font-size:.7rem;font-weight:500;padding:.2rem .5rem;border-radius:4px}.pill.pending[_ngcontent-%COMP%]{background:#f59e0b26;color:#d97706}.pill.paid[_ngcontent-%COMP%]{background:#10b98126;color:#059669}.pill.overdue[_ngcontent-%COMP%]{background:#ef444426;color:#dc2626}.trend-indicator[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:32px;height:32px;border-radius:8px}.trend-up[_ngcontent-%COMP%]{background:#10b98126;color:#10b981}.trend-down[_ngcontent-%COMP%]{background:#ef444426;color:#ef4444}.trend-stable[_ngcontent-%COMP%]{background:var(--bg-secondary, #f1f5f9);color:var(--text-secondary, #64748b)}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem;color:var(--text-secondary, #64748b)}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:1rem}body.dark-theme[_nghost-%COMP%], body.dark-theme   [_nghost-%COMP%]{--card-bg: #1e293b;--text-primary: #e2e8f0;--text-secondary: #94a3b8;--border-color: #334155;--bg-secondary: #0f172a;--bg-hover: #334155;--input-bg: #0f172a}body.dark-theme[_nghost-%COMP%]   .header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#e2e8f0}body.dark-theme[_nghost-%COMP%]   .filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], body.dark-theme[_nghost-%COMP%]   .filter-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .filter-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:#0f172a;border-color:#334155;color:#e2e8f0}body.dark-theme[_nghost-%COMP%]   .error-message[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .error-message[_ngcontent-%COMP%]{background:#ef44441a;border-color:#ef44444d}body.dark-theme[_nghost-%COMP%]   .agents-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .agents-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#0f172a}body.dark-theme[_nghost-%COMP%]   .bar-label[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .bar-label[_ngcontent-%COMP%]{color:#e2e8f0}@media (max-width: 1200px){.kpi-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.charts-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (max-width: 768px){.productivity-container[_ngcontent-%COMP%]{padding:1rem}.kpi-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.filters-row[_ngcontent-%COMP%]{flex-direction:column}.filter-group[_ngcontent-%COMP%]{width:100%}.filter-action[_ngcontent-%COMP%]{margin-left:0;width:100%}.btn-primary[_ngcontent-%COMP%]{width:100%;justify-content:center}}"]});let s=m;return s})();export{Ae as AgentProductivityComponent};
