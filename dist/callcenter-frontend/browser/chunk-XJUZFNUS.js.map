{
  "version": 3,
  "sources": ["src/app/features/admin/extensions-registry/extensions-registry.component.ts", "src/app/features/admin/extensions-registry/extensions-registry.component.html"],
  "sourcesContent": ["import { Component, OnInit, OnDestroy, ViewEncapsulation } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { Router } from '@angular/router';\r\nimport { Subscription, interval } from 'rxjs';\r\nimport { switchMap } from 'rxjs/operators';\r\nimport { LucideAngularModule } from 'lucide-angular';\r\nimport { AdminMonitoringService, ExtensionRegistration } from '../../../core/services/admin-monitoring.service';\r\n\r\n@Component({\r\n  selector: 'app-extensions-registry',\r\n  standalone: true,\r\n  imports: [CommonModule, LucideAngularModule],\r\n  templateUrl: './extensions-registry.component.html',\r\n  styleUrls: ['./extensions-registry.component.css'],\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class ExtensionsRegistryComponent implements OnInit, OnDestroy {\r\n  extensions: ExtensionRegistration[] = [];\r\n  loading: boolean = false;\r\n  error: string | null = null;\r\n\r\n  private pollingSubscription?: Subscription;\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private monitoringService: AdminMonitoringService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.loadExtensions();\r\n    this.startPolling();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    if (this.pollingSubscription) {\r\n      this.pollingSubscription.unsubscribe();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Carga las extensiones registradas\r\n   */\r\n  loadExtensions(): void {\r\n    this.loading = true;\r\n    this.error = null;\r\n\r\n    this.monitoringService.getExtensionRegistrations().subscribe({\r\n      next: (extensions) => {\r\n        this.extensions = extensions;\r\n        this.loading = false;\r\n      },\r\n      error: (err) => {\r\n        console.error('Error loading extensions:', err);\r\n        this.error = 'Error al cargar las extensiones registradas';\r\n        this.loading = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Inicia polling cada 5 segundos\r\n   */\r\n  startPolling(): void {\r\n    this.pollingSubscription = interval(5000).pipe(\r\n      switchMap(() => this.monitoringService.getExtensionRegistrations())\r\n    ).subscribe({\r\n      next: (extensions) => {\r\n        this.extensions = extensions;\r\n      },\r\n      error: (err) => {\r\n        console.error('Error polling extensions:', err);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Vuelve a la pantalla de campañas\r\n   */\r\n  goBack(): void {\r\n    this.router.navigate(['/admin/campaigns']);\r\n  }\r\n\r\n  /**\r\n   * Obtiene la clase CSS según el estado\r\n   */\r\n  getStatusClass(status: string): string {\r\n    return status === 'REGISTRADO' ? 'status-registered' : 'status-unregistered';\r\n  }\r\n}\r\n", "<div class=\"extensions-container\">\r\n  <!-- Header -->\r\n  <div class=\"flex items-center gap-2 mb-2\">\r\n    <div class=\"w-8 h-8 bg-gradient-to-br from-indigo-600 to-indigo-700 rounded-lg flex items-center justify-center\">\r\n      <lucide-angular name=\"phone\" [size]=\"16\" class=\"text-white\"></lucide-angular>\r\n    </div>\r\n    <div>\r\n      <h1 class=\"text-lg font-bold text-white\">Registro de Extensiones</h1>\r\n      <p class=\"text-xs text-gray-400\">Gestión de extensiones telefónicas registradas</p>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- Error Message -->\r\n  <div *ngIf=\"error\" class=\"error-message\"><lucide-angular name=\"x-circle\" [size]=\"18\"></lucide-angular> {{ error }}</div>\r\n\r\n  <!-- Loading State -->\r\n  <div *ngIf=\"loading && extensions.length === 0\" class=\"loading-state\">\r\n    <div class=\"spinner\"></div>\r\n    <p>Cargando extensiones...</p>\r\n  </div>\r\n\r\n  <!-- Extensions Table -->\r\n  <div *ngIf=\"!loading || extensions.length > 0\" class=\"extensions-section\">\r\n    <div class=\"table-header\">\r\n      <h3><lucide-angular name=\"clipboard-list\" [size]=\"20\"></lucide-angular> Extensiones Registradas</h3>\r\n      <div class=\"info-badge\">\r\n        Total: {{ extensions.length }}\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"table-container\">\r\n      <table class=\"extensions-table\">\r\n        <thead>\r\n          <tr>\r\n            <th>Extensión/Anexo</th>\r\n            <th>Nombre</th>\r\n            <th>IP</th>\r\n            <th>Puerto</th>\r\n            <th>Estado</th>\r\n            <th>Respuesta</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr *ngFor=\"let ext of extensions\">\r\n            <td class=\"extension-cell\">{{ ext.extension }}</td>\r\n            <td>{{ ext.fullName || ext.displayName || '-' }}</td>\r\n            <td>{{ ext.ipAddress }}</td>\r\n            <td>{{ ext.port }}</td>\r\n            <td>\r\n              <span class=\"status-badge\" [ngClass]=\"getStatusClass(ext.status)\">\r\n                {{ ext.status }}\r\n              </span>\r\n            </td>\r\n            <td class=\"ping-cell\">{{ ext.pingMs }}</td>\r\n          </tr>\r\n          <tr *ngIf=\"extensions.length === 0\">\r\n            <td colspan=\"6\" class=\"empty-row\">\r\n              <lucide-angular name=\"inbox\" [size]=\"20\"></lucide-angular> No hay extensiones registradas en este momento\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  </div>\r\n</div>\r\n"],
  "mappings": "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",
  "names": []
}
