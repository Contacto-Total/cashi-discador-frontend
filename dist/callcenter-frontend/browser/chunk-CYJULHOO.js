import{a as z}from"./chunk-BOH42JAL.js";import{b as A,e as y,h as D,j as I,p as w,q as T,x as k}from"./chunk-C2F54ORN.js";import{Gb as d,Hb as t,Ib as e,Sb as x,Ub as f,Xa as i,Yc as S,bb as M,bd as E,dc as P,ec as O,gc as n,hc as c,ib as _,ic as m,lc as v,mc as C,nb as p,nc as h}from"./chunk-HLFIS3WE.js";function F(r,s){if(r&1&&(t(0,"div",24),n(1),e()),r&2){let l=f();i(),m(" \u274C ",l.error," ")}}function B(r,s){if(r&1&&(t(0,"div",25),n(1),e()),r&2){let l=f();i(),m(" \u2705 ",l.successMessage," ")}}function L(r,s){if(r&1&&(t(0,"div",25),n(1),e()),r&2){let l=f();i(),m(" \u2705 ",l.configSuccessMessage," ")}}function V(r,s){r&1&&(t(0,"div",26)(1,"p"),n(2,"\u2139\uFE0F El auto-dialer est\xE1 inactivo. Act\xEDvalo para comenzar a asignar llamadas."),e()())}function W(r,s){r&1&&(t(0,"div",27)(1,"p"),n(2,"\u{1F7E2} Sistema activo. Las llamadas se asignan autom\xE1ticamente."),e()())}function j(r,s){r&1&&(t(0,"span"),n(1,"\u{1F4BE} Guardar"),e())}function N(r,s){r&1&&(t(0,"span"),n(1,"\u23F3 Guardando..."),e())}function R(r,s){if(r&1&&(t(0,"div",28)(1,"h2"),n(2,"\u{1F4CA} Estad\xEDsticas en Tiempo Real"),e(),t(3,"div",29)(4,"div",30)(5,"div",31),n(6,"\u{1F465}"),e(),t(7,"div",32)(8,"div",33),n(9),e(),t(10,"div",34),n(11,"Agentes Disponibles"),e()()(),t(12,"div",35)(13,"div",31),n(14,"\u{1F4CB}"),e(),t(15,"div",32)(16,"div",33),n(17),e(),t(18,"div",34),n(19,"Contactos Pendientes"),e()()(),t(20,"div",36)(21,"div",31),n(22,"\u{1F4DE}"),e(),t(23,"div",32)(24,"div",33),n(25),e(),t(26,"div",34),n(27,"Llamadas Activas"),e()()(),t(28,"div",37)(29,"div",31),n(30,"\u2705"),e(),t(31,"div",32)(32,"div",33),n(33),e(),t(34,"div",34),n(35,"Completadas Hoy"),e()()(),t(36,"div",38)(37,"div",31),n(38,"\u{1F3AF}"),e(),t(39,"div",32)(40,"div",33),n(41),e(),t(42,"div",34),n(43,"Total Completados"),e()()(),t(44,"div",39)(45,"div",31),n(46,"\u274C"),e(),t(47,"div",32)(48,"div",33),n(49),e(),t(50,"div",34),n(51,"Llamadas Fallidas"),e()()()()()),r&2){let l=f();i(9),c(l.estadisticas.agentesDisponibles),i(8),c(l.estadisticas.contactosPendientes),i(8),c(l.estadisticas.llamadasActivas),i(8),c(l.estadisticas.llamadasCompletadasHoy),i(8),c(l.estadisticas.contactosCompletados),i(8),c(l.estadisticas.contactosFallidos)}}var K=(()=>{let s=class s{constructor(a){this.autoDialerService=a,this.isActivo=!1,this.loading=!1,this.loadingConfig=!1,this.error=null,this.successMessage=null,this.configSuccessMessage=null,this.estadisticas=null,this.intensidadMarcacion=1.5,this.intervaloMarcacionSegundos=30}ngOnInit(){this.loadEstado(),this.loadConfiguracion(),this.startPolling()}ngOnDestroy(){this.statsSubscription&&this.statsSubscription.unsubscribe()}loadEstado(){this.autoDialerService.getEstado().subscribe({next:a=>{this.isActivo=a.activo},error:a=>{console.error("Error loading auto-dialer estado:",a),this.error="Error al cargar el estado del auto-dialer"}})}startPolling(){this.statsSubscription=this.autoDialerService.startStatsPolling().subscribe({next:a=>{this.estadisticas=a,this.isActivo=a.activo},error:a=>{console.error("Error loading estad\xEDsticas:",a)}})}toggleAutoDialer(){this.loading=!0,this.error=null,this.successMessage=null,this.autoDialerService.toggle("admin").subscribe({next:a=>{this.loading=!1,this.isActivo=a.activo,this.successMessage=a.mensaje,setTimeout(()=>{this.successMessage=null},3e3)},error:a=>{console.error("Error toggling auto-dialer:",a),this.error="Error al cambiar el estado del auto-dialer",this.loading=!1}})}getStatusColor(){return this.isActivo?"#10B981":"#6B7280"}getStatusText(){return this.isActivo?"ACTIVO":"INACTIVO"}getButtonText(){return this.loading?"Procesando...":this.isActivo?"DESACTIVAR AUTO-DIALER":"ACTIVAR AUTO-DIALER"}getButtonIcon(){return this.isActivo?"\u23F8\uFE0F":"\u25B6\uFE0F"}loadConfiguracion(){this.autoDialerService.getConfiguracion().subscribe({next:a=>{this.intensidadMarcacion=a.intensidadMarcacion,this.intervaloMarcacionSegundos=a.intervaloMarcacionSegundos},error:a=>{console.error("Error loading configuraci\xF3n:",a),this.error="Error al cargar la configuraci\xF3n"}})}guardarConfiguracion(){this.loadingConfig=!0,this.error=null,this.configSuccessMessage=null;let a={intensidadMarcacion:this.intensidadMarcacion,intervaloMarcacionSegundos:this.intervaloMarcacionSegundos};this.autoDialerService.updateConfiguracion(a).subscribe({next:()=>{this.loadingConfig=!1,this.configSuccessMessage="Configuraci\xF3n guardada correctamente",setTimeout(()=>{this.configSuccessMessage=null},3e3)},error:u=>{console.error("Error guardando configuraci\xF3n:",u),this.error="Error al guardar la configuraci\xF3n",this.loadingConfig=!1}})}};s.\u0275fac=function(u){return new(u||s)(M(z))},s.\u0275cmp=_({type:s,selectors:[["app-autodialer-admin"]],decls:50,vars:23,consts:[[1,"autodialer-container"],[1,"header"],[1,"status-badge"],["class","error-message",4,"ngIf"],["class","success-message",4,"ngIf"],[1,"main-grid"],[1,"control-panel"],[1,"control-section"],[1,"toggle-btn",3,"click","disabled"],[1,"btn-icon"],["class","info-box",4,"ngIf"],["class","info-box active",4,"ngIf"],[1,"config-grid"],[1,"config-item"],["for","intensidad"],[1,"config-description"],[1,"input-with-info"],["type","number","id","intensidad","min","1.0","max","5.0","step","0.1",1,"config-input",3,"ngModelChange","ngModel","disabled"],[1,"input-info"],["for","intervalo"],["type","number","id","intervalo","min","10","max","300","step","5",1,"config-input",3,"ngModelChange","ngModel","disabled"],[1,"save-config-btn",3,"click","disabled"],[4,"ngIf"],["class","statistics-panel",4,"ngIf"],[1,"error-message"],[1,"success-message"],[1,"info-box"],[1,"info-box","active"],[1,"statistics-panel"],[1,"stats-grid"],[1,"stat-card","green"],[1,"stat-icon"],[1,"stat-content"],[1,"stat-value"],[1,"stat-label"],[1,"stat-card","blue"],[1,"stat-card","orange"],[1,"stat-card","purple"],[1,"stat-card","teal"],[1,"stat-card","red"]],template:function(u,o){u&1&&(t(0,"div",0)(1,"div",1)(2,"h1"),n(3,"\u2699\uFE0F Configuraci\xF3n de Discado Autom\xE1tico"),e(),t(4,"div",2),n(5),e()(),p(6,F,2,1,"div",3)(7,B,2,1,"div",4)(8,L,2,1,"div",4),t(9,"div",5)(10,"div",6)(11,"div",7)(12,"h2"),n(13,"Control del Sistema"),e(),t(14,"button",8),x("click",function(){return o.toggleAutoDialer()}),t(15,"span",9),n(16),e(),t(17,"span"),n(18),e()(),p(19,V,3,0,"div",10)(20,W,3,0,"div",11),e()(),t(21,"div",6)(22,"div",7)(23,"h2"),n(24,"Par\xE1metros de Marcaci\xF3n"),e(),t(25,"div",12)(26,"div",13)(27,"label",14)(28,"strong"),n(29,"\u{1F4CA} Intensidad"),e(),t(30,"span",15),n(31,"Llamadas por agente"),e()(),t(32,"div",16)(33,"input",17),h("ngModelChange",function(g){return C(o.intensidadMarcacion,g)||(o.intensidadMarcacion=g),g}),e(),t(34,"span",18),n(35),e()()(),t(36,"div",13)(37,"label",19)(38,"strong"),n(39,"\u23F1\uFE0F Intervalo"),e(),t(40,"span",15),n(41,"Segundos entre ciclos"),e()(),t(42,"div",16)(43,"input",20),h("ngModelChange",function(g){return C(o.intervaloMarcacionSegundos,g)||(o.intervaloMarcacionSegundos=g),g}),e(),t(44,"span",18),n(45),e()()()(),t(46,"button",21),x("click",function(){return o.guardarConfiguracion()}),p(47,j,2,0,"span",22)(48,N,2,0,"span",22),e()()()(),p(49,R,52,6,"div",23),e()),u&2&&(i(4),P("background-color",o.getStatusColor()),i(),m(" ",o.getStatusText()," "),i(),d("ngIf",o.error),i(),d("ngIf",o.successMessage),i(),d("ngIf",o.configSuccessMessage),i(6),O("active",o.isActivo),d("disabled",o.loading),i(2),c(o.getButtonIcon()),i(2),c(o.getButtonText()),i(),d("ngIf",!o.isActivo),i(),d("ngIf",o.isActivo),i(13),v("ngModel",o.intensidadMarcacion),d("disabled",o.loadingConfig),i(2),m("",o.intensidadMarcacion,"x"),i(8),v("ngModel",o.intervaloMarcacionSegundos),d("disabled",o.loadingConfig),i(2),m("",o.intervaloMarcacionSegundos,"s"),i(),d("disabled",o.loadingConfig),i(),d("ngIf",!o.loadingConfig),i(),d("ngIf",o.loadingConfig),i(),d("ngIf",o.estadisticas))},dependencies:[E,S,k,A,I,y,T,w,D],styles:[".autodialer-container[_ngcontent-%COMP%]{min-height:100vh;background:#0a0e27;padding:1.5rem;max-width:1600px;margin:0 auto}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;padding-bottom:1rem;border-bottom:1px solid #334155}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;color:#fff;font-weight:600}.status-badge[_ngcontent-%COMP%]{padding:.5rem 1.5rem;border-radius:50px;color:#fff;font-size:.9rem;font-weight:600;text-transform:uppercase;letter-spacing:.5px;box-shadow:0 4px 15px #0000004d}.error-message[_ngcontent-%COMP%], .success-message[_ngcontent-%COMP%]{padding:1rem;border-radius:8px;margin-bottom:1rem;font-weight:500}.error-message[_ngcontent-%COMP%]{background:#ef444426;color:#ef4444;border:1px solid rgba(239,68,68,.3)}.success-message[_ngcontent-%COMP%]{background:#10b98126;color:#10b981;border:1px solid rgba(16,185,129,.3)}.control-panel[_ngcontent-%COMP%]{background:#1e293b;border:1px solid #334155;border-radius:8px;padding:1.5rem;margin-bottom:1.5rem;box-shadow:0 4px 20px #0000004d}.control-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 .3rem;font-size:1.1rem;color:#fff}.subtitle[_ngcontent-%COMP%]{margin:0 0 1.5rem;color:#94a3b8;font-size:.9rem}.main-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem;margin-bottom:1.5rem}.toggle-btn[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center;gap:.7rem;background:#6b7280;color:#fff;border:none;padding:.8rem 1.5rem;border-radius:8px;cursor:pointer;font-size:.95rem;font-weight:600;margin-bottom:1rem;transition:all .3s;box-shadow:0 4px 15px #0003}.toggle-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px #0000004d}.toggle-btn.active[_ngcontent-%COMP%]{background:#10b981}.toggle-btn.active[_ngcontent-%COMP%]:hover:not(:disabled){background:#059669}.toggle-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-icon[_ngcontent-%COMP%]{font-size:1.1rem}.info-box[_ngcontent-%COMP%]{padding:1rem;background:#64748b1a;border-left:4px solid #64748b;border-radius:4px;color:#94a3b8;font-size:.9rem;line-height:1.5}.info-box.active[_ngcontent-%COMP%]{background:#10b9811a;border-left-color:#10b981;color:#10b981}.info-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.statistics-panel[_ngcontent-%COMP%]{background:#1e293b;border:1px solid #334155;border-radius:8px;padding:1.5rem;margin-bottom:1.5rem;box-shadow:0 4px 20px #0000004d}.statistics-panel[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 .3rem;font-size:1.1rem;color:#fff}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem;margin-top:1rem}.stat-card[_ngcontent-%COMP%]{background:#0a0e27;border:1px solid #334155;border-radius:8px;padding:1rem;display:flex;align-items:center;gap:1rem;transition:transform .3s}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 6px 20px #0000004d}.stat-icon[_ngcontent-%COMP%]{font-size:2rem;width:50px;height:50px;display:flex;align-items:center;justify-content:center;border-radius:50%;background:#ffffff1a}.stat-content[_ngcontent-%COMP%]{flex:1}.stat-value[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#fff;line-height:1;margin-bottom:.3rem}.stat-label[_ngcontent-%COMP%]{font-size:.8rem;color:#94a3b8;font-weight:500}.stat-card.green[_ngcontent-%COMP%]{border-left:4px solid #10B981}.stat-card.blue[_ngcontent-%COMP%]{border-left:4px solid #3B82F6}.stat-card.orange[_ngcontent-%COMP%]{border-left:4px solid #F59E0B}.stat-card.purple[_ngcontent-%COMP%]{border-left:4px solid #8B5CF6}.stat-card.teal[_ngcontent-%COMP%]{border-left:4px solid #14B8A6}.stat-card.red[_ngcontent-%COMP%]{border-left:4px solid #EF4444}.technical-info[_ngcontent-%COMP%]{background:#1e293b;border:1px solid #334155;border-radius:8px;padding:1.5rem;box-shadow:0 4px 20px #0000004d}.technical-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:1rem;color:#fff}.technical-info[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.technical-info[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.5rem 0;color:#94a3b8;font-size:.9rem;border-bottom:1px solid #334155}.technical-info[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:none}.technical-info[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#10b981;margin-right:.5rem}.config-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1rem}.config-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.config-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.config-description[_ngcontent-%COMP%]{font-size:.85rem;color:#6b7280;font-weight:400}.input-with-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.config-input[_ngcontent-%COMP%]{flex:1;padding:.75rem 1rem;border:2px solid #E5E7EB;border-radius:.5rem;font-size:1.1rem;font-weight:600;color:#1f2937;transition:all .2s}.config-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.config-input[_ngcontent-%COMP%]:disabled{background-color:#f3f4f6;cursor:not-allowed}.input-info[_ngcontent-%COMP%]{font-size:.95rem;color:#3b82f6;font-weight:600;min-width:150px}.help-text[_ngcontent-%COMP%]{color:#6b7280;font-size:.8rem;margin-top:.25rem}.save-config-btn[_ngcontent-%COMP%]{width:100%;padding:.8rem 1.5rem;background:linear-gradient(135deg,#3b82f6,#2563eb);color:#fff;border:none;border-radius:.5rem;font-size:.95rem;font-weight:600;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 6px #3b82f633}.save-config-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 12px #3b82f64d}.save-config-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.save-config-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}@media (max-width: 1200px){.main-grid[_ngcontent-%COMP%], .config-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (max-width: 768px){.autodialer-container[_ngcontent-%COMP%]{padding:1rem}.header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;text-align:center}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.2rem}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.toggle-btn[_ngcontent-%COMP%]{font-size:.9rem;padding:.9rem 1.5rem}.main-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]});let r=s;return r})();export{K as AutodialerAdminComponent};
