import{a as R,b as V,c as H}from"./chunk-EJV2ZFGI.js";import{a as A,b as D,c as G,d as B,g as U}from"./chunk-WEW67JN4.js";import"./chunk-QGY7XACI.js";import{a as Q,b as W}from"./chunk-FFXCFMPZ.js";import{a as T,b as z,c as N,d as j,e as q}from"./chunk-KGIPZOG6.js";import{P as Y,R as J,T as K,U as X,V as Z}from"./chunk-S3FY6Y34.js";import{a as P}from"./chunk-HOBXXKMH.js";import{b as y,c as g,e as S,f as O,i as I,k as E,l as k,t as F,v as L}from"./chunk-YB7T5JXI.js";import{d as v,f as w}from"./chunk-SFI2AKG2.js";import{Gb as l,Hb as n,Ib as i,Jb as u,Sb as f,Ub as _,Xa as o,Xc as M,ad as C,bb as d,gc as r,hc as h,ib as x,nb as c,zb as b}from"./chunk-GC56KPP7.js";function tt(e,a){e&1&&(n(0,"mat-error"),r(1," Username is required "),i())}function et(e,a){e&1&&(n(0,"mat-error"),r(1," Username must be at least 3 characters "),i())}function nt(e,a){e&1&&(n(0,"mat-error"),r(1," Password is required "),i())}function it(e,a){e&1&&(n(0,"mat-error"),r(1," Password must be at least 6 characters "),i())}function rt(e,a){if(e&1&&(n(0,"div",14)(1,"mat-icon"),r(2,"error"),i(),n(3,"span"),r(4),i()()),e&2){let $=_();o(4),h($.errorMessage)}}function ot(e,a){e&1&&(n(0,"span"),r(1,"Sign In"),i())}function at(e,a){e&1&&u(0,"mat-spinner",15)}var St=(()=>{let a=class a{constructor(p,m,t,s){this.fb=p,this.authService=m,this.router=t,this.route=s,this.loading=!1,this.errorMessage="",this.hidePassword=!0}ngOnInit(){if(this.loginForm=this.fb.group({username:["",[g.required,g.minLength(3)]],password:["",[g.required,g.minLength(6)]]}),this.authService.isAuthenticated()){this.router.navigate(["/dashboard"]);return}}onSubmit(){if(this.loginForm.invalid)return;this.loading=!0,this.errorMessage="";let{username:p,password:m}=this.loginForm.value;this.authService.login(p,m).subscribe({next:t=>{this.loading=!1;let s=this.authService.getCurrentUser();s?.role==="ADMIN"?this.router.navigate(["/admin/monitoring"]):s?.role==="AGENT"?this.router.navigate(["/agent-dashboard"]):this.router.navigate(["/dialer"])},error:t=>{this.loading=!1,this.errorMessage=t.error?.message||"Invalid username or password",console.error("Login error:",t)}})}get username(){return this.loginForm.get("username")}get password(){return this.loginForm.get("password")}};a.\u0275fac=function(m){return new(m||a)(d(F),d(P),d(w),d(v))},a.\u0275cmp=x({type:a,selectors:[["app-login"]],decls:34,vars:13,consts:[[1,"login-container"],[1,"login-card"],[1,"login-title"],[1,"login-icon"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","username","placeholder","Enter your username","autocomplete","username"],["matPrefix",""],[4,"ngIf"],["matInput","","formControlName","password","placeholder","Enter your password","autocomplete","current-password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["class","error-message",4,"ngIf"],["mat-raised-button","","color","primary","type","submit",1,"login-button","full-width",3,"disabled"],["diameter","20",4,"ngIf"],[1,"error-message"],["diameter","20"]],template:function(m,t){m&1&&(n(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title")(4,"div",2)(5,"mat-icon",3),r(6,"phone_in_talk"),i(),n(7,"h1"),r(8,"Call Center Login"),i()()()(),n(9,"mat-card-content")(10,"form",4),f("ngSubmit",function(){return t.onSubmit()}),n(11,"mat-form-field",5)(12,"mat-label"),r(13,"Username"),i(),u(14,"input",6),n(15,"mat-icon",7),r(16,"person"),i(),c(17,tt,2,0,"mat-error",8)(18,et,2,0,"mat-error",8),i(),n(19,"mat-form-field",5)(20,"mat-label"),r(21,"Password"),i(),u(22,"input",9),n(23,"mat-icon",7),r(24,"lock"),i(),n(25,"button",10),f("click",function(){return t.hidePassword=!t.hidePassword}),n(26,"mat-icon"),r(27),i()(),c(28,nt,2,0,"mat-error",8)(29,it,2,0,"mat-error",8),i(),c(30,rt,5,1,"div",11),n(31,"button",12),c(32,ot,2,0,"span",8)(33,at,1,0,"mat-spinner",13),i()()()()()),m&2&&(o(10),l("formGroup",t.loginForm),o(7),l("ngIf",t.username==null?null:t.username.hasError("required")),o(),l("ngIf",t.username==null?null:t.username.hasError("minlength")),o(4),l("type",t.hidePassword?"password":"text"),o(3),b("aria-label","Hide password")("aria-pressed",t.hidePassword),o(2),h(t.hidePassword?"visibility_off":"visibility"),o(),l("ngIf",t.password==null?null:t.password.hasError("required")),o(),l("ngIf",t.password==null?null:t.password.hasError("minlength")),o(),l("ngIf",t.errorMessage),o(),l("disabled",t.loading||t.loginForm.invalid),o(),l("ngIf",!t.loading),o(),l("ngIf",t.loading))},dependencies:[C,M,L,I,y,S,O,E,k,q,T,N,j,z,R,U,A,D,G,B,H,V,K,J,Y,W,Q,Z,X],styles:['.login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background-color:#0a0e27;padding:20px;position:relative;overflow:hidden}.login-container[_ngcontent-%COMP%]:before{content:"";position:absolute;width:500px;height:500px;background:radial-gradient(circle,rgba(16,185,129,.1) 0%,transparent 70%);top:-250px;right:-250px;pointer-events:none}.login-container[_ngcontent-%COMP%]:after{content:"";position:absolute;width:400px;height:400px;background:radial-gradient(circle,rgba(16,185,129,.05) 0%,transparent 70%);bottom:-200px;left:-200px;pointer-events:none}.login-card[_ngcontent-%COMP%]{width:100%;max-width:450px;padding:40px;background-color:#1e293b!important;border:1px solid #334155!important;border-radius:16px!important;box-shadow:0 20px 60px #00000080!important;position:relative;z-index:1}.login-title[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:16px;margin-bottom:32px}.login-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:32px;color:#fff;font-weight:700;letter-spacing:1px}.login-icon[_ngcontent-%COMP%]{font-size:48px;width:64px;height:64px;color:#fff;background-color:#10b981;border-radius:12px;display:flex;align-items:center;justify-content:center;padding:16px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;margin-top:32px}.full-width[_ngcontent-%COMP%]{width:100%}  .login-card .mat-mdc-form-field{width:100%}  .login-card .mat-mdc-text-field-wrapper{background-color:#0a0e27!important;border-radius:8px!important}  .login-card .mat-mdc-form-field-focus-overlay{background-color:transparent!important}  .login-card .mat-mdc-input-element{color:#fff!important;font-size:16px!important}  .login-card .mat-mdc-form-field-label{color:#94a3b8!important}  .login-card .mat-mdc-form-field-bottom-align{background-color:transparent!important}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:14px 16px;background-color:#ef444426;color:#ef4444;border-radius:8px;border:1px solid rgba(239,68,68,.3);margin-top:-8px;font-size:14px}.error-message[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.login-button[_ngcontent-%COMP%]{margin-top:24px;height:52px;font-size:16px;font-weight:600;background-color:#10b981!important;color:#fff!important;border-radius:8px!important;text-transform:none!important;letter-spacing:.5px!important;transition:all .3s ease!important}.login-button[_ngcontent-%COMP%]:hover{background-color:#059669!important;box-shadow:0 8px 20px #10b9814d!important;transform:translateY(-2px)}.login-button[_ngcontent-%COMP%]:disabled{background-color:#475569!important;color:#94a3b8!important}.login-button[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin:0 auto}.login-info[_ngcontent-%COMP%]{margin-top:32px;padding:20px;background-color:#10b9811a;border:1px solid rgba(16,185,129,.2);border-radius:8px;text-align:center}.login-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0;font-size:14px;color:#94a3b8;line-height:1.6}.login-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#10b981;font-weight:600}mat-card-header[_ngcontent-%COMP%]{display:flex;justify-content:center}mat-card-content[_ngcontent-%COMP%]{padding-top:0}@media (max-width: 480px){.login-card[_ngcontent-%COMP%]{padding:28px 24px}.login-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px}.login-icon[_ngcontent-%COMP%]{width:56px;height:56px;font-size:40px}}']});let e=a;return e})();export{St as LoginComponent};
