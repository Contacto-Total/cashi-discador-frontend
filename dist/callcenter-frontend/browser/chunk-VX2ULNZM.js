import{a as he}from"./chunk-F4F7KFYI.js";import{a as ge}from"./chunk-NZRKQM7W.js";import{a as xe}from"./chunk-NWPMQYBI.js";import{Ia as le,Ja as se}from"./chunk-6KCC6PST.js";import{e as de,h as ce,m as me,n as pe,o as ue,u as fe}from"./chunk-YB7T5JXI.js";import{Ab as N,Bb as T,Cb as U,Eb as P,Fb as F,Gb as f,Hb as a,Ib as o,Jb as C,Qb as K,Sb as H,Ub as b,Xa as l,ad as re,bb as J,ec as ne,f as G,gc as c,hc as j,ib as ae,ic as V,jc as q,ka as O,la as X,lc as Q,mc as ee,nc as te,ua as L,zb as oe}from"./chunk-GC56KPP7.js";var R=(t,m)=>m.id;function ye(t,m){if(t&1&&(a(0,"option",13),c(1),o()),t&2){let i=m.$implicit;f("value",i.id),l(),q("",i.tenantCode," - ",i.tenantName)}}function Ce(t,m){if(t&1&&(a(0,"option",13),c(1),o()),t&2){let i=m.$implicit;f("value",i.id),l(),q("",i.portfolioCode," - ",i.portfolioName)}}function Se(t,m){if(t&1&&(a(0,"option",13),c(1),o()),t&2){let i=m.$implicit;f("value",i.id),l(),q("",i.subPortfolioCode," - ",i.subPortfolioName)}}function Ee(t,m){if(t&1&&(a(0,"div",33)(1,"div",30)(2,"span",34),c(3,"Total:"),o(),a(4,"span",43),c(5),o()(),a(6,"div",30),C(7,"lucide-angular",44),a(8,"span",45),c(9),o()(),a(10,"div",30),C(11,"lucide-angular",46),a(12,"span",47),c(13),o()()()),t&2){let i=b(2);l(5),j(i.importedData().length),l(2),f("size",12),l(2),j(i.validData().length),l(2),f("size",12),l(2),j(i.invalidData().length)}}function De(t,m){if(t&1&&(a(0,"span",34),c(1),o()),t&2){let i=b(2);l(),V("",i.previewHeaders().length," columnas")}}function we(t,m){t&1&&(a(0,"th",39),c(1,"Estado"),o())}function Ie(t,m){if(t&1&&C(0,"lucide-angular",49),t&2){let i=b().$implicit;f("size",12)("title","Campo transformado desde: "+i.sourceField)}}function Ne(t,m){if(t&1&&(a(0,"th",40)(1,"div",48),N(2,Ie,1,2,"lucide-angular",49),a(3,"div",50)(4,"span",51),c(5),o(),a(6,"span",52),c(7),o()()()()),t&2){let i=m.$implicit;f("title",i.dataType+(i.format?" ("+i.format+")":"")),l(2),T(i.sourceField&&i.regexPattern?2:-1),l(3),j(i.headerName),l(2),q("",i.dataType,"",i.format?" ("+i.format+")":"")}}function Te(t,m){if(t&1&&(a(0,"tr",41)(1,"td",53)(2,"div",54),C(3,"lucide-angular",55),a(4,"span",56),c(5,"No hay datos. Importa un archivo Excel para ver los datos aqu\xED."),o()()()()),t&2){let i=b(2);l(),oe("colspan",i.previewHeaders().length+1),l(2),f("size",24)}}function Pe(t,m){if(t&1&&(a(0,"td",64),c(1),o()),t&2){let i=m.$implicit,e=b().$implicit;ne("text-gray-500",!e[i.headerName]),l(),V(" ",e[i.headerName]||"NULL"," ")}}function Fe(t,m){if(t&1&&(a(0,"tr",57)(1,"td",59),c(2),o(),a(3,"td",60)(4,"span",61),C(5,"lucide-angular",62),c(6," V\xE1lido "),o()(),P(7,Pe,2,3,"td",63,R),o()),t&2){let i=m.$index,e=b(3);l(2),j(i+1),l(3),f("size",10),l(2),F(e.previewHeaders())}}function Me(t,m){if(t&1&&(a(0,"td",64),c(1),o()),t&2){let i=m.$implicit,e=b().$implicit;ne("text-gray-500",!e.data[i.headerName]),l(),V(" ",e.data[i.headerName]||"NULL"," ")}}function Le(t,m){if(t&1&&(a(0,"tr",58)(1,"td",59),c(2),o(),a(3,"td",60)(4,"span",65),C(5,"lucide-angular",66),c(6," Error "),o()(),P(7,Me,2,3,"td",63,R),o()),t&2){let i=m.$implicit,e=m.$index,n=b(3);l(2),j(n.validData().length+e+1),l(2),f("title",i.error),l(),f("size",10),l(2),F(n.previewHeaders())}}function ke(t,m){if(t&1&&(P(0,Fe,9,2,"tr",57,U),P(2,Le,9,3,"tr",58,U)),t&2){let i=b(2);F(i.validData()),l(2),F(i.invalidData())}}function $e(t,m){if(t&1&&(a(0,"div",81),c(1),o()),t&2){let i=m.$implicit;l(),V(" ",i," ")}}function ze(t,m){if(t&1&&(a(0,"div",67)(1,"div",75),C(2,"lucide-angular",76),a(3,"div",77)(4,"h3",78),c(5,"Errores al Importar Datos"),o(),a(6,"p",79),c(7," La importaci\xF3n fall\xF3 debido a los siguientes errores. No se insert\xF3 ning\xFAn dato. "),o(),a(8,"div",80),P(9,$e,2,1,"div",81,U),o()()()()),t&2){let i=b(3);l(2),f("size",24),l(7),F(i.backendErrors())}}function Ae(t,m){if(t&1&&(a(0,"p",70)(1,"span",71),c(2),o(),c(3),o()),t&2){let i=m.$implicit,e=m.$index,n=b(4);l(2),V("Fila ",n.validData().length+e+1,":"),l(),V(" ",i.error," ")}}function He(t,m){if(t&1&&(a(0,"div",68)(1,"div",75),C(2,"lucide-angular",82),a(3,"div",77)(4,"h3",83),c(5,"Registros con Errores"),o(),a(6,"div",84),P(7,Ae,4,2,"p",70,U),o()()()()),t&2){let i=b(3);l(2),f("size",20),l(5),F(i.invalidData())}}function Ve(t,m){t&1&&(a(0,"span",71),c(1,"La importaci\xF3n fall\xF3. Corrija los errores e intente nuevamente."),o())}function Be(t,m){if(t&1&&(a(0,"span",85),c(1),o(),c(2," listo(s) para importar ")),t&2){let i=b(3);l(),V("",i.validData().length," registro(s)")}}function je(t,m){t&1&&(a(0,"span",71),c(1,"No hay registros v\xE1lidos para importar"),o())}function Re(t,m){if(t&1){let i=K();a(0,"button",86),H("click",function(){O(i);let n=b(3);return X(n.confirmImport())}),c(1," Confirmar Importaci\xF3n "),o()}}function We(t,m){if(t&1){let i=K();a(0,"div",42),N(1,ze,11,1,"div",67),N(2,He,9,1,"div",68),a(3,"div",69)(4,"div",70),N(5,Ve,2,0,"span",71)(6,Be,3,1)(7,je,2,0,"span",71),o(),a(8,"div",72)(9,"button",73),H("click",function(){O(i);let n=b(2);return X(n.clearImportedData())}),c(10," Cancelar "),o(),N(11,Re,2,0,"button",74),o()()()}if(t&2){let i=b(2);l(),T(i.backendErrors().length>0?1:-1),l(),T(i.invalidData().length>0?2:-1),l(3),T(i.backendErrors().length>0?5:i.validData().length>0?6:7),l(6),T(i.validData().length>0&&i.backendErrors().length===0?11:-1)}}function Oe(t,m){if(t&1){let i=K();a(0,"div",17)(1,"div",19)(2,"div")(3,"h2",20),c(4,"Importaci\xF3n de Datos"),o(),a(5,"p",7),c(6," Sube un archivo Excel con los datos para esta subcartera "),o()(),a(7,"div",21)(8,"button",22),H("click",function(){O(i);let n=b();return X(n.downloadDataTemplate())}),C(9,"lucide-angular",23),a(10,"span"),c(11,"Descargar Plantilla"),o()(),a(12,"label",24),C(13,"lucide-angular",25),a(14,"span"),c(15,"Importar Datos"),o(),a(16,"input",26),H("change",function(n){O(i);let s=b();return X(s.onDataFileSelected(n))}),o()()()(),a(17,"div",27)(18,"div",28)(19,"div",29)(20,"div",30),C(21,"lucide-angular",31),a(22,"span",32),c(23," Tabla de Datos "),o()(),N(24,Ee,14,5,"div",33)(25,De,2,1,"span",34),o()(),a(26,"div",35)(27,"table",36)(28,"thead",37)(29,"tr")(30,"th",38),c(31,"#"),o(),N(32,we,2,0,"th",39),P(33,Ne,8,5,"th",40,R),o()(),a(35,"tbody"),N(36,Te,6,2,"tr",41)(37,ke,4,0),o()()()(),N(38,We,12,4,"div",42),o()}if(t&2){let i=b();l(9),f("size",16),l(4),f("size",16),l(8),f("size",16),l(3),T(i.importedData().length>0?24:25),l(8),T(i.importedData().length>0?32:-1),l(),F(i.previewHeaders()),l(3),T(i.importedData().length===0?36:37),l(2),T(i.importedData().length>0?38:-1)}}function Xe(t,m){t&1&&(a(0,"div",18)(1,"div",75),C(2,"lucide-angular",87),a(3,"div")(4,"h3",88),c(5,"No hay cabeceras configuradas"),o(),a(6,"p",89),c(7," Primero debes configurar las cabeceras para esta subcartera en el m\xF3dulo de Mantenimiento. "),o()()()()),t&2&&(l(2),f("size",20))}var nt=(()=>{let m=class m{constructor(e,n,s){this.tenantService=e,this.portfolioService=n,this.headerConfigService=s,this.tenants=L([]),this.portfolios=L([]),this.subPortfolios=L([]),this.selectedTenantId=0,this.selectedPortfolioId=0,this.selectedSubPortfolioId=0,this.previewHeaders=L([]),this.headersAreSaved=L(!1),this.importedData=L([]),this.validData=L([]),this.invalidData=L([]),this.backendErrors=L([])}ngOnInit(){this.loadTenants()}loadTenants(){this.tenantService.getAllTenants().subscribe({next:e=>{this.tenants.set(e)},error:e=>{console.error("Error cargando proveedores:",e),alert("Error al cargar los proveedores")}})}onTenantChange(e){this.selectedTenantId=e,this.selectedPortfolioId=0,this.selectedSubPortfolioId=0,this.portfolios.set([]),this.subPortfolios.set([]),this.previewHeaders.set([]),this.headersAreSaved.set(!1),e>0&&this.loadPortfoliosByTenant(e)}loadPortfoliosByTenant(e){this.portfolioService.getPortfoliosByTenant(e).subscribe({next:n=>{this.portfolios.set(n)},error:n=>{console.error("Error cargando carteras:",n),alert("Error al cargar las carteras")}})}onPortfolioChange(e){this.selectedPortfolioId=e,this.selectedSubPortfolioId=0,this.subPortfolios.set([]),this.previewHeaders.set([]),this.headersAreSaved.set(!1),e>0&&this.loadSubPortfoliosByPortfolio(e)}loadSubPortfoliosByPortfolio(e){this.portfolioService.getSubPortfoliosByPortfolio(e).subscribe({next:n=>{this.subPortfolios.set(n)},error:n=>{console.error("Error cargando subcarteras:",n),alert("Error al cargar las subcarteras")}})}onSubPortfolioChange(e){e>0?this.loadHeadersForSubPortfolio(e):(this.previewHeaders.set([]),this.headersAreSaved.set(!1))}loadHeadersForSubPortfolio(e){this.headerConfigService.getBySubPortfolioAndLoadType(e,"ACTUALIZACION").subscribe({next:n=>{this.previewHeaders.set(n),this.headersAreSaved.set(n.length>0)},error:n=>{console.error("Error cargando cabeceras:",n),this.previewHeaders.set([]),this.headersAreSaved.set(!1)}})}downloadDataTemplate(){return G(this,null,function*(){if(this.previewHeaders().length===0){alert("No hay cabeceras configuradas para generar la plantilla de datos");return}let e=window.XLSX,n=this.previewHeaders().map(x=>x.headerName),s=e.utils.book_new(),_=e.utils.aoa_to_sheet([n]);_["!cols"]=n.map(x=>({wch:Math.max(x.length+2,15)})),e.utils.book_append_sheet(s,_,"Datos");let u=`plantilla-datos-${this.subPortfolios().find(x=>x.id===this.selectedSubPortfolioId)?.subPortfolioCode||"subcartera"}.xlsx`;e.writeFile(s,u),alert("Plantilla de datos descargada exitosamente.")})}onDataFileSelected(e){return G(this,null,function*(){let n=e.target.files[0];if(!n)return;if(n.name.toLowerCase().endsWith(".csv")){this.parseCSVFile(n),e.target.value="";return}let r=window.XLSX,u=new FileReader;u.onload=x=>G(this,null,function*(){try{let E=new Uint8Array(x.target.result),g=r.read(E,{type:"array"}),$=g.Sheets[g.SheetNames[0]],M=r.utils.sheet_to_json($,{header:1});if(M.length===0){alert("El archivo Excel est\xE1 vac\xEDo");return}let z=M[0].map(y=>String(y).toLowerCase()),A=this.previewHeaders(),k={},v=[];if(A.forEach((y,Z)=>{let d=z.findIndex(D=>D===y.headerName.toLowerCase());d!==-1?k[d]=Z:y.sourceField&&y.regexPattern||v.push(y)}),v.length>0){let y=v.map(d=>d.headerName).join(", ");if(!confirm(`\u26A0\uFE0F ADVERTENCIA: Faltan las siguientes columnas en el archivo Excel:

${y}

Estas columnas se guardar\xE1n como NULL.

\xBFDesea continuar con la importaci\xF3n?`))return}let B=M.slice(1);if(B.length===0){alert("El archivo Excel no contiene datos (solo cabeceras)");return}let w=[],h=[];B.forEach((y,Z)=>{let d={},D="";A.forEach((p,I)=>{let Y=Object.keys(k).find(S=>k[parseInt(S)]===I);if(Y!==void 0){let S=y[parseInt(Y)];if(S!=null&&String(S).trim()!=="")try{if(p.dataType==="FECHA"&&typeof S=="number"){let _e=new Date(1899,11,30).getTime()+S*24*60*60*1e3,ve=new Date(_e),be=p.format||"dd/MM/yyyy";d[p.headerName]=this.formatDateByPattern(ve,be)}else if(p.dataType==="FECHA"&&S instanceof Date){let ie=p.format||"dd/MM/yyyy";d[p.headerName]=this.formatDateByPattern(S,ie)}else d[p.headerName]=String(S).trim()}catch{D=`Error procesando columna ${p.headerName}`,d[p.headerName]=String(S)}else d[p.headerName]=null}else d[p.headerName]=null}),A.forEach(p=>{if(p.sourceField&&p.regexPattern)try{let I=d[p.sourceField];if(I){let Y=new RegExp(p.regexPattern),S=String(I).match(Y);S?d[p.headerName]=S[1]||S[0]:d[p.headerName]=null}else d[p.headerName]=null}catch(I){console.error(`Error aplicando regex en ${p.headerName}:`,I),d[p.headerName]=null}}),Object.values(d).some(p=>p!==null&&p!=="")?D?h.push({error:D,data:d}):w.push(d):h.push({error:"Fila vac\xEDa - no contiene datos",data:d})}),this.importedData.set([...w,...h.map(y=>y.data)]),this.validData.set(w),this.invalidData.set(h),console.log("Previsualizaci\xF3n de datos:",{total:B.length,v\u00E1lidos:w.length,inv\u00E1lidos:h.length})}catch(E){console.error("Error procesando el archivo:",E),alert("Error al procesar el archivo Excel")}}),u.readAsArrayBuffer(n),e.target.value=""})}parseCSVFile(e){let n=new FileReader;n.onload=s=>{try{let r=s.target.result.split(`
`).map(v=>v.trim()).filter(v=>v.length>0);if(r.length===0){alert("El archivo CSV est\xE1 vac\xEDo");return}let u=r[0],x=";";u.includes(";")?x=";":u.includes(",")?x=",":u.includes("|")?x="|":u.includes("	")&&(x="	");let E=r[0].split(x).map(v=>v.trim().toLowerCase()),g=this.previewHeaders(),$={},M=[];if(g.forEach((v,B)=>{let w=E.findIndex(h=>h===v.headerName.toLowerCase());w!==-1?$[w]=B:v.sourceField&&v.regexPattern||M.push(v)}),M.length>0){let v=M.map(w=>w.headerName).join(", ");if(!confirm(`\u26A0\uFE0F ADVERTENCIA: Faltan las siguientes columnas en el archivo CSV:

${v}

Estas columnas se guardar\xE1n como NULL.

\xBFDesea continuar con la importaci\xF3n?`))return}let z=r.slice(1);if(z.length===0){alert("El archivo CSV no contiene datos (solo cabeceras)");return}let A=[],k=[];z.forEach((v,B)=>{let w=v.split(x).map(d=>d.trim()),h={},y="";g.forEach((d,D)=>{let W=Object.keys($).find(p=>$[parseInt(p)]===D);if(W!==void 0){let p=w[parseInt(W)];if(p!=null&&p!=="")try{if(d.dataType==="FECHA"){let I=this.parseCSVDate(p,d.format||"dd/MM/yyyy");I?h[d.headerName]=I:(y=`Valor no es fecha v\xE1lida para campo ${d.headerName}: ${p} (formato esperado: ${d.format||"dd/MM/yyyy"})`,h[d.headerName]=p)}else h[d.headerName]=p}catch(I){y=`Error procesando columna ${d.headerName}: ${I}`,h[d.headerName]=p}else h[d.headerName]=null}else h[d.headerName]=null}),g.forEach(d=>{if(d.sourceField&&d.regexPattern)try{let D=h[d.sourceField];if(D){let W=new RegExp(d.regexPattern),p=String(D).match(W);p?h[d.headerName]=p[1]||p[0]:h[d.headerName]=null}else h[d.headerName]=null}catch(D){console.error(`Error aplicando regex en ${d.headerName}:`,D),h[d.headerName]=null}}),Object.values(h).some(d=>d!==null&&d!=="")?y?k.push({error:y,data:h}):A.push(h):k.push({error:"Fila vac\xEDa - no contiene datos",data:h})}),this.importedData.set([...A,...k.map(v=>v.data)]),this.validData.set(A),this.invalidData.set(k),console.log("Previsualizaci\xF3n de datos CSV:",{total:z.length,v\u00E1lidos:A.length,inv\u00E1lidos:k.length})}catch(_){console.error("Error procesando el archivo CSV:",_),alert("Error al procesar el archivo CSV")}},n.readAsText(e)}parseCSVDate(e,n){try{let s=n.replace(/dd/g,"\\d{2}").replace(/MM/g,"\\d{2}").replace(/yyyy/g,"\\d{4}").replace(/yy/g,"\\d{2}").replace(/HH/g,"\\d{2}").replace(/mm/g,"\\d{2}").replace(/ss/g,"\\d{2}");if(new RegExp("^"+s+"$").test(e.trim()))return e.trim();let r=e.split(/[-\/\s:]/);if(r.length<3)return null;let u,x,E,g=0,$=0,M=0;if(n.startsWith("dd")?(u=parseInt(r[0]),x=parseInt(r[1]),E=parseInt(r[2])):n.startsWith("MM")?(x=parseInt(r[0]),u=parseInt(r[1]),E=parseInt(r[2])):(E=parseInt(r[0]),x=parseInt(r[1]),u=parseInt(r[2])),r.length>3&&(g=parseInt(r[3])||0,$=parseInt(r[4])||0,M=parseInt(r[5])||0),isNaN(u)||isNaN(x)||isNaN(E)||u<1||u>31||x<1||x>12||E<1900)return null;let z=new Date(E,x-1,u,g,$,M);return isNaN(z.getTime())?null:this.formatDateByPattern(z,n)}catch(s){return console.error("Error parseando fecha:",s),null}}formatDateByPattern(e,n){let s=e.getFullYear(),_=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),u=String(e.getHours()).padStart(2,"0"),x=String(e.getMinutes()).padStart(2,"0"),E=String(e.getSeconds()).padStart(2,"0"),g=n;return g=g.replace(/yyyy/g,String(s)),g=g.replace(/yy/g,String(s).slice(-2)),g=g.replace(/MM/g,_),g=g.replace(/dd/g,r),g=g.replace(/HH/g,u),g=g.replace(/mm/g,x),g=g.replace(/ss/g,E),g}simplifyBackendError(e){let n=e.match(/Fila (\d+):/),s=n?n[1]:"?";if(e.includes("doesn't have a default value")){let r=e.match(/Field '([^']+)'/),u=r?r[1]:"desconocido";return`Fila ${s}: El campo '${u}' est\xE1 vac\xEDo pero es obligatorio. Por favor, proporcione un valor.`}if(e.includes("cannot be null")||e.includes("Column")&&e.includes("cannot be null")){let r=e.match(/Column '([^']+)'/)||e.match(/Field '([^']+)'/),u=r?r[1]:"desconocido";return`Fila ${s}: El campo '${u}' no puede estar vac\xEDo. Es un campo obligatorio.`}if(e.includes("Data too long")||e.includes("too long for column")){let r=e.match(/column '([^']+)'/)||e.match(/Field '([^']+)'/),u=r?r[1]:"desconocido";return`Fila ${s}: El valor del campo '${u}' es demasiado largo. Reduzca el tama\xF1o del texto.`}if(e.includes("Incorrect date")||e.includes("Incorrect datetime")){let r=e.match(/column '([^']+)'/)||e.match(/Field '([^']+)'/),u=r?r[1]:"desconocido";return`Fila ${s}: El campo '${u}' tiene un formato de fecha incorrecto. Verifique el formato.`}if(e.includes("Duplicate entry")){let r=e.match(/Duplicate entry '([^']+)'/),u=r?r[1]:"desconocido";return`Fila ${s}: El valor '${u}' ya existe en la base de datos. No se permiten duplicados.`}if(e.includes("Incorrect integer")||e.includes("Incorrect decimal")){let r=e.match(/column '([^']+)'/)||e.match(/Field '([^']+)'/),u=r?r[1]:"desconocido";return`Fila ${s}: El campo '${u}' debe contener un n\xFAmero v\xE1lido.`}if(e.includes("foreign key constraint fails")||e.includes("Cannot add or update a child row"))return`Fila ${s}: Hay una referencia a un dato que no existe en el sistema. Verifique los datos relacionados.`;let _=e.match(/Fila \d+: Error al insertar datos: (.+?)(?:\s*;|$)/);return _?`Fila ${s}: ${_[1]}`:e.length>200?e.substring(0,200)+"...":e}clearImportedData(){this.importedData.set([]),this.validData.set([]),this.invalidData.set([]),this.backendErrors.set([])}confirmImport(){let e=this.validData();if(e.length===0){alert("No hay datos v\xE1lidos para importar");return}console.log("Datos transformados listos para importar:",e),console.log("Subcartera ID:",this.selectedSubPortfolioId),this.headerConfigService.importData(this.selectedSubPortfolioId,"ACTUALIZACION",e).subscribe({next:n=>{if(console.log("Respuesta del servidor:",n),n.errors&&n.errors.length>0){let s=n.errors.map(_=>this.simplifyBackendError(_));this.backendErrors.set(s),console.error("Errores del backend:",n.errors)}else alert(`\u2705 Se importaron ${n.insertedRows||e.length} filas de datos exitosamente a la tabla din\xE1mica.`),this.clearImportedData()},error:n=>{if(console.error("Error HTTP al importar datos:",n),n.error?.errors&&Array.isArray(n.error.errors)){let s=n.error.errors.map(_=>this.simplifyBackendError(_));this.backendErrors.set(s)}else this.backendErrors.set([`Error de conexi\xF3n: ${n.error?.message||n.message}`])}})}};m.\u0275fac=function(n){return new(n||m)(J(ge),J(xe),J(he))},m.\u0275cmp=ae({type:m,selectors:[["app-daily-load"]],decls:42,vars:13,consts:[[1,"min-h-screen","bg-gradient-to-br","from-slate-900","via-slate-800","to-slate-900","p-6"],[1,"max-w-7xl","mx-auto"],[1,"mb-8"],[1,"flex","items-center","gap-3","mb-2"],[1,"p-2","bg-green-600","rounded-lg"],["name","folder-tree",1,"text-white",3,"size"],[1,"text-3xl","font-bold","text-white"],[1,"text-gray-400","text-sm","mt-1"],[1,"bg-slate-900","rounded-lg","p-3","shadow-sm","border","border-slate-800","mb-6"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-3"],[1,"block","text-xs","font-semibold","text-gray-300","mb-1.5"],["name","building-2",1,"inline","mr-1",3,"size"],[1,"w-full","px-3","py-2","bg-slate-800","border","border-slate-700","rounded-lg","text-white","text-sm","focus:outline-none","focus:ring-2","focus:ring-green-500",3,"ngModelChange","ngModel"],[3,"value"],["name","folder",1,"inline","mr-1",3,"size"],[1,"w-full","px-3","py-2","bg-slate-800","border","border-slate-700","rounded-lg","text-white","text-sm","focus:outline-none","focus:ring-2","focus:ring-green-500","disabled:opacity-50","disabled:cursor-not-allowed",3,"ngModelChange","ngModel","disabled"],["name","folder-tree",1,"inline","mr-1",3,"size"],[1,"bg-slate-800","border","border-slate-700","rounded-xl","p-6"],[1,"bg-yellow-900/20","border","border-yellow-700/50","rounded-xl","p-6"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","gap-4","mb-4"],[1,"text-xl","font-bold","text-white"],[1,"flex","flex-col","sm:flex-row","gap-2"],[1,"flex","items-center","gap-2","px-4","py-2","bg-purple-600","text-white","rounded-lg","hover:bg-purple-700","transition-all","font-medium","text-sm","cursor-pointer",3,"click"],["name","file-text",3,"size"],[1,"flex","items-center","gap-2","px-4","py-2","bg-green-600","text-white","rounded-lg","hover:bg-green-700","transition-all","font-medium","cursor-pointer","text-sm"],["name","folder-open",3,"size"],["type","file","accept",".xlsx,.xls,.csv",1,"hidden",3,"change"],[1,"bg-slate-900","border","border-slate-700","rounded-lg","overflow-hidden"],[1,"px-4","py-2","bg-slate-800","border-b","border-slate-700"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","gap-2"],["name","table",1,"text-green-400",3,"size"],[1,"text-sm","font-semibold","text-gray-300"],[1,"flex","items-center","gap-4"],[1,"text-xs","text-gray-500"],[1,"overflow-auto",2,"max-height","500px"],[1,"w-full","text-xs","border-collapse"],[1,"bg-slate-800","sticky","top-0","z-10"],[1,"px-3","py-2","text-left","font-semibold","text-gray-300","border-r","border-slate-700","bg-slate-800",2,"min-width","50px"],[1,"px-3","py-2","text-left","font-semibold","text-gray-300","border-r","border-slate-700","bg-slate-800",2,"min-width","80px"],[1,"px-3","py-2","text-left","font-semibold","text-gray-300","border-r","border-slate-700","bg-slate-800",2,"min-width","150px",3,"title"],[1,"border-b","border-slate-700"],[1,"space-y-4","mt-4"],[1,"text-xs","font-bold","text-white"],["name","check-circle",1,"text-green-400",3,"size"],[1,"text-xs","font-bold","text-green-400"],["name","x-circle",1,"text-red-400",3,"size"],[1,"text-xs","font-bold","text-red-400"],[1,"flex","items-center","gap-1.5"],["name","sparkles",1,"text-amber-400","flex-shrink-0",3,"size","title"],[1,"flex","flex-col","gap-0.5"],[1,"font-semibold"],[1,"text-[10px]","text-green-400","font-normal"],[1,"px-3","py-8","text-center","text-gray-500","bg-slate-800/30"],[1,"flex","flex-col","items-center","gap-2"],["name","inbox",1,"text-gray-600",3,"size"],[1,"text-sm"],[1,"border-b","border-slate-700","hover:bg-slate-800/50"],[1,"border-b","border-slate-700","hover:bg-slate-800/50","bg-red-900/10"],[1,"px-3","py-2","text-gray-400","border-r","border-slate-700","bg-slate-800/30"],[1,"px-3","py-2","border-r","border-slate-700"],[1,"inline-flex","items-center","gap-1","px-2","py-0.5","bg-green-900/30","text-green-400","rounded","text-[10px]"],["name","check",3,"size"],[1,"px-3","py-2","text-gray-300","border-r","border-slate-700",3,"text-gray-500"],[1,"px-3","py-2","text-gray-300","border-r","border-slate-700"],[1,"inline-flex","items-center","gap-1","px-2","py-0.5","bg-red-900/30","text-red-400","rounded","text-[10px]",3,"title"],["name","x",3,"size"],[1,"bg-red-900/30","border-2","border-red-700","rounded-xl","p-4"],[1,"bg-red-900/20","border","border-red-700/50","rounded-lg","p-4"],[1,"flex","justify-between","items-center"],[1,"text-sm","text-gray-400"],[1,"text-red-400"],[1,"flex","gap-3"],[1,"px-4","py-2","bg-slate-700","text-white","rounded-lg","hover:bg-slate-600","transition-all","font-medium","text-sm",3,"click"],[1,"px-4","py-2","bg-green-600","text-white","rounded-lg","hover:bg-green-700","transition-all","font-medium","text-sm"],[1,"flex","items-start","gap-3"],["name","x-circle",1,"text-red-500","flex-shrink-0","mt-1",3,"size"],[1,"flex-1"],[1,"text-red-500","font-bold","text-lg","mb-2"],[1,"text-red-300","text-sm","mb-3"],[1,"bg-red-950/50","rounded-lg","p-3","max-h-60","overflow-y-auto"],[1,"text-red-200","text-xs","font-mono","mb-2","pb-2","border-b","border-red-800/50","last:border-0"],["name","alert-circle",1,"text-red-400","mt-0.5",3,"size"],[1,"text-red-400","font-semibold","mb-2"],[1,"space-y-1"],[1,"text-green-400"],[1,"px-4","py-2","bg-green-600","text-white","rounded-lg","hover:bg-green-700","transition-all","font-medium","text-sm",3,"click"],["name","alert-circle",1,"text-yellow-500","mt-0.5",3,"size"],[1,"text-yellow-500","font-semibold","mb-1"],[1,"text-gray-400","text-sm"]],template:function(n,s){n&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),C(5,"lucide-angular",5),o(),a(6,"div")(7,"h1",6),c(8,"Carga Diaria"),o(),a(9,"p",7),c(10,"Actualizaci\xF3n diaria de datos"),o()()()(),a(11,"div",8)(12,"div",9)(13,"div")(14,"label",10),C(15,"lucide-angular",11),c(16," Proveedor "),o(),a(17,"select",12),te("ngModelChange",function(r){return ee(s.selectedTenantId,r)||(s.selectedTenantId=r),r}),H("ngModelChange",function(r){return s.onTenantChange(r)}),a(18,"option",13),c(19,"Seleccione un proveedor..."),o(),P(20,ye,2,3,"option",13,R),o()(),a(22,"div")(23,"label",10),C(24,"lucide-angular",14),c(25," Cartera "),o(),a(26,"select",15),te("ngModelChange",function(r){return ee(s.selectedPortfolioId,r)||(s.selectedPortfolioId=r),r}),H("ngModelChange",function(r){return s.onPortfolioChange(r)}),a(27,"option",13),c(28,"Seleccione una cartera..."),o(),P(29,Ce,2,3,"option",13,R),o()(),a(31,"div")(32,"label",10),C(33,"lucide-angular",16),c(34," Subcartera "),o(),a(35,"select",15),te("ngModelChange",function(r){return ee(s.selectedSubPortfolioId,r)||(s.selectedSubPortfolioId=r),r}),H("ngModelChange",function(r){return s.onSubPortfolioChange(r)}),a(36,"option",13),c(37,"Seleccione una subcartera..."),o(),P(38,Se,2,3,"option",13,R),o()()()(),N(40,Oe,39,7,"div",17)(41,Xe,8,1,"div",18),o()()),n&2&&(l(5),f("size",24),l(10),f("size",16),l(2),Q("ngModel",s.selectedTenantId),l(),f("value",0),l(2),F(s.tenants()),l(4),f("size",16),l(2),Q("ngModel",s.selectedPortfolioId),f("disabled",s.selectedTenantId===0),l(),f("value",0),l(2),F(s.portfolios()),l(4),f("size",16),l(2),Q("ngModel",s.selectedSubPortfolioId),f("disabled",s.selectedPortfolioId===0),l(),f("value",0),l(2),F(s.subPortfolios()),l(2),T(s.selectedSubPortfolioId>0&&s.headersAreSaved()?40:s.selectedSubPortfolioId>0&&!s.headersAreSaved()?41:-1))},dependencies:[re,fe,pe,ue,me,de,ce,se,le],styles:["[_nghost-%COMP%]{display:block}"]});let t=m;return t})();export{nt as DailyLoadComponent};
