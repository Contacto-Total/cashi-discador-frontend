import{a as K}from"./chunk-BAZPI5FB.js";import{a as q}from"./chunk-YUGLJ5U2.js";import{a as H}from"./chunk-YBTTFGZA.js";import{a as $,b as Q,e as z,h as J,u as G}from"./chunk-TFAMJCIP.js";import{$ as L,Cb as T,Db as I,Eb as N,Fb as o,Gb as l,Hb as A,Ob as C,Qb as x,Sb as c,Va as d,_c as j,a as V,b as R,dc as E,ea as S,ec as a,fc as F,gb as W,gc as v,gd as B,ja as u,jc as U,jd as O,ka as p,kc as y,lc as M,ta as g,wc as D,yb as b,zb as f}from"./chunk-UY3AUK24.js";var X=(()=>{let s=class s{constructor(){this.http=S(B),this.apiUrl=`${O.apiUrl}/usuarios`}obtenerTodos(){return this.http.get(this.apiUrl)}obtenerPorId(e){return this.http.get(`${this.apiUrl}/${e}`)}crear(e){return this.http.post(this.apiUrl,e)}actualizar(e,t){return this.http.put(`${this.apiUrl}/${e}`,t)}eliminar(e){return this.http.delete(`${this.apiUrl}/${e}`)}};s.\u0275fac=function(t){return new(t||s)},s.\u0275prov=L({token:s,factory:s.\u0275fac,providedIn:"root"});let r=s;return r})();var P=(r,s)=>s.id;function ee(r,s){if(r&1){let n=C();o(0,"button",37),x("click",function(){u(n);let t=c(2);return p(t.clearFilter())}),a(1," Limpiar "),l()}}function te(r,s){if(r&1){let n=C();o(0,"div",35)(1,"p",38),a(2,"\xBFQu\xE9 desea filtrar?"),l(),o(3,"div",39)(4,"button",40),x("click",function(){u(n);let t=c(2);return p(t.setFilterType("INQUILINO"))}),o(5,"span"),a(6,"Proveedor"),l()(),o(7,"button",41),x("click",function(){u(n);let t=c(2);return p(t.setFilterType("CARTERA"))}),o(8,"span"),a(9,"Cartera"),l()(),o(10,"button",42),x("click",function(){u(n);let t=c(2);return p(t.setFilterType("SUBCARTERA"))}),o(11,"span"),a(12,"Subcartera"),l()()()()}}function ie(r,s){if(r&1){let n=C();o(0,"button",46),x("click",function(){let t=u(n).$implicit,i=c(4);return p(i.setFilter("INQUILINO",t.id,t.tenantName))}),a(1),l()}if(r&2){let n=s.$implicit,e=c(4);E(e.isFilterActive("INQUILINO",n.id)?"bg-blue-900/40 border-blue-500":"bg-slate-700/50 border-slate-600 hover:border-blue-500/50"),d(),v(" ",n.tenantName," ")}}function ne(r,s){if(r&1&&T(0,ie,2,3,"button",45,P),r&2){let n=c(3);I(n.tenants())}}function oe(r,s){if(r&1){let n=C();o(0,"button",46),x("click",function(){let t=u(n).$implicit,i=c(4);return p(i.setFilter("CARTERA",t.id,i.getPortfolioDisplayName(t.id)))}),a(1),l()}if(r&2){let n=s.$implicit,e=c(4);E(e.isFilterActive("CARTERA",n.id)?"bg-blue-900/40 border-blue-500":"bg-slate-700/50 border-slate-600 hover:border-blue-500/50"),d(),v(" ",e.getPortfolioDisplayName(n.id)," ")}}function re(r,s){if(r&1&&T(0,oe,2,3,"button",45,P),r&2){let n=c(3);I(n.allPortfolios())}}function le(r,s){if(r&1){let n=C();o(0,"button",46),x("click",function(){let t=u(n).$implicit,i=c(4);return p(i.setFilter("SUBCARTERA",t.id,i.getSubPortfolioDisplayName(t.id)))}),a(1),l()}if(r&2){let n=s.$implicit,e=c(4);E(e.isFilterActive("SUBCARTERA",n.id)?"bg-blue-900/40 border-blue-500":"bg-slate-700/50 border-slate-600 hover:border-blue-500/50"),d(),v(" ",e.getSubPortfolioDisplayName(n.id)," ")}}function ae(r,s){if(r&1&&T(0,le,2,3,"button",45,P),r&2){let n=c(3);I(n.allSubPortfolios())}}function se(r,s){if(r&1){let n=C();o(0,"div",36)(1,"div",43)(2,"button",44),x("click",function(){u(n);let t=c(2);return p(t.filterType.set(null))}),o(3,"span"),a(4,"Volver"),l()()(),b(5,ne,2,0)(6,re,2,0)(7,ae,2,0),l()}if(r&2){let n=c(2);d(5),f(n.filterType()==="INQUILINO"?5:n.filterType()==="CARTERA"?6:n.filterType()==="SUBCARTERA"?7:-1)}}function de(r,s){if(r&1&&(o(0,"div",19)(1,"div",32)(2,"span",33),a(3,"Filtrar por asignaci\xF3n"),l(),b(4,ee,2,0,"button",34),l(),b(5,te,13,0,"div",35)(6,se,8,1,"div",36),l()),r&2){let n=c();d(4),f(n.activeFilter()?4:-1),d(),f(n.filterType()?6:5)}}function ce(r,s){}function me(r,s){}function ue(r,s){}function pe(r,s){if(r&1){let n=C();o(0,"div",20)(1,"div",47),b(2,ce,0,0)(3,me,0,0)(4,ue,0,0),o(5,"span"),a(6),l(),o(7,"button",48),x("click",function(){u(n);let t=c();return p(t.clearFilter())}),l()()()}if(r&2){let n=c();d(2),f(n.activeFilter().type==="INQUILINO"?2:n.activeFilter().type==="CARTERA"?3:4),d(4),F(n.activeFilter().name)}}function xe(r,s){r&1&&(o(0,"div",22)(1,"p",7),a(2,"Sin resultados"),l(),o(3,"p",49),a(4,"Intenta otra b\xFAsqueda"),l()())}function _e(r,s){r&1&&(o(0,"div",22)(1,"p",7),a(2,"Sin usuarios"),l(),o(3,"p",49),a(4,"Crea uno nuevo"),l()())}function ge(r,s){if(r&1){let n=C();o(0,"div",51),x("click",function(){let t=u(n).$implicit,i=c(2);return p(i.selectUser(t))}),o(1,"div",52)(2,"div",53)(3,"div",54)(4,"h3",55),a(5),l()(),o(6,"div",56),a(7),l(),o(8,"div",57)(9,"span",58),a(10),l(),o(11,"span",59),a(12,"\u2022"),l(),o(13,"span",49),a(14),l()()(),o(15,"button",60),x("click",function(t){let i=u(n).$implicit;return c(2).deleteUser(i),p(t.stopPropagation())}),l()()()}if(r&2){let n,e=s.$implicit,t=c(2);E(((n=t.selectedUser())==null?null:n.id)===e.id?"bg-blue-900/40 border-blue-500":"bg-slate-800 border-slate-700 hover:border-blue-500/50"),d(5),F(e.nombreCompleto),d(2),v(" ",e.nombreUsuario," "),d(2),E(e.activo?"text-green-400":"text-red-400"),d(),v(" ",e.activo?"Activo":"Inactivo"," "),d(4),v("",e.roleIds.length," roles")}}function be(r,s){if(r&1&&T(0,ge,16,8,"div",50,P),r&2){let n=c();I(n.filteredUsers())}}function fe(r,s){r&1&&(o(0,"div",73)(1,"div",76),a(2," La contrase\xF1a se generar\xE1 autom\xE1ticamente al crear el usuario "),l()())}function Ce(r,s){if(r&1){let n=C();o(0,"div",61)(1,"div",62)(2,"div")(3,"label",63),a(4," Primer Nombre "),o(5,"span",64),a(6,"*"),l()(),o(7,"input",65),M("ngModelChange",function(t){u(n);let i=c();return y(i.selectedUser().primerNombre,t)||(i.selectedUser().primerNombre=t),p(t)}),x("ngModelChange",function(){u(n);let t=c();return p(t.updateNombreCompleto())}),l()(),o(8,"div")(9,"label",63),a(10,"Segundo Nombre"),l(),o(11,"input",66),M("ngModelChange",function(t){u(n);let i=c();return y(i.selectedUser().segundoNombre,t)||(i.selectedUser().segundoNombre=t),p(t)}),x("ngModelChange",function(){u(n);let t=c();return p(t.updateNombreCompleto())}),l()()(),o(12,"div",62)(13,"div")(14,"label",63),a(15," Primer Apellido "),o(16,"span",64),a(17,"*"),l()(),o(18,"input",67),M("ngModelChange",function(t){u(n);let i=c();return y(i.selectedUser().primerApellido,t)||(i.selectedUser().primerApellido=t),p(t)}),x("ngModelChange",function(){u(n);let t=c();return p(t.updateNombreCompleto())}),l()(),o(19,"div")(20,"label",63),a(21,"Segundo Apellido"),l(),o(22,"input",68),M("ngModelChange",function(t){u(n);let i=c();return y(i.selectedUser().segundoApellido,t)||(i.selectedUser().segundoApellido=t),p(t)}),x("ngModelChange",function(){u(n);let t=c();return p(t.updateNombreCompleto())}),l()()(),o(23,"div")(24,"label",63),a(25,"Nombre Completo"),l(),A(26,"input",69),l()(),o(27,"div",70)(28,"div")(29,"label",63),a(30," Nombre de Usuario "),o(31,"span",64),a(32,"*"),l()(),o(33,"input",71),M("ngModelChange",function(t){u(n);let i=c();return y(i.selectedUser().nombreUsuario,t)||(i.selectedUser().nombreUsuario=t),p(t)}),l(),o(34,"p",72),a(35,"Usuario \xFAnico para iniciar sesi\xF3n"),l()(),b(36,fe,3,0,"div",73),o(37,"div",4)(38,"input",74),M("ngModelChange",function(t){u(n);let i=c();return y(i.selectedUser().activo,t)||(i.selectedUser().activo=t),p(t)}),l(),o(39,"label",75),a(40,"Usuario activo"),l()()()}if(r&2){let n=c();d(7),U("ngModel",n.selectedUser().primerNombre),d(4),U("ngModel",n.selectedUser().segundoNombre),d(7),U("ngModel",n.selectedUser().primerApellido),d(4),U("ngModel",n.selectedUser().segundoApellido),d(4),N("value",n.selectedUser().nombreCompleto),d(7),U("ngModel",n.selectedUser().nombreUsuario),d(3),f(n.selectedUser().id?-1:36),d(2),U("ngModel",n.selectedUser().activo)}}function he(r,s){r&1&&(o(0,"div",26)(1,"p",77),a(2,"Selecciona o crea un usuario"),l()())}function ve(r,s){r&1&&(o(0,"div",22)(1,"p",7),a(2,"Sin roles disponibles"),l(),o(3,"p",49),a(4,"Crea roles primero"),l()())}function we(r,s){if(r&1){let n=C();o(0,"label",78)(1,"input",79),x("change",function(){let t=u(n).$implicit,i=c(3);return p(i.toggleRole(t.id))}),l(),o(2,"div",53)(3,"div",80)(4,"h3",81),a(5),l()(),o(6,"p",82),a(7),l()()()}if(r&2){let n=s.$implicit,e=c(3);d(),N("checked",e.isRoleAssigned(n.id)),d(4),F(n.name),d(2),F(n.description)}}function Ue(r,s){if(r&1&&T(0,we,8,3,"label",78,P),r&2){let n=c(2);I(n.availableRoles())}}function ye(r,s){if(r&1&&(o(0,"div",29),b(1,ve,5,0,"div",22)(2,Ue,2,0),l()),r&2){let n=c();d(),f(n.availableRoles().length===0?1:2)}}function Me(r,s){r&1&&(o(0,"div",26)(1,"p",7),a(2,"Selecciona un usuario para asignar roles"),l()())}function Se(r,s){if(r&1){let n=C();o(0,"div",30)(1,"button",83),x("click",function(){u(n);let t=c();return p(t.cancelEdit())}),a(2," Cancelar "),l(),o(3,"button",84),x("click",function(){u(n);let t=c();return p(t.saveUser())}),a(4," Guardar "),l()()}if(r&2){let n=c();d(3),N("disabled",!n.isUserValid())}}function Ee(r,s){if(r&1){let n=C();o(0,"div",31)(1,"div",85)(2,"div",86)(3,"h3",87),a(4,"Usuario Creado Exitosamente"),l()(),o(5,"div",88)(6,"p",89),a(7," El usuario "),o(8,"strong",90),a(9),l(),a(10," ha sido creado. "),l(),o(11,"div",91)(12,"div",92)(13,"strong"),a(14,"Importante:"),l(),a(15," Copia esta contrase\xF1a ahora. No se volver\xE1 a mostrar. "),l()(),o(16,"div")(17,"label",63),a(18,"Contrase\xF1a Temporal"),l(),o(19,"div",93),A(20,"input",94),o(21,"button",95),x("click",function(){u(n);let t=c();return p(t.copyPassword())}),a(22),l()()(),o(23,"p",7),a(24," Proporciona esta contrase\xF1a al usuario. Deber\xE1 cambiarla en su primer inicio de sesi\xF3n. "),l()(),o(25,"div",96)(26,"button",97),x("click",function(){u(n);let t=c();return p(t.closePasswordModal())}),a(27),l()()()()}if(r&2){let n,e,t=c();d(9),F((n=t.generatedUserInfo())==null?null:n.nombreUsuario),d(11),N("value",(e=t.generatedUserInfo())==null?null:e.password),d(2),v(" ",t.passwordCopied()?"Copiado":"Copiar"," "),d(4),N("disabled",!t.passwordCopied()),d(),v(" ",t.passwordCopied()?"Cerrar":"Copiar antes de cerrar"," ")}}var Oe=(()=>{let s=class s{constructor(){this.usuarioService=S(X),this.rolService=S(K),this.tenantService=S(q),this.portfolioService=S(H),this.users=g([]),this.selectedUser=g(null),this.originalUser=g(null),this.availableRoles=g([]),this.showPasswordModal=g(!1),this.generatedUserInfo=g(null),this.passwordCopied=g(!1),this.tenants=g([]),this.allPortfolios=g([]),this.allSubPortfolios=g([]),this.searchTerm=g(""),this.showFilterDropdown=g(!1),this.filterType=g(null),this.activeFilter=g(null),this.filteredUsers=D(()=>{let e=this.users(),t=this.searchTerm().toLowerCase();t&&(e=e.filter(m=>m.nombreCompleto.toLowerCase().includes(t)||m.nombreUsuario.toLowerCase().includes(t)));let i=this.activeFilter();return i&&(e=e.filter(m=>this.availableRoles().filter(w=>m.roleIds.includes(w.id)).some(w=>!w.assignments||w.assignments.length===0?!1:w.assignments.some(h=>{if(i.type==="INQUILINO")return h.type==="INQUILINO"&&h.tenantId===i.id;if(i.type==="CARTERA")return h.type==="CARTERA"&&h.portfolioId===i.id||h.type==="INQUILINO"&&h.tenantId===this.getTenantIdForPortfolio(i.id);if(i.type==="SUBCARTERA"){let k=this.getPortfolioIdForSubPortfolio(i.id),Y=k?this.getTenantIdForPortfolio(k):null;return h.type==="SUBCARTERA"&&h.subPortfolioId===i.id||h.type==="CARTERA"&&h.portfolioId===k||h.type==="INQUILINO"&&h.tenantId===Y}return!1})))),e}),this.hasChanges=D(()=>{let e=this.selectedUser(),t=this.originalUser();return!e||!t?!1:JSON.stringify(e)!==JSON.stringify(t)})}ngOnInit(){this.loadData(),this.loadTenantsAndFilters()}loadData(){this.rolService.obtenerTodos().subscribe({next:e=>{this.availableRoles.set(e.map(t=>({id:t.idRol,name:t.nombreRol,description:t.descripcion||"",assignments:t.asignaciones.map(i=>({type:i.tipoAsignacion,tenantId:i.tenantId,portfolioId:i.portfolioId,subPortfolioId:i.subPortfolioId}))})))},error:e=>console.error("Error al cargar roles:",e)}),this.usuarioService.obtenerTodos().subscribe({next:e=>{this.users.set(e.map(t=>this.mapUsuarioResponseToUser(t)))},error:e=>console.error("Error al cargar usuarios:",e)})}loadTenantsAndFilters(){this.tenantService.getAllTenants().subscribe({next:e=>{this.tenants.set(e),e.forEach(t=>{this.portfolioService.getPortfoliosByTenant(t.id).subscribe({next:i=>{let m=i.map(_=>R(V({},_),{tenantId:t.id}));this.allPortfolios.set([...this.allPortfolios(),...m]),i.forEach(_=>{this.portfolioService.getSubPortfoliosByPortfolio(_.id).subscribe({next:w=>{this.allSubPortfolios.set([...this.allSubPortfolios(),...w])},error:w=>console.error(`Error al cargar subportfolios para portfolio ${_.id}:`,w)})})},error:i=>console.error(`Error al cargar portfolios para tenant ${t.id}:`,i)})})},error:e=>console.error("Error al cargar tenants:",e)})}mapUsuarioResponseToUser(e){return{id:e.idUsuario,primerNombre:e.primerNombre||"",segundoNombre:e.segundoNombre,primerApellido:e.primerApellido||"",segundoApellido:e.segundoApellido,nombreCompleto:e.nombreCompleto,nombreUsuario:e.nombreUsuario,roleIds:e.roleIds,activo:e.activo}}createNewUser(){let e={primerNombre:"",segundoNombre:"",primerApellido:"",segundoApellido:"",nombreCompleto:"",nombreUsuario:"",roleIds:[],activo:!0};this.selectedUser.set(e),this.originalUser.set(null)}selectUser(e){let t=R(V({},e),{roleIds:[...e.roleIds]});this.selectedUser.set(t),this.originalUser.set(JSON.parse(JSON.stringify(e)))}deleteUser(e){e.id&&confirm(`\xBFEst\xE1s seguro de eliminar el usuario "${e.nombreCompleto}"?`)&&this.usuarioService.eliminar(e.id).subscribe({next:()=>{let t=this.users();this.users.set(t.filter(i=>i.id!==e.id)),this.selectedUser()?.id===e.id&&this.selectedUser.set(null),alert("Usuario eliminado correctamente")},error:t=>{console.error("Error al eliminar usuario:",t),alert("Error al eliminar usuario: "+(t.error?.message||t.message))}})}updateNombreCompleto(){let e=this.selectedUser();if(!e)return;let t=[e.primerNombre?.trim(),e.segundoNombre?.trim(),e.primerApellido?.trim(),e.segundoApellido?.trim()].filter(i=>i&&i.length>0);e.nombreCompleto=t.join(" "),this.selectedUser.set(V({},e))}isRoleAssigned(e){return this.selectedUser()?.roleIds.includes(e)||!1}toggleRole(e){let t=this.selectedUser();if(!t)return;let i=t.roleIds.indexOf(e);i>-1?t.roleIds.splice(i,1):t.roleIds.push(e),this.selectedUser.set(V({},t))}isUserValid(){let e=this.selectedUser(),t=!!(e&&e.primerNombre.trim()&&e.primerApellido.trim()&&e.nombreUsuario.trim());return e?.id?t&&this.hasChanges():t}generatePassword(){let t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%&*",i="";for(let m=0;m<12;m++){let _=Math.floor(Math.random()*t.length);i+=t[_]}return i}saveUser(){let e=this.selectedUser();if(!e||!this.isUserValid())return;let t={primerNombre:e.primerNombre,segundoNombre:e.segundoNombre,primerApellido:e.primerApellido,segundoApellido:e.segundoApellido,nombreUsuario:e.nombreUsuario,activo:e.activo,roleIds:e.roleIds};e.id?this.usuarioService.actualizar(e.id,t).subscribe({next:i=>{let m=this.users(),_=m.findIndex(w=>w.id===e.id);_>-1&&(m[_]=this.mapUsuarioResponseToUser(i),this.users.set([...m])),this.selectedUser.set(null),alert("Usuario actualizado correctamente")},error:i=>{console.error("Error al actualizar usuario:",i),alert("Error al actualizar usuario: "+(i.error?.message||i.message))}}):this.usuarioService.crear(t).subscribe({next:i=>{let m=this.mapUsuarioResponseToUser(i);this.users.set([...this.users(),m]),i.generatedPassword&&(this.generatedUserInfo.set({nombreUsuario:m.nombreUsuario,password:i.generatedPassword}),this.showPasswordModal.set(!0),this.passwordCopied.set(!1)),this.selectedUser.set(null)},error:i=>{console.error("Error al crear usuario:",i),alert("Error al crear usuario: "+(i.error?.message||i.message))}})}copyPassword(){let e=this.generatedUserInfo()?.password;e&&navigator.clipboard.writeText(e).then(()=>{this.passwordCopied.set(!0)})}closePasswordModal(){this.passwordCopied()&&(this.showPasswordModal.set(!1),this.generatedUserInfo.set(null),this.passwordCopied.set(!1))}cancelEdit(){this.selectedUser.set(null)}toggleFilterDropdown(){let e=!this.showFilterDropdown();this.showFilterDropdown.set(e),e&&this.filterType.set(null)}setFilterType(e){this.filterType.set(e)}setFilter(e,t,i){this.activeFilter.set({type:e,id:t,name:i}),this.showFilterDropdown.set(!1),this.filterType.set(null)}clearFilter(){this.activeFilter.set(null),this.filterType.set(null),this.showFilterDropdown.set(!1)}isFilterActive(e,t){let i=this.activeFilter();return i?.type===e&&i?.id===t}getPortfolioDisplayName(e){let t=this.allPortfolios().find(m=>m.id===e);if(!t)return"";let i=this.tenants().find(m=>m.id===t.tenantId);return i?`${i.tenantName} - ${t.portfolioName}`:t.portfolioName}getSubPortfolioDisplayName(e){let t=this.allSubPortfolios().find(_=>_.id===e);if(!t)return"";let i=this.allPortfolios().find(_=>_.id===t.portfolioId);if(!i)return t.subPortfolioName;let m=this.tenants().find(_=>_.id===i.tenantId);return m?`${m.tenantName} - ${i.portfolioName} - ${t.subPortfolioName}`:`${i.portfolioName} - ${t.subPortfolioName}`}getTenantIdForPortfolio(e){return this.allPortfolios().find(i=>i.id===e)?.tenantId||null}getPortfolioIdForSubPortfolio(e){return this.allSubPortfolios().find(i=>i.id===e)?.portfolioId||null}};s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=W({type:s,selectors:[["app-user-management"]],decls:53,vars:13,consts:[[1,"h-[calc(100dvh-56px)]","bg-slate-950","overflow-hidden","flex","flex-col"],[1,"flex-1","overflow-y-auto"],[1,"p-3","max-w-[1800px]","mx-auto"],[1,"mb-3"],[1,"flex","items-center","gap-2"],[1,"w-8","h-8","bg-gradient-to-br","from-blue-600","to-blue-700","rounded-lg","flex","items-center","justify-center"],[1,"text-lg","font-bold","text-white"],[1,"text-xs","text-gray-400"],[1,"grid","grid-cols-12","gap-3"],[1,"col-span-3","bg-slate-900","rounded-lg","border","border-slate-800","shadow-sm","flex","flex-col","max-h-[calc(100vh-140px)]"],[1,"p-3","border-b","border-slate-800","flex","items-center","justify-between","flex-shrink-0"],[1,"text-sm","font-bold","text-white"],[1,"px-2","py-1","bg-blue-600","hover:bg-blue-700","text-white","rounded","text-xs","font-semibold","transition-colors","flex","items-center","gap-1",3,"click"],[1,"p-2","border-b","border-slate-800"],[1,"flex","gap-1.5"],[1,"relative","flex-1"],["type","text","placeholder","Buscar usuario...",1,"w-full","pl-9","pr-2","py-1.5","bg-slate-800","border","border-slate-700","rounded","text-white","text-xs","placeholder:text-gray-500","focus:outline-none","focus:ring-1","focus:ring-blue-500",3,"ngModelChange","ngModel"],[1,"relative"],[1,"p-1.5","rounded","transition-colors",3,"click"],[1,"absolute","right-0","top-full","mt-1","w-72","bg-slate-800","border","border-slate-700","rounded","shadow-lg","z-50"],[1,"mt-1.5","flex","items-center","gap-1"],[1,"p-2","space-y-1","overflow-y-auto","flex-1"],[1,"text-center","py-8"],[1,"col-span-5","bg-slate-900","rounded-lg","border","border-slate-800","shadow-sm","flex","flex-col","max-h-[calc(100vh-140px)]"],[1,"p-3","border-b","border-slate-800","flex-shrink-0"],[1,"p-3","space-y-3","overflow-y-auto","flex-1"],[1,"text-center","py-12"],[1,"col-span-4","bg-slate-900","rounded-lg","border","border-slate-800","shadow-sm","flex","flex-col","max-h-[calc(100vh-140px)]"],[1,"p-3","overflow-y-auto","flex-1"],[1,"space-y-1.5"],[1,"mt-3","flex","justify-end","gap-2"],[1,"fixed","inset-0","bg-black/60","backdrop-blur-sm","flex","items-center","justify-center","z-50","p-4"],[1,"p-2","border-b","border-slate-700","flex","items-center","justify-between"],[1,"text-xs","font-semibold","text-white"],[1,"text-xs","text-blue-400","hover:text-blue-300"],[1,"p-2"],[1,"p-2","max-h-96","overflow-y-auto"],[1,"text-xs","text-blue-400","hover:text-blue-300",3,"click"],[1,"text-xs","text-gray-400","mb-2"],[1,"space-y-1"],[1,"w-full","flex","items-center","gap-2","px-3","py-2","bg-slate-700/50","hover:bg-slate-700","border","border-slate-600","hover:border-blue-500/50","rounded","text-xs","text-white","transition-colors",3,"click"],[1,"w-full","flex","items-center","gap-2","px-3","py-2","bg-slate-700/50","hover:bg-slate-700","border","border-slate-600","hover:border-purple-500/50","rounded","text-xs","text-white","transition-colors",3,"click"],[1,"w-full","flex","items-center","gap-2","px-3","py-2","bg-slate-700/50","hover:bg-slate-700","border","border-slate-600","hover:border-green-500/50","rounded","text-xs","text-white","transition-colors",3,"click"],[1,"flex","items-center","justify-between","mb-2"],[1,"flex","items-center","gap-1","text-xs","text-gray-400","hover:text-white","transition-colors",3,"click"],[1,"w-full","text-left","px-2","py-1.5","rounded","border","text-xs","text-white","mb-1","transition-colors",3,"class"],[1,"w-full","text-left","px-2","py-1.5","rounded","border","text-xs","text-white","mb-1","transition-colors",3,"click"],[1,"inline-flex","items-center","gap-1","px-2","py-1","bg-blue-900/40","border","border-blue-500","rounded","text-xs","text-white"],[1,"ml-1","hover:text-red-400",3,"click"],[1,"text-xs","text-gray-500"],[1,"p-2","rounded","border","cursor-pointer","transition-all",3,"class"],[1,"p-2","rounded","border","cursor-pointer","transition-all",3,"click"],[1,"flex","items-start","justify-between"],[1,"flex-1","min-w-0"],[1,"flex","items-center","gap-1"],[1,"text-xs","font-semibold","text-white","truncate"],[1,"mt-0.5","text-xs","text-gray-500","truncate"],[1,"mt-0.5","flex","items-center","gap-1"],[1,"text-xs"],[1,"text-gray-500"],[1,"p-0.5","text-gray-400","hover:text-red-400","rounded","transition-colors","flex-shrink-0",3,"click"],[1,"space-y-2"],[1,"grid","grid-cols-2","gap-2"],[1,"block","text-xs","font-semibold","text-gray-300","mb-1"],[1,"text-red-400"],["type","text","placeholder","Ej: Juan",1,"w-full","px-2","py-1.5","bg-slate-800","border","border-slate-700","rounded","text-white","text-sm","placeholder:text-gray-500","focus:outline-none","focus:ring-1","focus:ring-blue-500",3,"ngModelChange","ngModel"],["type","text","placeholder","Ej: Carlos",1,"w-full","px-2","py-1.5","bg-slate-800","border","border-slate-700","rounded","text-white","text-sm","placeholder:text-gray-500","focus:outline-none","focus:ring-1","focus:ring-blue-500",3,"ngModelChange","ngModel"],["type","text","placeholder","Ej: Garc\xEDa",1,"w-full","px-2","py-1.5","bg-slate-800","border","border-slate-700","rounded","text-white","text-sm","placeholder:text-gray-500","focus:outline-none","focus:ring-1","focus:ring-blue-500",3,"ngModelChange","ngModel"],["type","text","placeholder","Ej: L\xF3pez",1,"w-full","px-2","py-1.5","bg-slate-800","border","border-slate-700","rounded","text-white","text-sm","placeholder:text-gray-500","focus:outline-none","focus:ring-1","focus:ring-blue-500",3,"ngModelChange","ngModel"],["type","text","readonly","",1,"w-full","px-2","py-1.5","bg-slate-700","border","border-slate-600","rounded","text-gray-400","text-sm","cursor-not-allowed",3,"value"],[1,"space-y-2","pt-2","border-t","border-slate-800"],["type","text","placeholder","Ej: jgarcia",1,"w-full","px-2","py-1.5","bg-slate-800","border","border-slate-700","rounded","text-white","text-sm","placeholder:text-gray-500","focus:outline-none","focus:ring-1","focus:ring-blue-500",3,"ngModelChange","ngModel"],[1,"mt-1","text-xs","text-gray-500"],[1,"bg-blue-900/20","border","border-blue-700/50","rounded","p-2","flex","items-start","gap-2"],["type","checkbox","id","userActive",1,"w-3.5","h-3.5","text-blue-600","bg-slate-800","border-slate-700","rounded","focus:ring-blue-500",3,"ngModelChange","ngModel"],["for","userActive",1,"text-xs","text-gray-300","cursor-pointer"],[1,"text-xs","text-blue-300"],[1,"text-sm","text-gray-400"],[1,"flex","items-start","gap-2","p-2","bg-slate-800","hover:bg-slate-700/50","border","border-slate-700","rounded","cursor-pointer","group"],["type","checkbox",1,"mt-0.5","w-4","h-4","text-purple-600","bg-slate-700","border-slate-600","rounded","focus:ring-purple-500",3,"change","checked"],[1,"flex","items-center","gap-1.5"],[1,"text-xs","font-semibold","text-white","group-hover:text-purple-300"],[1,"text-xs","text-gray-500","leading-tight","mt-0.5"],[1,"px-4","py-2","bg-slate-700","hover:bg-slate-600","text-white","rounded","text-sm","font-semibold","transition-colors",3,"click"],[1,"px-4","py-2","bg-blue-600","hover:bg-blue-700","disabled:bg-slate-700","disabled:cursor-not-allowed","text-white","rounded","text-sm","font-semibold","transition-colors","flex","items-center","gap-1.5",3,"click","disabled"],[1,"bg-slate-800","rounded-lg","border","border-slate-700","shadow-2xl","max-w-md","w-full"],[1,"p-4","border-b","border-slate-700","flex","items-center","gap-2"],[1,"text-base","font-bold","text-white"],[1,"p-4","space-y-3"],[1,"text-sm","text-gray-300"],[1,"text-white"],[1,"bg-amber-900/20","border","border-amber-700/50","rounded","p-3","flex","items-start","gap-2"],[1,"text-xs","text-amber-300"],[1,"flex","gap-2"],["type","text","readonly","",1,"flex-1","px-3","py-2","bg-slate-900","border","border-slate-600","rounded","text-white","font-mono","text-sm",3,"value"],[1,"px-3","py-2","bg-blue-600","hover:bg-blue-700","text-white","rounded","text-sm","font-semibold","transition-colors","flex","items-center","gap-1.5",3,"click"],[1,"p-4","border-t","border-slate-700","flex","justify-end"],[1,"px-4","py-2","bg-green-600","hover:bg-green-700","disabled:bg-slate-700","disabled:cursor-not-allowed","text-white","rounded","text-sm","font-semibold","transition-colors",3,"click","disabled"]],template:function(t,i){if(t&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),A(5,"div",5),o(6,"div")(7,"h1",6),a(8,"Gesti\xF3n de Usuarios"),l(),o(9,"p",7),a(10,"Crea y administra usuarios del sistema"),l()()()(),o(11,"div",8)(12,"div",9)(13,"div",10)(14,"div",4)(15,"h2",11),a(16,"Usuarios"),l(),o(17,"span",7),a(18),l()(),o(19,"button",12),x("click",function(){return i.createNewUser()}),a(20," Nuevo "),l()(),o(21,"div",13)(22,"div",14)(23,"div",15)(24,"input",16),M("ngModelChange",function(_){return y(i.searchTerm,_)||(i.searchTerm=_),_}),l()(),o(25,"div",17)(26,"button",18),x("click",function(){return i.toggleFilterDropdown()}),l(),b(27,de,7,2,"div",19),l()(),b(28,pe,8,2,"div",20),l(),o(29,"div",21),b(30,xe,5,0,"div",22)(31,_e,5,0,"div",22)(32,be,2,0),l()(),o(33,"div",23)(34,"div",24)(35,"div",4)(36,"h2",11),a(37),l()()(),o(38,"div",25),b(39,Ce,41,8)(40,he,3,0,"div",26),l()(),o(41,"div",27)(42,"div",24)(43,"div",4)(44,"h2",11),a(45,"Roles Asignados"),l(),o(46,"span",7),a(47),l()()(),o(48,"div",28),b(49,ye,3,1,"div",29)(50,Me,3,0,"div",26),l()()(),b(51,Se,5,1,"div",30),l()()(),b(52,Ee,28,5,"div",31)),t&2){let m;d(18),v("(",i.users().length,")"),d(6),U("ngModel",i.searchTerm),d(2),E(i.activeFilter()?"bg-blue-600 hover:bg-blue-700":"bg-slate-700 hover:bg-slate-600"),d(),f(i.showFilterDropdown()?27:-1),d(),f(i.activeFilter()?28:-1),d(2),f(i.filteredUsers().length===0&&i.users().length>0?30:i.users().length===0?31:32),d(7),v(" ",(m=i.selectedUser())!=null&&m.id?"Editar Usuario":i.selectedUser()?"Nuevo Usuario":"Informaci\xF3n"," "),d(2),f(i.selectedUser()?39:40),d(8),v("(",i.selectedUser()?i.selectedUser().roleIds.length:0,")"),d(2),f(i.selectedUser()?49:50),d(2),f(i.selectedUser()?51:-1),d(),f(i.showPasswordModal()?52:-1)}},dependencies:[j,G,Q,$,z,J],encapsulation:2});let r=s;return r})();export{Oe as UserManagementComponent};
