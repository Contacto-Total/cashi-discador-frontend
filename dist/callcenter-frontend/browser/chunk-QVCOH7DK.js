import{a as P}from"./chunk-XY4U6BGE.js";import{a as W,b as X}from"./chunk-SKPTQJ3H.js";import{a as R,b as V,c as H}from"./chunk-KWMTNRLY.js";import{a as A,b as D,c as B,d as G,g as U}from"./chunk-JAA5TP7F.js";import"./chunk-CWU2TVQ2.js";import{a as S,b as g,d as y,e as I,h as E,i as O,j as F,k as L,m as T}from"./chunk-T3QCM22X.js";import{a as N,b as k,c as j,d as q,e as z}from"./chunk-HCGGT3BP.js";import{Aa as M,Ga as m,Ha as n,Ia as i,Ja as u,Kb as C,Nb as v,Qc as J,Sa as f,Sc as K,Ua as x,Ub as b,Uc as Q,Vc as Y,Wb as w,Wc as Z,ea as o,gb as r,hb as h,ia as d,na as _,sa as p}from"./chunk-MAAOVH3P.js";function ee(t,a){t&1&&(n(0,"mat-error"),r(1," Username is required "),i())}function te(t,a){t&1&&(n(0,"mat-error"),r(1," Username must be at least 3 characters "),i())}function ne(t,a){t&1&&(n(0,"mat-error"),r(1," Password is required "),i())}function ie(t,a){t&1&&(n(0,"mat-error"),r(1," Password must be at least 6 characters "),i())}function re(t,a){if(t&1&&(n(0,"div",14)(1,"mat-icon"),r(2,"error"),i(),n(3,"span"),r(4),i()()),t&2){let $=x();o(4),h($.errorMessage)}}function oe(t,a){t&1&&(n(0,"span"),r(1,"Sign In"),i())}function ae(t,a){t&1&&u(0,"mat-spinner",15)}var ye=(()=>{let a=class a{constructor(l,s,e,c){this.fb=l,this.authService=s,this.router=e,this.route=c,this.loading=!1,this.errorMessage="",this.hidePassword=!0}ngOnInit(){if(this.loginForm=this.fb.group({username:["",[g.required,g.minLength(3)]],password:["",[g.required,g.minLength(6)]]}),this.authService.isAuthenticated()){this.router.navigate(["/dashboard"]);return}}onSubmit(){if(this.loginForm.invalid)return;this.loading=!0,this.errorMessage="";let{username:l,password:s}=this.loginForm.value;this.authService.login(l,s).subscribe({next:e=>{this.loading=!1,this.authService.getCurrentUser()?.role==="ADMIN"?this.router.navigate(["/admin/monitoring"]):this.router.navigate(["/dialer"])},error:e=>{this.loading=!1,this.errorMessage=e.error?.message||"Invalid username or password",console.error("Login error:",e)}})}get username(){return this.loginForm.get("username")}get password(){return this.loginForm.get("password")}};a.\u0275fac=function(s){return new(s||a)(d(L),d(P),d(w),d(b))},a.\u0275cmp=_({type:a,selectors:[["app-login"]],decls:34,vars:13,consts:[[1,"login-container"],[1,"login-card"],[1,"login-title"],[1,"login-icon"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","username","placeholder","Enter your username","autocomplete","username"],["matPrefix",""],[4,"ngIf"],["matInput","","formControlName","password","placeholder","Enter your password","autocomplete","current-password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["class","error-message",4,"ngIf"],["mat-raised-button","","color","primary","type","submit",1,"login-button","full-width",3,"disabled"],["diameter","20",4,"ngIf"],[1,"error-message"],["diameter","20"]],template:function(s,e){s&1&&(n(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title")(4,"div",2)(5,"mat-icon",3),r(6,"phone_in_talk"),i(),n(7,"h1"),r(8,"Call Center Login"),i()()()(),n(9,"mat-card-content")(10,"form",4),f("ngSubmit",function(){return e.onSubmit()}),n(11,"mat-form-field",5)(12,"mat-label"),r(13,"Username"),i(),u(14,"input",6),n(15,"mat-icon",7),r(16,"person"),i(),p(17,ee,2,0,"mat-error",8)(18,te,2,0,"mat-error",8),i(),n(19,"mat-form-field",5)(20,"mat-label"),r(21,"Password"),i(),u(22,"input",9),n(23,"mat-icon",7),r(24,"lock"),i(),n(25,"button",10),f("click",function(){return e.hidePassword=!e.hidePassword}),n(26,"mat-icon"),r(27),i()(),p(28,ne,2,0,"mat-error",8)(29,ie,2,0,"mat-error",8),i(),p(30,re,5,1,"div",11),n(31,"button",12),p(32,oe,2,0,"span",8)(33,ae,1,0,"mat-spinner",13),i()()()()()),s&2&&(o(10),m("formGroup",e.loginForm),o(7),m("ngIf",e.username==null?null:e.username.hasError("required")),o(),m("ngIf",e.username==null?null:e.username.hasError("minlength")),o(4),m("type",e.hidePassword?"password":"text"),o(3),M("aria-label","Hide password")("aria-pressed",e.hidePassword),o(2),h(e.hidePassword?"visibility_off":"visibility"),o(),m("ngIf",e.password==null?null:e.password.hasError("required")),o(),m("ngIf",e.password==null?null:e.password.hasError("minlength")),o(),m("ngIf",e.errorMessage),o(),m("disabled",e.loading||e.loginForm.invalid),o(),m("ngIf",!e.loading),o(),m("ngIf",e.loading))},dependencies:[v,C,T,E,S,y,I,O,F,z,N,j,q,k,R,U,A,D,B,G,H,V,Q,K,J,X,W,Z,Y],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);padding:20px}.login-card[_ngcontent-%COMP%]{width:100%;max-width:450px;padding:20px;box-shadow:0 10px 40px #0003}.login-title[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:12px;margin-bottom:20px}.login-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:28px;color:#333}.login-icon[_ngcontent-%COMP%]{font-size:36px;width:36px;height:36px;color:#667eea}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;margin-top:24px}.full-width[_ngcontent-%COMP%]{width:100%}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px;background-color:#ffebee;color:#c62828;border-radius:4px;margin-top:-8px}.error-message[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.login-button[_ngcontent-%COMP%]{margin-top:16px;height:48px;font-size:16px;font-weight:500}.login-button[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin:0 auto}.login-info[_ngcontent-%COMP%]{margin-top:24px;padding:16px;background-color:#f5f5f5;border-radius:4px;text-align:center}.login-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;font-size:14px;color:#666}.login-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#333}mat-card-header[_ngcontent-%COMP%]{display:flex;justify-content:center}mat-card-content[_ngcontent-%COMP%]{padding-top:0}"]});let t=a;return t})();export{ye as LoginComponent};
