import{E as ae,c as Q,f as X,k as Z,m as ee,s as te,t as ie,u as ne}from"./chunk-E2JO3TS2.js";import{a as K}from"./chunk-YQKVMPSG.js";import{b as B,c as Y}from"./chunk-72Z2NTOL.js";import{Ac as $,Eb as M,Fb as k,Gb as W,Hb as F,Ib as b,Jb as x,Kb as u,Lb as n,Mb as a,Nb as w,Ub as I,Wb as g,Yb as c,a as T,ab as r,b as V,ba as N,fa as G,gb as O,jc as j,kc as l,kd as z,lc as C,ld as J,ma as m,mc as y,na as p,nb as U,nc as L,oa as f,oc as q,pa as A,pc as h,qc as v,rc as S,uc as H,wa as E,yc as R}from"./chunk-BDAG5FYU.js";var oe=(()=>{let d=class d{constructor(i){this.http=i,this.baseUrl=`${K.gatewayUrl}/comisiones`}obtenerInquilinos(){return this.http.get(`${this.baseUrl}/inquilinos`)}obtenerCarteras(i){let e=new B().set("idInquilino",i.toString());return this.http.get(`${this.baseUrl}/carteras`,{params:e})}obtenerSubcarteras(i){let e=new B().set("idCartera",i.toString());return this.http.get(`${this.baseUrl}/subcarteras`,{params:e})}obtenerJerarquiaSubcartera(i){return this.http.get(`${this.baseUrl}/subcarteras/${i}/jerarquia`)}obtenerMetas(i,e){let s=new B().set("anio",i.toString()).set("mes",e.toString());return this.http.get(`${this.baseUrl}/metas`,{params:s})}obtenerMeta(i){return this.http.get(`${this.baseUrl}/metas/${i}`)}guardarMeta(i){return console.log("[COMISIONES] Guardando meta:",i),this.http.post(`${this.baseUrl}/metas`,i)}eliminarMeta(i){return console.log("[COMISIONES] Eliminando meta ID:",i),this.http.delete(`${this.baseUrl}/metas/${i}`)}obtenerBonos(i,e){let s=new B().set("anio",i.toString()).set("mes",e.toString());return this.http.get(`${this.baseUrl}/bonos`,{params:s})}obtenerBonosActivos(i,e){let s=new B().set("anio",i.toString()).set("mes",e.toString());return this.http.get(`${this.baseUrl}/bonos/activos`,{params:s})}copiarBonos(i,e,s,_){let re=new B().set("anioOrigen",i.toString()).set("mesOrigen",e.toString()).set("anioDestino",s.toString()).set("mesDestino",_.toString());return this.http.post(`${this.baseUrl}/bonos/copiar`,null,{params:re})}obtenerBono(i){return this.http.get(`${this.baseUrl}/bonos/${i}`)}guardarBono(i){return console.log("[COMISIONES] Guardando bono:",i),this.http.post(`${this.baseUrl}/bonos`,i)}eliminarBono(i){return console.log("[COMISIONES] Eliminando bono ID:",i),this.http.delete(`${this.baseUrl}/bonos/${i}`)}obtenerCamposDisponibles(){return this.http.get(`${this.baseUrl}/bonos/campos-disponibles`)}obtenerValoresCampo(i){let e=new B().set("campo",i);return this.http.get(`${this.baseUrl}/bonos/valores-campo`,{params:e})}calcularComisiones(i,e,s){let _=new B().set("anio",i.toString()).set("mes",e.toString());return s&&(_=_.set("idSubcartera",s.toString())),console.log("[COMISIONES] Calculando comisiones:",{anio:i,mes:e,idSubcartera:s}),this.http.get(`${this.baseUrl}/calcular`,{params:_})}obtenerResumenConfig(i,e){let s=new B().set("anio",i.toString()).set("mes",e.toString());return this.http.get(`${this.baseUrl}/resumen-config`,{params:s})}getNombreCampo(i){return{campo_monto_origen:"Campo Monto Origen",ruta_nivel_1:"Tipificaci\xF3n Nivel 1",ruta_nivel_2:"Tipificaci\xF3n Nivel 2",ruta_nivel_3:"Tipificaci\xF3n Nivel 3",ruta_nivel_4:"Tipificaci\xF3n Nivel 4",nombre_subcartera:"Subcartera",nombre_cartera:"Cartera",estado_gestion:"Estado Gesti\xF3n",metodo_contacto:"M\xE9todo Contacto",canal_contacto:"Canal Contacto"}[i]||i}getNombreMes(i){return["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][i-1]||""}exportarPdf(i,e,s){let _=new B().set("anio",i.toString()).set("mes",e.toString());return s&&(_=_.set("idSubcartera",s.toString())),this.http.get(`${this.baseUrl}/exportar-pdf`,{params:_,responseType:"blob"})}exportarExcel(i,e,s){let _=new B().set("anio",i.toString()).set("mes",e.toString());return s&&(_=_.set("idSubcartera",s.toString())),this.http.get(`${this.baseUrl}/exportar-excel`,{params:_,responseType:"blob"})}agregarEnvioBaseAjuste(i,e,s){let _=new B().set("anio",i.toString()).set("mes",e.toString());return s&&(_=_.set("idSubcartera",s.toString())),console.log("[COMISIONES] Agregando env\xEDo Base Ajuste:",{anio:i,mes:e,idSubcartera:s}),this.http.post(`${this.baseUrl}/base-ajuste/agregar-envio`,null,{params:_})}obtenerEstadisticasBaseAjuste(i,e,s){let _=new B().set("anio",i.toString()).set("mes",e.toString());return s&&(_=_.set("idSubcartera",s.toString())),this.http.get(`${this.baseUrl}/base-ajuste/estadisticas`,{params:_})}exportarBaseAjusteExcel(i,e,s){let _=new B().set("anio",i.toString()).set("mes",e.toString());return s&&(_=_.set("idSubcartera",s.toString())),this.http.get(`${this.baseUrl}/base-ajuste/exportar-excel`,{params:_,responseType:"blob"})}};d.\u0275fac=function(e){return new(e||d)(G(Y))},d.\u0275prov=N({token:d,factory:d.\u0275fac,providedIn:"root"});let o=d;return o})();var de=()=>[],D=(o,d)=>d.value,P=(o,d)=>d.id,ce=(o,d)=>d.idAgente,me=(o,d)=>d.bonoId;function pe(o,d){if(o&1&&(n(0,"option",17),l(1),a()),o&2){let t=d.$implicit;u("value",t),r(),C(t)}}function _e(o,d){if(o&1&&(n(0,"option",17),l(1),a()),o&2){let t=d.$implicit;u("value",t.value),r(),C(t.label)}}function ue(o,d){if(o&1&&(n(0,"option",17),l(1),a()),o&2){let t=d.$implicit;u("value",t.id),r(),C(t.nombreInquilino)}}function ge(o,d){if(o&1&&(n(0,"option",17),l(1),a()),o&2){let t=d.$implicit;u("value",t.id),r(),C(t.nombreCartera)}}function be(o,d){if(o&1&&(n(0,"option",17),l(1),a()),o&2){let t=d.$implicit;u("value",t.id),r(),C(t.nombreSubcartera)}}function xe(o,d){if(o&1&&(n(0,"option",17),l(1),a()),o&2){let t=d.$implicit;u("value",t.value),r(),C(t.label)}}function Ce(o,d){if(o&1){let t=I();n(0,"div",35)(1,"span",40),l(2,"Desde"),a(),n(3,"input",41),S("ngModelChange",function(e){let s=m(t).$implicit;return v(s.porcentajeDesde,e)||(s.porcentajeDesde=e),p(e)}),a(),n(4,"span",40),l(5,"% hasta"),a(),n(6,"input",42),S("ngModelChange",function(e){let s=m(t).$implicit;return v(s.porcentajeHasta,e)||(s.porcentajeHasta=e),p(e)}),a(),n(7,"span",40),l(8,"% ="),a(),n(9,"span",40),l(10,"S/"),a(),n(11,"input",43),S("ngModelChange",function(e){let s=m(t).$implicit;return v(s.montoComision,e)||(s.montoComision=e),p(e)}),a(),n(12,"button",44),g("click",function(){let e=m(t).$index,s=c(3);return p(s.eliminarEscalaMeta(e))}),f(),n(13,"svg",33),w(14,"path",45),a()()()}if(o&2){let t=d.$implicit;r(3),h("ngModel",t.porcentajeDesde),r(3),h("ngModel",t.porcentajeHasta),r(5),h("ngModel",t.montoComision)}}function he(o,d){o&1&&(n(0,"p",36),l(1,"No hay escalas configuradas. Agrega al menos una escala."),a())}function ve(o,d){if(o&1){let t=I();n(0,"div",20)(1,"h3",23),l(2),a(),n(3,"div",24)(4,"div")(5,"label",15),l(6,"Inquilino"),a(),n(7,"select",25),S("ngModelChange",function(e){m(t);let s=c(2);return v(s.selectedInquilino,e)||(s.selectedInquilino=e),p(e)}),g("change",function(){m(t);let e=c(2);return p(e.onInquilinoChange())}),n(8,"option",17),l(9,"Seleccionar..."),a(),b(10,ue,2,2,"option",17,P),a()(),n(12,"div")(13,"label",15),l(14,"Cartera"),a(),n(15,"select",26),S("ngModelChange",function(e){m(t);let s=c(2);return v(s.selectedCartera,e)||(s.selectedCartera=e),p(e)}),g("change",function(){m(t);let e=c(2);return p(e.onCarteraChange())}),n(16,"option",17),l(17,"Seleccionar..."),a(),b(18,ge,2,2,"option",17,P),a()(),n(20,"div")(21,"label",15),l(22,"Subcartera"),a(),n(23,"select",26),S("ngModelChange",function(e){m(t);let s=c(2);return v(s.metaEditando().idSubcartera,e)||(s.metaEditando().idSubcartera=e),p(e)}),g("change",function(){m(t);let e=c(2);return p(e.onSubcarteraChange())}),n(24,"option",17),l(25,"Seleccionar..."),a(),b(26,be,2,2,"option",17,P),a()(),n(28,"div")(29,"label",15),l(30,"Meta Grupal (S/)"),a(),n(31,"input",27),S("ngModelChange",function(e){m(t);let s=c(2);return v(s.metaEditando().metaGrupal,e)||(s.metaEditando().metaGrupal=e),p(e)}),a()(),n(32,"div")(33,"label",15),l(34,"Tipo de Metrica"),a(),n(35,"select",28),S("ngModelChange",function(e){m(t);let s=c(2);return v(s.metaEditando().tipoMetrica,e)||(s.metaEditando().tipoMetrica=e),p(e)}),b(36,xe,2,2,"option",17,D),a()()(),n(38,"div",29)(39,"div",30)(40,"label",31),l(41," Escalas de Comisi\xF3n (por % de cumplimiento) "),a(),n(42,"button",32),g("click",function(){m(t);let e=c(2);return p(e.agregarEscalaMeta())}),f(),n(43,"svg",33),w(44,"path",19),a(),l(45," Agregar escala "),a()(),A(),n(46,"div",34),b(47,Ce,15,3,"div",35,W),M(49,he,2,0,"p",36),a()(),n(50,"div",37)(51,"button",38),g("click",function(){m(t);let e=c(2);return p(e.guardarMeta())}),l(52),a(),n(53,"button",39),g("click",function(){m(t);let e=c(2);return p(e.cancelarMeta())}),l(54," Cancelar "),a()()()}if(o&2){let t,i=c(2);r(2),y(" ",(t=i.metaEditando())!=null&&t.id?"Editar Meta":"Nueva Meta"," "),r(5),h("ngModel",i.selectedInquilino),r(),u("value",0),r(2),x(i.inquilinos()),r(5),h("ngModel",i.selectedCartera),u("disabled",!i.selectedInquilino),r(),u("value",0),r(2),x(i.carteras()),r(5),h("ngModel",i.metaEditando().idSubcartera),u("disabled",!i.selectedCartera),r(),u("value",0),r(2),x(i.subcarteras()),r(5),h("ngModel",i.metaEditando().metaGrupal),r(4),h("ngModel",i.metaEditando().tipoMetrica),r(),x(i.tiposMetrica),r(11),x(i.metaEditando().escalas),r(2),k(i.metaEditando().escalas.length===0?49:-1),r(2),u("disabled",i.isLoading()),r(),y(" ",i.isLoading()?"Guardando...":"Guardar"," ")}}function Se(o,d){if(o&1&&(n(0,"span",58),l(1),a()),o&2){let t=d.$implicit;r(),q(" ",t.porcentajeDesde,"-",t.porcentajeHasta||"100+","% = S/",t.montoComision," ")}}function fe(o,d){o&1&&(n(0,"span",59),l(1,"Sin escalas"),a())}function Ee(o,d){if(o&1){let t=I();n(0,"tr",52)(1,"td",53),l(2),a(),n(3,"td",54),l(4),a(),n(5,"td",55)(6,"span"),l(7),a()(),n(8,"td",56)(9,"div",57),b(10,Se,2,3,"span",58,P),M(12,fe,2,0,"span",59),a()(),n(13,"td",60)(14,"span",61),l(15),a()(),n(16,"td",60)(17,"button",62),g("click",function(){let e=m(t).$implicit,s=c(3);return p(s.editarMeta(e))}),f(),n(18,"svg",63),w(19,"path",64),a()(),A(),n(20,"button",65),g("click",function(){let e=m(t).$implicit,s=c(3);return p(s.eliminarMeta(e))}),f(),n(21,"svg",63),w(22,"path",66),a()()()()}if(o&2){let t=d.$implicit,i=c(3);r(2),y(" ",t.nombreSubcartera||"Subcartera "+t.idSubcartera," "),r(2),y(" S/ ",i.formatMonto(t.metaGrupal)," "),r(2),j(t.tipoMetrica==="CAPITAL_LIBERADO"?"px-2 py-1 bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300 rounded-full text-xs font-medium":"px-2 py-1 bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300 rounded-full text-xs font-medium"),r(),y(" ",t.tipoMetrica==="CAPITAL_LIBERADO"?"Capital":"Recaudo"," "),r(3),x(t.escalas||H(9,de)),r(2),k(!t.escalas||t.escalas.length===0?12:-1),r(2),j(t.activo?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-400"),r(),y(" ",t.activo?"Activo":"Inactivo"," ")}}function we(o,d){if(o&1&&(n(0,"div",21)(1,"table",46)(2,"thead",47)(3,"tr")(4,"th",48),l(5,"Subcartera"),a(),n(6,"th",49),l(7,"Meta Grupal"),a(),n(8,"th",50),l(9,"Tipo"),a(),n(10,"th",48),l(11,"Escalas de Comisi\xF3n"),a(),n(12,"th",50),l(13,"Estado"),a(),n(14,"th",50),l(15,"Acciones"),a()()(),n(16,"tbody",51),b(17,Ee,23,10,"tr",52,P),a()()()),o&2){let t=c(2);r(17),x(t.metas())}}function Me(o,d){o&1&&(n(0,"div",22),l(1," No hay metas configuradas para este per\xEDodo "),a())}function ke(o,d){if(o&1){let t=I();n(0,"div",12)(1,"div",14)(2,"div")(3,"label",15),l(4,"A\xF1o"),a(),n(5,"select",16),S("ngModelChange",function(e){m(t);let s=c();return v(s.filtroAnio,e)||(s.filtroAnio=e),p(e)}),g("change",function(){m(t);let e=c();return p(e.cargarMetas())}),b(6,pe,2,2,"option",17,F),a()(),n(8,"div")(9,"label",15),l(10,"Mes"),a(),n(11,"select",16),S("ngModelChange",function(e){m(t);let s=c();return v(s.filtroMes,e)||(s.filtroMes=e),p(e)}),g("change",function(){m(t);let e=c();return p(e.cargarMetas())}),b(12,_e,2,2,"option",17,D),a()(),n(14,"button",18),g("click",function(){m(t);let e=c();return p(e.nuevaMeta())}),f(),n(15,"svg",7),w(16,"path",19),a(),l(17," Nueva Meta "),a()(),M(18,ve,55,14,"div",20),M(19,we,19,0,"div",21)(20,Me,2,0,"div",22),a()}if(o&2){let t=c();r(5),h("ngModel",t.filtroAnio),r(),x(t.aniosDisponibles),r(5),h("ngModel",t.filtroMes),r(),x(t.mesesDisponibles),r(6),k(t.mostrarFormMeta()?18:-1),r(),k(t.metas().length>0?19:20)}}function ye(o,d){if(o&1&&(n(0,"option",17),l(1),a()),o&2){let t=d.$implicit;u("value",t),r(),C(t)}}function Te(o,d){if(o&1&&(n(0,"option",17),l(1),a()),o&2){let t=d.$implicit;u("value",t.value),r(),C(t.label)}}function Ve(o,d){if(o&1&&(n(0,"option",17),l(1),a()),o&2){let t=d.$implicit;u("value",t),r(),C(t)}}function Pe(o,d){if(o&1&&(n(0,"option",17),l(1),a()),o&2){let t=d.$implicit;u("value",t.value),r(),C(t.label)}}function Be(o,d){if(o&1){let t=I();n(0,"div",69)(1,"div",72)(2,"h3",23),l(3,"Copiar Bonos de Otro Per\xEDodo"),a(),n(4,"p",73),l(5),a(),n(6,"div",74)(7,"div")(8,"label",15),l(9,"A\xF1o Origen"),a(),n(10,"select",28),S("ngModelChange",function(e){m(t);let s=c(2);return v(s.copiarBonosAnioOrigen,e)||(s.copiarBonosAnioOrigen=e),p(e)}),b(11,Ve,2,2,"option",17,F),a()(),n(13,"div")(14,"label",15),l(15,"Mes Origen"),a(),n(16,"select",28),S("ngModelChange",function(e){m(t);let s=c(2);return v(s.copiarBonosMesOrigen,e)||(s.copiarBonosMesOrigen=e),p(e)}),b(17,Pe,2,2,"option",17,D),a()()(),n(19,"div",75)(20,"button",39),g("click",function(){m(t);let e=c(2);return p(e.cerrarModalCopiarBonos())}),l(21," Cancelar "),a(),n(22,"button",38),g("click",function(){m(t);let e=c(2);return p(e.copiarBonos())}),l(23),a()()()()}if(o&2){let t=c(2);r(5),L(" Se copiar\xE1n todos los bonos del per\xEDodo origen al per\xEDodo actual (",t.comisionesService.getNombreMes(t.bonoFiltroMes)," ",t.bonoFiltroAnio,"). "),r(5),h("ngModel",t.copiarBonosAnioOrigen),r(),x(t.aniosDisponibles),r(5),h("ngModel",t.copiarBonosMesOrigen),r(),x(t.mesesDisponibles),r(5),u("disabled",t.isLoading()),r(),y(" ",t.isLoading()?"Copiando...":"Copiar Bonos"," ")}}function Ae(o,d){if(o&1&&(n(0,"option",17),l(1),a()),o&2){let t=d.$implicit;u("value",t.id),r(),C(t.nombreInquilino)}}function Ie(o,d){if(o&1&&(n(0,"option",17),l(1),a()),o&2){let t=d.$implicit;u("value",t.id),r(),C(t.nombreCartera)}}function je(o,d){if(o&1&&(n(0,"option",17),l(1),a()),o&2){let t=d.$implicit;u("value",t.id),r(),C(t.nombreSubcartera)}}function Fe(o,d){if(o&1&&(n(0,"option",17),l(1),a()),o&2){let t=d.$implicit,i=c(3);u("value",t),r(),C(i.comisionesService.getNombreCampo(t))}}function De(o,d){o&1&&(n(0,"option",79),l(1,"Cargando valores..."),a())}function Le(o,d){o&1&&(n(0,"option",79),l(1,"Primero seleccione un campo"),a())}function We(o,d){if(o&1&&(n(0,"option",17),l(1),a()),o&2){let t=d.$implicit;u("value",t),r(),C(t)}}function qe(o,d){if(o&1&&(n(0,"option",79),l(1,"Seleccionar valor..."),a(),b(2,We,2,2,"option",17,F)),o&2){let t=c(3);r(2),x(t.valoresCampo())}}function Ne(o,d){if(o&1){let t=I();n(0,"div",82)(1,"input",84),S("ngModelChange",function(e){let s=m(t).$implicit;return v(s.cantidadMinima,e)||(s.cantidadMinima=e),p(e)}),a(),n(2,"span",85),l(3,"pagos ="),a(),n(4,"input",86),S("ngModelChange",function(e){let s=m(t).$implicit;return v(s.monto,e)||(s.monto=e),p(e)}),a(),n(5,"span",85),l(6,"S/"),a(),n(7,"button",87),g("click",function(){let e=m(t).$index,s=c(3);return p(s.eliminarEscala(e))}),f(),n(8,"svg",7),w(9,"path",45),a()()()}if(o&2){let t=d.$implicit;r(),h("ngModel",t.cantidadMinima),r(3),h("ngModel",t.monto)}}function Ge(o,d){if(o&1){let t=I();n(0,"div",70)(1,"h3",23),l(2),a(),n(3,"div",76)(4,"div")(5,"label",15),l(6,"Nombre del Bono"),a(),n(7,"input",77),S("ngModelChange",function(e){m(t);let s=c(2);return v(s.bonoEditando().nombre,e)||(s.bonoEditando().nombre=e),p(e)}),a()(),n(8,"div")(9,"label",15),l(10,"Descripci\xF3n"),a(),n(11,"input",78),S("ngModelChange",function(e){m(t);let s=c(2);return v(s.bonoEditando().descripcion,e)||(s.bonoEditando().descripcion=e),p(e)}),a()(),n(12,"div")(13,"label",15),l(14,"Inquilino"),a(),n(15,"select",25),S("ngModelChange",function(e){m(t);let s=c(2);return v(s.bonoSelectedInquilino,e)||(s.bonoSelectedInquilino=e),p(e)}),g("change",function(){m(t);let e=c(2);return p(e.onBonoInquilinoChange())}),n(16,"option",17),l(17,"Todos (aplica a todas)"),a(),b(18,Ae,2,2,"option",17,P),a()(),n(20,"div")(21,"label",15),l(22,"Cartera"),a(),n(23,"select",26),S("ngModelChange",function(e){m(t);let s=c(2);return v(s.bonoSelectedCartera,e)||(s.bonoSelectedCartera=e),p(e)}),g("change",function(){m(t);let e=c(2);return p(e.onBonoCarteraChange())}),n(24,"option",17),l(25,"Seleccionar..."),a(),b(26,Ie,2,2,"option",17,P),a()(),n(28,"div")(29,"label",15),l(30,"Subcartera"),a(),n(31,"select",26),S("ngModelChange",function(e){m(t);let s=c(2);return v(s.bonoEditando().idSubcartera,e)||(s.bonoEditando().idSubcartera=e),p(e)}),g("change",function(){m(t);let e=c(2);return p(e.onBonoSubcarteraChange())}),n(32,"option",17),l(33,"Todas (aplica a todas)"),a(),b(34,je,2,2,"option",17,P),a()(),n(36,"div")(37,"label",15),l(38,"Campo a Evaluar"),a(),n(39,"select",25),S("ngModelChange",function(e){m(t);let s=c(2);return v(s.bonoEditando().campoEvaluar,e)||(s.bonoEditando().campoEvaluar=e),p(e)}),g("change",function(){m(t);let e=c(2);return p(e.onCampoEvaluarChange())}),n(40,"option",79),l(41,"Seleccionar campo..."),a(),b(42,Fe,2,2,"option",17,F),a()(),n(44,"div")(45,"label",15),l(46,"Valor a Buscar"),a(),n(47,"select",80),S("ngModelChange",function(e){m(t);let s=c(2);return v(s.bonoEditando().valorBuscar,e)||(s.bonoEditando().valorBuscar=e),p(e)}),M(48,De,2,0,"option",79)(49,Le,2,0,"option",79)(50,qe,4,0),a()()(),n(51,"div",29)(52,"div",30)(53,"label",31),l(54,"Escalas"),a(),n(55,"button",81),g("click",function(){m(t);let e=c(2);return p(e.agregarEscala())}),f(),n(56,"svg",33),w(57,"path",19),a(),l(58," Agregar escala "),a()(),A(),n(59,"div",34),b(60,Ne,10,2,"div",82,W),a()(),n(62,"div",37)(63,"button",83),g("click",function(){m(t);let e=c(2);return p(e.guardarBono())}),l(64),a(),n(65,"button",39),g("click",function(){m(t);let e=c(2);return p(e.cancelarBono())}),l(66," Cancelar "),a()()()}if(o&2){let t,i=c(2);r(2),y(" ",(t=i.bonoEditando())!=null&&t.id?"Editar Bono":"Nuevo Bono"," "),r(5),h("ngModel",i.bonoEditando().nombre),r(4),h("ngModel",i.bonoEditando().descripcion),r(4),h("ngModel",i.bonoSelectedInquilino),r(),u("value",0),r(2),x(i.inquilinos()),r(5),h("ngModel",i.bonoSelectedCartera),u("disabled",!i.bonoSelectedInquilino),r(),u("value",0),r(2),x(i.bonoCarteras()),r(5),h("ngModel",i.bonoEditando().idSubcartera),u("disabled",!i.bonoSelectedCartera),r(),u("value",0),r(2),x(i.bonoSubcarteras()),r(5),h("ngModel",i.bonoEditando().campoEvaluar),r(3),x(i.camposDisponibles()),r(5),h("ngModel",i.bonoEditando().valorBuscar),u("disabled",!i.bonoEditando().campoEvaluar||i.cargandoValores()),r(),k(i.cargandoValores()?48:i.bonoEditando().campoEvaluar?50:49),r(12),x(i.bonoEditando().escalas),r(3),u("disabled",i.isLoading()),r(),y(" ",i.isLoading()?"Guardando...":"Guardar"," ")}}function Oe(o,d){if(o&1&&(n(0,"span",92),l(1),a()),o&2){let t=c().$implicit;r(),y(" ",t.nombreSubcartera," ")}}function Ue(o,d){o&1&&(n(0,"span",93),l(1," Todas las subcarteras "),a())}function He(o,d){if(o&1&&(n(0,"p",95),l(1),a()),o&2){let t=c().$implicit;r(),C(t.descripcion)}}function Re(o,d){if(o&1&&(n(0,"span",99),l(1),a()),o&2){let t=d.$implicit;r(),L(" ",t.cantidadMinima,"+ pagos = S/ ",t.monto," ")}}function $e(o,d){if(o&1&&(n(0,"div",98),b(1,Re,2,2,"span",99,P),a()),o&2){let t=c().$implicit;r(),x(t.escalas)}}function ze(o,d){if(o&1){let t=I();n(0,"div",88)(1,"div",89)(2,"div")(3,"div",90)(4,"h4",91),l(5),a(),M(6,Oe,2,1,"span",92)(7,Ue,2,0,"span",93),a(),n(8,"p",94),l(9),a(),M(10,He,2,1,"p",95),a(),n(11,"div",90)(12,"span",61),l(13),a(),n(14,"button",96),g("click",function(){let e=m(t).$implicit,s=c(3);return p(s.editarBono(e))}),f(),n(15,"svg",7),w(16,"path",64),a()(),A(),n(17,"button",97),g("click",function(){let e=m(t).$implicit,s=c(3);return p(s.eliminarBono(e))}),f(),n(18,"svg",7),w(19,"path",66),a()()()(),M(20,$e,3,0,"div",98),a()}if(o&2){let t=d.$implicit,i=c(3);r(5),C(t.nombre),r(),k(t.nombreSubcartera?6:7),r(3),L(" ",i.comisionesService.getNombreCampo(t.campoEvaluar),' = "',t.valorBuscar,'" '),r(),k(t.descripcion?10:-1),r(2),j(t.activo?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-400"),r(),y(" ",t.activo?"Activo":"Inactivo"," "),r(7),k(t.escalas&&t.escalas.length>0?20:-1)}}function Je(o,d){if(o&1&&(n(0,"div",71),b(1,ze,21,9,"div",88,P),a()),o&2){let t=c(2);r(),x(t.bonos())}}function Ye(o,d){o&1&&(n(0,"div",22),l(1," No hay bonos configurados "),a())}function Ke(o,d){if(o&1){let t=I();n(0,"div",12)(1,"div",14)(2,"div")(3,"label",15),l(4,"A\xF1o"),a(),n(5,"select",16),S("ngModelChange",function(e){m(t);let s=c();return v(s.bonoFiltroAnio,e)||(s.bonoFiltroAnio=e),p(e)}),g("change",function(){m(t);let e=c();return p(e.cargarBonos())}),b(6,ye,2,2,"option",17,F),a()(),n(8,"div")(9,"label",15),l(10,"Mes"),a(),n(11,"select",16),S("ngModelChange",function(e){m(t);let s=c();return v(s.bonoFiltroMes,e)||(s.bonoFiltroMes=e),p(e)}),g("change",function(){m(t);let e=c();return p(e.cargarBonos())}),b(12,Te,2,2,"option",17,D),a()(),n(14,"button",67),g("click",function(){m(t);let e=c();return p(e.nuevoBono())}),f(),n(15,"svg",7),w(16,"path",19),a(),l(17," Nuevo Bono "),a(),A(),n(18,"button",18),g("click",function(){m(t);let e=c();return p(e.abrirModalCopiarBonos())}),f(),n(19,"svg",7),w(20,"path",68),a(),l(21," Copiar de Otro Mes "),a()(),M(22,Be,24,6,"div",69),M(23,Ge,67,17,"div",70),M(24,Je,3,0,"div",71)(25,Ye,2,0,"div",22),a()}if(o&2){let t=c();r(5),h("ngModel",t.bonoFiltroAnio),r(),x(t.aniosDisponibles),r(5),h("ngModel",t.bonoFiltroMes),r(),x(t.mesesDisponibles),r(10),k(t.mostrarModalCopiarBonos()?22:-1),r(),k(t.mostrarFormBono()?23:-1),r(),k(t.bonos().length>0?24:25)}}function Qe(o,d){if(o&1&&(n(0,"option",17),l(1),a()),o&2){let t=d.$implicit;u("value",t),r(),C(t)}}function Xe(o,d){if(o&1&&(n(0,"option",17),l(1),a()),o&2){let t=d.$implicit;u("value",t.value),r(),C(t.label)}}function Ze(o,d){if(o&1&&(n(0,"option",17),l(1),a()),o&2){let t=d.$implicit;u("value",t.id),r(),C(t.nombreInquilino)}}function et(o,d){if(o&1&&(n(0,"option",17),l(1),a()),o&2){let t=d.$implicit;u("value",t.id),r(),C(t.nombreCartera)}}function tt(o,d){if(o&1&&(n(0,"option",17),l(1),a()),o&2){let t=d.$implicit;u("value",t.id),r(),C(t.nombreSubcartera)}}function it(o,d){o&1&&(f(),n(0,"svg",105),w(1,"circle",106)(2,"path",107),a(),l(3," Calculando... "))}function nt(o,d){o&1&&(f(),n(0,"svg",7),w(1,"path",108),a(),l(2," Calcular Comisiones "))}function at(o,d){if(o&1){let t=I();n(0,"button",135),g("click",function(){m(t);let e=c().$implicit,s=c(4);return p(s.toggleDetalleBonos(e))}),f(),n(1,"svg",136),w(2,"path",137),a()()}}function ot(o,d){if(o&1&&(n(0,"span",141),l(1),a()),o&2){let t=d.$implicit;r(),q(" ",t.nombreBono,": ",t.cantidadPagos," pagos = S/ ",t.montoGanado," ")}}function rt(o,d){if(o&1&&(n(0,"tr",134)(1,"td",138)(2,"div",139)(3,"span",140),l(4,"Bonos ganados:"),a(),b(5,ot,2,3,"span",141,me),a()()()),o&2){let t=c().$implicit;r(5),x(t.bonosGanados)}}function st(o,d){if(o&1&&(n(0,"tr",52)(1,"td",126),l(2),a(),n(3,"td",127),l(4),a(),n(5,"td",54),l(6),a(),n(7,"td",128),l(8),a(),n(9,"td",129)(10,"span"),l(11),R(12,"number"),a()(),n(13,"td",130),l(14),a(),n(15,"td",131),l(16),M(17,at,3,0,"button",132),a(),n(18,"td",133),l(19),a()(),M(20,rt,7,0,"tr",134)),o&2){let t=d.$implicit,i=c(4);r(2),y(" ",t.nombreAgente||"Agente "+t.idAgente," "),r(2),y(" ",t.nombreSubcartera," "),r(2),y(" S/ ",i.formatMonto(t.recaudoTotal)," "),r(2),y(" S/ ",i.formatMonto(t.metaIndividual)," "),r(2),j(t.metaAlcanzada?"text-green-600 font-semibold":"text-amber-600"),r(),y(" ",$(12,12,t.porcentajeCumplimiento,"1.1-1"),"% "),r(3),y(" S/ ",i.formatMonto(t.comisionBase)," "),r(2),y(" S/ ",i.formatMonto(t.totalBonos)," "),r(),k(t.bonosGanados&&t.bonosGanados.length>0?17:-1),r(2),y(" S/ ",i.formatMonto(t.totalComision)," "),r(),k(i.agenteExpandido()===t.idAgente&&t.bonosGanados&&t.bonosGanados.length>0?20:-1)}}function lt(o,d){if(o&1&&(n(0,"div",21)(1,"table",46)(2,"thead",47)(3,"tr")(4,"th",48),l(5,"Agente"),a(),n(6,"th",48),l(7,"Subcartera"),a(),n(8,"th",49),l(9,"Recaudo"),a(),n(10,"th",49),l(11,"Meta"),a(),n(12,"th",49),l(13,"% Cumpl."),a(),n(14,"th",49),l(15,"Comisi\xF3n"),a(),n(16,"th",49),l(17,"Bonos"),a(),n(18,"th",49),l(19,"Total"),a()()(),n(20,"tbody",51),b(21,st,21,15,null,null,ce),a()()()),o&2){let t=c(3);r(21),x(t.reporte().agentes)}}function dt(o,d){o&1&&(n(0,"div",22),l(1," No hay datos para mostrar "),a())}function ct(o,d){if(o&1){let t=I();n(0,"div",109)(1,"div",110)(2,"p",111),l(3,"Total Recaudo"),a(),n(4,"p",112),l(5),a()(),n(6,"div",113)(7,"p",114),l(8,"Total Comisiones"),a(),n(9,"p",115),l(10),a()(),n(11,"div",116)(12,"p",117),l(13,"Total Bonos"),a(),n(14,"p",118),l(15),a()(),n(16,"div",119)(17,"p",120),l(18,"Agentes"),a(),n(19,"p",121),l(20),a()()(),n(21,"div",122)(22,"button",67),g("click",function(){m(t);let e=c(2);return p(e.exportarExcel())}),f(),n(23,"svg",7),w(24,"path",123),a(),l(25," Exportar Excel "),a(),A(),n(26,"button",124),g("click",function(){m(t);let e=c(2);return p(e.exportarPdf())}),f(),n(27,"svg",7),w(28,"path",125),a(),l(29," Exportar PDF "),a()(),M(30,lt,23,0,"div",21)(31,dt,2,0,"div",22)}if(o&2){let t=c(2);r(5),y("S/ ",t.formatMonto(t.reporte().totalRecaudo)),r(5),y("S/ ",t.formatMonto(t.reporte().totalComisiones)),r(5),y("S/ ",t.formatMonto(t.reporte().totalBonos)),r(5),C(t.reporte().totalAgentes),r(10),k(t.reporte().agentes&&t.reporte().agentes.length>0?30:31)}}function mt(o,d){o&1&&(n(0,"div",104),f(),n(1,"svg",142),w(2,"path",10),a(),A(),n(3,"p"),l(4,'Selecciona un per\xEDodo y haz clic en "Calcular Comisiones"'),a()())}function pt(o,d){if(o&1){let t=I();n(0,"div",12)(1,"div",14)(2,"div")(3,"label",15),l(4,"A\xF1o"),a(),n(5,"select",100),S("ngModelChange",function(e){m(t);let s=c();return v(s.filtroAnio,e)||(s.filtroAnio=e),p(e)}),b(6,Qe,2,2,"option",17,F),a()(),n(8,"div")(9,"label",15),l(10,"Mes"),a(),n(11,"select",100),S("ngModelChange",function(e){m(t);let s=c();return v(s.filtroMes,e)||(s.filtroMes=e),p(e)}),b(12,Xe,2,2,"option",17,D),a()(),n(14,"div")(15,"label",15),l(16,"Inquilino"),a(),n(17,"select",16),S("ngModelChange",function(e){m(t);let s=c();return v(s.reporteInquilino,e)||(s.reporteInquilino=e),p(e)}),g("change",function(){m(t);let e=c();return p(e.onReporteInquilinoChange())}),n(18,"option",17),l(19,"Todos"),a(),b(20,Ze,2,2,"option",17,P),a()(),n(22,"div")(23,"label",15),l(24,"Cartera"),a(),n(25,"select",101),S("ngModelChange",function(e){m(t);let s=c();return v(s.reporteCartera,e)||(s.reporteCartera=e),p(e)}),g("change",function(){m(t);let e=c();return p(e.onReporteCarteraChange())}),n(26,"option",17),l(27,"Todas"),a(),b(28,et,2,2,"option",17,P),a()(),n(30,"div")(31,"label",15),l(32,"Subcartera"),a(),n(33,"select",102),S("ngModelChange",function(e){m(t);let s=c();return v(s.reporteSubcartera,e)||(s.reporteSubcartera=e),p(e)}),n(34,"option",17),l(35,"Todas"),a(),b(36,tt,2,2,"option",17,P),a()(),n(38,"button",103),g("click",function(){m(t);let e=c();return p(e.calcularComisiones())}),M(39,it,4,0)(40,nt,3,0),a()(),M(41,ct,32,5)(42,mt,5,0,"div",104),a()}if(o&2){let t=c();r(5),h("ngModel",t.filtroAnio),r(),x(t.aniosDisponibles),r(5),h("ngModel",t.filtroMes),r(),x(t.mesesDisponibles),r(5),h("ngModel",t.reporteInquilino),r(),u("value",0),r(2),x(t.inquilinos()),r(5),h("ngModel",t.reporteCartera),u("disabled",!t.reporteInquilino),r(),u("value",0),r(2),x(t.reporteCarteras()),r(5),h("ngModel",t.reporteSubcartera),u("disabled",!t.reporteCartera),r(),u("value",0),r(2),x(t.reporteSubcarteras()),r(2),u("disabled",t.isLoading()),r(),k(t.isLoading()?39:40),r(2),k(t.reporte()?41:42)}}function _t(o,d){if(o&1&&(n(0,"option",17),l(1),a()),o&2){let t=d.$implicit;u("value",t),r(),C(t)}}function ut(o,d){if(o&1&&(n(0,"option",17),l(1),a()),o&2){let t=d.$implicit;u("value",t.value),r(),C(t.label)}}function gt(o,d){if(o&1&&(n(0,"option",17),l(1),a()),o&2){let t=d.$implicit;u("value",t.id),r(),C(t.nombreInquilino)}}function bt(o,d){if(o&1&&(n(0,"option",17),l(1),a()),o&2){let t=d.$implicit;u("value",t.id),r(),C(t.nombreCartera)}}function xt(o,d){if(o&1&&(n(0,"option",17),l(1),a()),o&2){let t=d.$implicit;u("value",t.id),r(),C(t.nombreSubcartera)}}function Ct(o,d){o&1&&(f(),n(0,"svg",105),w(1,"circle",106)(2,"path",107),a())}function ht(o,d){o&1&&(f(),n(0,"svg",7),w(1,"path",19),a())}function vt(o,d){if(o&1&&(n(0,"div",157)(1,"div",158)(2,"div")(3,"span",159),l(4,"Primer env\xEDo:"),a(),n(5,"span",160),l(6),a()(),n(7,"div")(8,"span",159),l(9,"\xDAltimo env\xEDo:"),a(),n(10,"span",160),l(11),a()()()()),o&2){let t=c(3);r(6),C(t.estadisticasBaseAjuste().primer_envio),r(5),C(t.estadisticasBaseAjuste().ultimo_envio)}}function St(o,d){if(o&1&&(n(0,"div",109)(1,"div",154)(2,"p",155),l(3,"Total Registros"),a(),n(4,"p",156),l(5),a()(),n(6,"div",110)(7,"p",111),l(8,"Total Env\xEDos"),a(),n(9,"p",112),l(10),a()(),n(11,"div",119)(12,"p",120),l(13,"Asesores"),a(),n(14,"p",121),l(15),a()(),n(16,"div",113)(17,"p",114),l(18,"Monto Total"),a(),n(19,"p",115),l(20),a()()(),M(21,vt,12,2,"div",157)),o&2){let t=c(2);r(5),C(t.estadisticasBaseAjuste().total_registros),r(5),C(t.estadisticasBaseAjuste().total_envios),r(5),C(t.estadisticasBaseAjuste().total_asesores),r(5),y("S/ ",t.formatMonto(t.estadisticasBaseAjuste().monto_total)),r(),k(t.estadisticasBaseAjuste().primer_envio?21:-1)}}function ft(o,d){o&1&&(n(0,"div",104),f(),n(1,"svg",142),w(2,"path",11),a(),A(),n(3,"p"),l(4,"No hay env\xEDos registrados para este per\xEDodo"),a(),n(5,"p",161),l(6,'Haz clic en "Agregar al Env\xEDo" para incluir las promesas pagadas del mes'),a()())}function Et(o,d){if(o&1){let t=I();n(0,"div",12)(1,"div",143)(2,"div")(3,"h2",144),l(4,"Base de Ajuste"),a(),n(5,"p",145),l(6," Reporte de promesas pagadas con fecha de env\xEDo para control de ajustes "),a()()(),n(7,"div",14)(8,"div")(9,"label",15),l(10,"A\xF1o"),a(),n(11,"select",16),S("ngModelChange",function(e){m(t);let s=c();return v(s.filtroAnio,e)||(s.filtroAnio=e),p(e)}),g("change",function(){m(t);let e=c();return p(e.cargarEstadisticasBaseAjuste())}),b(12,_t,2,2,"option",17,F),a()(),n(14,"div")(15,"label",15),l(16,"Mes"),a(),n(17,"select",16),S("ngModelChange",function(e){m(t);let s=c();return v(s.filtroMes,e)||(s.filtroMes=e),p(e)}),g("change",function(){m(t);let e=c();return p(e.cargarEstadisticasBaseAjuste())}),b(18,ut,2,2,"option",17,D),a()(),n(20,"div")(21,"label",15),l(22,"Inquilino"),a(),n(23,"select",16),S("ngModelChange",function(e){m(t);let s=c();return v(s.baseAjusteInquilino,e)||(s.baseAjusteInquilino=e),p(e)}),g("change",function(){m(t);let e=c();return p(e.onBaseAjusteInquilinoChange())}),n(24,"option",17),l(25,"Todos"),a(),b(26,gt,2,2,"option",17,P),a()(),n(28,"div")(29,"label",15),l(30,"Cartera"),a(),n(31,"select",101),S("ngModelChange",function(e){m(t);let s=c();return v(s.baseAjusteCartera,e)||(s.baseAjusteCartera=e),p(e)}),g("change",function(){m(t);let e=c();return p(e.onBaseAjusteCarteraChange())}),n(32,"option",17),l(33,"Todas"),a(),b(34,bt,2,2,"option",17,P),a()(),n(36,"div")(37,"label",15),l(38,"Subcartera"),a(),n(39,"select",101),S("ngModelChange",function(e){m(t);let s=c();return v(s.baseAjusteSubcartera,e)||(s.baseAjusteSubcartera=e),p(e)}),g("change",function(){m(t);let e=c();return p(e.onBaseAjusteSubcarteraChange())}),n(40,"option",17),l(41,"Todas"),a(),b(42,xt,2,2,"option",17,P),a()(),n(44,"button",146),g("click",function(){m(t);let e=c();return p(e.agregarEnvioBaseAjuste())}),M(45,Ct,3,0,":svg:svg",105)(46,ht,2,0,":svg:svg",7),l(47," Agregar al Env\xEDo "),a(),n(48,"button",147),g("click",function(){m(t);let e=c();return p(e.exportarBaseAjusteExcel())}),f(),n(49,"svg",7),w(50,"path",123),a(),l(51," Exportar Excel "),a()(),M(52,St,22,5)(53,ft,7,0,"div",104),A(),n(54,"div",148)(55,"div",149),f(),n(56,"svg",150),w(57,"path",137),a(),A(),n(58,"div",151)(59,"p",152),l(60,"\xBFC\xF3mo funciona?"),a(),n(61,"ul",153)(62,"li"),l(63,'Al hacer clic en "Agregar al Env\xEDo", se buscan promesas con estado PAGADA del mes seleccionado'),a(),n(64,"li"),l(65,'Los nuevos registros se marcan con la fecha de hoy como "Fecha de Env\xEDo"'),a(),n(66,"li"),l(67,"Los registros ya agregados mantienen su fecha de env\xEDo original"),a(),n(68,"li"),l(69,"El Excel incluye: Asesor, Fecha Env\xEDo, DNI, Fecha Pago, Monto, Concepto, Capital, Deuda Total, Per\xEDodo, Tramo y Canal de Pago"),a()()()()()()}if(o&2){let t=c();r(11),h("ngModel",t.filtroAnio),r(),x(t.aniosDisponibles),r(5),h("ngModel",t.filtroMes),r(),x(t.mesesDisponibles),r(5),h("ngModel",t.baseAjusteInquilino),r(),u("value",0),r(2),x(t.inquilinos()),r(5),h("ngModel",t.baseAjusteCartera),u("disabled",!t.baseAjusteInquilino),r(),u("value",0),r(2),x(t.baseAjusteCarteras()),r(5),h("ngModel",t.baseAjusteSubcartera),u("disabled",!t.baseAjusteCartera),r(),u("value",0),r(2),x(t.baseAjusteSubcarteras()),r(2),u("disabled",t.isLoading()),r(),k(t.isLoading()?45:46),r(3),u("disabled",t.isLoading()||!t.estadisticasBaseAjuste()||t.estadisticasBaseAjuste().total_registros===0),r(4),k(t.estadisticasBaseAjuste()?52:53)}}function wt(o,d){if(o&1&&(n(0,"div",162)(1,"p"),l(2),a()()),o&2){let t=c();j(t.mensajeError()?"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-800":"bg-green-50 border-green-200 dark:bg-green-900/20 dark:border-green-800"),r(),j(t.mensajeError()?"text-red-700 dark:text-red-400":"text-green-700 dark:text-green-400"),r(),y(" ",t.mensaje()," ")}}var jt=(()=>{let d=class d{constructor(i){this.comisionesService=i,this.activeTab=E("metas"),this.isLoading=E(!1),this.mensaje=E(""),this.mensajeError=E(!1),this.estadisticasBaseAjuste=E(null),this.baseAjusteInquilino=0,this.baseAjusteCartera=0,this.baseAjusteSubcartera=0,this.baseAjusteCarteras=E([]),this.baseAjusteSubcarteras=E([]),this.inquilinos=E([]),this.carteras=E([]),this.subcarteras=E([]),this.selectedInquilino=0,this.selectedCartera=0,this.metas=E([]),this.mostrarFormMeta=E(!1),this.metaEditando=E(null),this.bonos=E([]),this.mostrarFormBono=E(!1),this.bonoEditando=E(null),this.camposDisponibles=E([]),this.valoresCampo=E([]),this.cargandoValores=E(!1),this.bonoSelectedInquilino=0,this.bonoSelectedCartera=0,this.bonoCarteras=E([]),this.bonoSubcarteras=E([]),this.bonoFiltroAnio=new Date().getFullYear(),this.bonoFiltroMes=new Date().getMonth()+1,this.mostrarModalCopiarBonos=E(!1),this.copiarBonosAnioOrigen=new Date().getFullYear(),this.copiarBonosMesOrigen=new Date().getMonth(),this.reporte=E(null),this.agenteExpandido=E(null),this.reporteInquilino=0,this.reporteCartera=0,this.reporteSubcartera=0,this.reporteCarteras=E([]),this.reporteSubcarteras=E([]),this.filtroAnio=new Date().getFullYear(),this.filtroMes=new Date().getMonth()+1,this.aniosDisponibles=[2024,2025,2026],this.tiposMetrica=[{value:"RECAUDO",label:"Recaudo (Pagos Validados)"},{value:"CAPITAL_LIBERADO",label:"Capital Liberado (PDP Pagadas)"}],this.mesesDisponibles=[{value:1,label:"Enero"},{value:2,label:"Febrero"},{value:3,label:"Marzo"},{value:4,label:"Abril"},{value:5,label:"Mayo"},{value:6,label:"Junio"},{value:7,label:"Julio"},{value:8,label:"Agosto"},{value:9,label:"Septiembre"},{value:10,label:"Octubre"},{value:11,label:"Noviembre"},{value:12,label:"Diciembre"}]}ngOnInit(){this.cargarInquilinos(),this.cargarMetas(),this.cargarCamposDisponibles()}cargarInquilinos(){this.comisionesService.obtenerInquilinos().subscribe({next:i=>this.inquilinos.set(i),error:i=>console.error("Error al cargar inquilinos:",i)})}onInquilinoChange(){this.carteras.set([]),this.subcarteras.set([]),this.selectedCartera=0,this.metaEditando()&&this.metaEditando.set(V(T({},this.metaEditando()),{idSubcartera:0,nombreSubcartera:""})),this.selectedInquilino&&this.comisionesService.obtenerCarteras(this.selectedInquilino).subscribe({next:i=>this.carteras.set(i),error:i=>console.error("Error al cargar carteras:",i)})}onCarteraChange(){this.subcarteras.set([]),this.metaEditando()&&this.metaEditando.set(V(T({},this.metaEditando()),{idSubcartera:0,nombreSubcartera:""})),this.selectedCartera&&this.comisionesService.obtenerSubcarteras(this.selectedCartera).subscribe({next:i=>this.subcarteras.set(i),error:i=>console.error("Error al cargar subcarteras:",i)})}onReporteInquilinoChange(){this.reporteCarteras.set([]),this.reporteSubcarteras.set([]),this.reporteCartera=0,this.reporteSubcartera=0,this.reporteInquilino&&this.comisionesService.obtenerCarteras(this.reporteInquilino).subscribe({next:i=>this.reporteCarteras.set(i),error:i=>console.error("Error al cargar carteras:",i)})}onReporteCarteraChange(){this.reporteSubcarteras.set([]),this.reporteSubcartera=0,this.reporteCartera&&this.comisionesService.obtenerSubcarteras(this.reporteCartera).subscribe({next:i=>this.reporteSubcarteras.set(i),error:i=>console.error("Error al cargar subcarteras:",i)})}cargarMetas(){this.comisionesService.obtenerMetas(this.filtroAnio,this.filtroMes).subscribe({next:i=>this.metas.set(i),error:i=>this.mostrarMensaje("Error al cargar metas: "+i.message,!0)})}nuevaMeta(){this.selectedInquilino=0,this.selectedCartera=0,this.carteras.set([]),this.subcarteras.set([]),this.metaEditando.set({idSubcartera:0,nombreSubcartera:"",anio:this.filtroAnio,mes:this.filtroMes,metaGrupal:0,tipoMetrica:"RECAUDO",escalas:[],activo:!0}),this.mostrarFormMeta.set(!0)}editarMeta(i){this.metaEditando.set(V(T({},i),{escalas:i.escalas?[...i.escalas]:[]})),this.mostrarFormMeta.set(!0),i.idSubcartera&&this.comisionesService.obtenerJerarquiaSubcartera(i.idSubcartera).subscribe({next:e=>{this.selectedInquilino=e.idInquilino,this.selectedCartera=e.idCartera,this.comisionesService.obtenerCarteras(e.idInquilino).subscribe({next:s=>{this.carteras.set(s),this.comisionesService.obtenerSubcarteras(e.idCartera).subscribe({next:_=>this.subcarteras.set(_),error:_=>console.error("Error al cargar subcarteras:",_)})},error:s=>console.error("Error al cargar carteras:",s)})},error:e=>console.error("Error al cargar jerarqu\xEDa:",e)})}onSubcarteraChange(){if(!this.metaEditando())return;let i=this.subcarteras().find(e=>e.id==this.metaEditando().idSubcartera);i&&this.metaEditando.set(V(T({},this.metaEditando()),{nombreSubcartera:i.nombreSubcartera}))}agregarEscalaMeta(){if(!this.metaEditando())return;let i=[...this.metaEditando().escalas,{porcentajeDesde:0,porcentajeHasta:void 0,montoComision:0}];this.metaEditando.set(V(T({},this.metaEditando()),{escalas:i}))}eliminarEscalaMeta(i){if(!this.metaEditando())return;let e=this.metaEditando().escalas.filter((s,_)=>_!==i);this.metaEditando.set(V(T({},this.metaEditando()),{escalas:e}))}guardarMeta(){if(!this.metaEditando())return;let i=V(T({},this.metaEditando()),{idSubcartera:Number(this.metaEditando().idSubcartera)});this.isLoading.set(!0),this.comisionesService.guardarMeta(i).subscribe({next:()=>{this.mostrarMensaje("Meta guardada correctamente",!1),this.cargarMetas(),this.cancelarMeta()},error:e=>this.mostrarMensaje("Error: "+e.error?.message||e.message,!0),complete:()=>this.isLoading.set(!1)})}eliminarMeta(i){confirm("\xBFEliminar esta meta?")&&this.comisionesService.eliminarMeta(i.id).subscribe({next:()=>{this.mostrarMensaje("Meta eliminada",!1),this.cargarMetas()},error:e=>this.mostrarMensaje("Error: "+e.message,!0)})}cancelarMeta(){this.metaEditando.set(null),this.mostrarFormMeta.set(!1),this.selectedInquilino=0,this.selectedCartera=0,this.carteras.set([]),this.subcarteras.set([])}cargarBonos(){this.comisionesService.obtenerBonos(this.bonoFiltroAnio,this.bonoFiltroMes).subscribe({next:i=>this.bonos.set(i),error:i=>this.mostrarMensaje("Error al cargar bonos: "+i.message,!0)})}abrirModalCopiarBonos(){let i=this.bonoFiltroMes===1?12:this.bonoFiltroMes-1,e=this.bonoFiltroMes===1?this.bonoFiltroAnio-1:this.bonoFiltroAnio;this.copiarBonosMesOrigen=i,this.copiarBonosAnioOrigen=e,this.mostrarModalCopiarBonos.set(!0)}cerrarModalCopiarBonos(){this.mostrarModalCopiarBonos.set(!1)}copiarBonos(){this.isLoading.set(!0),this.comisionesService.copiarBonos(this.copiarBonosAnioOrigen,this.copiarBonosMesOrigen,this.bonoFiltroAnio,this.bonoFiltroMes).subscribe({next:i=>{this.mostrarMensaje(`Se copiaron ${i.cantidadCopiada} bonos correctamente`,!1),this.cerrarModalCopiarBonos(),this.cargarBonos()},error:i=>{let e=i.error?.error||i.message||"Error desconocido";this.mostrarMensaje("Error: "+e,!0)},complete:()=>this.isLoading.set(!1)})}cargarCamposDisponibles(){this.comisionesService.obtenerCamposDisponibles().subscribe({next:i=>this.camposDisponibles.set(i),error:()=>{}})}nuevoBono(){this.bonoSelectedInquilino=0,this.bonoSelectedCartera=0,this.bonoCarteras.set([]),this.bonoSubcarteras.set([]),this.valoresCampo.set([]),this.bonoEditando.set({nombre:"",descripcion:"",campoEvaluar:"",valorBuscar:"",idSubcartera:void 0,nombreSubcartera:void 0,anio:this.bonoFiltroAnio,mes:this.bonoFiltroMes,activo:!0,escalas:[]}),this.mostrarFormBono.set(!0)}editarBono(i){this.bonoEditando.set(V(T({},i),{escalas:i.escalas?[...i.escalas]:[]})),this.mostrarFormBono.set(!0),i.campoEvaluar?(this.cargandoValores.set(!0),this.comisionesService.obtenerValoresCampo(i.campoEvaluar).subscribe({next:e=>{this.valoresCampo.set(e),this.cargandoValores.set(!1)},error:e=>{console.error("Error al cargar valores del campo:",e),this.cargandoValores.set(!1)}})):this.valoresCampo.set([]),i.idSubcartera?this.comisionesService.obtenerJerarquiaSubcartera(i.idSubcartera).subscribe({next:e=>{this.bonoSelectedInquilino=e.idInquilino,this.bonoSelectedCartera=e.idCartera,this.comisionesService.obtenerCarteras(e.idInquilino).subscribe({next:s=>{this.bonoCarteras.set(s),this.comisionesService.obtenerSubcarteras(e.idCartera).subscribe({next:_=>this.bonoSubcarteras.set(_),error:_=>console.error("Error al cargar subcarteras:",_)})},error:s=>console.error("Error al cargar carteras:",s)})},error:e=>console.error("Error al cargar jerarqu\xEDa:",e)}):(this.bonoSelectedInquilino=0,this.bonoSelectedCartera=0,this.bonoCarteras.set([]),this.bonoSubcarteras.set([]))}agregarEscala(){if(!this.bonoEditando())return;let i=[...this.bonoEditando().escalas,{cantidadMinima:0,monto:0}];this.bonoEditando.set(V(T({},this.bonoEditando()),{escalas:i}))}eliminarEscala(i){if(!this.bonoEditando())return;let e=this.bonoEditando().escalas.filter((s,_)=>_!==i);this.bonoEditando.set(V(T({},this.bonoEditando()),{escalas:e}))}guardarBono(){if(!this.bonoEditando())return;let i=V(T({},this.bonoEditando()),{idSubcartera:this.bonoEditando().idSubcartera?Number(this.bonoEditando().idSubcartera):void 0,nombreSubcartera:this.bonoEditando().idSubcartera?this.bonoEditando().nombreSubcartera:void 0});this.isLoading.set(!0),this.comisionesService.guardarBono(i).subscribe({next:()=>{this.mostrarMensaje("Bono guardado correctamente",!1),this.cargarBonos(),this.cancelarBono()},error:e=>this.mostrarMensaje("Error: "+e.error?.message||e.message,!0),complete:()=>this.isLoading.set(!1)})}eliminarBono(i){confirm("\xBFEliminar este bono?")&&this.comisionesService.eliminarBono(i.id).subscribe({next:()=>{this.mostrarMensaje("Bono eliminado",!1),this.cargarBonos()},error:e=>this.mostrarMensaje("Error: "+e.message,!0)})}cancelarBono(){this.bonoEditando.set(null),this.mostrarFormBono.set(!1),this.bonoSelectedInquilino=0,this.bonoSelectedCartera=0,this.bonoCarteras.set([]),this.bonoSubcarteras.set([]),this.valoresCampo.set([])}onBonoInquilinoChange(){this.bonoCarteras.set([]),this.bonoSubcarteras.set([]),this.bonoSelectedCartera=0,this.bonoEditando()&&this.bonoEditando.set(V(T({},this.bonoEditando()),{idSubcartera:void 0,nombreSubcartera:void 0})),this.bonoSelectedInquilino&&this.comisionesService.obtenerCarteras(this.bonoSelectedInquilino).subscribe({next:i=>this.bonoCarteras.set(i),error:i=>console.error("Error al cargar carteras:",i)})}onBonoCarteraChange(){this.bonoSubcarteras.set([]),this.bonoEditando()&&this.bonoEditando.set(V(T({},this.bonoEditando()),{idSubcartera:void 0,nombreSubcartera:void 0})),this.bonoSelectedCartera&&this.comisionesService.obtenerSubcarteras(this.bonoSelectedCartera).subscribe({next:i=>this.bonoSubcarteras.set(i),error:i=>console.error("Error al cargar subcarteras:",i)})}onBonoSubcarteraChange(){if(!this.bonoEditando())return;let i=this.bonoSubcarteras().find(e=>e.id==this.bonoEditando().idSubcartera);i?this.bonoEditando.set(V(T({},this.bonoEditando()),{nombreSubcartera:i.nombreSubcartera})):this.bonoEditando.set(V(T({},this.bonoEditando()),{idSubcartera:void 0,nombreSubcartera:void 0}))}onCampoEvaluarChange(){if(!this.bonoEditando())return;let i=this.bonoEditando().campoEvaluar;this.bonoEditando.set(V(T({},this.bonoEditando()),{valorBuscar:""})),this.valoresCampo.set([]),i&&(this.cargandoValores.set(!0),this.comisionesService.obtenerValoresCampo(i).subscribe({next:e=>{this.valoresCampo.set(e),this.cargandoValores.set(!1)},error:e=>{console.error("Error al cargar valores del campo:",e),this.cargandoValores.set(!1)}}))}calcularComisiones(){this.isLoading.set(!0),this.reporte.set(null);let i=this.reporteSubcartera||void 0;this.comisionesService.calcularComisiones(this.filtroAnio,this.filtroMes,i).subscribe({next:e=>{this.reporte.set(e),e.agentes.length===0&&this.mostrarMensaje("No hay datos para el per\xEDodo seleccionado",!1)},error:e=>this.mostrarMensaje("Error al calcular: "+e.message,!0),complete:()=>this.isLoading.set(!1)})}toggleDetalleBonos(i){this.agenteExpandido()===i.idAgente?this.agenteExpandido.set(null):this.agenteExpandido.set(i.idAgente)}formatMonto(i){return i==null?"0.00":i.toLocaleString("es-PE",{minimumFractionDigits:2,maximumFractionDigits:2})}mostrarMensaje(i,e){this.mensaje.set(i),this.mensajeError.set(e),setTimeout(()=>this.mensaje.set(""),4e3)}exportarExcel(){if(!this.reporte())return;this.isLoading.set(!0);let i=this.reporteSubcartera||void 0;this.comisionesService.exportarExcel(this.filtroAnio,this.filtroMes,i).subscribe({next:e=>{let s=window.URL.createObjectURL(e),_=document.createElement("a");_.href=s,_.download=`Comisiones_${this.filtroAnio}_${this.filtroMes}.xlsx`,_.click(),window.URL.revokeObjectURL(s),this.mostrarMensaje("Excel exportado correctamente",!1)},error:e=>{console.error("Error al exportar Excel:",e),this.mostrarMensaje("Error al exportar Excel",!0)},complete:()=>this.isLoading.set(!1)})}exportarPdf(){if(!this.reporte())return;this.isLoading.set(!0);let i=this.reporteSubcartera||void 0;this.comisionesService.exportarPdf(this.filtroAnio,this.filtroMes,i).subscribe({next:e=>{let s=window.URL.createObjectURL(e),_=document.createElement("a");_.href=s,_.download=`Comisiones_${this.filtroAnio}_${this.filtroMes}.pdf`,_.click(),window.URL.revokeObjectURL(s),this.mostrarMensaje("PDF exportado correctamente",!1)},error:e=>{console.error("Error al exportar PDF:",e),this.mostrarMensaje("Error al exportar PDF",!0)},complete:()=>this.isLoading.set(!1)})}onBaseAjusteInquilinoChange(){this.baseAjusteCarteras.set([]),this.baseAjusteSubcarteras.set([]),this.baseAjusteCartera=0,this.baseAjusteSubcartera=0,this.baseAjusteInquilino&&this.comisionesService.obtenerCarteras(this.baseAjusteInquilino).subscribe({next:i=>this.baseAjusteCarteras.set(i),error:i=>console.error("Error al cargar carteras:",i)}),this.cargarEstadisticasBaseAjuste()}onBaseAjusteCarteraChange(){this.baseAjusteSubcarteras.set([]),this.baseAjusteSubcartera=0,this.baseAjusteCartera&&this.comisionesService.obtenerSubcarteras(this.baseAjusteCartera).subscribe({next:i=>this.baseAjusteSubcarteras.set(i),error:i=>console.error("Error al cargar subcarteras:",i)}),this.cargarEstadisticasBaseAjuste()}onBaseAjusteSubcarteraChange(){this.cargarEstadisticasBaseAjuste()}cargarEstadisticasBaseAjuste(){let i=this.baseAjusteSubcartera||void 0;this.comisionesService.obtenerEstadisticasBaseAjuste(this.filtroAnio,this.filtroMes,i).subscribe({next:e=>{this.estadisticasBaseAjuste.set(e)},error:e=>{console.error("Error al cargar estad\xEDsticas:",e),this.estadisticasBaseAjuste.set(null)}})}agregarEnvioBaseAjuste(){this.isLoading.set(!0);let i=this.baseAjusteSubcartera||void 0;this.comisionesService.agregarEnvioBaseAjuste(this.filtroAnio,this.filtroMes,i).subscribe({next:e=>{this.mostrarMensaje(e.mensaje,!1),this.cargarEstadisticasBaseAjuste()},error:e=>{console.error("Error al agregar env\xEDo:",e),this.mostrarMensaje("Error al agregar env\xEDo: "+(e.error?.error||e.message),!0)},complete:()=>this.isLoading.set(!1)})}exportarBaseAjusteExcel(){this.isLoading.set(!0);let i=this.baseAjusteSubcartera||void 0;this.comisionesService.exportarBaseAjusteExcel(this.filtroAnio,this.filtroMes,i).subscribe({next:e=>{let s=window.URL.createObjectURL(e),_=document.createElement("a");_.href=s,_.download=`Base_Ajuste_${this.filtroAnio}_${String(this.filtroMes).padStart(2,"0")}.xlsx`,_.click(),window.URL.revokeObjectURL(s),this.mostrarMensaje("Excel exportado correctamente",!1)},error:e=>{console.error("Error al exportar Excel:",e),this.mostrarMensaje("Error al exportar Excel",!0)},complete:()=>this.isLoading.set(!1)})}};d.\u0275fac=function(e){return new(e||d)(O(oe))},d.\u0275cmp=U({type:d,selectors:[["app-comisiones"]],decls:30,vars:13,consts:[[1,"min-h-screen","bg-slate-50","dark:bg-slate-900","p-6"],[1,"mb-6"],[1,"text-2xl","font-bold","text-slate-800","dark:text-white"],[1,"text-slate-600","dark:text-slate-400"],[1,"border-b","border-slate-200","dark:border-slate-700"],[1,"-mb-px","flex","space-x-8"],[1,"whitespace-nowrap","py-4","px-1","border-b-2","font-medium","text-sm","transition-colors","flex","items-center","gap-2",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"bg-white","dark:bg-slate-800","rounded-xl","shadow-sm","border","border-slate-200","dark:border-slate-700","p-6","mb-6"],[1,"fixed","bottom-4","right-4","p-4","border","rounded-lg","shadow-lg","max-w-md",3,"class"],[1,"flex","flex-wrap","gap-4","items-end","mb-6"],[1,"block","text-sm","font-medium","text-slate-700","dark:text-slate-300","mb-1"],[1,"px-3","py-2","border","border-slate-300","dark:border-slate-600","rounded-lg","bg-white","dark:bg-slate-700","text-slate-800","dark:text-white",3,"ngModelChange","change","ngModel"],[3,"value"],[1,"px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-colors","flex","items-center","gap-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"mb-6","p-4","border","border-blue-200","dark:border-blue-800","bg-blue-50","dark:bg-blue-900/20","rounded-lg"],[1,"overflow-x-auto"],[1,"text-center","py-8","text-slate-500","dark:text-slate-400"],[1,"text-lg","font-semibold","text-slate-800","dark:text-white","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-4","mb-4"],[1,"w-full","px-3","py-2","border","border-slate-300","dark:border-slate-600","rounded-lg","bg-white","dark:bg-slate-700","text-slate-800","dark:text-white",3,"ngModelChange","change","ngModel"],[1,"w-full","px-3","py-2","border","border-slate-300","dark:border-slate-600","rounded-lg","bg-white","dark:bg-slate-700","text-slate-800","dark:text-white","disabled:opacity-50",3,"ngModelChange","change","ngModel","disabled"],["type","number","placeholder","0.00",1,"w-full","px-3","py-2","border","border-slate-300","dark:border-slate-600","rounded-lg","bg-white","dark:bg-slate-700","text-slate-800","dark:text-white",3,"ngModelChange","ngModel"],[1,"w-full","px-3","py-2","border","border-slate-300","dark:border-slate-600","rounded-lg","bg-white","dark:bg-slate-700","text-slate-800","dark:text-white",3,"ngModelChange","ngModel"],[1,"mb-4"],[1,"flex","justify-between","items-center","mb-2"],[1,"block","text-sm","font-medium","text-slate-700","dark:text-slate-300"],[1,"text-sm","text-blue-600","hover:text-blue-800","dark:text-blue-400","flex","items-center","gap-1",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],[1,"space-y-2"],[1,"flex","gap-2","items-center","flex-wrap"],[1,"text-sm","text-slate-400","italic"],[1,"flex","gap-2"],[1,"px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","disabled:bg-slate-400","transition-colors",3,"click","disabled"],[1,"px-4","py-2","bg-slate-200","dark:bg-slate-700","text-slate-700","dark:text-slate-300","rounded-lg","hover:bg-slate-300","dark:hover:bg-slate-600","transition-colors",3,"click"],[1,"text-slate-500","text-sm"],["type","number","placeholder","0",1,"w-20","px-2","py-1.5","border","border-slate-300","dark:border-slate-600","rounded","bg-white","dark:bg-slate-700","text-slate-800","dark:text-white","text-sm",3,"ngModelChange","ngModel"],["type","number","placeholder","100",1,"w-20","px-2","py-1.5","border","border-slate-300","dark:border-slate-600","rounded","bg-white","dark:bg-slate-700","text-slate-800","dark:text-white","text-sm",3,"ngModelChange","ngModel"],["type","number","step","0.01","placeholder","0.00",1,"w-24","px-2","py-1.5","border","border-slate-300","dark:border-slate-600","rounded","bg-white","dark:bg-slate-700","text-slate-800","dark:text-white","text-sm",3,"ngModelChange","ngModel"],[1,"text-red-500","hover:text-red-700","p-1",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"min-w-full","divide-y","divide-slate-200","dark:divide-slate-700"],[1,"bg-slate-50","dark:bg-slate-700/50"],[1,"px-4","py-3","text-left","text-xs","font-medium","text-slate-500","uppercase"],[1,"px-4","py-3","text-right","text-xs","font-medium","text-slate-500","uppercase"],[1,"px-4","py-3","text-center","text-xs","font-medium","text-slate-500","uppercase"],[1,"divide-y","divide-slate-200","dark:divide-slate-700"],[1,"hover:bg-slate-50","dark:hover:bg-slate-700/50"],[1,"px-4","py-3","text-sm","text-slate-800","dark:text-white","font-medium"],[1,"px-4","py-3","text-sm","text-right","text-green-600","font-semibold"],[1,"px-4","py-3","text-sm","text-center"],[1,"px-4","py-3","text-sm"],[1,"flex","flex-wrap","gap-1"],[1,"px-2","py-0.5","bg-blue-100","dark:bg-blue-900/30","rounded","text-xs","text-blue-700","dark:text-blue-300"],[1,"text-slate-400","italic","text-xs"],[1,"px-4","py-3","text-center"],[1,"px-2","py-1","rounded-full","text-xs","font-medium"],[1,"text-blue-600","hover:text-blue-800","dark:text-blue-400","dark:hover:text-blue-300","mr-2",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","inline"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"text-red-600","hover:text-red-800","dark:text-red-400","dark:hover:text-red-300",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"px-4","py-2","bg-green-600","text-white","rounded-lg","hover:bg-green-700","transition-colors","flex","items-center","gap-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"],[1,"fixed","inset-0","bg-black/50","flex","items-center","justify-center","z-50"],[1,"mb-6","p-4","border","border-green-200","dark:border-green-800","bg-green-50","dark:bg-green-900/20","rounded-lg"],[1,"space-y-4"],[1,"bg-white","dark:bg-slate-800","rounded-xl","p-6","max-w-md","w-full","mx-4","shadow-xl"],[1,"text-sm","text-slate-600","dark:text-slate-400","mb-4"],[1,"grid","grid-cols-2","gap-4","mb-4"],[1,"flex","justify-end","gap-2"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4","mb-4"],["type","text","placeholder","Ej: Bono LTD T5",1,"w-full","px-3","py-2","border","border-slate-300","dark:border-slate-600","rounded-lg","bg-white","dark:bg-slate-700","text-slate-800","dark:text-white",3,"ngModelChange","ngModel"],["type","text","placeholder","Descripci\xF3n opcional",1,"w-full","px-3","py-2","border","border-slate-300","dark:border-slate-600","rounded-lg","bg-white","dark:bg-slate-700","text-slate-800","dark:text-white",3,"ngModelChange","ngModel"],["value",""],[1,"w-full","px-3","py-2","border","border-slate-300","dark:border-slate-600","rounded-lg","bg-white","dark:bg-slate-700","text-slate-800","dark:text-white","disabled:opacity-50",3,"ngModelChange","ngModel","disabled"],[1,"text-sm","text-green-600","hover:text-green-800","dark:text-green-400","flex","items-center","gap-1",3,"click"],[1,"flex","gap-2","items-center"],[1,"px-4","py-2","bg-green-600","text-white","rounded-lg","hover:bg-green-700","disabled:bg-slate-400","transition-colors",3,"click","disabled"],["type","number","placeholder","Cantidad",1,"w-32","px-3","py-2","border","border-slate-300","dark:border-slate-600","rounded-lg","bg-white","dark:bg-slate-700","text-slate-800","dark:text-white",3,"ngModelChange","ngModel"],[1,"text-slate-500"],["type","number","step","0.01","placeholder","Monto",1,"w-32","px-3","py-2","border","border-slate-300","dark:border-slate-600","rounded-lg","bg-white","dark:bg-slate-700","text-slate-800","dark:text-white",3,"ngModelChange","ngModel"],[1,"text-red-500","hover:text-red-700",3,"click"],[1,"border","border-slate-200","dark:border-slate-700","rounded-lg","p-4"],[1,"flex","justify-between","items-start"],[1,"flex","items-center","gap-2"],[1,"font-semibold","text-slate-800","dark:text-white"],[1,"px-2","py-0.5","bg-purple-100","text-purple-700","dark:bg-purple-900/30","dark:text-purple-300","rounded","text-xs"],[1,"px-2","py-0.5","bg-slate-100","text-slate-600","dark:bg-slate-700","dark:text-slate-400","rounded","text-xs"],[1,"text-sm","text-slate-600","dark:text-slate-400"],[1,"text-sm","text-slate-500","dark:text-slate-500","mt-1"],[1,"text-blue-600","hover:text-blue-800","dark:text-blue-400",3,"click"],[1,"text-red-600","hover:text-red-800","dark:text-red-400",3,"click"],[1,"mt-3","flex","flex-wrap","gap-2"],[1,"px-2","py-1","bg-slate-100","dark:bg-slate-700","rounded","text-sm","text-slate-700","dark:text-slate-300"],[1,"px-3","py-2","border","border-slate-300","dark:border-slate-600","rounded-lg","bg-white","dark:bg-slate-700","text-slate-800","dark:text-white",3,"ngModelChange","ngModel"],[1,"px-3","py-2","border","border-slate-300","dark:border-slate-600","rounded-lg","bg-white","dark:bg-slate-700","text-slate-800","dark:text-white","disabled:opacity-50",3,"ngModelChange","change","ngModel","disabled"],[1,"px-3","py-2","border","border-slate-300","dark:border-slate-600","rounded-lg","bg-white","dark:bg-slate-700","text-slate-800","dark:text-white","disabled:opacity-50",3,"ngModelChange","ngModel","disabled"],[1,"px-6","py-2","bg-purple-600","text-white","rounded-lg","hover:bg-purple-700","disabled:bg-slate-400","transition-colors","flex","items-center","gap-2",3,"click","disabled"],[1,"text-center","py-12","text-slate-500","dark:text-slate-400"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-4","mb-6"],[1,"bg-blue-50","dark:bg-blue-900/20","rounded-lg","p-4"],[1,"text-sm","text-blue-600","dark:text-blue-400","font-medium"],[1,"text-2xl","font-bold","text-blue-800","dark:text-blue-300"],[1,"bg-green-50","dark:bg-green-900/20","rounded-lg","p-4"],[1,"text-sm","text-green-600","dark:text-green-400","font-medium"],[1,"text-2xl","font-bold","text-green-800","dark:text-green-300"],[1,"bg-amber-50","dark:bg-amber-900/20","rounded-lg","p-4"],[1,"text-sm","text-amber-600","dark:text-amber-400","font-medium"],[1,"text-2xl","font-bold","text-amber-800","dark:text-amber-300"],[1,"bg-purple-50","dark:bg-purple-900/20","rounded-lg","p-4"],[1,"text-sm","text-purple-600","dark:text-purple-400","font-medium"],[1,"text-2xl","font-bold","text-purple-800","dark:text-purple-300"],[1,"flex","gap-2","mb-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"px-4","py-2","bg-red-600","text-white","rounded-lg","hover:bg-red-700","transition-colors","flex","items-center","gap-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"],[1,"px-4","py-3","text-sm","font-medium","text-slate-800","dark:text-white"],[1,"px-4","py-3","text-sm","text-slate-600","dark:text-slate-400"],[1,"px-4","py-3","text-sm","text-right","text-slate-600","dark:text-slate-400"],[1,"px-4","py-3","text-sm","text-right"],[1,"px-4","py-3","text-sm","text-right","text-blue-600"],[1,"px-4","py-3","text-sm","text-right","text-amber-600"],[1,"ml-1","text-slate-400","hover:text-slate-600"],[1,"px-4","py-3","text-sm","text-right","font-bold","text-purple-600"],[1,"bg-amber-50","dark:bg-amber-900/10"],[1,"ml-1","text-slate-400","hover:text-slate-600",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","inline"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],["colspan","8",1,"px-4","py-2"],[1,"text-sm"],[1,"font-medium","text-amber-700","dark:text-amber-400"],[1,"ml-2","px-2","py-1","bg-amber-100","dark:bg-amber-900/30","rounded","text-amber-800","dark:text-amber-300"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12","mx-auto","mb-4","text-slate-300","dark:text-slate-600"],[1,"flex","justify-between","items-start","mb-6"],[1,"text-lg","font-semibold","text-slate-800","dark:text-white"],[1,"text-sm","text-slate-500","dark:text-slate-400","mt-1"],[1,"px-4","py-2","bg-orange-600","text-white","rounded-lg","hover:bg-orange-700","disabled:bg-slate-400","transition-colors","flex","items-center","gap-2",3,"click","disabled"],[1,"px-4","py-2","bg-green-600","text-white","rounded-lg","hover:bg-green-700","disabled:bg-slate-400","transition-colors","flex","items-center","gap-2",3,"click","disabled"],[1,"mt-6","p-4","bg-amber-50","dark:bg-amber-900/20","border","border-amber-200","dark:border-amber-800","rounded-lg"],[1,"flex","gap-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-amber-600","dark:text-amber-400","flex-shrink-0","mt-0.5"],[1,"text-sm","text-amber-700","dark:text-amber-300"],[1,"font-medium","mb-1"],[1,"list-disc","list-inside","space-y-1","text-amber-600","dark:text-amber-400"],[1,"bg-orange-50","dark:bg-orange-900/20","rounded-lg","p-4"],[1,"text-sm","text-orange-600","dark:text-orange-400","font-medium"],[1,"text-2xl","font-bold","text-orange-800","dark:text-orange-300"],[1,"bg-slate-50","dark:bg-slate-700/30","rounded-lg","p-4","mb-4"],[1,"flex","flex-wrap","gap-6"],[1,"text-sm","text-slate-500","dark:text-slate-400"],[1,"ml-2","font-medium","text-slate-700","dark:text-slate-300"],[1,"text-sm","mt-2"],[1,"fixed","bottom-4","right-4","p-4","border","rounded-lg","shadow-lg","max-w-md"]],template:function(e,s){e&1&&(n(0,"div",0)(1,"div",1)(2,"h1",2),l(3," Comisiones "),a(),n(4,"p",3),l(5," Configuraci\xF3n de metas, bonos y c\xE1lculo de comisiones por agente "),a()(),n(6,"div",1)(7,"div",4)(8,"nav",5)(9,"button",6),g("click",function(){return s.activeTab.set("metas")}),f(),n(10,"svg",7),w(11,"path",8),a(),l(12," Metas "),a(),A(),n(13,"button",6),g("click",function(){return s.activeTab.set("bonos"),s.cargarBonos()}),f(),n(14,"svg",7),w(15,"path",9),a(),l(16," Bonos "),a(),A(),n(17,"button",6),g("click",function(){return s.activeTab.set("reporte")}),f(),n(18,"svg",7),w(19,"path",10),a(),l(20," Reporte "),a(),A(),n(21,"button",6),g("click",function(){return s.activeTab.set("baseAjuste"),s.cargarEstadisticasBaseAjuste()}),f(),n(22,"svg",7),w(23,"path",11),a(),l(24," Base de Ajuste "),a()()()(),M(25,ke,21,4,"div",12),M(26,Ke,26,5,"div",12),M(27,pt,43,13,"div",12),M(28,Et,70,14,"div",12),M(29,wt,3,5,"div",13),a()),e&2&&(r(9),j(s.activeTab()==="metas"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300 hover:border-slate-300"),r(4),j(s.activeTab()==="bonos"?"border-green-500 text-green-600 dark:text-green-400":"border-transparent text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300 hover:border-slate-300"),r(4),j(s.activeTab()==="reporte"?"border-purple-500 text-purple-600 dark:text-purple-400":"border-transparent text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300 hover:border-slate-300"),r(4),j(s.activeTab()==="baseAjuste"?"border-orange-500 text-orange-600 dark:text-orange-400":"border-transparent text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300 hover:border-slate-300"),r(4),k(s.activeTab()==="metas"?25:-1),r(),k(s.activeTab()==="bonos"?26:-1),r(),k(s.activeTab()==="reporte"?27:-1),r(),k(s.activeTab()==="baseAjuste"?28:-1),r(),k(s.mensaje()?29:-1))},dependencies:[J,ae,ie,ne,Q,ee,te,X,Z,z],encapsulation:2});let o=d;return o})();export{jt as ComisionesPage};
