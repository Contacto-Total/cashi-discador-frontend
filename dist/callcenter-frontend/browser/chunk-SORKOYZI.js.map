{
  "version": 3,
  "sources": ["src/app/maintenance/components/portfolio-maintenance/portfolio-maintenance.component.ts"],
  "sourcesContent": ["import { Component, OnInit, signal, ViewEncapsulation } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { LucideAngularModule } from 'lucide-angular';\r\nimport { PortfolioService } from '../../services/portfolio.service';\r\nimport { TypificationService } from '../../services/typification.service';\r\nimport { Portfolio, CreatePortfolioRequest, UpdatePortfolioRequest } from '../../models/portfolio.model';\r\nimport { Tenant } from '../../models/tenant.model';\r\n\r\n@Component({\r\n  selector: 'app-portfolio-maintenance',\r\n  standalone: true,\r\n  imports: [CommonModule, FormsModule, LucideAngularModule],\r\n  encapsulation: ViewEncapsulation.None,\r\n  template: `\r\n    <div class=\"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-6\">\r\n      <!-- Header -->\r\n      <div class=\"max-w-7xl mx-auto mb-6\">\r\n        <div class=\"flex items-center justify-between\">\r\n          <div>\r\n            <div class=\"flex items-center gap-2 mb-2\">\r\n              <div class=\"w-8 h-8 bg-teal-600 rounded-lg flex items-center justify-center\">\r\n                <lucide-angular name=\"briefcase\" [size]=\"16\" class=\"text-white\"></lucide-angular>\r\n              </div>\r\n              <div>\r\n                <h1 class=\"text-lg font-bold text-white\">Carteras</h1>\r\n                <p class=\"text-xs text-gray-400\">Administración de carteras de cobranza</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <button (click)=\"openCreateDialog()\"\r\n                  [disabled]=\"selectedTenantId === 0\"\r\n                  class=\"flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-lg font-semibold hover:shadow-lg transition-all hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 cursor-pointer\">\r\n            <lucide-angular name=\"plus\" [size]=\"18\"></lucide-angular>\r\n            <span>Nueva Cartera</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Tenant Selector -->\r\n      <div class=\"max-w-7xl mx-auto mb-6\">\r\n        <div class=\"bg-slate-900 rounded-xl p-4 shadow-sm border border-slate-800\">\r\n          <label class=\"block text-sm font-semibold text-gray-300 mb-2\">\r\n            Seleccionar Proveedor\r\n          </label>\r\n          <select [(ngModel)]=\"selectedTenantId\"\r\n                  (ngModelChange)=\"onTenantChange()\"\r\n                  class=\"w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500\">\r\n            <option [value]=\"0\">Seleccione un proveedor...</option>\r\n            @for (tenant of tenants(); track tenant.id) {\r\n              <option [value]=\"tenant.id\">{{ tenant.tenantName }} ({{ tenant.tenantCode }})</option>\r\n            }\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Stats Cards -->\r\n      @if (selectedTenantId > 0) {\r\n        <div class=\"max-w-7xl mx-auto mb-6 grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n          <div class=\"bg-slate-900 rounded-xl p-5 shadow-sm border border-slate-800\">\r\n            <div class=\"flex items-center justify-between\">\r\n              <div>\r\n                <p class=\"text-sm text-gray-400 mb-1\">Total Carteras</p>\r\n                <p class=\"text-3xl font-bold text-white\">{{ portfolios().length }}</p>\r\n              </div>\r\n              <div class=\"w-12 h-12 bg-purple-900/30 rounded-lg flex items-center justify-center\">\r\n                <lucide-angular name=\"folder\" [size]=\"24\" class=\"text-purple-400\"></lucide-angular>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"bg-slate-900 rounded-xl p-5 shadow-sm border border-slate-800\">\r\n            <div class=\"flex items-center justify-between\">\r\n              <div>\r\n                <p class=\"text-sm text-gray-400 mb-1\">Activas</p>\r\n                <p class=\"text-3xl font-bold text-green-400\">{{ getActivePortfolios() }}</p>\r\n              </div>\r\n              <div class=\"w-12 h-12 bg-green-900/30 rounded-lg flex items-center justify-center\">\r\n                <lucide-angular name=\"check-circle\" [size]=\"24\" class=\"text-green-400\"></lucide-angular>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"bg-slate-900 rounded-xl p-5 shadow-sm border border-slate-800\">\r\n            <div class=\"flex items-center justify-between\">\r\n              <div>\r\n                <p class=\"text-sm text-gray-400 mb-1\">Inactivas</p>\r\n                <p class=\"text-3xl font-bold text-red-400\">{{ getInactivePortfolios() }}</p>\r\n              </div>\r\n              <div class=\"w-12 h-12 bg-red-900/30 rounded-lg flex items-center justify-center\">\r\n                <lucide-angular name=\"x-circle\" [size]=\"24\" class=\"text-red-400\"></lucide-angular>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Search Bar -->\r\n        <div class=\"max-w-7xl mx-auto mb-6\">\r\n          <div class=\"bg-slate-900 rounded-xl p-4 shadow-sm border border-slate-800\">\r\n            <div class=\"relative\">\r\n              <lucide-angular name=\"search\" [size]=\"18\" class=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\"></lucide-angular>\r\n              <input type=\"text\"\r\n                     [(ngModel)]=\"searchTerm\"\r\n                     placeholder=\"Buscar carteras por código, nombre o tipo...\"\r\n                     class=\"w-full pl-12 pr-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500\">\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Portfolios Table -->\r\n        <div class=\"max-w-7xl mx-auto\">\r\n          <div class=\"bg-slate-900 rounded-xl shadow-sm border border-slate-800 overflow-hidden\">\r\n            <div class=\"overflow-x-auto\">\r\n              <table class=\"min-w-full divide-y divide-slate-800\">\r\n                <thead class=\"bg-slate-800\">\r\n                  <tr>\r\n                    <th class=\"px-6 py-4 text-left text-xs font-semibold text-gray-300 uppercase tracking-wider\">\r\n                      Código\r\n                    </th>\r\n                    <th class=\"px-6 py-4 text-left text-xs font-semibold text-gray-300 uppercase tracking-wider\">\r\n                      Nombre\r\n                    </th>\r\n                    <th class=\"px-6 py-4 text-left text-xs font-semibold text-gray-300 uppercase tracking-wider\">\r\n                      Descripción\r\n                    </th>\r\n                    <th class=\"px-6 py-4 text-left text-xs font-semibold text-gray-300 uppercase tracking-wider\">\r\n                      Estado\r\n                    </th>\r\n                    <th class=\"px-6 py-4 text-left text-xs font-semibold text-gray-300 uppercase tracking-wider\">\r\n                      Acciones\r\n                    </th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody class=\"divide-y divide-slate-800\">\r\n                  @for (portfolio of filteredPortfolios(); track portfolio.id) {\r\n                    <tr class=\"hover:bg-slate-800/50 transition-colors\">\r\n                      <td class=\"px-6 py-4 whitespace-nowrap\">\r\n                        <div class=\"flex items-center gap-2\">\r\n                          <lucide-angular name=\"folder\" [size]=\"16\" class=\"text-purple-400\"></lucide-angular>\r\n                          <span class=\"text-sm font-medium text-white\">{{ portfolio.portfolioCode }}</span>\r\n                        </div>\r\n                      </td>\r\n                      <td class=\"px-6 py-4\">\r\n                        <div class=\"text-sm text-white font-medium\">{{ portfolio.portfolioName }}</div>\r\n                      </td>\r\n                      <td class=\"px-6 py-4\">\r\n                        <div class=\"text-sm text-gray-400 max-w-xs truncate\">\r\n                          {{ portfolio.description || 'Sin descripción' }}\r\n                        </div>\r\n                      </td>\r\n                      <td class=\"px-6 py-4 whitespace-nowrap\">\r\n                        <label class=\"relative inline-flex items-center cursor-pointer\">\r\n                          <input type=\"checkbox\"\r\n                                 [checked]=\"portfolio.isActive\"\r\n                                 (change)=\"togglePortfolioStatus(portfolio)\"\r\n                                 class=\"sr-only peer\">\r\n                          <div class=\"w-11 h-6 bg-slate-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600\"></div>\r\n                        </label>\r\n                      </td>\r\n                      <td class=\"px-6 py-4 whitespace-nowrap text-sm\">\r\n                        <div class=\"flex items-center gap-3\">\r\n                          <button (click)=\"openEditDialog(portfolio)\"\r\n                                  class=\"text-blue-400 hover:text-blue-500 transition-colors cursor-pointer\">\r\n                            <lucide-angular name=\"edit\" [size]=\"18\"></lucide-angular>\r\n                          </button>\r\n                          <button (click)=\"deletePortfolio(portfolio)\"\r\n                                  [disabled]=\"portfolio.hasSubPortfolios\"\r\n                                  [class]=\"portfolio.hasSubPortfolios ? 'text-gray-600 cursor-not-allowed' : 'text-red-400 hover:text-red-500 cursor-pointer'\"\r\n                                  class=\"transition-colors disabled:opacity-50\"\r\n                                  [title]=\"portfolio.hasSubPortfolios ? 'No se puede eliminar: tiene subcarteras asociadas' : 'Eliminar'\">\r\n                            <lucide-angular name=\"trash-2\" [size]=\"18\"></lucide-angular>\r\n                          </button>\r\n                        </div>\r\n                      </td>\r\n                    </tr>\r\n                  } @empty {\r\n                    <tr>\r\n                      <td colspan=\"5\" class=\"px-6 py-8 text-center text-gray-500\">\r\n                        No se encontraron carteras\r\n                      </td>\r\n                    </tr>\r\n                  }\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      }\r\n    </div>\r\n\r\n    <!-- Create/Edit Modal -->\r\n    @if (showDialog) {\r\n      <div class=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50\">\r\n        <div class=\"bg-slate-900 rounded-xl shadow-xl max-w-md w-full border border-slate-800\">\r\n          <!-- Modal Header -->\r\n          <div class=\"flex items-center justify-between p-6 border-b border-slate-800\">\r\n            <h2 class=\"text-xl font-bold text-white\">\r\n              {{ isEditMode ? 'Editar Cartera' : 'Nueva Cartera' }}\r\n            </h2>\r\n            <button (click)=\"closeDialog()\"\r\n                    class=\"text-gray-400 hover:text-white transition-colors\">\r\n              <lucide-angular name=\"x\" [size]=\"20\"></lucide-angular>\r\n            </button>\r\n          </div>\r\n\r\n          <!-- Modal Body -->\r\n          <form (ngSubmit)=\"savePortfolio()\" class=\"p-6 space-y-4\">\r\n            <div>\r\n              <label class=\"block text-sm font-semibold text-gray-300 mb-2\">\r\n                Código de Cartera *\r\n              </label>\r\n              <input type=\"text\"\r\n                     [(ngModel)]=\"formData.portfolioCode\"\r\n                     name=\"portfolioCode\"\r\n                     [disabled]=\"isEditMode\"\r\n                     required\r\n                     maxlength=\"3\"\r\n                     placeholder=\"Ej: C01, ABC\"\r\n                     [class]=\"getCodeErrorMessage() ? 'w-full px-4 py-2.5 bg-slate-800 border-2 border-red-500 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-red-500 disabled:bg-slate-950 disabled:text-gray-600 uppercase' : 'w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 disabled:bg-slate-950 disabled:text-gray-600 uppercase'\">\r\n              @if (getCodeErrorMessage()) {\r\n                <p class=\"text-xs text-red-400 mt-1 font-semibold\">{{ getCodeErrorMessage() }}</p>\r\n              } @else {\r\n                <p class=\"text-xs text-gray-500 mt-1\">Código único de máximo 3 caracteres</p>\r\n              }\r\n            </div>\r\n\r\n            <div>\r\n              <label class=\"block text-sm font-semibold text-gray-300 mb-2\">\r\n                Nombre de Cartera *\r\n              </label>\r\n              <input type=\"text\"\r\n                     [(ngModel)]=\"formData.portfolioName\"\r\n                     name=\"portfolioName\"\r\n                     required\r\n                     maxlength=\"255\"\r\n                     placeholder=\"Ej: Cartera de Consumo\"\r\n                     [class]=\"getNameErrorMessage() ? 'w-full px-4 py-2.5 bg-slate-800 border-2 border-red-500 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-red-500' : 'w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500'\">\r\n              @if (getNameErrorMessage()) {\r\n                <p class=\"text-xs text-red-400 mt-1 font-semibold\">{{ getNameErrorMessage() }}</p>\r\n              }\r\n            </div>\r\n\r\n            <div>\r\n              <label class=\"block text-sm font-semibold text-gray-300 mb-2\">\r\n                Descripción\r\n              </label>\r\n              <textarea [(ngModel)]=\"formData.description\"\r\n                        name=\"description\"\r\n                        rows=\"3\"\r\n                        placeholder=\"Descripción de la cartera...\"\r\n                        class=\"w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 resize-none\"></textarea>\r\n            </div>\r\n\r\n            @if (isEditMode) {\r\n              <div class=\"flex items-center gap-3\">\r\n                <input type=\"checkbox\"\r\n                       [(ngModel)]=\"formData.isActive\"\r\n                       name=\"isActive\"\r\n                       id=\"isActive\"\r\n                       class=\"w-4 h-4 text-purple-600 bg-slate-800 border-slate-700 rounded focus:ring-purple-500\">\r\n                <label for=\"isActive\" class=\"text-sm text-gray-300\">\r\n                  Cartera activa\r\n                </label>\r\n              </div>\r\n            }\r\n\r\n            <!-- Modal Actions -->\r\n            <div class=\"flex gap-3 pt-4\">\r\n              <button type=\"button\"\r\n                      (click)=\"closeDialog()\"\r\n                      class=\"flex-1 px-4 py-2.5 bg-slate-800 text-white rounded-lg font-semibold hover:bg-slate-700 transition-colors\">\r\n                Cancelar\r\n              </button>\r\n              <button type=\"submit\"\r\n                      [disabled]=\"isEditMode ? (!formData.portfolioName) : (!canSave())\"\r\n                      class=\"flex-1 px-4 py-2.5 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-lg font-semibold hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed\">\r\n                {{ isEditMode ? 'Actualizar' : 'Crear' }}\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    }\r\n  `\r\n})\r\nexport class PortfolioMaintenanceComponent implements OnInit {\r\n  tenants = signal<Tenant[]>([]);\r\n  portfolios = signal<Portfolio[]>([]);\r\n  filteredPortfolios = signal<Portfolio[]>([]);\r\n\r\n  selectedTenantId = 0;\r\n  searchTerm = '';\r\n  showDialog = false;\r\n  isEditMode = false;\r\n  selectedPortfolio: Portfolio | null = null;\r\n\r\n  formData = {\r\n    portfolioCode: '',\r\n    portfolioName: '',\r\n    description: '',\r\n    isActive: true\r\n  };\r\n\r\n  constructor(\r\n    private portfolioService: PortfolioService,\r\n    private typificationService: TypificationService\r\n  ) {\r\n    // Watch for search term changes\r\n    this.watchSearchTerm();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.loadTenants();\r\n  }\r\n\r\n  loadTenants() {\r\n    this.typificationService.getAllTenants().subscribe({\r\n      next: (tenants: Tenant[]) => {\r\n        this.tenants.set(tenants);\r\n      },\r\n      error: (error: any) => {\r\n        console.error('Error loading tenants:', error);\r\n      }\r\n    });\r\n  }\r\n\r\n  onTenantChange() {\r\n    if (this.selectedTenantId > 0) {\r\n      this.loadPortfolios();\r\n    } else {\r\n      this.portfolios.set([]);\r\n      this.filteredPortfolios.set([]);\r\n    }\r\n  }\r\n\r\n  loadPortfolios() {\r\n    this.portfolioService.getPortfoliosByTenant(this.selectedTenantId).subscribe({\r\n      next: (portfolios) => {\r\n        this.portfolios.set(portfolios);\r\n        this.filterPortfolios();\r\n      },\r\n      error: (error) => {\r\n        console.error('Error loading portfolios:', error);\r\n      }\r\n    });\r\n  }\r\n\r\n  watchSearchTerm() {\r\n    // Simple reactive search - in a real app, use RxJS debounce\r\n    setInterval(() => {\r\n      this.filterPortfolios();\r\n    }, 300);\r\n  }\r\n\r\n  filterPortfolios() {\r\n    const term = this.searchTerm.toLowerCase().trim();\r\n    if (!term) {\r\n      this.filteredPortfolios.set(this.portfolios());\r\n      return;\r\n    }\r\n\r\n    const filtered = this.portfolios().filter(p =>\r\n      p.portfolioCode.toLowerCase().includes(term) ||\r\n      p.portfolioName.toLowerCase().includes(term) ||\r\n      (p.description && p.description.toLowerCase().includes(term))\r\n    );\r\n    this.filteredPortfolios.set(filtered);\r\n  }\r\n\r\n  getActivePortfolios(): number {\r\n    return this.portfolios().filter(p => p.isActive).length;\r\n  }\r\n\r\n  getInactivePortfolios(): number {\r\n    return this.portfolios().filter(p => !p.isActive).length;\r\n  }\r\n\r\n  openCreateDialog() {\r\n    this.isEditMode = false;\r\n    this.selectedPortfolio = null;\r\n    this.formData = {\r\n      portfolioCode: '',\r\n      portfolioName: '',\r\n      description: '',\r\n      isActive: true\r\n    };\r\n    this.showDialog = true;\r\n  }\r\n\r\n  openEditDialog(portfolio: Portfolio) {\r\n    this.isEditMode = true;\r\n    this.selectedPortfolio = portfolio;\r\n    this.formData = {\r\n      portfolioCode: portfolio.portfolioCode,\r\n      portfolioName: portfolio.portfolioName,\r\n      description: portfolio.description || '',\r\n      isActive: portfolio.isActive\r\n    };\r\n    this.showDialog = true;\r\n  }\r\n\r\n  closeDialog() {\r\n    this.showDialog = false;\r\n    this.isEditMode = false;\r\n    this.selectedPortfolio = null;\r\n  }\r\n\r\n  isCodeDuplicated(): boolean {\r\n    if (!this.formData.portfolioCode.trim() || this.isEditMode) {\r\n      return false;\r\n    }\r\n\r\n    // Filtrar por tenant (solo validar dentro del mismo proveedor)\r\n    const portfoliosInTenant = this.portfolios().filter(\r\n      p => p.tenantId === this.selectedTenantId\r\n    );\r\n\r\n    return portfoliosInTenant.some(\r\n      p => p.portfolioCode.toLowerCase() === this.formData.portfolioCode.trim().toLowerCase()\r\n    );\r\n  }\r\n\r\n  isNameDuplicated(): boolean {\r\n    if (!this.formData.portfolioName.trim()) {\r\n      return false;\r\n    }\r\n\r\n    // Filtrar por tenant (solo validar dentro del mismo proveedor)\r\n    const portfoliosInTenant = this.portfolios().filter(\r\n      p => p.tenantId === this.selectedTenantId\r\n    );\r\n\r\n    if (this.isEditMode && this.selectedPortfolio) {\r\n      return portfoliosInTenant.some(\r\n        p => p.id !== this.selectedPortfolio!.id && p.portfolioName.toLowerCase() === this.formData.portfolioName.trim().toLowerCase()\r\n      );\r\n    } else {\r\n      return portfoliosInTenant.some(\r\n        p => p.portfolioName.toLowerCase() === this.formData.portfolioName.trim().toLowerCase()\r\n      );\r\n    }\r\n  }\r\n\r\n  getCodeErrorMessage(): string {\r\n    if (!this.formData.portfolioCode.trim()) {\r\n      return '';\r\n    }\r\n\r\n    if (this.isCodeDuplicated()) {\r\n      return 'Este código ya está en uso en este proveedor';\r\n    }\r\n\r\n    return '';\r\n  }\r\n\r\n  getNameErrorMessage(): string {\r\n    if (!this.formData.portfolioName.trim()) {\r\n      return '';\r\n    }\r\n\r\n    if (this.isNameDuplicated()) {\r\n      return 'Este nombre ya está en uso en este proveedor';\r\n    }\r\n\r\n    return '';\r\n  }\r\n\r\n  canSave(): boolean {\r\n    if (!this.formData.portfolioCode.trim() || !this.formData.portfolioName.trim()) {\r\n      return false;\r\n    }\r\n\r\n    if (this.isCodeDuplicated() || this.isNameDuplicated()) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  savePortfolio() {\r\n    if (!this.canSave() && !this.isEditMode) return;\r\n    if (this.isEditMode && this.selectedPortfolio) {\r\n      // Update existing portfolio\r\n      const request: UpdatePortfolioRequest = {\r\n        portfolioName: this.formData.portfolioName,\r\n        description: this.formData.description || undefined,\r\n        isActive: this.formData.isActive\r\n      };\r\n\r\n      this.portfolioService.updatePortfolio(this.selectedPortfolio.id, request).subscribe({\r\n        next: () => {\r\n          this.closeDialog();\r\n          this.loadPortfolios();\r\n        },\r\n        error: (error) => {\r\n          console.error('Error updating portfolio:', error);\r\n          alert('Error al actualizar la cartera: ' + (error.error?.message || error.message));\r\n        }\r\n      });\r\n    } else {\r\n      // Create new portfolio\r\n      const request: CreatePortfolioRequest = {\r\n        tenantId: this.selectedTenantId,\r\n        portfolioCode: this.formData.portfolioCode,\r\n        portfolioName: this.formData.portfolioName,\r\n        description: this.formData.description || undefined\r\n      };\r\n\r\n      this.portfolioService.createPortfolio(request).subscribe({\r\n        next: () => {\r\n          this.closeDialog();\r\n          this.loadPortfolios();\r\n        },\r\n        error: (error) => {\r\n          console.error('Error creating portfolio:', error);\r\n          alert('Error al crear la cartera: ' + (error.error?.message || error.message));\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  togglePortfolioStatus(portfolio: Portfolio) {\r\n    const newStatus = !portfolio.isActive;\r\n    const request: UpdatePortfolioRequest = {\r\n      portfolioName: portfolio.portfolioName,\r\n      description: portfolio.description,\r\n      isActive: newStatus\r\n    };\r\n\r\n    this.portfolioService.updatePortfolio(portfolio.id, request).subscribe({\r\n      next: () => {\r\n        this.loadPortfolios();\r\n      },\r\n      error: (error: any) => {\r\n        console.error('Error toggling portfolio status:', error);\r\n        alert('Error al cambiar el estado de la cartera: ' + (error.error?.message || error.message));\r\n      }\r\n    });\r\n  }\r\n\r\n  deletePortfolio(portfolio: Portfolio) {\r\n    if (portfolio.hasSubPortfolios) {\r\n      alert('No se puede eliminar esta cartera porque tiene subcarteras asociadas.');\r\n      return;\r\n    }\r\n\r\n    if (!confirm(`¿Está seguro de que desea eliminar la cartera \"${portfolio.portfolioName}\"? Esta acción no se puede deshacer.`)) {\r\n      return;\r\n    }\r\n\r\n    this.portfolioService.deletePortfolio(portfolio.id).subscribe({\r\n      next: () => {\r\n        this.loadPortfolios();\r\n        alert('Cartera eliminada exitosamente');\r\n      },\r\n      error: (error) => {\r\n        console.error('Error deleting portfolio:', error);\r\n        alert('Error al eliminar la cartera: ' + (error.error?.message || error.message));\r\n      }\r\n    });\r\n  }\r\n}\r\n"],
  "mappings": "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",
  "names": []
}
