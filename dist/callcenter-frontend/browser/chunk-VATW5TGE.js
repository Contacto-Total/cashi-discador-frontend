import{a as Y}from"./chunk-HNX7HEKX.js";import{a as K}from"./chunk-QM4ZMW2J.js";import{a as X}from"./chunk-RJBTEHZO.js";import{E as H,b as Q,c as J,f as G,k as q}from"./chunk-YEUR475X.js";import{Rb as B,Sb as O}from"./chunk-UE4ONSKR.js";import{a as $}from"./chunk-YQKVMPSG.js";import{Gb as C,Hb as h,Hc as R,Kb as N,Lb as F,Mb as m,Nb as n,Ob as l,Pb as u,Wb as v,Yb as _,_b as c,a as A,b as z,bb as a,da as D,ia as T,lc as I,ld as W,mc as s,nc as V,oa as x,ob as L,oc as y,pa as g,rc as S,sc as M,tc as E,td as j,ya as f}from"./chunk-QOPKCBWK.js";var Z=(()=>{let d=class d{constructor(){this.http=T(j),this.apiUrl=`${$.apiUrl}/usuarios`}obtenerTodos(){return this.http.get(this.apiUrl)}obtenerPorId(e){return this.http.get(`${this.apiUrl}/${e}`)}crear(e){return this.http.post(this.apiUrl,e)}actualizar(e,t){return this.http.put(`${this.apiUrl}/${e}`,t)}eliminar(e){return this.http.delete(`${this.apiUrl}/${e}`)}};d.\u0275fac=function(t){return new(t||d)},d.\u0275prov=D({token:d,factory:d.\u0275fac,providedIn:"root"});let r=d;return r})();var k=(r,d)=>d.id;function ie(r,d){if(r&1){let o=v();n(0,"button",44),_("click",function(){x(o);let t=c(2);return g(t.clearFilter())}),s(1," Limpiar "),l()}}function ne(r,d){if(r&1){let o=v();n(0,"div",42)(1,"p",45),s(2,"\xBFQu\xE9 desea filtrar?"),l(),n(3,"div",46)(4,"button",47),_("click",function(){x(o);let t=c(2);return g(t.setFilterType("INQUILINO"))}),u(5,"lucide-angular",48),n(6,"span"),s(7,"Proveedor"),l()(),n(8,"button",49),_("click",function(){x(o);let t=c(2);return g(t.setFilterType("CARTERA"))}),u(9,"lucide-angular",50),n(10,"span"),s(11,"Cartera"),l()(),n(12,"button",51),_("click",function(){x(o);let t=c(2);return g(t.setFilterType("SUBCARTERA"))}),u(13,"lucide-angular",52),n(14,"span"),s(15,"Subcartera"),l()()()()}r&2&&(a(5),m("size",14),a(4),m("size",14),a(4),m("size",14))}function re(r,d){if(r&1){let o=v();n(0,"button",57),_("click",function(){let t=x(o).$implicit,i=c(4);return g(i.setFilter("INQUILINO",t.id,t.tenantName))}),s(1),l()}if(r&2){let o=d.$implicit,e=c(4);I(e.isFilterActive("INQUILINO",o.id)?"bg-blue-900/40 border-blue-500":"bg-slate-700/50 border-slate-600 hover:border-blue-500/50"),a(),y(" ",o.tenantName," ")}}function oe(r,d){if(r&1&&N(0,re,2,3,"button",56,k),r&2){let o=c(3);F(o.tenants())}}function le(r,d){if(r&1){let o=v();n(0,"button",57),_("click",function(){let t=x(o).$implicit,i=c(4);return g(i.setFilter("CARTERA",t.id,i.getPortfolioDisplayName(t.id)))}),s(1),l()}if(r&2){let o=d.$implicit,e=c(4);I(e.isFilterActive("CARTERA",o.id)?"bg-blue-900/40 border-blue-500":"bg-slate-700/50 border-slate-600 hover:border-blue-500/50"),a(),y(" ",e.getPortfolioDisplayName(o.id)," ")}}function ae(r,d){if(r&1&&N(0,le,2,3,"button",56,k),r&2){let o=c(3);F(o.allPortfolios())}}function se(r,d){if(r&1){let o=v();n(0,"button",57),_("click",function(){let t=x(o).$implicit,i=c(4);return g(i.setFilter("SUBCARTERA",t.id,i.getSubPortfolioDisplayName(t.id)))}),s(1),l()}if(r&2){let o=d.$implicit,e=c(4);I(e.isFilterActive("SUBCARTERA",o.id)?"bg-blue-900/40 border-blue-500":"bg-slate-700/50 border-slate-600 hover:border-blue-500/50"),a(),y(" ",e.getSubPortfolioDisplayName(o.id)," ")}}function de(r,d){if(r&1&&N(0,se,2,3,"button",56,k),r&2){let o=c(3);F(o.allSubPortfolios())}}function ce(r,d){if(r&1){let o=v();n(0,"div",43)(1,"div",53)(2,"button",54),_("click",function(){x(o);let t=c(2);return g(t.filterType.set(null))}),u(3,"lucide-angular",55),n(4,"span"),s(5,"Volver"),l()()(),C(6,oe,2,0)(7,ae,2,0)(8,de,2,0),l()}if(r&2){let o=c(2);a(3),m("size",12),a(3),h(o.filterType()==="INQUILINO"?6:o.filterType()==="CARTERA"?7:o.filterType()==="SUBCARTERA"?8:-1)}}function me(r,d){if(r&1&&(n(0,"div",24)(1,"div",39)(2,"span",40),s(3,"Filtrar por asignaci\xF3n"),l(),C(4,ie,2,0,"button",41),l(),C(5,ne,16,3,"div",42)(6,ce,9,2,"div",43),l()),r&2){let o=c();a(4),h(o.activeFilter()?4:-1),a(),h(o.filterType()?6:5)}}function ue(r,d){r&1&&u(0,"lucide-angular",48),r&2&&m("size",10)}function pe(r,d){r&1&&u(0,"lucide-angular",50),r&2&&m("size",10)}function xe(r,d){r&1&&u(0,"lucide-angular",52),r&2&&m("size",10)}function ge(r,d){if(r&1){let o=v();n(0,"div",25)(1,"div",58),C(2,ue,1,1,"lucide-angular",48)(3,pe,1,1,"lucide-angular",50)(4,xe,1,1,"lucide-angular",52),n(5,"span"),s(6),l(),n(7,"button",59),_("click",function(){x(o);let t=c();return g(t.clearFilter())}),u(8,"lucide-angular",60),l()()()}if(r&2){let o=c();a(2),h(o.activeFilter().type==="INQUILINO"?2:o.activeFilter().type==="CARTERA"?3:4),a(4),V(o.activeFilter().name),a(2),m("size",10)}}function _e(r,d){r&1&&(n(0,"div",27),u(1,"lucide-angular",61),n(2,"p",8),s(3,"Sin resultados"),l(),n(4,"p",62),s(5,"Intenta otra b\xFAsqueda"),l()()),r&2&&(a(),m("size",28))}function be(r,d){r&1&&(n(0,"div",27),u(1,"lucide-angular",63),n(2,"p",8),s(3,"Sin usuarios"),l(),n(4,"p",62),s(5,"Crea uno nuevo"),l()()),r&2&&(a(),m("size",28))}function fe(r,d){if(r&1){let o=v();n(0,"div",65),_("click",function(){let t=x(o).$implicit,i=c(2);return g(i.selectUser(t))}),n(1,"div",66)(2,"div",67)(3,"div",68),u(4,"lucide-angular",69),n(5,"h3",70),s(6),l()(),n(7,"div",71),s(8),l(),n(9,"div",72)(10,"span",73),s(11),l(),n(12,"span",74),s(13,"\u2022"),l(),n(14,"span",62),s(15),l()()(),n(16,"button",75),_("click",function(t){let i=x(o).$implicit;return c(2).deleteUser(i),g(t.stopPropagation())}),u(17,"lucide-angular",76),l()()()}if(r&2){let o,e=d.$implicit,t=c(2);I(((o=t.selectedUser())==null?null:o.id)===e.id?"bg-blue-900/40 border-blue-500":"bg-slate-800 border-slate-700 hover:border-blue-500/50"),a(4),m("size",12),a(2),V(e.nombreCompleto),a(2),y(" ",e.nombreUsuario," "),a(2),I(e.activo?"text-green-400":"text-red-400"),a(),y(" ",e.activo?"Activo":"Inactivo"," "),a(4),y("",e.roleIds.length," roles"),a(2),m("size",12)}}function Ce(r,d){if(r&1&&N(0,fe,18,10,"div",64,k),r&2){let o=c();F(o.filteredUsers())}}function he(r,d){r&1&&(n(0,"div",89),u(1,"lucide-angular",92),n(2,"div",93),s(3," La contrase\xF1a se generar\xE1 autom\xE1ticamente al crear el usuario "),l()()),r&2&&(a(),m("size",14))}function ve(r,d){if(r&1){let o=v();n(0,"div",77)(1,"div",78)(2,"div")(3,"label",79),s(4," Primer Nombre "),n(5,"span",80),s(6,"*"),l()(),n(7,"input",81),E("ngModelChange",function(t){x(o);let i=c();return M(i.selectedUser().primerNombre,t)||(i.selectedUser().primerNombre=t),g(t)}),_("ngModelChange",function(){x(o);let t=c();return g(t.updateNombreCompleto())}),l()(),n(8,"div")(9,"label",79),s(10,"Segundo Nombre"),l(),n(11,"input",82),E("ngModelChange",function(t){x(o);let i=c();return M(i.selectedUser().segundoNombre,t)||(i.selectedUser().segundoNombre=t),g(t)}),_("ngModelChange",function(){x(o);let t=c();return g(t.updateNombreCompleto())}),l()()(),n(12,"div",78)(13,"div")(14,"label",79),s(15," Primer Apellido "),n(16,"span",80),s(17,"*"),l()(),n(18,"input",83),E("ngModelChange",function(t){x(o);let i=c();return M(i.selectedUser().primerApellido,t)||(i.selectedUser().primerApellido=t),g(t)}),_("ngModelChange",function(){x(o);let t=c();return g(t.updateNombreCompleto())}),l()(),n(19,"div")(20,"label",79),s(21,"Segundo Apellido"),l(),n(22,"input",84),E("ngModelChange",function(t){x(o);let i=c();return M(i.selectedUser().segundoApellido,t)||(i.selectedUser().segundoApellido=t),g(t)}),_("ngModelChange",function(){x(o);let t=c();return g(t.updateNombreCompleto())}),l()()(),n(23,"div")(24,"label",79),s(25,"Nombre Completo"),l(),u(26,"input",85),l()(),n(27,"div",86)(28,"div")(29,"label",79),s(30," Nombre de Usuario "),n(31,"span",80),s(32,"*"),l()(),n(33,"input",87),E("ngModelChange",function(t){x(o);let i=c();return M(i.selectedUser().nombreUsuario,t)||(i.selectedUser().nombreUsuario=t),g(t)}),l(),n(34,"p",88),s(35,"Usuario \xFAnico para iniciar sesi\xF3n"),l()(),C(36,he,4,1,"div",89),n(37,"div",4)(38,"input",90),E("ngModelChange",function(t){x(o);let i=c();return M(i.selectedUser().activo,t)||(i.selectedUser().activo=t),g(t)}),l(),n(39,"label",91),s(40,"Usuario activo"),l()()()}if(r&2){let o=c();a(7),S("ngModel",o.selectedUser().primerNombre),a(4),S("ngModel",o.selectedUser().segundoNombre),a(7),S("ngModel",o.selectedUser().primerApellido),a(4),S("ngModel",o.selectedUser().segundoApellido),a(4),m("value",o.selectedUser().nombreCompleto),a(7),S("ngModel",o.selectedUser().nombreUsuario),a(3),h(o.selectedUser().id?-1:36),a(2),S("ngModel",o.selectedUser().activo)}}function we(r,d){r&1&&(n(0,"div",32),u(1,"lucide-angular",94),n(2,"p",95),s(3,"Selecciona o crea un usuario"),l()()),r&2&&(a(),m("size",32))}function ye(r,d){r&1&&(n(0,"div",27),u(1,"lucide-angular",96),n(2,"p",8),s(3,"Sin roles disponibles"),l(),n(4,"p",62),s(5,"Crea roles primero"),l()()),r&2&&(a(),m("size",28))}function Ue(r,d){if(r&1){let o=v();n(0,"label",97)(1,"input",98),_("change",function(){let t=x(o).$implicit,i=c(3);return g(i.toggleRole(t.id))}),l(),n(2,"div",67)(3,"div",99),u(4,"lucide-angular",34),n(5,"h3",100),s(6),l()(),n(7,"p",101),s(8),l()()()}if(r&2){let o=d.$implicit,e=c(3);a(),m("checked",e.isRoleAssigned(o.id)),a(3),m("size",12),a(2),V(o.name),a(2),V(o.description)}}function Se(r,d){if(r&1&&N(0,Ue,9,4,"label",97,k),r&2){let o=c(2);F(o.availableRoles())}}function Me(r,d){if(r&1&&(n(0,"div",36),C(1,ye,6,1,"div",27)(2,Se,2,0),l()),r&2){let o=c();a(),h(o.availableRoles().length===0?1:2)}}function Ee(r,d){r&1&&(n(0,"div",32),u(1,"lucide-angular",102),n(2,"p",8),s(3,"Selecciona un usuario para asignar roles"),l()()),r&2&&(a(),m("size",32))}function Te(r,d){if(r&1){let o=v();n(0,"div",37)(1,"button",103),_("click",function(){x(o);let t=c();return g(t.cancelEdit())}),s(2," Cancelar "),l(),n(3,"button",104),_("click",function(){x(o);let t=c();return g(t.saveUser())}),u(4,"lucide-angular",105),s(5," Guardar "),l()()}if(r&2){let o=c();a(3),m("disabled",!o.isUserValid()),a(),m("size",16)}}function Ie(r,d){if(r&1){let o=v();n(0,"div",38)(1,"div",106)(2,"div",107),u(3,"lucide-angular",108),n(4,"h3",109),s(5,"Usuario Creado Exitosamente"),l()(),n(6,"div",110)(7,"p",111),s(8," El usuario "),n(9,"strong",112),s(10),l(),s(11," ha sido creado. "),l(),n(12,"div",113),u(13,"lucide-angular",114),n(14,"div",115)(15,"strong"),s(16,"Importante:"),l(),s(17," Copia esta contrase\xF1a ahora. No se volver\xE1 a mostrar. "),l()(),n(18,"div")(19,"label",79),s(20,"Contrase\xF1a Temporal"),l(),n(21,"div",116),u(22,"input",117),n(23,"button",118),_("click",function(){x(o);let t=c();return g(t.copyPassword())}),u(24,"lucide-angular",119),s(25),l()()(),n(26,"p",8),s(27," Proporciona esta contrase\xF1a al usuario. Deber\xE1 cambiarla en su primer inicio de sesi\xF3n. "),l()(),n(28,"div",120)(29,"button",121),_("click",function(){x(o);let t=c();return g(t.closePasswordModal())}),s(30),l()()()()}if(r&2){let o,e,t=c();a(3),m("size",20),a(7),V((o=t.generatedUserInfo())==null?null:o.nombreUsuario),a(3),m("size",16),a(9),m("value",(e=t.generatedUserInfo())==null?null:e.password),a(2),m("name",t.passwordCopied()?"check":"copy")("size",14),a(),y(" ",t.passwordCopied()?"Copiado":"Copiar"," "),a(4),m("disabled",!t.passwordCopied()),a(),y(" ",t.passwordCopied()?"Cerrar":"Copiar antes de cerrar"," ")}}var Je=(()=>{let d=class d{constructor(){this.usuarioService=T(Z),this.rolService=T(Y),this.tenantService=T(K),this.portfolioService=T(X),this.users=f([]),this.selectedUser=f(null),this.originalUser=f(null),this.availableRoles=f([]),this.showPasswordModal=f(!1),this.generatedUserInfo=f(null),this.passwordCopied=f(!1),this.tenants=f([]),this.allPortfolios=f([]),this.allSubPortfolios=f([]),this.searchTerm=f(""),this.showFilterDropdown=f(!1),this.filterType=f(null),this.activeFilter=f(null),this.filteredUsers=R(()=>{let e=this.users(),t=this.searchTerm().toLowerCase();t&&(e=e.filter(p=>p.nombreCompleto.toLowerCase().includes(t)||p.nombreUsuario.toLowerCase().includes(t)));let i=this.activeFilter();return i&&(e=e.filter(p=>this.availableRoles().filter(U=>p.roleIds.includes(U.id)).some(U=>!U.assignments||U.assignments.length===0?!1:U.assignments.some(w=>{if(i.type==="INQUILINO")return w.type==="INQUILINO"&&w.tenantId===i.id;if(i.type==="CARTERA")return w.type==="CARTERA"&&w.portfolioId===i.id||w.type==="INQUILINO"&&w.tenantId===this.getTenantIdForPortfolio(i.id);if(i.type==="SUBCARTERA"){let P=this.getPortfolioIdForSubPortfolio(i.id),ee=P?this.getTenantIdForPortfolio(P):null;return w.type==="SUBCARTERA"&&w.subPortfolioId===i.id||w.type==="CARTERA"&&w.portfolioId===P||w.type==="INQUILINO"&&w.tenantId===ee}return!1})))),e}),this.hasChanges=R(()=>{let e=this.selectedUser(),t=this.originalUser();return!e||!t?!1:JSON.stringify(e)!==JSON.stringify(t)})}ngOnInit(){this.loadData(),this.loadTenantsAndFilters()}loadData(){this.rolService.obtenerTodos().subscribe({next:e=>{this.availableRoles.set(e.map(t=>({id:t.idRol,name:t.nombreRol,description:t.descripcion||"",assignments:t.asignaciones.map(i=>({type:i.tipoAsignacion,tenantId:i.tenantId,portfolioId:i.portfolioId,subPortfolioId:i.subPortfolioId}))})))},error:e=>console.error("Error al cargar roles:",e)}),this.usuarioService.obtenerTodos().subscribe({next:e=>{this.users.set(e.map(t=>this.mapUsuarioResponseToUser(t)))},error:e=>console.error("Error al cargar usuarios:",e)})}loadTenantsAndFilters(){this.tenantService.getAllTenants().subscribe({next:e=>{this.tenants.set(e),e.forEach(t=>{this.portfolioService.getPortfoliosByTenant(t.id).subscribe({next:i=>{let p=i.map(b=>z(A({},b),{tenantId:t.id}));this.allPortfolios.set([...this.allPortfolios(),...p]),i.forEach(b=>{this.portfolioService.getSubPortfoliosByPortfolio(b.id).subscribe({next:U=>{this.allSubPortfolios.set([...this.allSubPortfolios(),...U])},error:U=>console.error(`Error al cargar subportfolios para portfolio ${b.id}:`,U)})})},error:i=>console.error(`Error al cargar portfolios para tenant ${t.id}:`,i)})})},error:e=>console.error("Error al cargar tenants:",e)})}mapUsuarioResponseToUser(e){return{id:e.idUsuario,primerNombre:e.primerNombre||"",segundoNombre:e.segundoNombre,primerApellido:e.primerApellido||"",segundoApellido:e.segundoApellido,nombreCompleto:e.nombreCompleto,nombreUsuario:e.nombreUsuario,roleIds:e.roleIds,activo:e.activo}}createNewUser(){let e={primerNombre:"",segundoNombre:"",primerApellido:"",segundoApellido:"",nombreCompleto:"",nombreUsuario:"",roleIds:[],activo:!0};this.selectedUser.set(e),this.originalUser.set(null)}selectUser(e){let t=z(A({},e),{roleIds:[...e.roleIds]});this.selectedUser.set(t),this.originalUser.set(JSON.parse(JSON.stringify(e)))}deleteUser(e){e.id&&confirm(`\xBFEst\xE1s seguro de eliminar el usuario "${e.nombreCompleto}"?`)&&this.usuarioService.eliminar(e.id).subscribe({next:()=>{let t=this.users();this.users.set(t.filter(i=>i.id!==e.id)),this.selectedUser()?.id===e.id&&this.selectedUser.set(null),alert("Usuario eliminado correctamente")},error:t=>{console.error("Error al eliminar usuario:",t),alert("Error al eliminar usuario: "+(t.error?.message||t.message))}})}updateNombreCompleto(){let e=this.selectedUser();if(!e)return;let t=[e.primerNombre?.trim(),e.segundoNombre?.trim(),e.primerApellido?.trim(),e.segundoApellido?.trim()].filter(i=>i&&i.length>0);e.nombreCompleto=t.join(" "),this.selectedUser.set(A({},e))}isRoleAssigned(e){return this.selectedUser()?.roleIds.includes(e)||!1}toggleRole(e){let t=this.selectedUser();if(!t)return;let i=t.roleIds.indexOf(e);i>-1?t.roleIds.splice(i,1):t.roleIds.push(e),this.selectedUser.set(A({},t))}isUserValid(){let e=this.selectedUser(),t=!!(e&&e.primerNombre.trim()&&e.primerApellido.trim()&&e.nombreUsuario.trim());return e?.id?t&&this.hasChanges():t}generatePassword(){let t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%&*",i="";for(let p=0;p<12;p++){let b=Math.floor(Math.random()*t.length);i+=t[b]}return i}saveUser(){let e=this.selectedUser();if(!e||!this.isUserValid())return;let t={primerNombre:e.primerNombre,segundoNombre:e.segundoNombre,primerApellido:e.primerApellido,segundoApellido:e.segundoApellido,nombreUsuario:e.nombreUsuario,activo:e.activo,roleIds:e.roleIds};e.id?this.usuarioService.actualizar(e.id,t).subscribe({next:i=>{let p=this.users(),b=p.findIndex(U=>U.id===e.id);b>-1&&(p[b]=this.mapUsuarioResponseToUser(i),this.users.set([...p])),this.selectedUser.set(null),alert("Usuario actualizado correctamente")},error:i=>{console.error("Error al actualizar usuario:",i),alert("Error al actualizar usuario: "+(i.error?.message||i.message))}}):this.usuarioService.crear(t).subscribe({next:i=>{let p=this.mapUsuarioResponseToUser(i);this.users.set([...this.users(),p]),i.generatedPassword&&(this.generatedUserInfo.set({nombreUsuario:p.nombreUsuario,password:i.generatedPassword}),this.showPasswordModal.set(!0),this.passwordCopied.set(!1)),this.selectedUser.set(null)},error:i=>{console.error("Error al crear usuario:",i),alert("Error al crear usuario: "+(i.error?.message||i.message))}})}copyPassword(){let e=this.generatedUserInfo()?.password;e&&navigator.clipboard.writeText(e).then(()=>{this.passwordCopied.set(!0)})}closePasswordModal(){this.passwordCopied()&&(this.showPasswordModal.set(!1),this.generatedUserInfo.set(null),this.passwordCopied.set(!1))}cancelEdit(){this.selectedUser.set(null)}toggleFilterDropdown(){let e=!this.showFilterDropdown();this.showFilterDropdown.set(e),e&&this.filterType.set(null)}setFilterType(e){this.filterType.set(e)}setFilter(e,t,i){this.activeFilter.set({type:e,id:t,name:i}),this.showFilterDropdown.set(!1),this.filterType.set(null)}clearFilter(){this.activeFilter.set(null),this.filterType.set(null),this.showFilterDropdown.set(!1)}isFilterActive(e,t){let i=this.activeFilter();return i?.type===e&&i?.id===t}getPortfolioDisplayName(e){let t=this.allPortfolios().find(p=>p.id===e);if(!t)return"";let i=this.tenants().find(p=>p.id===t.tenantId);return i?`${i.tenantName} - ${t.portfolioName}`:t.portfolioName}getSubPortfolioDisplayName(e){let t=this.allSubPortfolios().find(b=>b.id===e);if(!t)return"";let i=this.allPortfolios().find(b=>b.id===t.portfolioId);if(!i)return t.subPortfolioName;let p=this.tenants().find(b=>b.id===i.tenantId);return p?`${p.tenantName} - ${i.portfolioName} - ${t.subPortfolioName}`:`${i.portfolioName} - ${t.subPortfolioName}`}getTenantIdForPortfolio(e){return this.allPortfolios().find(i=>i.id===e)?.tenantId||null}getPortfolioIdForSubPortfolio(e){return this.allSubPortfolios().find(i=>i.id===e)?.portfolioId||null}};d.\u0275fac=function(t){return new(t||d)},d.\u0275cmp=L({type:d,selectors:[["app-user-management"]],decls:60,vars:20,consts:[[1,"h-[calc(100dvh-56px)]","bg-slate-950","overflow-hidden","flex","flex-col"],[1,"flex-1","overflow-y-auto"],[1,"p-3","max-w-[1800px]","mx-auto"],[1,"mb-3"],[1,"flex","items-center","gap-2"],[1,"w-8","h-8","bg-gradient-to-br","from-blue-600","to-blue-700","rounded-lg","flex","items-center","justify-center"],["name","users",1,"text-white",3,"size"],[1,"text-lg","font-bold","text-white"],[1,"text-xs","text-gray-400"],[1,"grid","grid-cols-12","gap-3"],[1,"col-span-3","bg-slate-900","rounded-lg","border","border-slate-800","shadow-sm","flex","flex-col","max-h-[calc(100vh-140px)]"],[1,"p-3","border-b","border-slate-800","flex","items-center","justify-between","flex-shrink-0"],["name","list",1,"text-blue-400",3,"size"],[1,"text-sm","font-bold","text-white"],[1,"px-2","py-1","bg-blue-600","hover:bg-blue-700","text-white","rounded","text-xs","font-semibold","transition-colors","flex","items-center","gap-1",3,"click"],["name","plus",3,"size"],[1,"p-2","border-b","border-slate-800"],[1,"flex","gap-1.5"],[1,"relative","flex-1"],["name","search",1,"absolute","left-1.5","top-1/2","-translate-y-1/2","text-gray-500",3,"size"],["type","text","placeholder","Buscar usuario...",1,"w-full","pl-9","pr-2","py-1.5","bg-slate-800","border","border-slate-700","rounded","text-white","text-xs","placeholder:text-gray-500","focus:outline-none","focus:ring-1","focus:ring-blue-500",3,"ngModelChange","ngModel"],[1,"relative"],[1,"p-1.5","rounded","transition-colors",3,"click"],["name","filter",1,"text-white",3,"size"],[1,"absolute","right-0","top-full","mt-1","w-72","bg-slate-800","border","border-slate-700","rounded","shadow-lg","z-50"],[1,"mt-1.5","flex","items-center","gap-1"],[1,"p-2","space-y-1","overflow-y-auto","flex-1"],[1,"text-center","py-8"],[1,"col-span-5","bg-slate-900","rounded-lg","border","border-slate-800","shadow-sm","flex","flex-col","max-h-[calc(100vh-140px)]"],[1,"p-3","border-b","border-slate-800","flex-shrink-0"],["name","user-cog",1,"text-blue-400",3,"size"],[1,"p-3","space-y-3","overflow-y-auto","flex-1"],[1,"text-center","py-12"],[1,"col-span-4","bg-slate-900","rounded-lg","border","border-slate-800","shadow-sm","flex","flex-col","max-h-[calc(100vh-140px)]"],["name","shield-check",1,"text-purple-400",3,"size"],[1,"p-3","overflow-y-auto","flex-1"],[1,"space-y-1.5"],[1,"mt-3","flex","justify-end","gap-2"],[1,"fixed","inset-0","bg-black/60","backdrop-blur-sm","flex","items-center","justify-center","z-50","p-4"],[1,"p-2","border-b","border-slate-700","flex","items-center","justify-between"],[1,"text-xs","font-semibold","text-white"],[1,"text-xs","text-blue-400","hover:text-blue-300"],[1,"p-2"],[1,"p-2","max-h-96","overflow-y-auto"],[1,"text-xs","text-blue-400","hover:text-blue-300",3,"click"],[1,"text-xs","text-gray-400","mb-2"],[1,"space-y-1"],[1,"w-full","flex","items-center","gap-2","px-3","py-2","bg-slate-700/50","hover:bg-slate-700","border","border-slate-600","hover:border-blue-500/50","rounded","text-xs","text-white","transition-colors",3,"click"],["name","building",1,"text-blue-400",3,"size"],[1,"w-full","flex","items-center","gap-2","px-3","py-2","bg-slate-700/50","hover:bg-slate-700","border","border-slate-600","hover:border-purple-500/50","rounded","text-xs","text-white","transition-colors",3,"click"],["name","briefcase",1,"text-purple-400",3,"size"],[1,"w-full","flex","items-center","gap-2","px-3","py-2","bg-slate-700/50","hover:bg-slate-700","border","border-slate-600","hover:border-green-500/50","rounded","text-xs","text-white","transition-colors",3,"click"],["name","folder",1,"text-green-400",3,"size"],[1,"flex","items-center","justify-between","mb-2"],[1,"flex","items-center","gap-1","text-xs","text-gray-400","hover:text-white","transition-colors",3,"click"],["name","arrow-left",3,"size"],[1,"w-full","text-left","px-2","py-1.5","rounded","border","text-xs","text-white","mb-1","transition-colors",3,"class"],[1,"w-full","text-left","px-2","py-1.5","rounded","border","text-xs","text-white","mb-1","transition-colors",3,"click"],[1,"inline-flex","items-center","gap-1","px-2","py-1","bg-blue-900/40","border","border-blue-500","rounded","text-xs","text-white"],[1,"ml-1","hover:text-red-400",3,"click"],["name","x",3,"size"],["name","search-x",1,"text-gray-600","mx-auto","mb-2",3,"size"],[1,"text-xs","text-gray-500"],["name","user-x",1,"text-gray-600","mx-auto","mb-2",3,"size"],[1,"p-2","rounded","border","cursor-pointer","transition-all",3,"class"],[1,"p-2","rounded","border","cursor-pointer","transition-all",3,"click"],[1,"flex","items-start","justify-between"],[1,"flex-1","min-w-0"],[1,"flex","items-center","gap-1"],["name","user",1,"text-blue-400","flex-shrink-0",3,"size"],[1,"text-xs","font-semibold","text-white","truncate"],[1,"mt-0.5","text-xs","text-gray-500","truncate"],[1,"mt-0.5","flex","items-center","gap-1"],[1,"text-xs"],[1,"text-gray-500"],[1,"p-0.5","text-gray-400","hover:text-red-400","rounded","transition-colors","flex-shrink-0",3,"click"],["name","trash-2",3,"size"],[1,"space-y-2"],[1,"grid","grid-cols-2","gap-2"],[1,"block","text-xs","font-semibold","text-gray-300","mb-1"],[1,"text-red-400"],["type","text","placeholder","Ej: Juan",1,"w-full","px-2","py-1.5","bg-slate-800","border","border-slate-700","rounded","text-white","text-sm","placeholder:text-gray-500","focus:outline-none","focus:ring-1","focus:ring-blue-500",3,"ngModelChange","ngModel"],["type","text","placeholder","Ej: Carlos",1,"w-full","px-2","py-1.5","bg-slate-800","border","border-slate-700","rounded","text-white","text-sm","placeholder:text-gray-500","focus:outline-none","focus:ring-1","focus:ring-blue-500",3,"ngModelChange","ngModel"],["type","text","placeholder","Ej: Garc\xEDa",1,"w-full","px-2","py-1.5","bg-slate-800","border","border-slate-700","rounded","text-white","text-sm","placeholder:text-gray-500","focus:outline-none","focus:ring-1","focus:ring-blue-500",3,"ngModelChange","ngModel"],["type","text","placeholder","Ej: L\xF3pez",1,"w-full","px-2","py-1.5","bg-slate-800","border","border-slate-700","rounded","text-white","text-sm","placeholder:text-gray-500","focus:outline-none","focus:ring-1","focus:ring-blue-500",3,"ngModelChange","ngModel"],["type","text","readonly","",1,"w-full","px-2","py-1.5","bg-slate-700","border","border-slate-600","rounded","text-gray-400","text-sm","cursor-not-allowed",3,"value"],[1,"space-y-2","pt-2","border-t","border-slate-800"],["type","text","placeholder","Ej: jgarcia",1,"w-full","px-2","py-1.5","bg-slate-800","border","border-slate-700","rounded","text-white","text-sm","placeholder:text-gray-500","focus:outline-none","focus:ring-1","focus:ring-blue-500",3,"ngModelChange","ngModel"],[1,"mt-1","text-xs","text-gray-500"],[1,"bg-blue-900/20","border","border-blue-700/50","rounded","p-2","flex","items-start","gap-2"],["type","checkbox","id","userActive",1,"w-3.5","h-3.5","text-blue-600","bg-slate-800","border-slate-700","rounded","focus:ring-blue-500",3,"ngModelChange","ngModel"],["for","userActive",1,"text-xs","text-gray-300","cursor-pointer"],["name","info",1,"text-blue-400","flex-shrink-0","mt-0.5",3,"size"],[1,"text-xs","text-blue-300"],["name","user-circle",1,"text-gray-600","mx-auto","mb-2",3,"size"],[1,"text-sm","text-gray-400"],["name","shield-off",1,"text-gray-600","mx-auto","mb-2",3,"size"],[1,"flex","items-start","gap-2","p-2","bg-slate-800","hover:bg-slate-700/50","border","border-slate-700","rounded","cursor-pointer","group"],["type","checkbox",1,"mt-0.5","w-4","h-4","text-purple-600","bg-slate-700","border-slate-600","rounded","focus:ring-purple-500",3,"change","checked"],[1,"flex","items-center","gap-1.5"],[1,"text-xs","font-semibold","text-white","group-hover:text-purple-300"],[1,"text-xs","text-gray-500","leading-tight","mt-0.5"],["name","shield",1,"text-gray-600","mx-auto","mb-2",3,"size"],[1,"px-4","py-2","bg-slate-700","hover:bg-slate-600","text-white","rounded","text-sm","font-semibold","transition-colors",3,"click"],[1,"px-4","py-2","bg-blue-600","hover:bg-blue-700","disabled:bg-slate-700","disabled:cursor-not-allowed","text-white","rounded","text-sm","font-semibold","transition-colors","flex","items-center","gap-1.5",3,"click","disabled"],["name","save",3,"size"],[1,"bg-slate-800","rounded-lg","border","border-slate-700","shadow-2xl","max-w-md","w-full"],[1,"p-4","border-b","border-slate-700","flex","items-center","gap-2"],["name","key",1,"text-green-400",3,"size"],[1,"text-base","font-bold","text-white"],[1,"p-4","space-y-3"],[1,"text-sm","text-gray-300"],[1,"text-white"],[1,"bg-amber-900/20","border","border-amber-700/50","rounded","p-3","flex","items-start","gap-2"],["name","alert-triangle",1,"text-amber-400","flex-shrink-0","mt-0.5",3,"size"],[1,"text-xs","text-amber-300"],[1,"flex","gap-2"],["type","text","readonly","",1,"flex-1","px-3","py-2","bg-slate-900","border","border-slate-600","rounded","text-white","font-mono","text-sm",3,"value"],[1,"px-3","py-2","bg-blue-600","hover:bg-blue-700","text-white","rounded","text-sm","font-semibold","transition-colors","flex","items-center","gap-1.5",3,"click"],[3,"name","size"],[1,"p-4","border-t","border-slate-700","flex","justify-end"],[1,"px-4","py-2","bg-green-600","hover:bg-green-700","disabled:bg-slate-700","disabled:cursor-not-allowed","text-white","rounded","text-sm","font-semibold","transition-colors",3,"click","disabled"]],template:function(t,i){if(t&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),u(6,"lucide-angular",6),l(),n(7,"div")(8,"h1",7),s(9,"Gesti\xF3n de Usuarios"),l(),n(10,"p",8),s(11,"Crea y administra usuarios del sistema"),l()()()(),n(12,"div",9)(13,"div",10)(14,"div",11)(15,"div",4),u(16,"lucide-angular",12),n(17,"h2",13),s(18,"Usuarios"),l(),n(19,"span",8),s(20),l()(),n(21,"button",14),_("click",function(){return i.createNewUser()}),u(22,"lucide-angular",15),s(23," Nuevo "),l()(),n(24,"div",16)(25,"div",17)(26,"div",18),u(27,"lucide-angular",19),n(28,"input",20),E("ngModelChange",function(b){return M(i.searchTerm,b)||(i.searchTerm=b),b}),l()(),n(29,"div",21)(30,"button",22),_("click",function(){return i.toggleFilterDropdown()}),u(31,"lucide-angular",23),l(),C(32,me,7,2,"div",24),l()(),C(33,ge,9,3,"div",25),l(),n(34,"div",26),C(35,_e,6,1,"div",27)(36,be,6,1,"div",27)(37,Ce,2,0),l()(),n(38,"div",28)(39,"div",29)(40,"div",4),u(41,"lucide-angular",30),n(42,"h2",13),s(43),l()()(),n(44,"div",31),C(45,ve,41,8)(46,we,4,1,"div",32),l()(),n(47,"div",33)(48,"div",29)(49,"div",4),u(50,"lucide-angular",34),n(51,"h2",13),s(52,"Roles Asignados"),l(),n(53,"span",8),s(54),l()()(),n(55,"div",35),C(56,Me,3,1,"div",36)(57,Ee,4,1,"div",32),l()()(),C(58,Te,6,2,"div",37),l()()(),C(59,Ie,31,9,"div",38)),t&2){let p;a(6),m("size",16),a(10),m("size",16),a(4),y("(",i.users().length,")"),a(2),m("size",12),a(5),m("size",14),a(),S("ngModel",i.searchTerm),a(2),I(i.activeFilter()?"bg-blue-600 hover:bg-blue-700":"bg-slate-700 hover:bg-slate-600"),a(),m("size",14),a(),h(i.showFilterDropdown()?32:-1),a(),h(i.activeFilter()?33:-1),a(2),h(i.filteredUsers().length===0&&i.users().length>0?35:i.users().length===0?36:37),a(6),m("size",16),a(2),y(" ",(p=i.selectedUser())!=null&&p.id?"Editar Usuario":i.selectedUser()?"Nuevo Usuario":"Informaci\xF3n"," "),a(2),h(i.selectedUser()?45:46),a(5),m("size",16),a(4),y("(",i.selectedUser()?i.selectedUser().roleIds.length:0,")"),a(2),h(i.selectedUser()?56:57),a(2),h(i.selectedUser()?58:-1),a(),h(i.showPasswordModal()?59:-1)}},dependencies:[W,H,J,Q,G,q,O,B],encapsulation:2});let r=d;return r})();export{Je as UserManagementComponent};
