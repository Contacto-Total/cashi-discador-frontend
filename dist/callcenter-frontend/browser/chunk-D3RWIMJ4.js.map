{
  "version": 3,
  "sources": ["src/app/shared/services/theme.service.ts"],
  "sourcesContent": ["import { Injectable, signal, effect } from '@angular/core';\n\nexport type Theme = 'light' | 'dark';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ThemeService {\n  // Signal para el estado del modo oscuro (compatible con web-app-cashi)\n  isDarkMode = signal<boolean>(false);\n\n  constructor() {\n    // Cargar preferencia guardada del localStorage\n    const savedTheme = localStorage.getItem('theme');\n\n    if (savedTheme) {\n      this.isDarkMode.set(savedTheme === 'dark');\n    } else {\n      // Por defecto SIEMPRE modo claro, ignorar preferencia del sistema\n      this.isDarkMode.set(false);\n      localStorage.setItem('theme', 'light');\n    }\n\n    // Effect para aplicar tema cuando cambie el signal\n    effect(() => {\n      const isDark = this.isDarkMode(); // Leer el signal para que el effect lo rastree\n      const theme = isDark ? 'dark' : 'light';\n\n      // IMPORTANTE: Aplicar clase 'dark' a document.documentElement (HTML tag)\n      // Esto es compatible con el CSS de web-app-cashi que usa :root.dark\n      if (isDark) {\n        document.documentElement.classList.add('dark');\n        // Mantener compatibilidad con código legacy que usa body\n        document.body.classList.remove('light-theme');\n        document.body.classList.add('dark-theme');\n      } else {\n        document.documentElement.classList.remove('dark');\n        // Mantener compatibilidad con código legacy que usa body\n        document.body.classList.remove('dark-theme');\n        document.body.classList.add('light-theme');\n      }\n\n      // Actualizar meta tag color-scheme\n      const metaTag = document.querySelector('meta[name=\"color-scheme\"]');\n      if (metaTag) {\n        metaTag.setAttribute('content', theme);\n      }\n\n      // Guardar en localStorage\n      localStorage.setItem('theme', theme);\n    });\n  }\n\n  toggleTheme(): void {\n    this.isDarkMode.update(current => !current);\n  }\n\n  // Métodos de compatibilidad con código existente\n  getCurrentTheme(): Theme {\n    return this.isDarkMode() ? 'dark' : 'light';\n  }\n\n  setTheme(theme: Theme): void {\n    this.isDarkMode.set(theme === 'dark');\n  }\n\n  isDarkTheme(): boolean {\n    return this.isDarkMode();\n  }\n\n  isLightTheme(): boolean {\n    return !this.isDarkMode();\n  }\n}\n"],
  "mappings": ";;;;;;;;;AAOM,IAAO,gBAAP,MAAO,cAAY;EAIvB,cAAA;AAFA,SAAA,aAAa,OAAgB,OAAK,GAAA,YAAA,CAAA,EAAA,WAAA,aAAA,CAAA,IAAA,CAAA,CAAA;AAIhC,UAAM,aAAa,aAAa,QAAQ,OAAO;AAE/C,QAAI,YAAY;AACd,WAAK,WAAW,IAAI,eAAe,MAAM;IAC3C,OAAO;AAEL,WAAK,WAAW,IAAI,KAAK;AACzB,mBAAa,QAAQ,SAAS,OAAO;IACvC;AAGA,WAAO,MAAK;AACV,YAAM,SAAS,KAAK,WAAU;AAC9B,YAAM,QAAQ,SAAS,SAAS;AAIhC,UAAI,QAAQ;AACV,iBAAS,gBAAgB,UAAU,IAAI,MAAM;AAE7C,iBAAS,KAAK,UAAU,OAAO,aAAa;AAC5C,iBAAS,KAAK,UAAU,IAAI,YAAY;MAC1C,OAAO;AACL,iBAAS,gBAAgB,UAAU,OAAO,MAAM;AAEhD,iBAAS,KAAK,UAAU,OAAO,YAAY;AAC3C,iBAAS,KAAK,UAAU,IAAI,aAAa;MAC3C;AAGA,YAAM,UAAU,SAAS,cAAc,2BAA2B;AAClE,UAAI,SAAS;AACX,gBAAQ,aAAa,WAAW,KAAK;MACvC;AAGA,mBAAa,QAAQ,SAAS,KAAK;IACrC,CAAC;EACH;EAEA,cAAW;AACT,SAAK,WAAW,OAAO,aAAW,CAAC,OAAO;EAC5C;;EAGA,kBAAe;AACb,WAAO,KAAK,WAAU,IAAK,SAAS;EACtC;EAEA,SAAS,OAAY;AACnB,SAAK,WAAW,IAAI,UAAU,MAAM;EACtC;EAEA,cAAW;AACT,WAAO,KAAK,WAAU;EACxB;EAEA,eAAY;AACV,WAAO,CAAC,KAAK,WAAU;EACzB;;;mCAjEW,eAAY;AAAA;iFAAZ,eAAY,SAAZ,cAAY,WAAA,YAFX,OAAM,CAAA;AAEd,IAAO,eAAP;;sEAAO,cAAY,CAAA;UAHxB;WAAW;MACV,YAAY;KACb;;;",
  "names": []
}
