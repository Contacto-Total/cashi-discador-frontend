import{a as oe}from"./chunk-OFYONRUO.js";import{a as re}from"./chunk-CM5BVYEH.js";import{a as ie}from"./chunk-R4C6WVMQ.js";import{a as B,c as L}from"./chunk-EPKTI7SR.js";import"./chunk-SLZZG72P.js";import{E as ne,c as q,f as G,g as Y,i as H,k as J,l as U,m as K,s as Q,t as X,u as Z,v as $,w as ee,x as te}from"./chunk-OBYRT3JC.js";import{hc as j,ic as R}from"./chunk-SSYFFSPO.js";import"./chunk-YQKVMPSG.js";import"./chunk-Z6A3ZHGJ.js";import{Ac as F,B as I,Bc as w,Dc as z,Mb as s,Nb as n,Ob as o,Pb as p,Tb as V,Ub as T,Wb as y,Yb as b,_b as c,bb as a,ed as D,fd as W,hb as P,ic as k,mc as d,md as A,na as m,nc as O,nd as N,oa as f,ob as E,oc as x,pc as v,rc as _,sc as u,tb as C,tc as h}from"./chunk-7PKL4QZN.js";function de(l,g){if(l&1&&(n(0,"div",9),p(1,"lucide-angular",10),d(2),o()),l&2){let i=c();a(),s("size",18),a(),x(" ",i.error," ")}}function se(l,g){if(l&1&&(n(0,"div",11),p(1,"div",12),n(2,"p"),d(3),o()()),l&2){let i=c();a(3),O(i.isEditMode?"Cargando...":"Guardando...")}}function ce(l,g){if(l&1&&(n(0,"option",30),d(1),o()),l&2){let i=g.$implicit;s("ngValue",i.id),a(),v(" ",i.tenantCode," - ",i.tenantName," ")}}function ge(l,g){if(l&1&&(n(0,"option",30),d(1),o()),l&2){let i=g.$implicit;s("ngValue",i.id),a(),v(" ",i.portfolioCode," - ",i.portfolioName," ")}}function me(l,g){if(l&1&&(n(0,"option",30),d(1),o()),l&2){let i=g.$implicit;s("ngValue",i.id),a(),v(" ",i.subPortfolioCode," - ",i.subPortfolioName," ")}}function fe(l,g){if(l&1&&(n(0,"option",30),d(1),o()),l&2){let i=g.$implicit;s("ngValue",i.id),a(),x(" ",i.fieldName," ")}}function pe(l,g){if(l&1){let i=y();n(0,"div",62)(1,"h3"),d(2,"Agregar Filtro de Rango"),o(),n(3,"div",63)(4,"div",17)(5,"label",64),d(6,"Campo a Filtrar"),o(),n(7,"select",65),h("ngModelChange",function(e){m(i);let r=c(3);return u(r.selectedFieldId,e)||(r.selectedFieldId=e),f(e)}),n(8,"option",30),d(9,"Seleccione un campo..."),o(),C(10,fe,2,2,"option",31),o()(),n(11,"div",17)(12,"label",66),d(13,"Valor M\xEDnimo"),o(),n(14,"input",67),h("ngModelChange",function(e){m(i);let r=c(3);return u(r.newFilterMinValue,e)||(r.newFilterMinValue=e),f(e)}),o()(),n(15,"div",17)(16,"label",68),d(17,"Valor M\xE1ximo"),o(),n(18,"input",69),h("ngModelChange",function(e){m(i);let r=c(3);return u(r.newFilterMaxValue,e)||(r.newFilterMaxValue=e),f(e)}),o()(),n(19,"div",70)(20,"button",71),b("click",function(){m(i);let e=c(3);return f(e.addFilter())}),p(21,"lucide-angular",72),d(22," Agregar Filtro "),o()()()()}if(l&2){let i=c(3);a(7),_("ngModel",i.selectedFieldId),a(),s("ngValue",0),a(2),s("ngForOf",i.filterableFields),a(4),_("ngModel",i.newFilterMinValue),a(4),_("ngModel",i.newFilterMaxValue),a(3),s("size",18)}}function _e(l,g){l&1&&(n(0,"div",73),p(1,"lucide-angular",74),n(2,"span"),d(3,"No hay campos num\xE9ricos configurados para esta subcartera."),o()()),l&2&&(a(),s("size",20))}function ue(l,g){if(l&1&&(n(0,"div",88)(1,"span",89),d(2,"M\xEDnimo"),o(),n(3,"span",90),d(4),F(5,"number"),o()()),l&2){let i=c().$implicit;a(4),O(w(5,1,i.minValue))}}function he(l,g){l&1&&(n(0,"div",91),p(1,"lucide-angular",92),o()),l&2&&(a(),s("size",20))}function Ce(l,g){if(l&1&&(n(0,"div",88)(1,"span",89),d(2,"M\xE1ximo"),o(),n(3,"span",90),d(4),F(5,"number"),o()()),l&2){let i=c().$implicit;a(4),O(w(5,1,i.maxValue))}}function be(l,g){if(l&1){let i=y();n(0,"div",79)(1,"div",80)(2,"span",81),d(3),o(),n(4,"button",82),b("click",function(){let e=m(i).index,r=c(4);return f(r.removeFilter(e))}),p(5,"lucide-angular",83),o()(),n(6,"div",84)(7,"div",85),C(8,ue,6,3,"div",86)(9,he,2,1,"div",87)(10,Ce,6,3,"div",86),o()()()}if(l&2){let i=g.$implicit;a(3),O(i.fieldName),a(2),s("size",16),a(3),s("ngIf",i.minValue!==void 0&&i.minValue!==null),a(),s("ngIf",i.minValue!==void 0&&i.maxValue!==void 0),a(),s("ngIf",i.maxValue!==void 0&&i.maxValue!==null)}}function Me(l,g){if(l&1&&(n(0,"div",75)(1,"h3"),p(2,"lucide-angular",76),d(3),o(),n(4,"div",77),C(5,be,11,5,"div",78),o()()),l&2){let i=c(3);a(2),s("size",18),a(),x(" Filtros Activos (",i.campaignFilters.length,") "),a(2),s("ngForOf",i.campaignFilters)}}function Pe(l,g){l&1&&(n(0,"div",93),p(1,"lucide-angular",94),n(2,"span"),d(3,"No hay filtros configurados. Agrega filtros para segmentar los contactos de la campa\xF1a."),o()()),l&2&&(a(),s("size",24))}function xe(l,g){if(l&1&&(V(0),C(1,pe,23,6,"div",58)(2,_e,4,1,"div",59)(3,Me,6,3,"div",60)(4,Pe,4,1,"div",61),T()),l&2){let i=c(2);a(),s("ngIf",i.filterableFields.length>0),a(),s("ngIf",i.filterableFields.length===0),a(),s("ngIf",i.campaignFilters.length>0),a(),s("ngIf",i.campaignFilters.length===0&&i.filterableFields.length>0)}}function Oe(l,g){l&1&&(n(0,"div",95),p(1,"lucide-angular",96),n(2,"span"),d(3,"Selecciona una subcartera en la secci\xF3n de Asignaci\xF3n para ver los campos disponibles para filtrar."),o()()),l&2&&(a(),s("size",24))}function ye(l,g){if(l&1){let i=y();n(0,"form",13),b("ngSubmit",function(){m(i);let e=c();return f(e.onSubmit())}),n(1,"div",14)(2,"div",15)(3,"h2"),p(4,"lucide-angular",16),d(5," Informaci\xF3n B\xE1sica "),o(),n(6,"div",17)(7,"label",18),d(8,"Nombre de la Campa\xF1a *"),o(),n(9,"input",19),h("ngModelChange",function(e){m(i);let r=c();return u(r.campaign.name,e)||(r.campaign.name=e),f(e)}),o()(),n(10,"div",17)(11,"label",20),d(12,"Descripci\xF3n"),o(),n(13,"textarea",21),h("ngModelChange",function(e){m(i);let r=c();return u(r.campaign.description,e)||(r.campaign.description=e),f(e)}),o()(),n(14,"div",22)(15,"div",17)(16,"label",23),d(17,"Fecha Inicio"),o(),n(18,"input",24),h("ngModelChange",function(e){m(i);let r=c();return u(r.startDateString,e)||(r.startDateString=e),f(e)}),o()(),n(19,"div",17)(20,"label",25),d(21,"Fecha Fin"),o(),n(22,"input",26),h("ngModelChange",function(e){m(i);let r=c();return u(r.endDateString,e)||(r.endDateString=e),f(e)}),o()()()(),n(23,"div",15)(24,"h2"),p(25,"lucide-angular",27),d(26," Asignaci\xF3n "),o(),n(27,"div",17)(28,"label",28),d(29,"Proveedor *"),o(),n(30,"select",29),h("ngModelChange",function(e){m(i);let r=c();return u(r.selectedTenantId,e)||(r.selectedTenantId=e),f(e)}),b("ngModelChange",function(){m(i);let e=c();return f(e.onTenantChange())}),n(31,"option",30),d(32,"Seleccione un proveedor..."),o(),C(33,ce,2,3,"option",31),o()(),n(34,"div",22)(35,"div",17)(36,"label",32),d(37,"Cartera *"),o(),n(38,"select",33),h("ngModelChange",function(e){m(i);let r=c();return u(r.selectedPortfolioId,e)||(r.selectedPortfolioId=e),f(e)}),b("ngModelChange",function(){m(i);let e=c();return f(e.onPortfolioChange())}),n(39,"option",30),d(40,"Seleccione..."),o(),C(41,ge,2,3,"option",31),o()(),n(42,"div",17)(43,"label",34),d(44,"Subcartera *"),o(),n(45,"select",35),h("ngModelChange",function(e){m(i);let r=c();return u(r.selectedSubPortfolioId,e)||(r.selectedSubPortfolioId=e),f(e)}),b("ngModelChange",function(){m(i);let e=c();return f(e.onSubPortfolioChange())}),n(46,"option",30),d(47,"Seleccione..."),o(),C(48,me,2,3,"option",31),o()()()()(),n(49,"div",36)(50,"h2"),p(51,"lucide-angular",37),d(52," Configuraci\xF3n de Discado "),o(),n(53,"div",38)(54,"div",17)(55,"label",39),d(56,"Modo de Discado"),o(),n(57,"select",40),h("ngModelChange",function(e){m(i);let r=c();return u(r.campaign.dialMode,e)||(r.campaign.dialMode=e),f(e)}),n(58,"option",41),d(59,"Manual"),o(),n(60,"option",42),d(61,"Progresivo"),o(),n(62,"option",43),d(63,"Predictivo"),o()()(),n(64,"div",17)(65,"label",44),d(66,"Intentos M\xE1ximos"),o(),n(67,"input",45),h("ngModelChange",function(e){m(i);let r=c();return u(r.campaign.maxAttempts,e)||(r.campaign.maxAttempts=e),f(e)}),o()(),n(68,"div",17)(69,"label",46),d(70,"Intervalo de Reintento (min)"),o(),n(71,"input",47),h("ngModelChange",function(e){m(i);let r=c();return u(r.campaign.retryInterval,e)||(r.campaign.retryInterval=e),f(e)}),o()(),n(72,"div",17)(73,"label",48),d(74,"Intensidad de Llamadas"),o(),n(75,"input",49),h("ngModelChange",function(e){m(i);let r=c();return u(r.campaign.intensidad,e)||(r.campaign.intensidad=e),f(e)}),o(),n(76,"small"),d(77,"Llamadas simult\xE1neas (1-100)"),o()()()(),n(78,"div",50)(79,"h2"),p(80,"lucide-angular",51),d(81," Filtros de Segmentaci\xF3n por Rango "),o(),C(82,xe,5,4,"ng-container",52)(83,Oe,4,1,"ng-template",null,0,z),o(),n(85,"div",53)(86,"button",54),b("click",function(){m(i);let e=c();return f(e.onCancel())}),p(87,"lucide-angular",55),d(88," Cancelar "),o(),n(89,"button",56),p(90,"lucide-angular",57),d(91),o()()()}if(l&2){let i=k(84),t=c();a(4),s("size",20),a(5),_("ngModel",t.campaign.name),a(4),_("ngModel",t.campaign.description),a(5),_("ngModel",t.startDateString),a(4),_("ngModel",t.endDateString),a(3),s("size",20),a(5),_("ngModel",t.selectedTenantId),a(),s("ngValue",0),a(2),s("ngForOf",t.tenants),a(5),_("ngModel",t.selectedPortfolioId),s("disabled",t.selectedTenantId===0),a(),s("ngValue",0),a(2),s("ngForOf",t.portfolios),a(4),_("ngModel",t.selectedSubPortfolioId),s("disabled",t.selectedPortfolioId===0),a(),s("ngValue",0),a(2),s("ngForOf",t.subPortfolios),a(3),s("size",20),a(6),_("ngModel",t.campaign.dialMode),a(10),_("ngModel",t.campaign.maxAttempts),a(4),_("ngModel",t.campaign.retryInterval),a(4),_("ngModel",t.campaign.intensidad),a(5),s("size",20),a(2),s("ngIf",t.selectedSubPortfolioId>0)("ngIfElse",i),a(5),s("size",16),a(2),s("disabled",t.loading),a(),s("name",t.isEditMode?"save":"plus-circle")("size",16),a(),x(" ",t.isEditMode?"Actualizar Campa\xF1a":"Crear Campa\xF1a"," ")}}var Ae=(()=>{let g=class g{constructor(t,e,r,M,S){this.campaignService=t,this.tenantService=e,this.portfolioService=r,this.router=M,this.route=S,this.campaign={name:"",description:"",status:"DRAFT",dialMode:"PROGRESSIVE",maxAttempts:3,retryInterval:60,intensidad:50,tenantId:void 0,portfolioId:void 0,subPortfolioId:void 0},this.isEditMode=!1,this.loading=!1,this.error=null,this.campaignId=null,this.tenants=[],this.portfolios=[],this.subPortfolios=[],this.selectedTenantId=0,this.selectedPortfolioId=0,this.selectedSubPortfolioId=0,this.startDateString="",this.endDateString="",this.filterableFields=[],this.campaignFilters=[],this.selectedFieldId=0,this.newFilterMinValue=null,this.newFilterMaxValue=null}ngOnInit(){this.loadTenants(),this.route.params.subscribe(t=>{t.id&&(this.isEditMode=!0,this.campaignId=+t.id,this.loadCampaign(this.campaignId))})}loadTenants(){this.tenantService.getAllTenants().subscribe({next:t=>{this.tenants=t.filter(e=>e.isActive)},error:t=>console.error("Error loading tenants:",t)})}onTenantChange(){this.selectedPortfolioId=0,this.selectedSubPortfolioId=0,this.portfolios=[],this.subPortfolios=[],this.selectedTenantId>0&&this.portfolioService.getPortfoliosByTenant(this.selectedTenantId).subscribe({next:t=>{this.portfolios=t.filter(e=>e.isActive)},error:t=>console.error("Error loading portfolios:",t)})}onPortfolioChange(){this.selectedSubPortfolioId=0,this.subPortfolios=[],this.filterableFields=[],this.selectedPortfolioId>0&&this.portfolioService.getSubPortfoliosByPortfolio(this.selectedPortfolioId).subscribe({next:t=>{this.subPortfolios=t.filter(e=>e.isActive)},error:t=>console.error("Error loading sub-portfolios:",t)})}onSubPortfolioChange(){this.filterableFields=[],this.selectedSubPortfolioId>0&&this.loadFilterableFields(this.selectedSubPortfolioId)}loadFilterableFields(t){this.campaignService.getFilterableFieldsBySubcartera(t).subscribe({next:e=>{this.filterableFields=e,console.log("Campos filtrables cargados:",e)},error:e=>console.error("Error loading filterable fields:",e)})}loadCampaignFilters(t){this.campaignService.getCampaignFilters(t).subscribe({next:e=>{this.campaignFilters=e,console.log("Filtros de campa\xF1a cargados:",e)},error:e=>console.error("Error loading campaign filters:",e)})}addFilter(){if(this.selectedFieldId===0){this.error="Seleccione un campo para filtrar";return}if(this.newFilterMinValue===null&&this.newFilterMaxValue===null){this.error="Ingrese al menos un valor (m\xEDnimo o m\xE1ximo)";return}let t=this.filterableFields.find(r=>r.id===this.selectedFieldId);if(!t)return;let e={fieldDefinitionId:t.id,fieldCode:t.fieldCode,fieldName:t.fieldName,minValue:this.newFilterMinValue??void 0,maxValue:this.newFilterMaxValue??void 0};this.campaignFilters.push(e),this.selectedFieldId=0,this.newFilterMinValue=null,this.newFilterMaxValue=null,this.error=null}removeFilter(t){this.campaignFilters.splice(t,1)}getFieldNameByCode(t){return this.filterableFields.find(r=>r.fieldCode===t)?.fieldName||t}loadCampaign(t){this.loading=!0,this.campaignService.getCampaignById(t).subscribe({next:e=>{console.log("\u2705 Campaign loaded:",e),this.campaign=e,e.startDate&&(this.startDateString=this.toDateTimeLocal(e.startDate)),e.endDate&&(this.endDateString=this.toDateTimeLocal(e.endDate)),e.tenantId&&e.portfolioId&&e.subPortfolioId?(console.log("\u{1F4CB} Loading cascading data for edit mode...",{tenantId:e.tenantId,portfolioId:e.portfolioId,subPortfolioId:e.subPortfolioId}),I({portfolios:this.portfolioService.getPortfoliosByTenant(e.tenantId),subPortfolios:this.portfolioService.getSubPortfoliosByPortfolio(e.portfolioId)}).subscribe({next:r=>{this.portfolios=r.portfolios.filter(M=>M.isActive),this.subPortfolios=r.subPortfolios.filter(M=>M.isActive),console.log("\u2705 Data loaded, now setting selected values:",{portfolios:this.portfolios.length,subPortfolios:this.subPortfolios.length,selectedTenant:e.tenantId,selectedPortfolio:e.portfolioId,selectedSubPortfolio:e.subPortfolioId}),this.selectedTenantId=e.tenantId||0,this.selectedPortfolioId=e.portfolioId||0,this.selectedSubPortfolioId=e.subPortfolioId||0,console.log("\u2705 Selected values assigned:",{selectedTenantId:this.selectedTenantId,selectedPortfolioId:this.selectedPortfolioId,selectedSubPortfolioId:this.selectedSubPortfolioId}),e.subPortfolioId&&this.loadFilterableFields(e.subPortfolioId),e.id&&this.loadCampaignFilters(e.id),this.loading=!1},error:r=>{console.error("\u274C Error loading portfolios/subportfolios:",r),this.error="Error al cargar portfolios/subportfolios",this.loading=!1}})):(console.warn("\u26A0\uFE0F Missing tenant/portfolio/subportfolio IDs"),this.loading=!1)},error:e=>{console.error("\u274C Error loading campaign:",e),this.error="Error al cargar la campa\xF1a",this.loading=!1}})}onSubmit(){if(!this.campaign.name){this.error="El nombre de la campa\xF1a es requerido";return}if(!this.selectedSubPortfolioId||this.selectedSubPortfolioId===0){this.error="Debe seleccionar una subcartera";return}this.campaign.tenantId=this.selectedTenantId,this.campaign.portfolioId=this.selectedPortfolioId,this.campaign.subPortfolioId=this.selectedSubPortfolioId,this.startDateString&&(this.campaign.startDate=this.startDateString),this.endDateString&&(this.campaign.endDate=this.endDateString),this.loading=!0,this.error=null,this.isEditMode&&this.campaignId?this.campaignService.updateCampaign(this.campaignId,this.campaign).subscribe({next:()=>{this.saveFiltersAndNavigate(this.campaignId)},error:t=>{console.error("Error updating campaign:",t),this.error="Error al actualizar la campa\xF1a",this.loading=!1}}):this.campaignService.createCampaign(this.campaign).subscribe({next:t=>{let e=t.id||t;e?this.saveFiltersAndNavigate(e):(console.error("No se pudo obtener el ID de la campa\xF1a creada"),this.router.navigate(["/admin/campaigns"]))},error:t=>{console.error("Error creating campaign:",t),this.error="Error al crear la campa\xF1a",this.loading=!1}})}saveFiltersAndNavigate(t){console.log("\u{1F4E4} Enviando filtros para campa\xF1a",t,":",this.campaignFilters),console.log("\u{1F4CB} Cantidad de filtros a enviar:",this.campaignFilters.length),this.campaignFilters.forEach((e,r)=>{console.log(`  Filtro[${r}]:`,e.fieldCode,e.fieldName,"min:",e.minValue,"max:",e.maxValue)}),this.campaignService.saveCampaignFilters(t,this.campaignFilters).subscribe({next:e=>{console.log("\u2705 Filtros guardados correctamente, respuesta:",e),this.router.navigate(["/admin/campaigns"])},error:e=>{console.error("Error guardando filtros:",e),this.router.navigate(["/admin/campaigns"])}})}onCancel(){this.router.navigate(["/admin/campaigns"])}toDateTimeLocal(t){let e=new Date(t),r=e.getFullYear(),M=String(e.getMonth()+1).padStart(2,"0"),S=String(e.getDate()).padStart(2,"0"),ae=String(e.getHours()).padStart(2,"0"),le=String(e.getMinutes()).padStart(2,"0");return`${r}-${M}-${S}T${ae}:${le}`}};g.\u0275fac=function(e){return new(e||g)(P(ie),P(oe),P(re),P(L),P(B))},g.\u0275cmp=E({type:g,selectors:[["app-campaign-form"]],decls:12,vars:7,consts:[["noSubcartera",""],[1,"campaign-form-container"],[1,"form-header"],[1,"header-icon",3,"name","size"],[1,"btn-back",3,"click"],["name","arrow-left",3,"size"],["class","error-message",4,"ngIf"],["class","loading-state",4,"ngIf"],["class","form-content",3,"ngSubmit",4,"ngIf"],[1,"error-message"],["name","x-circle",3,"size"],[1,"loading-state"],[1,"spinner"],[1,"form-content",3,"ngSubmit"],[1,"top-sections"],[1,"form-section"],["name","file-text",3,"size"],[1,"form-group"],["for","name"],["type","text","id","name","name","name","placeholder","Ej: Campa\xF1a Cobranza Enero 2025","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","description"],["id","description","name","description","placeholder","Descripci\xF3n breve de la campa\xF1a...","rows","2",1,"form-textarea",3,"ngModelChange","ngModel"],[1,"form-row"],["for","startDate"],["type","datetime-local","id","startDate","name","startDate",1,"form-input",3,"ngModelChange","ngModel"],["for","endDate"],["type","datetime-local","id","endDate","name","endDate",1,"form-input",3,"ngModelChange","ngModel"],["name","building-2",3,"size"],["for","tenant"],["id","tenant","name","tenant","required","",1,"form-select",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["for","portfolio"],["id","portfolio","name","portfolio","required","",1,"form-select",3,"ngModelChange","ngModel","disabled"],["for","subportfolio"],["id","subportfolio","name","subportfolio","required","",1,"form-select",3,"ngModelChange","ngModel","disabled"],[1,"form-section","full-width","dial-config-section"],["name","phone-call",3,"size"],[1,"dial-config-grid"],["for","dialMode"],["id","dialMode","name","dialMode",1,"form-select",3,"ngModelChange","ngModel"],["value","MANUAL"],["value","PROGRESSIVE"],["value","PREDICTIVE"],["for","maxAttempts"],["type","number","id","maxAttempts","name","maxAttempts","min","1","max","10",1,"form-input",3,"ngModelChange","ngModel"],["for","retryInterval"],["type","number","id","retryInterval","name","retryInterval","min","1",1,"form-input",3,"ngModelChange","ngModel"],["for","intensidad"],["type","number","id","intensidad","name","intensidad","min","1","max","100","placeholder","50",1,"form-input",3,"ngModelChange","ngModel"],[1,"form-section","full-width","filters-section"],["name","filter",3,"size"],[4,"ngIf","ngIfElse"],[1,"form-actions"],["type","button",1,"btn-cancel",3,"click"],["name","x",3,"size"],["type","submit",1,"btn-submit",3,"disabled"],[3,"name","size"],["class","filter-add-section",4,"ngIf"],["class","no-fields-message",4,"ngIf"],["class","filters-list",4,"ngIf"],["class","no-filters-message",4,"ngIf"],[1,"filter-add-section"],[1,"filter-add-grid"],["for","filterField"],["id","filterField","name","filterField",1,"form-select","form-select-lg",3,"ngModelChange","ngModel"],["for","minValue"],["type","number","id","minValue","name","minValue","placeholder","Ej: 400",1,"form-input","form-input-lg",3,"ngModelChange","ngModel"],["for","maxValue"],["type","number","id","maxValue","name","maxValue","placeholder","Ej: 1000",1,"form-input","form-input-lg",3,"ngModelChange","ngModel"],[1,"form-group","filter-btn-container"],["type","button",1,"btn-add-filter",3,"click"],["name","plus",3,"size"],[1,"no-fields-message"],["name","info",3,"size"],[1,"filters-list"],["name","list-filter",3,"size"],[1,"filter-cards"],["class","filter-card",4,"ngFor","ngForOf"],[1,"filter-card"],[1,"filter-card-header"],[1,"filter-field-name"],["type","button","title","Eliminar filtro",1,"btn-remove-filter",3,"click"],["name","trash-2",3,"size"],[1,"filter-card-body"],[1,"range-display"],["class","range-value",4,"ngIf"],["class","range-separator",4,"ngIf"],[1,"range-value"],[1,"range-label"],[1,"range-number"],[1,"range-separator"],["name","arrow-right",3,"size"],[1,"no-filters-message"],["name","filter-x",3,"size"],[1,"select-subcartera-message"],["name","alert-circle",3,"size"]],template:function(e,r){e&1&&(n(0,"div",1)(1,"div",2)(2,"h1"),p(3,"lucide-angular",3),d(4),o(),n(5,"button",4),b("click",function(){return r.onCancel()}),p(6,"lucide-angular",5),n(7,"span"),d(8,"Volver"),o()()(),C(9,de,3,2,"div",6)(10,se,4,1,"div",7)(11,ye,92,30,"form",8),o()),e&2&&(a(3),s("name",r.isEditMode?"pencil":"plus-circle")("size",24),a(),x(" ",r.isEditMode?"Editar Campa\xF1a":"Nueva Campa\xF1a"," "),a(2),s("size",16),a(3),s("ngIf",r.error),a(),s("ngIf",r.loading),a(),s("ngIf",!r.loading))},dependencies:[N,D,W,ne,U,X,Z,q,K,Q,G,Y,te,ee,$,J,H,R,j,A],styles:[".campaign-form-container[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;padding:1.5rem 2rem;min-height:100vh;background:linear-gradient(to bottom right,#0f172a,#1e293b,#0f172a)}.form-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem}.form-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem;color:#f8fafc;margin:0;display:flex;align-items:center;gap:.75rem;font-weight:600}.header-icon[_ngcontent-%COMP%]{color:#60a5fa}.btn-back[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem 1rem;background:#334155;border:1px solid #475569;border-radius:6px;cursor:pointer;font-size:.9rem;color:#e2e8f0;transition:all .2s}.btn-back[_ngcontent-%COMP%]:hover{background:#475569}.error-message[_ngcontent-%COMP%]{background:#fef2f2;border:1px solid #fca5a5;color:#991b1b;padding:.75rem 1rem;border-radius:6px;margin-bottom:1rem;display:flex;align-items:center;gap:.5rem;font-size:.9rem}.loading-state[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:#e2e8f0}.spinner[_ngcontent-%COMP%]{border:3px solid #334155;border-top:3px solid #3b82f6;border-radius:50%;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.form-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.top-sections[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}.form-section[_ngcontent-%COMP%]{background:#1e293b;border:1px solid #334155;border-radius:8px;padding:1.25rem}.form-section.full-width[_ngcontent-%COMP%]{width:100%}.form-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1rem;color:#f8fafc;margin:0 0 1rem;font-weight:600;display:flex;align-items:center;gap:.5rem;padding-bottom:.75rem;border-bottom:1px solid #334155}.form-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   lucide-angular[_ngcontent-%COMP%]{color:#60a5fa}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.form-group[_ngcontent-%COMP%]:last-child{margin-bottom:0}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:500;color:#94a3b8;margin-bottom:.4rem;font-size:.85rem}.form-input[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%]{width:100%;padding:.625rem .75rem;border:1px solid #475569;background:#0f172a;color:#f8fafc;border-radius:6px;font-size:.95rem;transition:border-color .2s,box-shadow .2s}.form-input[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f633}.form-input[_ngcontent-%COMP%]:disabled, .form-select[_ngcontent-%COMP%]:disabled{background:#1e293b;color:#64748b;cursor:not-allowed;opacity:.6}.form-textarea[_ngcontent-%COMP%]{resize:vertical;min-height:60px}.form-group[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;margin-top:.3rem;color:#64748b;font-size:.75rem}.form-input-lg[_ngcontent-%COMP%], .form-select-lg[_ngcontent-%COMP%]{padding:.75rem 1rem;font-size:1rem}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}.dial-config-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1e293b,#0f172a)}.dial-config-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:1rem}.filters-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1e293b,#172033);border:2px solid #334155}.filters-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1rem;border-bottom:2px solid #3b82f6}.filter-add-section[_ngcontent-%COMP%]{background:#0f172a;padding:1.25rem;border-radius:8px;margin-bottom:1.5rem;border:1px solid #334155}.filter-add-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.95rem;color:#e2e8f0;margin:0 0 1rem;font-weight:500}.filter-add-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr 1fr auto;gap:1rem;align-items:end}.filter-btn-container[_ngcontent-%COMP%]{display:flex;align-items:flex-end}.btn-add-filter[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1.25rem;background:linear-gradient(135deg,#10b981,#059669);color:#fff;border:none;border-radius:6px;cursor:pointer;font-weight:600;font-size:.9rem;transition:all .2s;white-space:nowrap}.btn-add-filter[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#059669,#047857);transform:translateY(-1px)}.no-fields-message[_ngcontent-%COMP%], .no-filters-message[_ngcontent-%COMP%], .select-subcartera-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;color:#94a3b8;font-size:.95rem;padding:1.25rem;background:#0f172a;border-radius:8px;border:1px dashed #475569}.no-fields-message[_ngcontent-%COMP%]   lucide-angular[_ngcontent-%COMP%], .no-filters-message[_ngcontent-%COMP%]   lucide-angular[_ngcontent-%COMP%], .select-subcartera-message[_ngcontent-%COMP%]   lucide-angular[_ngcontent-%COMP%]{color:#64748b;flex-shrink:0}.filters-list[_ngcontent-%COMP%]{margin-top:1.5rem}.filters-list[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.95rem;color:#e2e8f0;margin:0 0 1rem;font-weight:500;display:flex;align-items:center;gap:.5rem}.filters-list[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   lucide-angular[_ngcontent-%COMP%]{color:#60a5fa}.filter-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1rem}.filter-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1e3a5f,#1e293b);border:1px solid #3b82f6;border-radius:10px;overflow:hidden;transition:all .2s}.filter-card[_ngcontent-%COMP%]:hover{border-color:#60a5fa;box-shadow:0 4px 12px #3b82f633}.filter-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.75rem 1rem;background:#3b82f61a;border-bottom:1px solid #334155}.filter-field-name[_ngcontent-%COMP%]{font-weight:600;color:#60a5fa;font-size:.95rem}.btn-remove-filter[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:32px;height:32px;background:transparent;border:1px solid #475569;border-radius:6px;cursor:pointer;color:#94a3b8;transition:all .2s}.btn-remove-filter[_ngcontent-%COMP%]:hover{background:#ef4444;border-color:#ef4444;color:#fff}.filter-card-body[_ngcontent-%COMP%]{padding:1rem}.range-display[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:1rem}.range-value[_ngcontent-%COMP%]{text-align:center;flex:1}.range-label[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:#64748b;text-transform:uppercase;letter-spacing:.5px;margin-bottom:.25rem}.range-number[_ngcontent-%COMP%]{display:block;font-size:1.5rem;font-weight:700;color:#f8fafc;font-family:SF Mono,Monaco,monospace}.range-separator[_ngcontent-%COMP%]{color:#64748b;padding:0 .5rem}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;padding:1.25rem;background:#1e293b;border:1px solid #334155;border-radius:8px}.btn-cancel[_ngcontent-%COMP%], .btn-submit[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1.5rem;border-radius:6px;font-weight:600;font-size:.95rem;cursor:pointer;transition:all .2s;border:none}.btn-cancel[_ngcontent-%COMP%]{background:#334155;color:#e2e8f0;border:1px solid #475569}.btn-cancel[_ngcontent-%COMP%]:hover{background:#475569}.btn-submit[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb);color:#fff}.btn-submit[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#2563eb,#1d4ed8);transform:translateY(-1px)}.btn-submit[_ngcontent-%COMP%]:disabled{background:#475569;cursor:not-allowed;transform:none}@media (max-width: 1200px){.dial-config-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.filter-add-grid[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}.filter-btn-container[_ngcontent-%COMP%]{grid-column:span 2}.btn-add-filter[_ngcontent-%COMP%]{width:100%;justify-content:center}}@media (max-width: 900px){.top-sections[_ngcontent-%COMP%]{grid-template-columns:1fr}.campaign-form-container[_ngcontent-%COMP%]{padding:1rem}}@media (max-width: 768px){.form-row[_ngcontent-%COMP%], .dial-config-grid[_ngcontent-%COMP%], .filter-add-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.filter-btn-container[_ngcontent-%COMP%]{grid-column:span 1}.filter-cards[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.btn-cancel[_ngcontent-%COMP%], .btn-submit[_ngcontent-%COMP%]{width:100%;justify-content:center}}body.light-theme[_nghost-%COMP%]   .campaign-form-container[_ngcontent-%COMP%], body.light-theme   [_nghost-%COMP%]   .campaign-form-container[_ngcontent-%COMP%]{background:linear-gradient(to bottom right,#f8fafc,#f1f5f9,#e2e8f0)}body.light-theme[_nghost-%COMP%]   .form-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], body.light-theme   [_nghost-%COMP%]   .form-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#1e293b}body.light-theme[_nghost-%COMP%]   .btn-back[_ngcontent-%COMP%], body.light-theme   [_nghost-%COMP%]   .btn-back[_ngcontent-%COMP%]{background:#e2e8f0;border-color:#cbd5e1;color:#475569}body.light-theme[_nghost-%COMP%]   .btn-back[_ngcontent-%COMP%]:hover, body.light-theme   [_nghost-%COMP%]   .btn-back[_ngcontent-%COMP%]:hover{background:#cbd5e1}body.light-theme[_nghost-%COMP%]   .form-section[_ngcontent-%COMP%], body.light-theme   [_nghost-%COMP%]   .form-section[_ngcontent-%COMP%]{background:#fff;border-color:#e2e8f0}body.light-theme[_nghost-%COMP%]   .form-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], body.light-theme   [_nghost-%COMP%]   .form-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#1e293b;border-bottom-color:#e2e8f0}body.light-theme[_nghost-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], body.light-theme   [_nghost-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#64748b}body.light-theme[_nghost-%COMP%]   .form-input[_ngcontent-%COMP%], body.light-theme   [_nghost-%COMP%]   .form-input[_ngcontent-%COMP%], body.light-theme[_nghost-%COMP%]   .form-select[_ngcontent-%COMP%], body.light-theme   [_nghost-%COMP%]   .form-select[_ngcontent-%COMP%], body.light-theme[_nghost-%COMP%]   .form-textarea[_ngcontent-%COMP%], body.light-theme   [_nghost-%COMP%]   .form-textarea[_ngcontent-%COMP%]{background:#f8fafc;border-color:#cbd5e1;color:#1e293b}body.light-theme[_nghost-%COMP%]   .form-group[_ngcontent-%COMP%]   small[_ngcontent-%COMP%], body.light-theme   [_nghost-%COMP%]   .form-group[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#94a3b8}body.light-theme[_nghost-%COMP%]   .dial-config-section[_ngcontent-%COMP%], body.light-theme   [_nghost-%COMP%]   .dial-config-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#f8fafc)}body.light-theme[_nghost-%COMP%]   .filters-section[_ngcontent-%COMP%], body.light-theme   [_nghost-%COMP%]   .filters-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#f8fafc);border-color:#cbd5e1}body.light-theme[_nghost-%COMP%]   .filters-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], body.light-theme   [_nghost-%COMP%]   .filters-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{border-bottom-color:#3b82f6}body.light-theme[_nghost-%COMP%]   .filter-add-section[_ngcontent-%COMP%], body.light-theme   [_nghost-%COMP%]   .filter-add-section[_ngcontent-%COMP%]{background:#f1f5f9;border-color:#e2e8f0}body.light-theme[_nghost-%COMP%]   .filter-add-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], body.light-theme   [_nghost-%COMP%]   .filter-add-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#1e293b}body.light-theme[_nghost-%COMP%]   .no-fields-message[_ngcontent-%COMP%], body.light-theme   [_nghost-%COMP%]   .no-fields-message[_ngcontent-%COMP%], body.light-theme[_nghost-%COMP%]   .no-filters-message[_ngcontent-%COMP%], body.light-theme   [_nghost-%COMP%]   .no-filters-message[_ngcontent-%COMP%], body.light-theme[_nghost-%COMP%]   .select-subcartera-message[_ngcontent-%COMP%], body.light-theme   [_nghost-%COMP%]   .select-subcartera-message[_ngcontent-%COMP%]{background:#f8fafc;color:#64748b;border-color:#cbd5e1}body.light-theme[_nghost-%COMP%]   .filters-list[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], body.light-theme   [_nghost-%COMP%]   .filters-list[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#1e293b}body.light-theme[_nghost-%COMP%]   .filter-card[_ngcontent-%COMP%], body.light-theme   [_nghost-%COMP%]   .filter-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#eff6ff,#fff);border-color:#3b82f6}body.light-theme[_nghost-%COMP%]   .filter-card-header[_ngcontent-%COMP%], body.light-theme   [_nghost-%COMP%]   .filter-card-header[_ngcontent-%COMP%]{background:#3b82f61a;border-bottom-color:#e2e8f0}body.light-theme[_nghost-%COMP%]   .filter-field-name[_ngcontent-%COMP%], body.light-theme   [_nghost-%COMP%]   .filter-field-name[_ngcontent-%COMP%]{color:#2563eb}body.light-theme[_nghost-%COMP%]   .btn-remove-filter[_ngcontent-%COMP%], body.light-theme   [_nghost-%COMP%]   .btn-remove-filter[_ngcontent-%COMP%]{border-color:#cbd5e1;color:#64748b}body.light-theme[_nghost-%COMP%]   .range-label[_ngcontent-%COMP%], body.light-theme   [_nghost-%COMP%]   .range-label[_ngcontent-%COMP%]{color:#64748b}body.light-theme[_nghost-%COMP%]   .range-number[_ngcontent-%COMP%], body.light-theme   [_nghost-%COMP%]   .range-number[_ngcontent-%COMP%]{color:#1e293b}body.light-theme[_nghost-%COMP%]   .range-separator[_ngcontent-%COMP%], body.light-theme   [_nghost-%COMP%]   .range-separator[_ngcontent-%COMP%]{color:#94a3b8}body.light-theme[_nghost-%COMP%]   .form-actions[_ngcontent-%COMP%], body.light-theme   [_nghost-%COMP%]   .form-actions[_ngcontent-%COMP%]{background:#fff;border-color:#e2e8f0}body.light-theme[_nghost-%COMP%]   .btn-cancel[_ngcontent-%COMP%], body.light-theme   [_nghost-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{background:#f1f5f9;border-color:#cbd5e1;color:#475569}body.light-theme[_nghost-%COMP%]   .btn-cancel[_ngcontent-%COMP%]:hover, body.light-theme   [_nghost-%COMP%]   .btn-cancel[_ngcontent-%COMP%]:hover{background:#e2e8f0}body.light-theme[_nghost-%COMP%]   .loading-state[_ngcontent-%COMP%], body.light-theme   [_nghost-%COMP%]   .loading-state[_ngcontent-%COMP%]{color:#475569}body.light-theme[_nghost-%COMP%]   .spinner[_ngcontent-%COMP%], body.light-theme   [_nghost-%COMP%]   .spinner[_ngcontent-%COMP%]{border-color:#e2e8f0;border-top-color:#3b82f6}"]});let l=g;return l})();export{Ae as CampaignFormComponent};
