import{A as R,E as U,c as q,f as A,k as O}from"./chunk-YEUR475X.js";import{Ob as F,Pb as D}from"./chunk-4F672BDH.js";import{a as j}from"./chunk-DF6EJM3T.js";import{Ac as I,Cc as w,Mb as l,Nb as e,Ob as t,Pb as u,Yb as p,_b as g,bb as n,da as v,dd as P,ed as N,fd as z,ha as y,hb as _,jd as M,ld as T,mc as r,nc as c,ob as L,oc as h,rc as S,sc as C,tb as x,tc as E,td as k}from"./chunk-QOPKCBWK.js";var B=(()=>{let a=class a{constructor(i){this.http=i,this.baseUrl=j.scraperServiceUrl||"http://localhost:8090"}queryPhoneLines(i){return this.http.post(`${this.baseUrl}/api/v1/phone-lines/query`,i)}queryPhoneLinesForceRefresh(i){return this.http.post(`${this.baseUrl}/api/v1/phone-lines/query/refresh`,i)}queryPhoneLinesByDocument(i){return this.http.get(`${this.baseUrl}/api/v1/phone-lines/query/${i}`)}};a.\u0275fac=function(s){return new(s||a)(y(k))},a.\u0275prov=v({token:a,factory:a.\u0275fac,providedIn:"root"});let o=a;return o})();function $(o,a){o&1&&(e(0,"div",20),u(1,"div",21),e(2,"p",22),r(3,"Consultando OSIPTEL..."),t(),e(4,"p",23),r(5,"Esto puede tomar unos segundos"),t()())}function V(o,a){if(o&1&&(e(0,"div",24),u(1,"lucide-angular",25),e(2,"div")(3,"p",26),r(4,"Error en la consulta"),t(),e(5,"p",27),r(6),t()()()),o&2){let m=g();n(),l("size",24),n(5),c(m.error)}}function G(o,a){o&1&&(e(0,"div",43),u(1,"lucide-angular",44),e(2,"p",22),r(3,"No se encontraron l\xEDneas telef\xF3nicas asociadas a este documento"),t()()),o&2&&(n(),l("size",48))}function J(o,a){if(o&1&&(e(0,"tr",51)(1,"td",52),r(2),t(),e(3,"td",53)(4,"div",54),u(5,"lucide-angular",55),e(6,"span",56),r(7),t()()(),e(8,"td",53)(9,"div",54),u(10,"lucide-angular",57),e(11,"span",58),r(12),t()()(),e(13,"td",53)(14,"span",59),r(15),t()()()),o&2){let m=a.$implicit,i=a.index,s=g(3);n(2),c(i+1),n(3),l("size",16),n(2),c(m.phoneNumber),n(3),l("name",s.getModalityIcon(m.modality))("size",16),n(2),c(m.modality),n(2),l("ngClass",s.getCarrierColor(m.carrier)),n(),h(" ",m.carrier," ")}}function K(o,a){if(o&1&&(e(0,"div",45)(1,"table",46)(2,"thead",47)(3,"tr")(4,"th",48),r(5,"#"),t(),e(6,"th",48),r(7,"N\xFAmero"),t(),e(8,"th",48),r(9,"Modalidad"),t(),e(10,"th",48),r(11,"Operadora"),t()()(),e(12,"tbody",49),x(13,J,16,8,"tr",50),t()()()),o&2){let m=g(2);n(13),l("ngForOf",m.response.phoneLines)}}function Q(o,a){if(o&1&&(e(0,"div",28)(1,"div",29)(2,"div",30)(3,"div",31)(4,"div",32),u(5,"lucide-angular",33),t(),e(6,"div")(7,"p",34),r(8,"Documento"),t(),e(9,"p",35),r(10),t(),e(11,"span",36),r(12),t()()(),e(13,"div",37)(14,"div",38)(15,"p",39),r(16),t(),e(17,"p",34),r(18,"L\xEDneas encontradas"),t()()()()(),x(19,G,4,1,"div",40)(20,K,14,1,"div",41),e(21,"div",42),r(22),I(23,"date"),t()()),o&2){let m=g();n(5),l("size",24),n(5),c(m.response.documentNumber),n(2),c(m.response.documentType),n(4),c(m.response.totalLines),n(3),l("ngIf",m.response.phoneLines.length===0),n(),l("ngIf",m.response.phoneLines.length>0),n(2),h(" Consulta realizada: ",w(23,7,m.response.queryDate,"dd/MM/yyyy HH:mm:ss")," ")}}var oe=(()=>{let a=class a{constructor(i){this.phoneLineService=i,this.documentNumber="",this.isLoading=!1,this.response=null,this.error=null}search(){if(!this.documentNumber||this.documentNumber.length<8){this.error="Ingrese un documento v\xE1lido (m\xEDnimo 8 d\xEDgitos)";return}this.isLoading=!0,this.error=null,this.response=null,this.phoneLineService.queryPhoneLines({documentNumber:this.documentNumber}).subscribe({next:i=>{this.response=i,this.isLoading=!1},error:i=>{this.error=i?.error?.message||"Error al consultar las l\xEDneas telef\xF3nicas",this.isLoading=!1}})}forceRefresh(){if(!this.documentNumber||this.documentNumber.length<8){this.error="Ingrese un documento v\xE1lido (m\xEDnimo 8 d\xEDgitos)";return}this.isLoading=!0,this.error=null,this.response=null,this.phoneLineService.queryPhoneLinesForceRefresh({documentNumber:this.documentNumber}).subscribe({next:i=>{this.response=i,this.isLoading=!1},error:i=>{this.error=i?.error?.message||"Error al consultar las l\xEDneas telef\xF3nicas",this.isLoading=!1}})}clearResults(){this.documentNumber="",this.response=null,this.error=null}getCarrierColor(i){let s=i?.toLowerCase()||"";return s.includes("claro")?"bg-red-100 text-red-700 border-red-300":s.includes("movistar")?"bg-blue-100 text-blue-700 border-blue-300":s.includes("entel")?"bg-orange-100 text-orange-700 border-orange-300":s.includes("bitel")?"bg-green-100 text-green-700 border-green-300":"bg-gray-100 text-gray-700 border-gray-300"}getModalityIcon(i){let s=i?.toLowerCase()||"";return s.includes("prepago")?"credit-card":s.includes("postpago")?"file-text":s.includes("control")?"sliders":"smartphone"}};a.\u0275fac=function(s){return new(s||a)(_(B))},a.\u0275cmp=L({type:a,selectors:[["app-phone-lines-page"]],decls:27,vars:11,consts:[[1,"min-h-screen","bg-slate-950","p-4"],[1,"flex","items-center","gap-2","mb-4"],[1,"w-8","h-8","bg-gradient-to-br","from-cyan-600","to-blue-700","rounded-lg","flex","items-center","justify-center"],["name","smartphone",1,"text-white",3,"size"],[1,"text-lg","font-bold","text-white"],[1,"text-xs","text-gray-400"],[1,"bg-slate-800","rounded-lg","p-4","mb-4","border","border-slate-700"],[1,"flex","flex-wrap","gap-3","items-end"],[1,"flex-1","min-w-[200px]"],[1,"block","text-sm","font-medium","text-gray-300","mb-1"],["type","text","placeholder","Ingrese DNI o CE","maxlength","12",1,"w-full","h-10","px-3","text-sm","border","border-slate-600","rounded-lg","bg-slate-700","text-white","placeholder:text-slate-400","focus:ring-2","focus:ring-cyan-500","focus:border-transparent","transition-colors",3,"ngModelChange","keyup.enter","ngModel"],["type","button",1,"h-10","px-4","text-sm","font-medium","text-white","bg-gradient-to-r","from-cyan-600","to-blue-700","hover:from-cyan-700","hover:to-blue-800","rounded-lg","transition-all","duration-200","disabled:opacity-50","disabled:cursor-not-allowed","flex","items-center","gap-2",3,"click","disabled"],["name","search",3,"size"],["type","button","title","Forzar nueva consulta (ignorar cache)",1,"h-10","px-4","text-sm","font-medium","text-white","bg-gradient-to-r","from-orange-500","to-orange-600","hover:from-orange-600","hover:to-orange-700","rounded-lg","transition-all","duration-200","disabled:opacity-50","disabled:cursor-not-allowed","flex","items-center","gap-2",3,"click","disabled"],["name","refresh-cw",3,"size"],["type","button",1,"h-10","px-4","text-sm","font-medium","text-gray-300","bg-slate-700","hover:bg-slate-600","rounded-lg","transition-all","duration-200","flex","items-center","gap-2",3,"click"],["name","x",3,"size"],["class","bg-slate-800 rounded-lg p-8 border border-slate-700 flex flex-col items-center justify-center",4,"ngIf"],["class","bg-red-900/30 rounded-lg p-4 border border-red-700 flex items-center gap-3",4,"ngIf"],["class","space-y-4",4,"ngIf"],[1,"bg-slate-800","rounded-lg","p-8","border","border-slate-700","flex","flex-col","items-center","justify-center"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-cyan-500","mb-4"],[1,"text-gray-400"],[1,"text-xs","text-gray-500","mt-1"],[1,"bg-red-900/30","rounded-lg","p-4","border","border-red-700","flex","items-center","gap-3"],["name","alert-circle",1,"text-red-400",3,"size"],[1,"text-red-300","font-medium"],[1,"text-red-400","text-sm"],[1,"space-y-4"],[1,"bg-slate-800","rounded-lg","p-4","border","border-slate-700"],[1,"flex","flex-wrap","items-center","justify-between","gap-4"],[1,"flex","items-center","gap-4"],[1,"w-12","h-12","bg-gradient-to-br","from-cyan-600","to-blue-700","rounded-full","flex","items-center","justify-center"],["name","user",1,"text-white",3,"size"],[1,"text-gray-400","text-sm"],[1,"text-white","text-lg","font-bold"],[1,"text-xs","px-2","py-0.5","rounded","bg-slate-700","text-gray-300"],[1,"flex","items-center","gap-6"],[1,"text-center"],[1,"text-3xl","font-bold","text-cyan-400"],["class","bg-slate-800 rounded-lg p-8 border border-slate-700 text-center",4,"ngIf"],["class","bg-slate-800 rounded-lg border border-slate-700 overflow-hidden",4,"ngIf"],[1,"text-center","text-xs","text-gray-500"],[1,"bg-slate-800","rounded-lg","p-8","border","border-slate-700","text-center"],["name","phone-off",1,"text-gray-500","mx-auto","mb-4",3,"size"],[1,"bg-slate-800","rounded-lg","border","border-slate-700","overflow-hidden"],[1,"w-full"],[1,"bg-slate-900"],[1,"px-4","py-3","text-left","text-xs","font-medium","text-gray-400","uppercase","tracking-wider"],[1,"divide-y","divide-slate-700"],["class","hover:bg-slate-700/50 transition-colors",4,"ngFor","ngForOf"],[1,"hover:bg-slate-700/50","transition-colors"],[1,"px-4","py-3","text-sm","text-gray-400"],[1,"px-4","py-3"],[1,"flex","items-center","gap-2"],["name","phone",1,"text-cyan-400",3,"size"],[1,"text-white","font-medium"],[1,"text-gray-400",3,"name","size"],[1,"text-gray-300"],[1,"px-2","py-1","text-xs","font-medium","rounded-full","border",3,"ngClass"]],template:function(s,d){s&1&&(e(0,"div",0)(1,"div",1)(2,"div",2),u(3,"lucide-angular",3),t(),e(4,"div")(5,"h1",4),r(6,"Consulta de L\xEDneas Telef\xF3nicas"),t(),e(7,"p",5),r(8,"Consulta l\xEDneas asociadas a un documento (OSIPTEL)"),t()()(),e(9,"div",6)(10,"div",7)(11,"div",8)(12,"label",9),r(13,"N\xFAmero de Documento"),t(),e(14,"input",10),E("ngModelChange",function(b){return C(d.documentNumber,b)||(d.documentNumber=b),b}),p("keyup.enter",function(){return d.search()}),t()(),e(15,"button",11),p("click",function(){return d.search()}),u(16,"lucide-angular",12),r(17),t(),e(18,"button",13),p("click",function(){return d.forceRefresh()}),u(19,"lucide-angular",14),r(20," Actualizar "),t(),e(21,"button",15),p("click",function(){return d.clearResults()}),u(22,"lucide-angular",16),r(23," Limpiar "),t()()(),x(24,$,6,0,"div",17)(25,V,7,2,"div",18)(26,Q,24,10,"div",19),t()),s&2&&(n(3),l("size",16),n(11),S("ngModel",d.documentNumber),n(),l("disabled",d.isLoading||!d.documentNumber),n(),l("size",16),n(),h(" ",d.isLoading?"Consultando...":"Consultar"," "),n(),l("disabled",d.isLoading||!d.documentNumber),n(),l("size",16),n(3),l("size",16),n(2),l("ngIf",d.isLoading),n(),l("ngIf",d.error&&!d.isLoading),n(),l("ngIf",d.response&&!d.isLoading))},dependencies:[T,P,N,z,U,q,A,R,O,D,F,M],encapsulation:2});let o=a;return o})();export{oe as PhoneLinesPageComponent};
