import{a as ae}from"./chunk-A45DFSUZ.js";import{a as re}from"./chunk-6LMWXMMV.js";import{e as E,n as oe}from"./chunk-ZPBCWMNR.js";import{E as ie,c as J,f as K,k as X,s as ee,t as te,u as ne}from"./chunk-E2JO3TS2.js";import{lc as Y,mc as q}from"./chunk-RTTQIKVQ.js";import{a as Z}from"./chunk-YQKVMPSG.js";import{b as O,c as H}from"./chunk-72Z2NTOL.js";import{Ac as S,Kb as s,Lb as t,Mb as n,Nb as p,Rb as z,Sb as F,Ub as j,Wb as x,Yb as f,ab as r,ac as k,ba as B,bc as I,bd as G,cc as D,cd as N,dd as U,fa as V,gb as w,hc as R,ic as L,kc as o,kd as $,lc as h,ld as Q,ma as T,mc as u,na as A,nb as W,pc as v,qc as _,rc as P,sb as y,yc as C,zc as M}from"./chunk-BDAG5FYU.js";var le=(()=>{let m=class m{constructor(e){this.http=e,this.apiUrl=`${Z.apiUrl}/reports`}getDashboardStats(){return this.http.get(`${this.apiUrl}/dashboard`)}getCallsByHour(e,l){let a=new O;return e&&(a=a.set("date",e.toISOString())),l&&(a=a.set("campaignId",l.toString())),this.http.get(`${this.apiUrl}/calls-by-hour`,{params:a})}getAgentPerformance(e,l,a){let c=new O;return e&&(c=c.set("dateFrom",e.toISOString())),l&&(c=c.set("dateTo",l.toISOString())),a&&(c=c.set("agentId",a.toString())),this.http.get(`${this.apiUrl}/agent-performance`,{params:c})}getCampaignStats(e){return this.http.get(`${this.apiUrl}/campaign-stats/${e}`)}getAllCampaignStats(e,l){let a=new O;return e&&(a=a.set("dateFrom",e.toISOString())),l&&(a=a.set("dateTo",l.toISOString())),this.http.get(`${this.apiUrl}/campaign-stats`,{params:a})}getAgentProductivity(e,l,a,c,g){let b=new O().set("fechaInicio",e).set("fechaFin",l);return a&&(b=b.set("tenantId",a.toString())),c&&(b=b.set("carteraId",c.toString())),g&&(b=b.set("subcarteraId",g.toString())),this.http.get(`${this.apiUrl}/agent-productivity`,{params:b})}};m.\u0275fac=function(l){return new(l||m)(V(H))},m.\u0275prov=B({token:m,factory:m.\u0275fac,providedIn:"root"});let d=m;return d})();var ce=["barChart"],me=["lineChart"],ge=["doughnutChart"];function pe(d,m){if(d&1&&(t(0,"option",12),o(1),n()),d&2){let i=m.$implicit;s("ngValue",i.id),r(),h(i.tenantName)}}function ue(d,m){if(d&1&&(t(0,"option",12),o(1),n()),d&2){let i=m.$implicit;s("ngValue",i.id),r(),h(i.portfolioName)}}function he(d,m){if(d&1&&(t(0,"option",12),o(1),n()),d&2){let i=m.$implicit;s("ngValue",i.id),r(),h(i.subPortfolioName)}}function fe(d,m){if(d&1){let i=j();z(0),t(1,"div",10)(2,"label"),o(3,"Desde"),n(),t(4,"input",28),P("ngModelChange",function(l){T(i);let a=f();return _(a.customDateFrom,l)||(a.customDateFrom=l),A(l)}),n()(),t(5,"div",10)(6,"label"),o(7,"Hasta"),n(),t(8,"input",28),P("ngModelChange",function(l){T(i);let a=f();return _(a.customDateTo,l)||(a.customDateTo=l),A(l)}),n()(),F()}if(d&2){let i=f();r(4),v("ngModel",i.customDateFrom),r(4),v("ngModel",i.customDateTo)}}function be(d,m){d&1&&(t(0,"div",29)(1,"div",30),p(2,"lucide-angular",31),t(3,"span"),o(4,"Cargando datos..."),n()()()),d&2&&(r(2),s("size",32))}function ye(d,m){if(d&1&&(t(0,"div",32),p(1,"lucide-angular",33),t(2,"span"),o(3),n()()),d&2){let i=f();r(),s("size",20),r(2),h(i.error)}}function Ce(d,m){if(d&1&&(t(0,"span",89),o(1),n()),d&2){let i=f().$implicit;r(),u(" ",i.promesasPendientes," Pend. ")}}function ve(d,m){if(d&1&&(t(0,"span",90),o(1),n()),d&2){let i=f().$implicit;r(),u(" ",i.promesasPagadas," Pag. ")}}function _e(d,m){if(d&1&&(t(0,"span",91),o(1),n()),d&2){let i=f().$implicit;r(),u(" ",i.promesasVencidas," Venc. ")}}function Pe(d,m){if(d&1&&(t(0,"tr")(1,"td",62)(2,"span",72),o(3),n()(),t(4,"td",63)(5,"div",73)(6,"div",74),p(7,"lucide-angular",75),n(),t(8,"span",76),o(9),n()()(),t(10,"td",64),o(11),C(12,"number"),n(),t(13,"td",64)(14,"span",77),o(15),C(16,"number"),n()(),t(17,"td",65),o(18),n(),t(19,"td",65),o(20),n(),t(21,"td",65),o(22),n(),t(23,"td",78)(24,"div",79),p(25,"div",80),t(26,"span",81),o(27),C(28,"number"),n()()(),t(29,"td",78)(30,"div",82),p(31,"div",80),t(32,"span",81),o(33),C(34,"number"),n()()(),t(35,"td",68)(36,"div",83),y(37,Ce,2,1,"span",84)(38,ve,2,1,"span",85)(39,_e,2,1,"span",86),n()(),t(40,"td",69)(41,"div",87),p(42,"lucide-angular",88),n()()()),d&2){let i=m.$implicit,e=f(2);r(2),L("top-3",i.ranking<=3),r(),h(i.ranking),r(4),s("size",16),r(2),h(i.nombreAgente),r(2),h(M(12,22,i.totalGestiones)),r(4),h(M(16,24,i.totalPromesas)),r(3),u("S/ ",e.formatMoney(i.montoPromesas)),r(2),u("S/ ",e.formatMoney(i.proyeccion)),r(2),u("S/ ",e.formatMoney(i.recaudo)),r(3),R("width",e.Math.min(i.efectividadProyeccion,100),"%"),r(2),u("",S(28,26,i.efectividadProyeccion,"1.0-0"),"%"),r(4),R("width",e.Math.min(i.efectividadGeneral,100),"%"),r(2),u("",S(34,29,i.efectividadGeneral,"1.0-0"),"%"),r(4),s("ngIf",i.promesasPendientes>0),r(),s("ngIf",i.promesasPagadas>0),r(),s("ngIf",i.promesasVencidas>0),r(2),s("ngClass",e.getTrendClass(i.trend)),r(),s("name",e.getTrendIcon(i.trend))("size",16)}}function xe(d,m){d&1&&(t(0,"div",92),p(1,"lucide-angular",93),t(2,"p"),o(3,"No hay datos de agentes para el periodo seleccionado"),n()()),d&2&&(r(),s("size",48))}function Me(d,m){if(d&1&&(z(0),t(1,"div",34)(2,"div",35)(3,"div",36),p(4,"lucide-angular",37),n(),t(5,"div",38)(6,"span",39),o(7),C(8,"number"),n(),t(9,"span",40),o(10,"Total Gestiones"),n(),t(11,"span",41),o(12),n()()(),t(13,"div",35)(14,"div",42),p(15,"lucide-angular",43),n(),t(16,"div",38)(17,"span",39),o(18),C(19,"number"),n(),t(20,"span",40),o(21,"Promesas Generadas"),n(),t(22,"span",41),o(23),n()()(),t(24,"div",35)(25,"div",44),p(26,"lucide-angular",45),n(),t(27,"div",38)(28,"span",39),o(29),n(),t(30,"span",40),o(31,"Monto Comprometido"),n(),t(32,"span",41),o(33),n()()(),t(34,"div",35)(35,"div",46),p(36,"lucide-angular",47),n(),t(37,"div",38)(38,"span",39),o(39),C(40,"number"),n(),t(41,"span",40),o(42,"% Efectividad Proyecci\xF3n"),n(),t(43,"span",41),o(44),n()()(),t(45,"div",35)(46,"div",48),p(47,"lucide-angular",49),n(),t(48,"div",38)(49,"span",39),o(50),C(51,"number"),n(),t(52,"span",40),o(53,"% Efectividad General"),n(),t(54,"span",41),o(55),n()()()(),t(56,"div",50)(57,"div",51)(58,"div",52)(59,"h3"),o(60,"Top Agentes por Promesas"),n(),t(61,"span",53),o(62),n()(),t(63,"div",54),p(64,"canvas",null,0),n()(),t(66,"div",51)(67,"div",52)(68,"h3"),o(69,"Tendencia de Promesas"),n(),t(70,"span",53),o(71,"Por dia"),n()(),t(72,"div",54),p(73,"canvas",null,1),n()(),t(75,"div",55)(76,"div",52)(77,"h3"),o(78,"Distribucion de Tipificaciones"),n(),t(79,"span",53),o(80,"Por categoria"),n()(),t(81,"div",56),p(82,"canvas",null,2),n()()(),t(84,"div",57)(85,"div",58)(86,"h3"),o(87,"Detalle por Agente"),n(),t(88,"span",59),o(89),n()(),t(90,"div",60)(91,"table",61)(92,"thead")(93,"tr")(94,"th",62),o(95,"#"),n(),t(96,"th",63),o(97,"Agente"),n(),t(98,"th",64),o(99,"Gestiones"),n(),t(100,"th",64),o(101,"Promesas"),n(),t(102,"th",65),o(103,"Monto Promesas"),n(),t(104,"th",65),o(105,"Proyecci\xF3n"),n(),t(106,"th",65),o(107,"Recaudo"),n(),t(108,"th",66),o(109,"% Efectividad Proyecci\xF3n"),n(),t(110,"th",67),o(111,"% Efectividad General"),n(),t(112,"th",68),o(113,"Estado Promesas"),n(),t(114,"th",69),o(115,"Tendencia"),n()()(),t(116,"tbody"),y(117,Pe,43,32,"tr",70),n()()(),y(118,xe,4,1,"div",71),n(),F()),d&2){let i=f();r(4),s("size",24),r(3),h(M(8,24,i.summary==null?null:i.summary.totalGestiones)),r(4),s("ngClass",i.getChangeClass(i.summary==null?null:i.summary.cambioGestiones)),r(),u(" ",i.formatPercent(i.summary==null?null:i.summary.cambioGestiones)," "),r(3),s("size",24),r(3),h(M(19,26,i.summary==null?null:i.summary.totalPromesas)),r(4),s("ngClass",i.getChangeClass(i.summary==null?null:i.summary.cambioPromesas)),r(),u(" ",i.formatPercent(i.summary==null?null:i.summary.cambioPromesas)," "),r(3),s("size",24),r(3),u("S/ ",i.formatMoney((i.summary==null?null:i.summary.montoTotalPromesas)||0)),r(3),s("ngClass",i.getChangeClass(i.summary==null?null:i.summary.cambioMonto)),r(),u(" ",i.formatPercent(i.summary==null?null:i.summary.cambioMonto)," "),r(3),s("size",24),r(3),u("",S(40,28,i.summary==null?null:i.summary.efectividadProyeccion,"1.1-1"),"%"),r(4),s("ngClass",i.getChangeClass(i.summary==null?null:i.summary.cambioEfectividadProyeccion)),r(),u(" ",i.formatPercent(i.summary==null?null:i.summary.cambioEfectividadProyeccion)," "),r(3),s("size",24),r(3),u("",S(51,31,i.summary==null?null:i.summary.efectividadGeneral,"1.1-1"),"%"),r(4),s("ngClass",i.getChangeClass(i.summary==null?null:i.summary.cambioEfectividadGeneral)),r(),u(" ",i.formatPercent(i.summary==null?null:i.summary.cambioEfectividadGeneral)," "),r(7),h(i.getPeriodLabel()),r(27),u("",i.agents.length," agentes"),r(28),s("ngForOf",i.agents),r(),s("ngIf",i.agents.length===0)}}E.register(...oe);var Be=(()=>{let m=class m{constructor(e,l,a){this.reportService=e,this.tenantService=l,this.portfolioService=a,this.Math=Math,this.tenants=[],this.portfolios=[],this.subPortfolios=[],this.selectedTenantId=null,this.selectedCarteraId=null,this.selectedSubcarteraId=null,this.selectedPeriod="today",this.customDateFrom="",this.customDateTo="",this.loading=!1,this.error=null,this.productivityData=null,this.barChart=null,this.lineChart=null,this.doughnutChart=null,this.subscriptions=[]}ngOnInit(){this.loadTenants(),this.setDefaultDates(),this.loadData()}ngAfterViewInit(){}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe()),this.destroyCharts()}setDefaultDates(){let e=new Date;this.customDateTo=this.formatDate(e),this.customDateFrom=this.formatDate(e)}formatDate(e){return e.toISOString().split("T")[0]}getDateRange(){let e=new Date,l,a=e;switch(this.selectedPeriod){case"today":l=e;break;case"week":l=new Date(e),l.setDate(e.getDate()-7);break;case"month":l=new Date(e.getFullYear(),e.getMonth(),1);break;case"lastMonth":l=new Date(e.getFullYear(),e.getMonth()-1,1),a=new Date(e.getFullYear(),e.getMonth(),0);break;case"year":l=new Date(e.getFullYear(),0,1);break;case"custom":return{fechaInicio:this.customDateFrom,fechaFin:this.customDateTo};default:l=e}return{fechaInicio:this.formatDate(l),fechaFin:this.formatDate(a)}}loadTenants(){this.tenantService.getAllTenants().subscribe({next:e=>{this.tenants=e},error:e=>{console.error("Error loading tenants:",e)}})}onTenantChange(){this.portfolios=[],this.subPortfolios=[],this.selectedCarteraId=null,this.selectedSubcarteraId=null,this.selectedTenantId&&this.portfolioService.getPortfoliosByTenant(this.selectedTenantId).subscribe({next:e=>{this.portfolios=e},error:e=>{console.error("Error loading portfolios:",e)}})}onCarteraChange(){this.subPortfolios=[],this.selectedSubcarteraId=null,this.selectedCarteraId&&this.portfolioService.getActiveSubPortfoliosByPortfolio(this.selectedCarteraId).subscribe({next:e=>{this.subPortfolios=e},error:e=>{console.error("Error loading subportfolios:",e)}})}onPeriodChange(){this.selectedPeriod!=="custom"&&this.loadData()}loadData(){this.loading=!0,this.error=null;let{fechaInicio:e,fechaFin:l}=this.getDateRange();this.reportService.getAgentProductivity(e,l,this.selectedTenantId||void 0,this.selectedCarteraId||void 0,this.selectedSubcarteraId||void 0).subscribe({next:a=>{this.productivityData=a,this.loading=!1,setTimeout(()=>this.initCharts(),100)},error:a=>{console.error("Error loading productivity data:",a),this.error="Error al cargar los datos de productividad",this.loading=!1}})}destroyCharts(){this.barChart&&(this.barChart.destroy(),this.barChart=null),this.lineChart&&(this.lineChart.destroy(),this.lineChart=null),this.doughnutChart&&(this.doughnutChart.destroy(),this.doughnutChart=null)}initCharts(){this.destroyCharts(),this.productivityData?.chartData&&(this.initBarChart(),this.initLineChart(),this.initDoughnutChart())}initBarChart(){if(!this.barChartRef?.nativeElement||!this.productivityData?.chartData.topAgentesPorPromesas)return;let e=this.productivityData.chartData.topAgentesPorPromesas,l=document.body.classList.contains("dark-theme");this.barChart=new E(this.barChartRef.nativeElement,{type:"bar",data:{labels:e.map(a=>this.truncateName(a.nombre)),datasets:[{label:"Promesas",data:e.map(a=>a.cantidad),backgroundColor:"rgba(59, 130, 246, 0.8)",borderColor:"rgb(59, 130, 246)",borderWidth:1,borderRadius:4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:a=>{let c=e[a.dataIndex];return[`Promesas: ${c.cantidad}`,`Monto: S/ ${c.monto.toLocaleString()}`]}}}},scales:{y:{beginAtZero:!0,ticks:{color:l?"#94a3b8":"#64748b"},grid:{color:l?"rgba(148, 163, 184, 0.1)":"rgba(0, 0, 0, 0.1)"}},x:{ticks:{color:l?"#94a3b8":"#64748b",maxRotation:45,minRotation:45},grid:{display:!1}}}}})}initLineChart(){if(!this.lineChartRef?.nativeElement||!this.productivityData?.chartData.promesasPorDia)return;let e=this.productivityData.chartData.promesasPorDia,l=document.body.classList.contains("dark-theme");this.lineChart=new E(this.lineChartRef.nativeElement,{type:"line",data:{labels:e.map(a=>this.formatChartDate(a.fecha)),datasets:[{label:"Promesas",data:e.map(a=>a.cantidad),borderColor:"rgb(16, 185, 129)",backgroundColor:"rgba(16, 185, 129, 0.1)",fill:!0,tension:.3,pointRadius:4,pointHoverRadius:6}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:a=>{let c=e[a.dataIndex];return[`Promesas: ${c.cantidad}`,`Monto: S/ ${c.monto.toLocaleString()}`]}}}},scales:{y:{beginAtZero:!0,ticks:{color:l?"#94a3b8":"#64748b"},grid:{color:l?"rgba(148, 163, 184, 0.1)":"rgba(0, 0, 0, 0.1)"}},x:{ticks:{color:l?"#94a3b8":"#64748b"},grid:{display:!1}}}}})}initDoughnutChart(){if(!this.doughnutChartRef?.nativeElement||!this.productivityData?.chartData.tipificacionesDistribucion)return;let e=this.productivityData.chartData.tipificacionesDistribucion,l=Object.keys(e),a=Object.values(e),c=document.body.classList.contains("dark-theme"),g=["rgba(59, 130, 246, 0.8)","rgba(16, 185, 129, 0.8)","rgba(245, 158, 11, 0.8)","rgba(239, 68, 68, 0.8)","rgba(139, 92, 246, 0.8)","rgba(236, 72, 153, 0.8)","rgba(20, 184, 166, 0.8)","rgba(251, 146, 60, 0.8)"];this.doughnutChart=new E(this.doughnutChartRef.nativeElement,{type:"doughnut",data:{labels:l.map(b=>this.truncateName(b,20)),datasets:[{data:a,backgroundColor:g.slice(0,l.length),borderWidth:2,borderColor:c?"#1e293b":"#ffffff"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{color:c?"#e2e8f0":"#334155",padding:12,usePointStyle:!0,pointStyle:"circle"}}}}})}truncateName(e,l=15){return e?e.length>l?e.substring(0,l)+"...":e:""}formatChartDate(e){return new Date(e).toLocaleDateString("es-PE",{day:"2-digit",month:"short"})}get summary(){return this.productivityData?.summary||null}get agents(){return this.productivityData?.agents||[]}formatMoney(e){return e?.toLocaleString("es-PE",{minimumFractionDigits:2,maximumFractionDigits:2})||"0.00"}formatPercent(e){return e==null?"0%":`${e>0?"+":""}${e.toFixed(1)}%`}getTrendIcon(e){switch(e){case"up":return"trending-up";case"down":return"trending-down";default:return"minus"}}getTrendClass(e){switch(e){case"up":return"trend-up";case"down":return"trend-down";default:return"trend-stable"}}getChangeClass(e){return e?e>0?"change-positive":e<0?"change-negative":"":""}getPeriodLabel(){switch(this.selectedPeriod){case"today":return"Hoy";case"week":return"\xDAltimos 7 d\xEDas";case"month":return"Este mes";case"lastMonth":return"Mes anterior";case"year":return"Este a\xF1o";case"custom":return"Personalizado";default:return""}}};m.\u0275fac=function(l){return new(l||m)(w(le),w(ae),w(re))},m.\u0275cmp=W({type:m,selectors:[["app-agent-productivity"]],viewQuery:function(l,a){if(l&1&&(k(ce,5),k(me,5),k(ge,5)),l&2){let c;I(c=D())&&(a.barChartRef=c.first),I(c=D())&&(a.lineChartRef=c.first),I(c=D())&&(a.doughnutChartRef=c.first)}},decls:58,vars:19,consts:[["barChart",""],["lineChart",""],["doughnutChart",""],[1,"productivity-container"],[1,"page-header"],[1,"header-content"],[1,"header-icon"],["name","bar-chart-3",3,"size"],[1,"filters-section"],[1,"filters-row"],[1,"filter-group"],[3,"ngModelChange","change","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngModelChange","change","ngModel","disabled"],[3,"ngModelChange","ngModel","disabled"],["value","today"],["value","week"],["value","month"],["value","lastMonth"],["value","year"],["value","custom"],[4,"ngIf"],[1,"filter-group","filter-action"],[1,"btn-primary",3,"click","disabled"],["name","search",3,"size"],["class","loading-overlay",4,"ngIf"],["class","error-message",4,"ngIf"],["type","date",3,"ngModelChange","ngModel"],[1,"loading-overlay"],[1,"loading-spinner"],["name","loader",1,"spin",3,"size"],[1,"error-message"],["name","alert-circle",3,"size"],[1,"kpi-grid"],[1,"kpi-card"],[1,"kpi-icon","blue"],["name","clipboard-list",3,"size"],[1,"kpi-content"],[1,"kpi-value"],[1,"kpi-label"],[1,"kpi-change",3,"ngClass"],[1,"kpi-icon","green"],["name","handshake",3,"size"],[1,"kpi-icon","purple"],["name","banknote",3,"size"],[1,"kpi-icon","orange"],["name","percent",3,"size"],[1,"kpi-icon","teal"],["name","target",3,"size"],[1,"charts-grid"],[1,"chart-card"],[1,"chart-header"],[1,"chart-subtitle"],[1,"chart-container"],[1,"chart-card","chart-full"],[1,"chart-container","doughnut-container"],[1,"table-card"],[1,"table-header"],[1,"agent-count"],[1,"table-wrapper"],[1,"agents-table"],[1,"col-rank"],[1,"col-agent"],[1,"col-num"],[1,"col-money"],["title","(Recaudo / Proyecci\xF3n) \xD7 100",1,"col-pct"],["title","(Promesas / Gestiones) \xD7 100",1,"col-pct"],[1,"col-status"],[1,"col-trend"],[4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],[1,"rank-badge"],[1,"agent-info"],[1,"agent-avatar"],["name","user",3,"size"],[1,"agent-name"],[1,"promesas-badge"],[1,"col-pct"],[1,"efectividad-bar"],[1,"bar-fill"],[1,"bar-label"],[1,"efectividad-bar","efectividad-general"],[1,"status-pills"],["class","pill pending",4,"ngIf"],["class","pill paid",4,"ngIf"],["class","pill overdue",4,"ngIf"],[1,"trend-indicator",3,"ngClass"],[3,"name","size"],[1,"pill","pending"],[1,"pill","paid"],[1,"pill","overdue"],[1,"empty-state"],["name","users",3,"size"]],template:function(l,a){l&1&&(t(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6),p(4,"lucide-angular",7),n(),t(5,"div")(6,"h1"),o(7,"Productividad de Agentes"),n(),t(8,"p"),o(9,"Analiza el rendimiento y las promesas generadas por cada agente"),n()()()(),t(10,"div",8)(11,"div",9)(12,"div",10)(13,"label"),o(14,"Inquilino"),n(),t(15,"select",11),P("ngModelChange",function(g){return _(a.selectedTenantId,g)||(a.selectedTenantId=g),g}),x("change",function(){return a.onTenantChange()}),t(16,"option",12),o(17,"Todos"),n(),y(18,pe,2,2,"option",13),n()(),t(19,"div",10)(20,"label"),o(21,"Cartera"),n(),t(22,"select",14),P("ngModelChange",function(g){return _(a.selectedCarteraId,g)||(a.selectedCarteraId=g),g}),x("change",function(){return a.onCarteraChange()}),t(23,"option",12),o(24,"Todas"),n(),y(25,ue,2,2,"option",13),n()(),t(26,"div",10)(27,"label"),o(28,"Subcartera"),n(),t(29,"select",15),P("ngModelChange",function(g){return _(a.selectedSubcarteraId,g)||(a.selectedSubcarteraId=g),g}),t(30,"option",12),o(31,"Todas"),n(),y(32,he,2,2,"option",13),n()(),t(33,"div",10)(34,"label"),o(35,"Periodo"),n(),t(36,"select",11),P("ngModelChange",function(g){return _(a.selectedPeriod,g)||(a.selectedPeriod=g),g}),x("change",function(){return a.onPeriodChange()}),t(37,"option",16),o(38,"Hoy"),n(),t(39,"option",17),o(40,"Ultimos 7 dias"),n(),t(41,"option",18),o(42,"Este mes"),n(),t(43,"option",19),o(44,"Mes anterior"),n(),t(45,"option",20),o(46,"Este anio"),n(),t(47,"option",21),o(48,"Personalizado"),n()()(),y(49,fe,9,2,"ng-container",22),t(50,"div",23)(51,"button",24),x("click",function(){return a.loadData()}),p(52,"lucide-angular",25),t(53,"span"),o(54,"Buscar"),n()()()()(),y(55,be,5,1,"div",26)(56,ye,4,2,"div",27)(57,Me,119,34,"ng-container",22),n()),l&2&&(r(4),s("size",24),r(11),v("ngModel",a.selectedTenantId),r(),s("ngValue",null),r(2),s("ngForOf",a.tenants),r(4),v("ngModel",a.selectedCarteraId),s("disabled",!a.selectedTenantId),r(),s("ngValue",null),r(2),s("ngForOf",a.portfolios),r(4),v("ngModel",a.selectedSubcarteraId),s("disabled",!a.selectedCarteraId),r(),s("ngValue",null),r(2),s("ngForOf",a.subPortfolios),r(4),v("ngModel",a.selectedPeriod),r(13),s("ngIf",a.selectedPeriod==="custom"),r(2),s("disabled",a.loading),r(),s("size",16),r(3),s("ngIf",a.loading),r(),s("ngIf",a.error),r(),s("ngIf",!a.loading&&!a.error&&a.productivityData))},dependencies:[Q,G,N,U,ie,te,ne,J,ee,K,X,q,Y,$],styles:[".productivity-container[_ngcontent-%COMP%]{padding:1.5rem;max-width:1600px;margin:0 auto}.page-header[_ngcontent-%COMP%]{margin-bottom:1.5rem}.header-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.header-icon[_ngcontent-%COMP%]{width:48px;height:48px;background:linear-gradient(135deg,#3b82f6,#1d4ed8);border-radius:12px;display:flex;align-items:center;justify-content:center;color:#fff}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:var(--text-primary, #1e293b);margin:0}.header-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-secondary, #64748b);margin:.25rem 0 0}.filters-section[_ngcontent-%COMP%]{background:var(--card-bg, white);border-radius:12px;padding:1rem 1.25rem;margin-bottom:1.5rem;border:1px solid var(--border-color, #e2e8f0)}.filters-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;align-items:flex-end}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.375rem;min-width:140px}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.75rem;font-weight:500;color:var(--text-secondary, #64748b);text-transform:uppercase;letter-spacing:.05em}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .filter-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:38px;padding:0 .75rem;border:1px solid var(--border-color, #e2e8f0);border-radius:8px;background:var(--input-bg, white);color:var(--text-primary, #1e293b);font-size:.875rem}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.filter-action[_ngcontent-%COMP%]{margin-left:auto}.btn-primary[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;height:38px;padding:0 1rem;background:linear-gradient(135deg,#3b82f6,#1d4ed8);color:#fff;border:none;border-radius:8px;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 12px #3b82f659}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.loading-overlay[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:4rem}.loading-spinner[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem;color:var(--text-secondary, #64748b)}.spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:1rem 1.25rem;background:#fef2f2;border:1px solid #fecaca;border-radius:8px;color:#dc2626;margin-bottom:1.5rem}.kpi-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:1rem;margin-bottom:1.5rem}.kpi-card[_ngcontent-%COMP%]{background:var(--card-bg, white);border-radius:12px;padding:1.25rem;border:1px solid var(--border-color, #e2e8f0);display:flex;gap:1rem;align-items:flex-start}.kpi-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.kpi-icon.blue[_ngcontent-%COMP%]{background:#3b82f61a;color:#3b82f6}.kpi-icon.green[_ngcontent-%COMP%]{background:#10b9811a;color:#10b981}.kpi-icon.purple[_ngcontent-%COMP%]{background:#8b5cf61a;color:#8b5cf6}.kpi-icon.orange[_ngcontent-%COMP%]{background:#f59e0b1a;color:#f59e0b}.kpi-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.kpi-value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:var(--text-primary, #1e293b);line-height:1.2}.kpi-label[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-secondary, #64748b);margin-top:.25rem}.kpi-change[_ngcontent-%COMP%]{font-size:.75rem;font-weight:500;margin-top:.5rem}.change-positive[_ngcontent-%COMP%]{color:#10b981}.change-negative[_ngcontent-%COMP%]{color:#ef4444}.charts-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem;margin-bottom:1.5rem}.chart-card[_ngcontent-%COMP%]{background:var(--card-bg, white);border-radius:12px;padding:1.25rem;border:1px solid var(--border-color, #e2e8f0)}.chart-card.chart-full[_ngcontent-%COMP%]{grid-column:1 / -1}.chart-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.chart-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--text-primary, #1e293b);margin:0}.chart-subtitle[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-secondary, #64748b)}.chart-container[_ngcontent-%COMP%]{height:280px;position:relative}.doughnut-container[_ngcontent-%COMP%]{height:320px;max-width:600px;margin:0 auto}.table-card[_ngcontent-%COMP%]{background:var(--card-bg, white);border-radius:12px;border:1px solid var(--border-color, #e2e8f0);overflow:hidden}.table-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem 1.25rem;border-bottom:1px solid var(--border-color, #e2e8f0)}.table-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--text-primary, #1e293b);margin:0}.agent-count[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-secondary, #64748b);background:var(--bg-secondary, #f1f5f9);padding:.25rem .75rem;border-radius:9999px}.table-wrapper[_ngcontent-%COMP%]{overflow-x:auto}.agents-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.agents-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left;padding:.75rem 1rem;font-size:.7rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;color:var(--text-secondary, #64748b);background:var(--bg-secondary, #f8fafc);border-bottom:1px solid var(--border-color, #e2e8f0)}.agents-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.875rem 1rem;font-size:.875rem;color:var(--text-primary, #1e293b);border-bottom:1px solid var(--border-color, #e2e8f0)}.agents-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:var(--bg-hover, #f8fafc)}.col-rank[_ngcontent-%COMP%]{width:50px;text-align:center}.col-agent[_ngcontent-%COMP%]{min-width:180px}.col-num[_ngcontent-%COMP%]{width:100px;text-align:right}.col-money[_ngcontent-%COMP%]{width:130px;text-align:right;font-weight:500}.col-pct[_ngcontent-%COMP%]{width:140px}.col-status[_ngcontent-%COMP%]{width:200px}.col-trend[_ngcontent-%COMP%]{width:60px;text-align:center}.rank-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:28px;height:28px;border-radius:8px;font-size:.8rem;font-weight:600;background:var(--bg-secondary, #f1f5f9);color:var(--text-secondary, #64748b)}.rank-badge.top-3[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fbbf24,#f59e0b);color:#fff}.agent-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.agent-avatar[_ngcontent-%COMP%]{width:32px;height:32px;background:linear-gradient(135deg,#e0e7ff,#c7d2fe);border-radius:8px;display:flex;align-items:center;justify-content:center;color:#6366f1}.agent-name[_ngcontent-%COMP%]{font-weight:500}.promesas-badge[_ngcontent-%COMP%]{background:#10b9811a;color:#10b981;padding:.25rem .5rem;border-radius:6px;font-weight:600}.efectividad-bar[_ngcontent-%COMP%]{position:relative;height:20px;background:var(--bg-secondary, #e2e8f0);border-radius:10px;overflow:hidden}.bar-fill[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;background:linear-gradient(90deg,#3b82f6,#60a5fa);border-radius:10px;transition:width .3s ease}.bar-label[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:.7rem;font-weight:600;color:var(--text-primary, #1e293b)}.status-pills[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.375rem}.pill[_ngcontent-%COMP%]{font-size:.7rem;font-weight:500;padding:.2rem .5rem;border-radius:4px}.pill.pending[_ngcontent-%COMP%]{background:#f59e0b26;color:#d97706}.pill.paid[_ngcontent-%COMP%]{background:#10b98126;color:#059669}.pill.overdue[_ngcontent-%COMP%]{background:#ef444426;color:#dc2626}.trend-indicator[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:32px;height:32px;border-radius:8px}.trend-up[_ngcontent-%COMP%]{background:#10b98126;color:#10b981}.trend-down[_ngcontent-%COMP%]{background:#ef444426;color:#ef4444}.trend-stable[_ngcontent-%COMP%]{background:var(--bg-secondary, #f1f5f9);color:var(--text-secondary, #64748b)}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem;color:var(--text-secondary, #64748b)}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:1rem}body.dark-theme[_nghost-%COMP%], body.dark-theme   [_nghost-%COMP%]{--card-bg: #1e293b;--text-primary: #e2e8f0;--text-secondary: #94a3b8;--border-color: #334155;--bg-secondary: #0f172a;--bg-hover: #334155;--input-bg: #0f172a}body.dark-theme[_nghost-%COMP%]   .header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#e2e8f0}body.dark-theme[_nghost-%COMP%]   .filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], body.dark-theme[_nghost-%COMP%]   .filter-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .filter-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:#0f172a;border-color:#334155;color:#e2e8f0}body.dark-theme[_nghost-%COMP%]   .error-message[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .error-message[_ngcontent-%COMP%]{background:#ef44441a;border-color:#ef44444d}body.dark-theme[_nghost-%COMP%]   .agents-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .agents-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#0f172a}body.dark-theme[_nghost-%COMP%]   .bar-label[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .bar-label[_ngcontent-%COMP%]{color:#e2e8f0}@media (max-width: 1200px){.kpi-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.charts-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (max-width: 768px){.productivity-container[_ngcontent-%COMP%]{padding:1rem}.kpi-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.filters-row[_ngcontent-%COMP%]{flex-direction:column}.filter-group[_ngcontent-%COMP%]{width:100%}.filter-action[_ngcontent-%COMP%]{margin-left:0;width:100%}.btn-primary[_ngcontent-%COMP%]{width:100%;justify-content:center}}"]});let d=m;return d})();export{Be as AgentProductivityComponent};
