import{a as oe}from"./chunk-U5VITYW6.js";import{a as ie}from"./chunk-NLPIZQWL.js";import{a as ne}from"./chunk-YWILVLMO.js";import{D as te,b as X,c as Y,e as Z,j as ee}from"./chunk-5CXVSPU7.js";import{Lb as H,Mb as J}from"./chunk-AY2PQ2ZV.js";import{a as K}from"./chunk-CVSECBKN.js";import{$a as a,Eb as v,Fb as y,Fc as W,Hb as j,Ib as I,Jb as M,Kb as f,Lb as s,Mb as l,Nb as g,Ub as P,Wb as C,Yb as c,a as T,b as $,ba as D,ga as w,jc as Q,jd as G,kc as m,lc as U,ma as h,mb as L,mc as R,na as b,pc as V,qc as z,rc as N,rd as q,wa as S}from"./chunk-3MKZGHO3.js";var re=(()=>{let d=class d{constructor(){this.http=w(q),this.apiUrl=`${K.apiUrl}/permisos`}obtenerTodos(){return this.http.get(this.apiUrl)}obtenerAgrupados(){return this.http.get(`${this.apiUrl}/agrupados`)}obtenerPorCategoria(e){return this.http.get(`${this.apiUrl}/categoria/${e}`)}};d.\u0275fac=function(i){return new(i||d)},d.\u0275prov=D({token:d,factory:d.\u0275fac,providedIn:"root"});let o=d;return o})();var B=(o,d)=>d.id;function le(o,d){o&1&&(s(0,"div",17),g(1,"lucide-angular",30),s(2,"p",8),m(3,"Sin roles"),l(),s(4,"p",31),m(5,"Crea uno nuevo"),l()()),o&2&&(a(),f("size",28))}function ae(o,d){if(o&1){let n=P();s(0,"div",33),C("click",function(){let i=h(n).$implicit,t=c(2);return b(t.selectRole(i))}),s(1,"div",34)(2,"div",35)(3,"div",36),g(4,"lucide-angular",37),s(5,"h3",38),m(6),l()(),s(7,"div",39)(8,"span"),m(9),l(),s(10,"span"),m(11,"\u2022"),l(),s(12,"span"),m(13),l()()(),s(14,"button",40),C("click",function(i){let t=h(n).$implicit;return c(2).deleteRole(t),b(i.stopPropagation())}),g(15,"lucide-angular",41),l()()()}if(o&2){let n,e=d.$implicit,i=c(2);Q(((n=i.selectedRole())==null?null:n.id)===e.id?"bg-purple-900/40 border-purple-500":"bg-slate-800 border-slate-700 hover:border-purple-500/50"),a(4),f("size",12),a(2),U(e.name),a(3),R("",e.permissions.length," permisos"),a(4),R("",i.countSubPortfoliosForRole(e)," subcarteras"),a(2),f("size",12)}}function de(o,d){if(o&1&&I(0,ae,16,7,"div",32,B),o&2){let n=c();M(n.roles())}}function ce(o,d){if(o&1){let n=P();s(0,"button",42),C("click",function(){h(n);let i=c();return b(i.toggleExpandAll())}),g(1,"lucide-angular",43),l()}if(o&2){let n=c();f("title",n.isAnyExpanded()?"Colapsar todo":"Expandir todo"),a(),f("name",n.isAnyExpanded()?"chevron-up":"chevron-down")("size",12)}}function pe(o,d){if(o&1){let n=P();s(0,"button",52),C("click",function(i){h(n);let t=c().$implicit;return c(2).toggleTenantExpand(t.id),b(i.stopPropagation())}),g(1,"lucide-angular",53),l()}if(o&2){let n=c().$implicit,e=c(2);a(),f("name",e.isTenantExpanded(n.id)?"chevron-down":"chevron-right")("size",12)}}function me(o,d){o&1&&(s(0,"div",54),m(1," Sin carteras "),l())}function fe(o,d){if(o&1){let n=P();s(0,"button",52),C("click",function(i){h(n);let t=c().$implicit;return c(4).togglePortfolioExpand(t.id),b(i.stopPropagation())}),g(1,"lucide-angular",53),l()}if(o&2){let n=c().$implicit,e=c(4);a(),f("name",e.isPortfolioExpanded(n.id)?"chevron-down":"chevron-right")("size",11)}}function ue(o,d){o&1&&(s(0,"div",62),m(1," Sin subcarteras "),l())}function ge(o,d){if(o&1){let n=P();s(0,"div",63)(1,"label",57)(2,"input",64),C("change",function(){let i=h(n).$implicit,t=c(2).$implicit,r=c(2).$implicit,p=c(2);return b(p.toggleSubPortfolioAssignment(r.id,t.id,i.id))}),l(),g(3,"lucide-angular",65),s(4,"span",66),m(5),l()()()}if(o&2){let n=d.$implicit,e=c(6);a(2),f("checked",e.isSubPortfolioAssigned(n.id)),a(),f("size",10),a(2),R(" ",n.subPortfolioName," ")}}function xe(o,d){if(o&1&&(s(0,"div",61),v(1,ue,2,0,"div",62),I(2,ge,6,3,"div",63,B),l()),o&2){let n=c().$implicit,e=c(4);a(),y(e.getSubPortfoliosByPortfolio(n.id).length===0?1:-1),a(),M(e.getSubPortfoliosByPortfolio(n.id))}}function _e(o,d){if(o&1){let n=P();s(0,"div",55)(1,"div",56)(2,"label",57)(3,"input",58),C("change",function(){let i=h(n).$implicit,t=c(2).$implicit,r=c(2);return b(r.togglePortfolioAssignment(t.id,i.id))}),l(),g(4,"lucide-angular",59),s(5,"span",60),m(6),l(),v(7,fe,2,2,"button",50),l()(),v(8,xe,4,1,"div",61),l()}if(o&2){let n=d.$implicit,e=c(4);a(3),f("checked",e.isPortfolioAssigned(n.id)),a(),f("size",11),a(2),R(" ",n.portfolioName," "),a(),y(e.getSubPortfoliosByPortfolio(n.id).length>0?7:-1),a(),y(e.isPortfolioExpanded(n.id)?8:-1)}}function he(o,d){if(o&1&&(s(0,"div",51),v(1,me,2,0,"div",54),I(2,_e,9,5,"div",55,B),l()),o&2){let n=c().$implicit,e=c(2);a(),y(e.getPortfoliosByTenant(n.id).length===0?1:-1),a(),M(e.getPortfoliosByTenant(n.id))}}function be(o,d){if(o&1){let n=P();s(0,"div",44)(1,"div",45)(2,"label",46)(3,"input",47),C("change",function(){let i=h(n).$implicit,t=c(2);return b(t.toggleTenantAssignment(i.id))}),l(),g(4,"lucide-angular",48),s(5,"span",49),m(6),l(),v(7,pe,2,2,"button",50),l()(),v(8,he,4,1,"div",51),l()}if(o&2){let n=d.$implicit,e=c(2);a(3),f("checked",e.isTenantAssigned(n.id)),a(),f("size",12),a(2),R(" ",n.tenantName," "),a(),y(e.getPortfoliosByTenant(n.id).length>0?7:-1),a(),y(e.isTenantExpanded(n.id)?8:-1)}}function Ce(o,d){if(o&1&&(s(0,"div",24),I(1,be,9,5,"div",44,B),l()),o&2){let n=c();a(),M(n.tenants())}}function ve(o,d){o&1&&(s(0,"div",25),g(1,"lucide-angular",67),s(2,"p",8),m(3,"Selecciona un rol para asignar"),l()()),o&2&&(a(),f("size",32))}function ye(o,d){if(o&1){let n=P();s(0,"label",82)(1,"input",83),C("change",function(){let i=h(n).$implicit,t=c(3);return b(t.togglePermission(i.id))}),l(),s(2,"div",35)(3,"div",84),m(4),l(),s(5,"div",85),m(6),l()()()}if(o&2){let n=d.$implicit,e=c(3);a(),f("checked",e.isPermissionSelected(n.id)),a(3),R(" ",n.name," "),a(2),R(" ",n.description," ")}}function Re(o,d){if(o&1&&(s(0,"div",77)(1,"div",78),g(2,"lucide-angular",79),s(3,"h4",80),m(4),l()(),s(5,"div",81),I(6,ye,7,3,"label",82,B),l()()),o&2){let n=d.$implicit,e=c(2);a(2),f("size",12),a(2),U(n),a(2),M(e.getPermissionsByCategory(n))}}function Ee(o,d){if(o&1){let n=P();s(0,"div",68)(1,"div")(2,"label",69),m(3,"Nombre del Rol"),l(),s(4,"input",70),N("ngModelChange",function(i){h(n);let t=c();return z(t.selectedRole().name,i)||(t.selectedRole().name=i),b(i)}),l()(),s(5,"div")(6,"label",69),m(7,"Descripci\xF3n"),l(),s(8,"textarea",71),N("ngModelChange",function(i){h(n);let t=c();return z(t.selectedRole().description,i)||(t.selectedRole().description=i),b(i)}),l()(),s(9,"div",4)(10,"input",72),N("ngModelChange",function(i){h(n);let t=c();return z(t.selectedRole().active,i)||(t.selectedRole().active=i),b(i)}),l(),s(11,"label",73),m(12,"Rol activo"),l()()(),s(13,"div")(14,"div",74)(15,"label",75),m(16,"Permisos"),l(),s(17,"span",8),m(18),l()(),s(19,"div",76),I(20,Re,8,2,"div",77,j),l()()}if(o&2){let n=c();a(4),V("ngModel",n.selectedRole().name),a(4),V("ngModel",n.selectedRole().description),a(2),V("ngModel",n.selectedRole().active),a(8),R("",n.selectedRole().permissions.length," seleccionados"),a(2),M(n.permissionCategories())}}function Pe(o,d){o&1&&(s(0,"div",25),g(1,"lucide-angular",86),s(2,"p",87),m(3,"Selecciona o crea un rol"),l()()),o&2&&(a(),f("size",32))}function Se(o,d){if(o&1){let n=P();s(0,"div",29)(1,"button",88),C("click",function(){h(n);let i=c();return b(i.cancelEdit())}),m(2," Cancelar "),l(),s(3,"button",89),C("click",function(){h(n);let i=c();return b(i.saveRole())}),g(4,"lucide-angular",90),m(5," Guardar "),l()()}if(o&2){let n=c();a(3),f("disabled",!n.isRoleValid()),a(),f("size",16)}}var je=(()=>{let d=class d{constructor(){this.tenants=S([]),this.allPortfolios=S([]),this.allSubPortfolios=S([]),this.expandedTenants=S([]),this.expandedPortfolios=S([]),this.roles=S([]),this.selectedRole=S(null),this.availablePermissions=S([]),this.permissionCategories=W(()=>{let e=new Set(this.availablePermissions().map(i=>i.category));return Array.from(e)}),this.tenantService=w(ie),this.portfolioService=w(ne),this.rolService=w(oe),this.permisoService=w(re)}ngOnInit(){this.loadAllData(),this.loadRolesFromBackend(),this.loadPermissionsFromBackend()}loadAllData(){this.tenantService.getAllTenants().subscribe({next:e=>{this.tenants.set(e),e.forEach(i=>{this.portfolioService.getPortfoliosByTenant(i.id).subscribe({next:t=>{let r=t.map(p=>$(T({},p),{tenantId:i.id}));this.allPortfolios.set([...this.allPortfolios(),...r]),t.forEach(p=>{this.portfolioService.getSubPortfoliosByPortfolio(p.id).subscribe({next:u=>{this.allSubPortfolios.set([...this.allSubPortfolios(),...u])},error:u=>console.error(`Error loading subportfolios for portfolio ${p.id}:`,u)})})},error:t=>console.error(`Error loading portfolios for tenant ${i.id}:`,t)})})},error:e=>console.error("Error loading tenants:",e)})}loadRolesFromBackend(){this.rolService.obtenerTodos().subscribe({next:e=>{this.roles.set(e.map(i=>({id:i.idRol,name:i.nombreRol,description:i.descripcion||"",permissions:i.permisoIds,assignments:i.asignaciones.map(t=>({type:t.tipoAsignacion,tenantId:t.tenantId,portfolioId:t.portfolioId,subPortfolioId:t.subPortfolioId})),active:i.activo})))},error:e=>console.error("Error al cargar roles:",e)})}loadPermissionsFromBackend(){this.permisoService.obtenerTodos().subscribe({next:e=>{this.availablePermissions.set(e.map(i=>({id:i.idPermiso,code:i.codigoPermiso,name:i.nombrePermiso,description:i.descripcion||"",category:i.categoria})))},error:e=>console.error("Error al cargar permisos:",e)})}getPortfoliosByTenant(e){return this.allPortfolios().filter(i=>i.tenantId===e)}getSubPortfoliosByPortfolio(e){return this.allSubPortfolios().filter(i=>i.portfolioId===e)}countSubPortfoliosForRole(e){let i=new Set;return e.assignments.forEach(t=>{t.type==="INQUILINO"?this.allPortfolios().filter(p=>p.tenantId===t.tenantId).forEach(p=>{this.allSubPortfolios().filter(E=>E.portfolioId===p.id).forEach(E=>i.add(E.id))}):t.type==="CARTERA"&&t.portfolioId?this.allSubPortfolios().filter(p=>p.portfolioId===t.portfolioId).forEach(p=>i.add(p.id)):t.type==="SUBCARTERA"&&t.subPortfolioId&&i.add(t.subPortfolioId)}),i.size}toggleTenantExpand(e){let i=this.expandedTenants();i.includes(e)?this.expandedTenants.set(i.filter(t=>t!==e)):this.expandedTenants.set([...i,e])}isTenantExpanded(e){return this.expandedTenants().includes(e)}togglePortfolioExpand(e){let i=this.expandedPortfolios();i.includes(e)?this.expandedPortfolios.set(i.filter(t=>t!==e)):this.expandedPortfolios.set([...i,e])}isPortfolioExpanded(e){return this.expandedPortfolios().includes(e)}isTenantAssigned(e){let i=this.selectedRole();return i?i.assignments.some(t=>t.type==="INQUILINO"&&t.tenantId===e):!1}isPortfolioAssigned(e){let i=this.selectedRole();if(!i)return!1;let t=this.allPortfolios().find(r=>r.id===e);return t?i.assignments.some(r=>r.type==="INQUILINO"&&r.tenantId===t.tenantId||r.type==="CARTERA"&&r.portfolioId===e):!1}isSubPortfolioAssigned(e){let i=this.selectedRole();if(!i)return!1;let t=this.allSubPortfolios().find(p=>p.id===e);if(!t)return!1;let r=this.allPortfolios().find(p=>p.id===t.portfolioId);return r?i.assignments.some(p=>p.type==="INQUILINO"&&p.tenantId===r.tenantId||p.type==="CARTERA"&&p.portfolioId===t.portfolioId||p.type==="SUBCARTERA"&&p.subPortfolioId===e):!1}toggleTenantAssignment(e){let i=this.selectedRole();i&&(this.isTenantAssigned(e)?i.assignments=i.assignments.filter(t=>t.tenantId!==e):(i.assignments.push({type:"INQUILINO",tenantId:e}),i.assignments=i.assignments.filter(t=>!(t.tenantId===e&&(t.type==="CARTERA"||t.type==="SUBCARTERA")))),this.selectedRole.set(T({},i)))}togglePortfolioAssignment(e,i){let t=this.selectedRole();if(!t)return;let r=this.isTenantAssigned(e);if(this.isPortfolioAssigned(i))r?(t.assignments=t.assignments.filter(E=>!(E.type==="INQUILINO"&&E.tenantId===e)),this.getPortfoliosByTenant(e).forEach(E=>{E.id!==i&&t.assignments.push({type:"CARTERA",tenantId:e,portfolioId:E.id})})):t.assignments=t.assignments.filter(u=>!(u.type==="CARTERA"&&u.portfolioId===i)),t.assignments=t.assignments.filter(u=>!(u.type==="SUBCARTERA"&&u.portfolioId===i));else{t.assignments.push({type:"CARTERA",tenantId:e,portfolioId:i}),t.assignments=t.assignments.filter(x=>!(x.type==="SUBCARTERA"&&x.portfolioId===i));let u=this.getPortfoliosByTenant(e);u.every(x=>t.assignments.some(_=>_.type==="CARTERA"&&_.portfolioId===x.id))&&u.length>0&&(t.assignments=t.assignments.filter(x=>!(x.type==="CARTERA"&&x.tenantId===e)),t.assignments.push({type:"INQUILINO",tenantId:e}))}this.selectedRole.set(T({},t))}toggleSubPortfolioAssignment(e,i,t){let r=this.selectedRole();if(!r)return;let p=this.isTenantAssigned(e),u=this.isPortfolioAssigned(i);if(this.isSubPortfolioAssigned(t))p?(r.assignments=r.assignments.filter(_=>!(_.type==="INQUILINO"&&_.tenantId===e)),this.getPortfoliosByTenant(e).forEach(_=>{_.id===i?this.getSubPortfoliosByPortfolio(_.id).forEach(k=>{k.id!==t&&r.assignments.push({type:"SUBCARTERA",tenantId:e,portfolioId:_.id,subPortfolioId:k.id})}):r.assignments.push({type:"CARTERA",tenantId:e,portfolioId:_.id})})):u&&!r.assignments.some(x=>x.type==="SUBCARTERA"&&x.portfolioId===i)?(r.assignments=r.assignments.filter(_=>!(_.type==="CARTERA"&&_.portfolioId===i)),this.getSubPortfoliosByPortfolio(i).forEach(_=>{_.id!==t&&r.assignments.push({type:"SUBCARTERA",tenantId:e,portfolioId:i,subPortfolioId:_.id})})):r.assignments=r.assignments.filter(x=>!(x.type==="SUBCARTERA"&&x.subPortfolioId===t));else{r.assignments.push({type:"SUBCARTERA",tenantId:e,portfolioId:i,subPortfolioId:t});let x=this.getSubPortfoliosByPortfolio(i);if(x.every(F=>r.assignments.some(k=>k.type==="SUBCARTERA"&&k.subPortfolioId===F.id))&&x.length>0){r.assignments=r.assignments.filter(A=>!(A.type==="SUBCARTERA"&&A.portfolioId===i)),r.assignments.push({type:"CARTERA",tenantId:e,portfolioId:i});let F=this.getPortfoliosByTenant(e);F.every(A=>r.assignments.some(O=>O.type==="CARTERA"&&O.portfolioId===A.id))&&F.length>0&&(r.assignments=r.assignments.filter(A=>!(A.type==="CARTERA"&&A.tenantId===e)),r.assignments.push({type:"INQUILINO",tenantId:e}))}}this.selectedRole.set(T({},r))}createNewRole(){let e={name:"",description:"",permissions:[],assignments:[],active:!0};this.selectedRole.set(e),this.expandedTenants.set([]),this.expandedPortfolios.set([])}selectRole(e){this.selectedRole.set(T({},e)),this.expandOnlyAssignedBranches()}isAnyExpanded(){return this.expandedTenants().length>0||this.expandedPortfolios().length>0}toggleExpandAll(){if(this.isAnyExpanded())this.expandedTenants.set([]),this.expandedPortfolios.set([]);else{let e=this.tenants().map(t=>t.id);this.expandedTenants.set(e);let i=this.allPortfolios().map(t=>t.id);this.expandedPortfolios.set(i)}}expandOnlyAssignedBranches(){let e=this.selectedRole();if(!e||e.assignments.length===0){this.expandedTenants.set([]),this.expandedPortfolios.set([]);return}let i=[],t=[];e.assignments.forEach(r=>{(r.type==="INQUILINO"||r.type==="CARTERA"||r.type==="SUBCARTERA")&&(i.includes(r.tenantId)||i.push(r.tenantId)),(r.type==="CARTERA"||r.type==="SUBCARTERA")&&r.portfolioId&&(t.includes(r.portfolioId)||t.push(r.portfolioId))}),this.expandedTenants.set(i),this.expandedPortfolios.set(t)}deleteRole(e){e.id&&confirm(`\xBFEst\xE1s seguro de eliminar el rol "${e.name}"?`)&&this.rolService.eliminar(e.id).subscribe({next:()=>{let i=this.roles();this.roles.set(i.filter(t=>t.id!==e.id)),this.selectedRole()?.id===e.id&&this.selectedRole.set(null),alert("Rol eliminado correctamente")},error:i=>{console.error("Error al eliminar rol:",i),alert("Error al eliminar rol: "+(i.error?.message||i.message))}})}getPermissionsByCategory(e){return this.availablePermissions().filter(i=>i.category===e)}isPermissionSelected(e){return this.selectedRole()?.permissions.includes(e)||!1}togglePermission(e){let i=this.selectedRole();if(!i)return;let t=i.permissions.indexOf(e);t>-1?i.permissions.splice(t,1):i.permissions.push(e),this.selectedRole.set(T({},i))}isRoleValid(){let e=this.selectedRole();return!!(e&&e.name.trim()&&e.description.trim())}saveRole(){let e=this.selectedRole();if(!e||!this.isRoleValid())return;let i={nombreRol:e.name,descripcion:e.description,activo:e.active,permisoIds:e.permissions,asignaciones:e.assignments.map(t=>({tipoAsignacion:t.type,tenantId:t.tenantId,portfolioId:t.portfolioId,subPortfolioId:t.subPortfolioId}))};e.id?this.rolService.actualizar(e.id,i).subscribe({next:t=>{let r=this.roles(),p=r.findIndex(u=>u.id===e.id);p>-1&&(r[p]={id:t.idRol,name:t.nombreRol,description:t.descripcion||"",permissions:t.permisoIds,assignments:t.asignaciones.map(u=>({type:u.tipoAsignacion,tenantId:u.tenantId,portfolioId:u.portfolioId,subPortfolioId:u.subPortfolioId})),active:t.activo},this.roles.set([...r])),this.selectedRole.set(null),alert("Rol actualizado correctamente")},error:t=>{console.error("Error al actualizar rol:",t),alert("Error al actualizar rol: "+(t.error?.message||t.message))}}):this.rolService.crear(i).subscribe({next:t=>{let r={id:t.idRol,name:t.nombreRol,description:t.descripcion||"",permissions:t.permisoIds,assignments:t.asignaciones.map(p=>({type:p.tipoAsignacion,tenantId:p.tenantId,portfolioId:p.portfolioId,subPortfolioId:p.subPortfolioId})),active:t.activo};this.roles.set([...this.roles(),r]),this.selectedRole.set(null),alert("Rol creado correctamente")},error:t=>{console.error("Error al crear rol:",t),alert("Error al crear rol: "+(t.error?.message||t.message))}})}cancelEdit(){this.selectedRole.set(null)}};d.\u0275fac=function(i){return new(i||d)},d.\u0275cmp=L({type:d,selectors:[["app-roles-management"]],decls:50,vars:13,consts:[[1,"h-[calc(100dvh-56px)]","bg-slate-950","overflow-hidden","flex","flex-col"],[1,"flex-1","overflow-y-auto"],[1,"p-3","max-w-[1800px]","mx-auto"],[1,"mb-3"],[1,"flex","items-center","gap-2"],[1,"w-8","h-8","bg-gradient-to-br","from-purple-600","to-purple-700","rounded-lg","flex","items-center","justify-center"],["name","shield-check",1,"text-white",3,"size"],[1,"text-lg","font-bold","text-white"],[1,"text-xs","text-gray-400"],[1,"grid","grid-cols-12","gap-3"],[1,"col-span-3","bg-slate-900","rounded-lg","border","border-slate-800","shadow-sm","flex","flex-col","max-h-[calc(100vh-140px)]"],[1,"p-3","border-b","border-slate-800","flex","items-center","justify-between","flex-shrink-0"],["name","list",1,"text-purple-400",3,"size"],[1,"text-sm","font-bold","text-white"],[1,"px-2","py-1","bg-purple-600","hover:bg-purple-700","text-white","rounded","text-xs","font-semibold","transition-colors","flex","items-center","gap-1",3,"click"],["name","plus",3,"size"],[1,"p-2","space-y-1","overflow-y-auto","flex-1"],[1,"text-center","py-8"],[1,"col-span-4","bg-slate-900","rounded-lg","border","border-slate-800","shadow-sm","flex","flex-col","max-h-[calc(100vh-140px)]"],[1,"p-3","border-b","border-slate-800","flex-shrink-0"],[1,"flex","items-center","justify-between"],["name","map-pin",1,"text-green-400",3,"size"],[1,"p-1","text-xs","text-gray-400","hover:text-white","hover:bg-slate-700","rounded","transition-colors",3,"title"],[1,"p-3","overflow-y-auto","flex-1"],[1,"space-y-1"],[1,"text-center","py-12"],[1,"col-span-5","bg-slate-900","rounded-lg","border","border-slate-800","shadow-sm","flex","flex-col","max-h-[calc(100vh-140px)]"],["name","edit",1,"text-purple-400",3,"size"],[1,"p-3","space-y-3","overflow-y-auto","flex-1"],[1,"mt-3","flex","justify-end","gap-2"],["name","shield-off",1,"text-gray-600","mx-auto","mb-2",3,"size"],[1,"text-xs","text-gray-500"],[1,"p-2","rounded","border","cursor-pointer","transition-all",3,"class"],[1,"p-2","rounded","border","cursor-pointer","transition-all",3,"click"],[1,"flex","items-start","justify-between"],[1,"flex-1","min-w-0"],[1,"flex","items-center","gap-1"],["name","shield-check",1,"text-purple-400","flex-shrink-0",3,"size"],[1,"text-xs","font-semibold","text-white","truncate"],[1,"mt-0.5","flex","items-center","gap-1","text-xs","text-gray-500"],[1,"p-0.5","text-gray-400","hover:text-red-400","rounded","transition-colors","flex-shrink-0",3,"click"],["name","trash-2",3,"size"],[1,"p-1","text-xs","text-gray-400","hover:text-white","hover:bg-slate-700","rounded","transition-colors",3,"click","title"],[3,"name","size"],[1,"border","border-slate-700","rounded","overflow-hidden"],[1,"bg-slate-800","p-2"],[1,"flex","items-center","gap-2","cursor-pointer","group"],["type","checkbox",1,"w-3.5","h-3.5","text-blue-600","bg-slate-700","border-slate-600","rounded","focus:ring-blue-500",3,"change","checked"],["name","building-2",1,"text-blue-400",3,"size"],[1,"text-xs","font-semibold","text-white","group-hover:text-purple-300","flex-1"],[1,"p-0.5","hover:bg-slate-700","rounded"],[1,"bg-slate-800/50","pl-4"],[1,"p-0.5","hover:bg-slate-700","rounded",3,"click"],[1,"text-gray-400",3,"name","size"],[1,"p-2","text-xs","text-gray-500","italic"],[1,"border-t","border-slate-700/50"],[1,"p-1.5"],[1,"flex","items-center","gap-1.5","cursor-pointer","group"],["type","checkbox",1,"w-3","h-3","text-green-600","bg-slate-700","border-slate-600","rounded","focus:ring-green-500",3,"change","checked"],["name","folder",1,"text-green-400",3,"size"],[1,"text-xs","font-medium","text-gray-300","group-hover:text-purple-300","flex-1"],[1,"pl-3","pb-1"],[1,"p-1","text-xs","text-gray-500","italic"],[1,"p-1"],["type","checkbox",1,"w-3","h-3","text-purple-600","bg-slate-700","border-slate-600","rounded","focus:ring-purple-500",3,"change","checked"],["name","folder-tree",1,"text-purple-400",3,"size"],[1,"text-xs","text-gray-400","group-hover:text-purple-300"],["name","map",1,"text-gray-600","mx-auto","mb-2",3,"size"],[1,"space-y-2"],[1,"block","text-xs","font-semibold","text-gray-300","mb-1"],["type","text","placeholder","Ej: Asesor de Cobranza",1,"w-full","px-2","py-1.5","bg-slate-800","border","border-slate-700","rounded","text-white","text-sm","placeholder:text-gray-500","focus:outline-none","focus:ring-1","focus:ring-purple-500",3,"ngModelChange","ngModel"],["rows","2","placeholder","Describe las responsabilidades...",1,"w-full","px-2","py-1.5","bg-slate-800","border","border-slate-700","rounded","text-white","text-sm","placeholder:text-gray-500","focus:outline-none","focus:ring-1","focus:ring-purple-500","resize-none",3,"ngModelChange","ngModel"],["type","checkbox","id","roleActive",1,"w-3.5","h-3.5","text-purple-600","bg-slate-800","border-slate-700","rounded","focus:ring-purple-500",3,"ngModelChange","ngModel"],["for","roleActive",1,"text-xs","text-gray-300","cursor-pointer"],[1,"flex","items-center","justify-between","mb-2"],[1,"text-xs","font-semibold","text-purple-300"],[1,"space-y-1.5"],[1,"bg-slate-800","rounded","border","border-slate-700","p-2"],[1,"flex","items-center","gap-1.5","mb-1.5"],["name","package",1,"text-purple-400",3,"size"],[1,"text-xs","font-semibold","text-white"],[1,"space-y-0.5","ml-4"],[1,"flex","items-start","gap-1.5","p-1","hover:bg-slate-700/50","rounded","cursor-pointer","group"],["type","checkbox",1,"mt-0.5","w-3.5","h-3.5","text-purple-600","bg-slate-700","border-slate-600","rounded","focus:ring-purple-500",3,"change","checked"],[1,"text-xs","font-medium","text-gray-300","group-hover:text-white","truncate"],[1,"text-xs","text-gray-500","leading-tight"],["name","hand-metal",1,"text-gray-600","mx-auto","mb-2",3,"size"],[1,"text-sm","text-gray-400"],[1,"px-4","py-2","bg-slate-700","hover:bg-slate-600","text-white","rounded","text-sm","font-semibold","transition-colors",3,"click"],[1,"px-4","py-2","bg-purple-600","hover:bg-purple-700","disabled:bg-slate-700","disabled:cursor-not-allowed","text-white","rounded","text-sm","font-semibold","transition-colors","flex","items-center","gap-1.5",3,"click","disabled"],["name","save",3,"size"]],template:function(i,t){if(i&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),g(6,"lucide-angular",6),l(),s(7,"div")(8,"h1",7),m(9,"Gesti\xF3n de Roles"),l(),s(10,"p",8),m(11,"Define roles, permisos y asignaciones m\xFAltiples"),l()()()(),s(12,"div",9)(13,"div",10)(14,"div",11)(15,"div",4),g(16,"lucide-angular",12),s(17,"h2",13),m(18,"Roles"),l(),s(19,"span",8),m(20),l()(),s(21,"button",14),C("click",function(){return t.createNewRole()}),g(22,"lucide-angular",15),m(23," Nuevo "),l()(),s(24,"div",16),v(25,le,6,1,"div",17)(26,de,2,0),l()(),s(27,"div",18)(28,"div",19)(29,"div",20)(30,"div",4),g(31,"lucide-angular",21),s(32,"h2",13),m(33,"Asignaciones"),l(),s(34,"span",8),m(35),l()(),v(36,ce,2,3,"button",22),l()(),s(37,"div",23),v(38,Ce,3,0,"div",24)(39,ve,4,1,"div",25),l()(),s(40,"div",26)(41,"div",19)(42,"div",4),g(43,"lucide-angular",27),s(44,"h2",13),m(45),l()()(),s(46,"div",28),v(47,Ee,22,4)(48,Pe,4,1,"div",25),l()()(),v(49,Se,6,2,"div",29),l()()()),i&2){let r;a(6),f("size",16),a(10),f("size",16),a(4),R("(",t.roles().length,")"),a(2),f("size",12),a(3),y(t.roles().length===0?25:26),a(6),f("size",16),a(4),R("(",t.selectedRole()?t.selectedRole().assignments.length:0,")"),a(),y(t.selectedRole()?36:-1),a(2),y(t.selectedRole()?38:39),a(5),f("size",16),a(2),R(" ",(r=t.selectedRole())!=null&&r.id?"Editar Rol":t.selectedRole()?"Nuevo Rol":"Informaci\xF3n"," "),a(2),y(t.selectedRole()?47:48),a(2),y(t.selectedRole()?49:-1)}},dependencies:[G,te,Y,X,Z,ee,J,H],encapsulation:2});let o=d;return o})();export{je as RolesManagementComponent};
