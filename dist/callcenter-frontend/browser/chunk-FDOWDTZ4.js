import{a as ie}from"./chunk-BAZPI5FB.js";import{a as ee}from"./chunk-YUGLJ5U2.js";import{a as te}from"./chunk-YBTTFGZA.js";import{a as J,b as K,e as X,h as Y,u as Z}from"./chunk-TFAMJCIP.js";import{$ as D,Bb as j,Cb as A,Db as w,Eb as I,Fb as l,Gb as r,Hb as Q,Ob as y,Qb as h,Sb as p,Va as d,_c as G,a as S,b as $,dc as W,ea as T,ec as m,fc as U,gb as L,gc as v,gd as q,ja as x,jc as B,jd as H,ka as _,kc as V,lc as N,ta as P,wc as z,yb as b,zb as C}from"./chunk-UY3AUK24.js";var oe=(()=>{let a=class a{constructor(){this.http=T(q),this.apiUrl=`${H.apiUrl}/permisos`}obtenerTodos(){return this.http.get(this.apiUrl)}obtenerAgrupados(){return this.http.get(`${this.apiUrl}/agrupados`)}obtenerPorCategoria(e){return this.http.get(`${this.apiUrl}/categoria/${e}`)}};a.\u0275fac=function(i){return new(i||a)},a.\u0275prov=D({token:a,factory:a.\u0275fac,providedIn:"root"});let s=a;return s})();var F=(s,a)=>a.id;function se(s,a){s&1&&(l(0,"div",14)(1,"p",7),m(2,"Sin roles"),r(),l(3,"p",25),m(4,"Crea uno nuevo"),r()())}function re(s,a){if(s&1){let o=y();l(0,"div",27),h("click",function(){let i=x(o).$implicit,t=p(2);return _(t.selectRole(i))}),l(1,"div",28)(2,"div",29)(3,"div",30)(4,"h3",31),m(5),r()(),l(6,"div",32)(7,"span"),m(8),r(),l(9,"span"),m(10,"\u2022"),r(),l(11,"span"),m(12),r()()(),l(13,"button",33),h("click",function(i){let t=x(o).$implicit;return p(2).deleteRole(t),_(i.stopPropagation())}),r()()()}if(s&2){let o,e=a.$implicit,i=p(2);W(((o=i.selectedRole())==null?null:o.id)===e.id?"bg-purple-900/40 border-purple-500":"bg-slate-800 border-slate-700 hover:border-purple-500/50"),d(5),U(e.name),d(3),v("",e.permissions.length," permisos"),d(4),v("",i.countSubPortfoliosForRole(e)," subcarteras")}}function le(s,a){if(s&1&&A(0,re,14,5,"div",26,F),s&2){let o=p();w(o.roles())}}function ae(s,a){if(s&1){let o=y();l(0,"button",34),h("click",function(){x(o);let i=p();return _(i.toggleExpandAll())}),r()}if(s&2){let o=p();I("title",o.isAnyExpanded()?"Colapsar todo":"Expandir todo")}}function de(s,a){if(s&1){let o=y();l(0,"button",42),h("click",function(i){x(o);let t=p().$implicit;return p(2).toggleTenantExpand(t.id),_(i.stopPropagation())}),m(1,' [size]="12" '),r()}}function ce(s,a){s&1&&(l(0,"div",43),m(1," Sin carteras "),r())}function pe(s,a){if(s&1){let o=y();l(0,"button",42),h("click",function(i){x(o);let t=p().$implicit;return p(4).togglePortfolioExpand(t.id),_(i.stopPropagation())}),m(1,' [size]="11" '),r()}}function me(s,a){s&1&&(l(0,"div",50),m(1," Sin subcarteras "),r())}function fe(s,a){if(s&1){let o=y();l(0,"div",51)(1,"label",46)(2,"input",52),h("change",function(){let i=x(o).$implicit,t=p(2).$implicit,n=p(2).$implicit,c=p(2);return _(c.toggleSubPortfolioAssignment(n.id,t.id,i.id))}),r(),l(3,"span",53),m(4),r()()()}if(s&2){let o=a.$implicit,e=p(6);d(2),I("checked",e.isSubPortfolioAssigned(o.id)),d(2),v(" ",o.subPortfolioName," ")}}function ge(s,a){if(s&1&&(l(0,"div",49),b(1,me,2,0,"div",50),A(2,fe,5,2,"div",51,F),r()),s&2){let o=p().$implicit,e=p(4);d(),C(e.getSubPortfoliosByPortfolio(o.id).length===0?1:-1),d(),w(e.getSubPortfoliosByPortfolio(o.id))}}function ue(s,a){if(s&1){let o=y();l(0,"div",44)(1,"div",45)(2,"label",46)(3,"input",47),h("change",function(){let i=x(o).$implicit,t=p(2).$implicit,n=p(2);return _(n.togglePortfolioAssignment(t.id,i.id))}),r(),l(4,"span",48),m(5),r(),b(6,pe,2,0,"button",40),r()(),b(7,ge,4,1,"div",49),r()}if(s&2){let o=a.$implicit,e=p(4);d(3),I("checked",e.isPortfolioAssigned(o.id)),d(2),v(" ",o.portfolioName," "),d(),C(e.getSubPortfoliosByPortfolio(o.id).length>0?6:-1),d(),C(e.isPortfolioExpanded(o.id)?7:-1)}}function xe(s,a){if(s&1&&(l(0,"div",41),b(1,ce,2,0,"div",43),A(2,ue,8,4,"div",44,F),r()),s&2){let o=p().$implicit,e=p(2);d(),C(e.getPortfoliosByTenant(o.id).length===0?1:-1),d(),w(e.getPortfoliosByTenant(o.id))}}function _e(s,a){if(s&1){let o=y();l(0,"div",35)(1,"div",36)(2,"label",37)(3,"input",38),h("change",function(){let i=x(o).$implicit,t=p(2);return _(t.toggleTenantAssignment(i.id))}),r(),l(4,"span",39),m(5),r(),b(6,de,2,0,"button",40),r()(),b(7,xe,4,1,"div",41),r()}if(s&2){let o=a.$implicit,e=p(2);d(3),I("checked",e.isTenantAssigned(o.id)),d(2),v(" ",o.tenantName," "),d(),C(e.getPortfoliosByTenant(o.id).length>0?6:-1),d(),C(e.isTenantExpanded(o.id)?7:-1)}}function he(s,a){if(s&1&&(l(0,"div",20),A(1,_e,8,4,"div",35,F),r()),s&2){let o=p();d(),w(o.tenants())}}function be(s,a){s&1&&(l(0,"div",21)(1,"p",7),m(2,"Selecciona un rol para asignar"),r()())}function Ce(s,a){if(s&1){let o=y();l(0,"label",67)(1,"input",68),h("change",function(){let i=x(o).$implicit,t=p(3);return _(t.togglePermission(i.id))}),r(),l(2,"div",29)(3,"div",69),m(4),r(),l(5,"div",70),m(6),r()()()}if(s&2){let o=a.$implicit,e=p(3);d(),I("checked",e.isPermissionSelected(o.id)),d(3),v(" ",o.name," "),d(2),v(" ",o.description," ")}}function ve(s,a){if(s&1&&(l(0,"div",63)(1,"div",64)(2,"h4",65),m(3),r()(),l(4,"div",66),A(5,Ce,7,3,"label",67,F),r()()),s&2){let o=a.$implicit,e=p(2);d(3),U(o),d(2),w(e.getPermissionsByCategory(o))}}function Re(s,a){if(s&1){let o=y();l(0,"div",54)(1,"div")(2,"label",55),m(3,"Nombre del Rol"),r(),l(4,"input",56),N("ngModelChange",function(i){x(o);let t=p();return V(t.selectedRole().name,i)||(t.selectedRole().name=i),_(i)}),r()(),l(5,"div")(6,"label",55),m(7,"Descripci\xF3n"),r(),l(8,"textarea",57),N("ngModelChange",function(i){x(o);let t=p();return V(t.selectedRole().description,i)||(t.selectedRole().description=i),_(i)}),r()(),l(9,"div",4)(10,"input",58),N("ngModelChange",function(i){x(o);let t=p();return V(t.selectedRole().active,i)||(t.selectedRole().active=i),_(i)}),r(),l(11,"label",59),m(12,"Rol activo"),r()()(),l(13,"div")(14,"div",60)(15,"label",61),m(16,"Permisos"),r(),l(17,"span",7),m(18),r()(),l(19,"div",62),A(20,ve,7,1,"div",63,j),r()()}if(s&2){let o=p();d(4),B("ngModel",o.selectedRole().name),d(4),B("ngModel",o.selectedRole().description),d(2),B("ngModel",o.selectedRole().active),d(8),v("",o.selectedRole().permissions.length," seleccionados"),d(2),w(o.permissionCategories())}}function ye(s,a){s&1&&(l(0,"div",21)(1,"p",71),m(2,"Selecciona o crea un rol"),r()())}function Pe(s,a){if(s&1){let o=y();l(0,"div",24)(1,"button",72),h("click",function(){x(o);let i=p();return _(i.cancelEdit())}),m(2," Cancelar "),r(),l(3,"button",73),h("click",function(){x(o);let i=p();return _(i.saveRole())}),m(4," Guardar "),r()()}if(s&2){let o=p();d(3),I("disabled",!o.isRoleValid())}}var $e=(()=>{let a=class a{constructor(){this.tenants=P([]),this.allPortfolios=P([]),this.allSubPortfolios=P([]),this.expandedTenants=P([]),this.expandedPortfolios=P([]),this.roles=P([]),this.selectedRole=P(null),this.availablePermissions=P([]),this.permissionCategories=z(()=>{let e=new Set(this.availablePermissions().map(i=>i.category));return Array.from(e)}),this.tenantService=T(ee),this.portfolioService=T(te),this.rolService=T(ie),this.permisoService=T(oe)}ngOnInit(){this.loadAllData(),this.loadRolesFromBackend(),this.loadPermissionsFromBackend()}loadAllData(){this.tenantService.getAllTenants().subscribe({next:e=>{this.tenants.set(e),e.forEach(i=>{this.portfolioService.getPortfoliosByTenant(i.id).subscribe({next:t=>{let n=t.map(c=>$(S({},c),{tenantId:i.id}));this.allPortfolios.set([...this.allPortfolios(),...n]),t.forEach(c=>{this.portfolioService.getSubPortfoliosByPortfolio(c.id).subscribe({next:f=>{this.allSubPortfolios.set([...this.allSubPortfolios(),...f])},error:f=>console.error(`Error loading subportfolios for portfolio ${c.id}:`,f)})})},error:t=>console.error(`Error loading portfolios for tenant ${i.id}:`,t)})})},error:e=>console.error("Error loading tenants:",e)})}loadRolesFromBackend(){this.rolService.obtenerTodos().subscribe({next:e=>{this.roles.set(e.map(i=>({id:i.idRol,name:i.nombreRol,description:i.descripcion||"",permissions:i.permisoIds,assignments:i.asignaciones.map(t=>({type:t.tipoAsignacion,tenantId:t.tenantId,portfolioId:t.portfolioId,subPortfolioId:t.subPortfolioId})),active:i.activo})))},error:e=>console.error("Error al cargar roles:",e)})}loadPermissionsFromBackend(){this.permisoService.obtenerTodos().subscribe({next:e=>{this.availablePermissions.set(e.map(i=>({id:i.idPermiso,code:i.codigoPermiso,name:i.nombrePermiso,description:i.descripcion||"",category:i.categoria})))},error:e=>console.error("Error al cargar permisos:",e)})}getPortfoliosByTenant(e){return this.allPortfolios().filter(i=>i.tenantId===e)}getSubPortfoliosByPortfolio(e){return this.allSubPortfolios().filter(i=>i.portfolioId===e)}countSubPortfoliosForRole(e){let i=new Set;return e.assignments.forEach(t=>{t.type==="INQUILINO"?this.allPortfolios().filter(c=>c.tenantId===t.tenantId).forEach(c=>{this.allSubPortfolios().filter(R=>R.portfolioId===c.id).forEach(R=>i.add(R.id))}):t.type==="CARTERA"&&t.portfolioId?this.allSubPortfolios().filter(c=>c.portfolioId===t.portfolioId).forEach(c=>i.add(c.id)):t.type==="SUBCARTERA"&&t.subPortfolioId&&i.add(t.subPortfolioId)}),i.size}toggleTenantExpand(e){let i=this.expandedTenants();i.includes(e)?this.expandedTenants.set(i.filter(t=>t!==e)):this.expandedTenants.set([...i,e])}isTenantExpanded(e){return this.expandedTenants().includes(e)}togglePortfolioExpand(e){let i=this.expandedPortfolios();i.includes(e)?this.expandedPortfolios.set(i.filter(t=>t!==e)):this.expandedPortfolios.set([...i,e])}isPortfolioExpanded(e){return this.expandedPortfolios().includes(e)}isTenantAssigned(e){let i=this.selectedRole();return i?i.assignments.some(t=>t.type==="INQUILINO"&&t.tenantId===e):!1}isPortfolioAssigned(e){let i=this.selectedRole();if(!i)return!1;let t=this.allPortfolios().find(n=>n.id===e);return t?i.assignments.some(n=>n.type==="INQUILINO"&&n.tenantId===t.tenantId||n.type==="CARTERA"&&n.portfolioId===e):!1}isSubPortfolioAssigned(e){let i=this.selectedRole();if(!i)return!1;let t=this.allSubPortfolios().find(c=>c.id===e);if(!t)return!1;let n=this.allPortfolios().find(c=>c.id===t.portfolioId);return n?i.assignments.some(c=>c.type==="INQUILINO"&&c.tenantId===n.tenantId||c.type==="CARTERA"&&c.portfolioId===t.portfolioId||c.type==="SUBCARTERA"&&c.subPortfolioId===e):!1}toggleTenantAssignment(e){let i=this.selectedRole();i&&(this.isTenantAssigned(e)?i.assignments=i.assignments.filter(t=>t.tenantId!==e):(i.assignments.push({type:"INQUILINO",tenantId:e}),i.assignments=i.assignments.filter(t=>!(t.tenantId===e&&(t.type==="CARTERA"||t.type==="SUBCARTERA")))),this.selectedRole.set(S({},i)))}togglePortfolioAssignment(e,i){let t=this.selectedRole();if(!t)return;let n=this.isTenantAssigned(e);if(this.isPortfolioAssigned(i))n?(t.assignments=t.assignments.filter(R=>!(R.type==="INQUILINO"&&R.tenantId===e)),this.getPortfoliosByTenant(e).forEach(R=>{R.id!==i&&t.assignments.push({type:"CARTERA",tenantId:e,portfolioId:R.id})})):t.assignments=t.assignments.filter(f=>!(f.type==="CARTERA"&&f.portfolioId===i)),t.assignments=t.assignments.filter(f=>!(f.type==="SUBCARTERA"&&f.portfolioId===i));else{t.assignments.push({type:"CARTERA",tenantId:e,portfolioId:i}),t.assignments=t.assignments.filter(g=>!(g.type==="SUBCARTERA"&&g.portfolioId===i));let f=this.getPortfoliosByTenant(e);f.every(g=>t.assignments.some(u=>u.type==="CARTERA"&&u.portfolioId===g.id))&&f.length>0&&(t.assignments=t.assignments.filter(g=>!(g.type==="CARTERA"&&g.tenantId===e)),t.assignments.push({type:"INQUILINO",tenantId:e}))}this.selectedRole.set(S({},t))}toggleSubPortfolioAssignment(e,i,t){let n=this.selectedRole();if(!n)return;let c=this.isTenantAssigned(e),f=this.isPortfolioAssigned(i);if(this.isSubPortfolioAssigned(t))c?(n.assignments=n.assignments.filter(u=>!(u.type==="INQUILINO"&&u.tenantId===e)),this.getPortfoliosByTenant(e).forEach(u=>{u.id===i?this.getSubPortfoliosByPortfolio(u.id).forEach(M=>{M.id!==t&&n.assignments.push({type:"SUBCARTERA",tenantId:e,portfolioId:u.id,subPortfolioId:M.id})}):n.assignments.push({type:"CARTERA",tenantId:e,portfolioId:u.id})})):f&&!n.assignments.some(g=>g.type==="SUBCARTERA"&&g.portfolioId===i)?(n.assignments=n.assignments.filter(u=>!(u.type==="CARTERA"&&u.portfolioId===i)),this.getSubPortfoliosByPortfolio(i).forEach(u=>{u.id!==t&&n.assignments.push({type:"SUBCARTERA",tenantId:e,portfolioId:i,subPortfolioId:u.id})})):n.assignments=n.assignments.filter(g=>!(g.type==="SUBCARTERA"&&g.subPortfolioId===t));else{n.assignments.push({type:"SUBCARTERA",tenantId:e,portfolioId:i,subPortfolioId:t});let g=this.getSubPortfoliosByPortfolio(i);if(g.every(k=>n.assignments.some(M=>M.type==="SUBCARTERA"&&M.subPortfolioId===k.id))&&g.length>0){n.assignments=n.assignments.filter(E=>!(E.type==="SUBCARTERA"&&E.portfolioId===i)),n.assignments.push({type:"CARTERA",tenantId:e,portfolioId:i});let k=this.getPortfoliosByTenant(e);k.every(E=>n.assignments.some(O=>O.type==="CARTERA"&&O.portfolioId===E.id))&&k.length>0&&(n.assignments=n.assignments.filter(E=>!(E.type==="CARTERA"&&E.tenantId===e)),n.assignments.push({type:"INQUILINO",tenantId:e}))}}this.selectedRole.set(S({},n))}createNewRole(){let e={name:"",description:"",permissions:[],assignments:[],active:!0};this.selectedRole.set(e),this.expandedTenants.set([]),this.expandedPortfolios.set([])}selectRole(e){this.selectedRole.set(S({},e)),this.expandOnlyAssignedBranches()}isAnyExpanded(){return this.expandedTenants().length>0||this.expandedPortfolios().length>0}toggleExpandAll(){if(this.isAnyExpanded())this.expandedTenants.set([]),this.expandedPortfolios.set([]);else{let e=this.tenants().map(t=>t.id);this.expandedTenants.set(e);let i=this.allPortfolios().map(t=>t.id);this.expandedPortfolios.set(i)}}expandOnlyAssignedBranches(){let e=this.selectedRole();if(!e||e.assignments.length===0){this.expandedTenants.set([]),this.expandedPortfolios.set([]);return}let i=[],t=[];e.assignments.forEach(n=>{(n.type==="INQUILINO"||n.type==="CARTERA"||n.type==="SUBCARTERA")&&(i.includes(n.tenantId)||i.push(n.tenantId)),(n.type==="CARTERA"||n.type==="SUBCARTERA")&&n.portfolioId&&(t.includes(n.portfolioId)||t.push(n.portfolioId))}),this.expandedTenants.set(i),this.expandedPortfolios.set(t)}deleteRole(e){e.id&&confirm(`\xBFEst\xE1s seguro de eliminar el rol "${e.name}"?`)&&this.rolService.eliminar(e.id).subscribe({next:()=>{let i=this.roles();this.roles.set(i.filter(t=>t.id!==e.id)),this.selectedRole()?.id===e.id&&this.selectedRole.set(null),alert("Rol eliminado correctamente")},error:i=>{console.error("Error al eliminar rol:",i),alert("Error al eliminar rol: "+(i.error?.message||i.message))}})}getPermissionsByCategory(e){return this.availablePermissions().filter(i=>i.category===e)}isPermissionSelected(e){return this.selectedRole()?.permissions.includes(e)||!1}togglePermission(e){let i=this.selectedRole();if(!i)return;let t=i.permissions.indexOf(e);t>-1?i.permissions.splice(t,1):i.permissions.push(e),this.selectedRole.set(S({},i))}isRoleValid(){let e=this.selectedRole();return!!(e&&e.name.trim()&&e.description.trim())}saveRole(){let e=this.selectedRole();if(!e||!this.isRoleValid())return;let i={nombreRol:e.name,descripcion:e.description,activo:e.active,permisoIds:e.permissions,asignaciones:e.assignments.map(t=>({tipoAsignacion:t.type,tenantId:t.tenantId,portfolioId:t.portfolioId,subPortfolioId:t.subPortfolioId}))};e.id?this.rolService.actualizar(e.id,i).subscribe({next:t=>{let n=this.roles(),c=n.findIndex(f=>f.id===e.id);c>-1&&(n[c]={id:t.idRol,name:t.nombreRol,description:t.descripcion||"",permissions:t.permisoIds,assignments:t.asignaciones.map(f=>({type:f.tipoAsignacion,tenantId:f.tenantId,portfolioId:f.portfolioId,subPortfolioId:f.subPortfolioId})),active:t.activo},this.roles.set([...n])),this.selectedRole.set(null),alert("Rol actualizado correctamente")},error:t=>{console.error("Error al actualizar rol:",t),alert("Error al actualizar rol: "+(t.error?.message||t.message))}}):this.rolService.crear(i).subscribe({next:t=>{let n={id:t.idRol,name:t.nombreRol,description:t.descripcion||"",permissions:t.permisoIds,assignments:t.asignaciones.map(c=>({type:c.tipoAsignacion,tenantId:c.tenantId,portfolioId:c.portfolioId,subPortfolioId:c.subPortfolioId})),active:t.activo};this.roles.set([...this.roles(),n]),this.selectedRole.set(null),alert("Rol creado correctamente")},error:t=>{console.error("Error al crear rol:",t),alert("Error al crear rol: "+(t.error?.message||t.message))}})}cancelEdit(){this.selectedRole.set(null)}};a.\u0275fac=function(i){return new(i||a)},a.\u0275cmp=L({type:a,selectors:[["app-roles-management"]],decls:45,vars:8,consts:[[1,"h-[calc(100dvh-56px)]","bg-slate-950","overflow-hidden","flex","flex-col"],[1,"flex-1","overflow-y-auto"],[1,"p-3","max-w-[1800px]","mx-auto"],[1,"mb-3"],[1,"flex","items-center","gap-2"],[1,"w-8","h-8","bg-gradient-to-br","from-purple-600","to-purple-700","rounded-lg","flex","items-center","justify-center"],[1,"text-lg","font-bold","text-white"],[1,"text-xs","text-gray-400"],[1,"grid","grid-cols-12","gap-3"],[1,"col-span-3","bg-slate-900","rounded-lg","border","border-slate-800","shadow-sm","flex","flex-col","max-h-[calc(100vh-140px)]"],[1,"p-3","border-b","border-slate-800","flex","items-center","justify-between","flex-shrink-0"],[1,"text-sm","font-bold","text-white"],[1,"px-2","py-1","bg-purple-600","hover:bg-purple-700","text-white","rounded","text-xs","font-semibold","transition-colors","flex","items-center","gap-1",3,"click"],[1,"p-2","space-y-1","overflow-y-auto","flex-1"],[1,"text-center","py-8"],[1,"col-span-4","bg-slate-900","rounded-lg","border","border-slate-800","shadow-sm","flex","flex-col","max-h-[calc(100vh-140px)]"],[1,"p-3","border-b","border-slate-800","flex-shrink-0"],[1,"flex","items-center","justify-between"],[1,"p-1","text-xs","text-gray-400","hover:text-white","hover:bg-slate-700","rounded","transition-colors",3,"title"],[1,"p-3","overflow-y-auto","flex-1"],[1,"space-y-1"],[1,"text-center","py-12"],[1,"col-span-5","bg-slate-900","rounded-lg","border","border-slate-800","shadow-sm","flex","flex-col","max-h-[calc(100vh-140px)]"],[1,"p-3","space-y-3","overflow-y-auto","flex-1"],[1,"mt-3","flex","justify-end","gap-2"],[1,"text-xs","text-gray-500"],[1,"p-2","rounded","border","cursor-pointer","transition-all",3,"class"],[1,"p-2","rounded","border","cursor-pointer","transition-all",3,"click"],[1,"flex","items-start","justify-between"],[1,"flex-1","min-w-0"],[1,"flex","items-center","gap-1"],[1,"text-xs","font-semibold","text-white","truncate"],[1,"mt-0.5","flex","items-center","gap-1","text-xs","text-gray-500"],[1,"p-0.5","text-gray-400","hover:text-red-400","rounded","transition-colors","flex-shrink-0",3,"click"],[1,"p-1","text-xs","text-gray-400","hover:text-white","hover:bg-slate-700","rounded","transition-colors",3,"click","title"],[1,"border","border-slate-700","rounded","overflow-hidden"],[1,"bg-slate-800","p-2"],[1,"flex","items-center","gap-2","cursor-pointer","group"],["type","checkbox",1,"w-3.5","h-3.5","text-blue-600","bg-slate-700","border-slate-600","rounded","focus:ring-blue-500",3,"change","checked"],[1,"text-xs","font-semibold","text-white","group-hover:text-purple-300","flex-1"],[1,"p-0.5","hover:bg-slate-700","rounded"],[1,"bg-slate-800/50","pl-4"],[1,"p-0.5","hover:bg-slate-700","rounded",3,"click"],[1,"p-2","text-xs","text-gray-500","italic"],[1,"border-t","border-slate-700/50"],[1,"p-1.5"],[1,"flex","items-center","gap-1.5","cursor-pointer","group"],["type","checkbox",1,"w-3","h-3","text-green-600","bg-slate-700","border-slate-600","rounded","focus:ring-green-500",3,"change","checked"],[1,"text-xs","font-medium","text-gray-300","group-hover:text-purple-300","flex-1"],[1,"pl-3","pb-1"],[1,"p-1","text-xs","text-gray-500","italic"],[1,"p-1"],["type","checkbox",1,"w-3","h-3","text-purple-600","bg-slate-700","border-slate-600","rounded","focus:ring-purple-500",3,"change","checked"],[1,"text-xs","text-gray-400","group-hover:text-purple-300"],[1,"space-y-2"],[1,"block","text-xs","font-semibold","text-gray-300","mb-1"],["type","text","placeholder","Ej: Asesor de Cobranza",1,"w-full","px-2","py-1.5","bg-slate-800","border","border-slate-700","rounded","text-white","text-sm","placeholder:text-gray-500","focus:outline-none","focus:ring-1","focus:ring-purple-500",3,"ngModelChange","ngModel"],["rows","2","placeholder","Describe las responsabilidades...",1,"w-full","px-2","py-1.5","bg-slate-800","border","border-slate-700","rounded","text-white","text-sm","placeholder:text-gray-500","focus:outline-none","focus:ring-1","focus:ring-purple-500","resize-none",3,"ngModelChange","ngModel"],["type","checkbox","id","roleActive",1,"w-3.5","h-3.5","text-purple-600","bg-slate-800","border-slate-700","rounded","focus:ring-purple-500",3,"ngModelChange","ngModel"],["for","roleActive",1,"text-xs","text-gray-300","cursor-pointer"],[1,"flex","items-center","justify-between","mb-2"],[1,"text-xs","font-semibold","text-purple-300"],[1,"space-y-1.5"],[1,"bg-slate-800","rounded","border","border-slate-700","p-2"],[1,"flex","items-center","gap-1.5","mb-1.5"],[1,"text-xs","font-semibold","text-white"],[1,"space-y-0.5","ml-4"],[1,"flex","items-start","gap-1.5","p-1","hover:bg-slate-700/50","rounded","cursor-pointer","group"],["type","checkbox",1,"mt-0.5","w-3.5","h-3.5","text-purple-600","bg-slate-700","border-slate-600","rounded","focus:ring-purple-500",3,"change","checked"],[1,"text-xs","font-medium","text-gray-300","group-hover:text-white","truncate"],[1,"text-xs","text-gray-500","leading-tight"],[1,"text-sm","text-gray-400"],[1,"px-4","py-2","bg-slate-700","hover:bg-slate-600","text-white","rounded","text-sm","font-semibold","transition-colors",3,"click"],[1,"px-4","py-2","bg-purple-600","hover:bg-purple-700","disabled:bg-slate-700","disabled:cursor-not-allowed","text-white","rounded","text-sm","font-semibold","transition-colors","flex","items-center","gap-1.5",3,"click","disabled"]],template:function(i,t){if(i&1&&(l(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),Q(5,"div",5),l(6,"div")(7,"h1",6),m(8,"Gesti\xF3n de Roles"),r(),l(9,"p",7),m(10,"Define roles, permisos y asignaciones m\xFAltiples"),r()()()(),l(11,"div",8)(12,"div",9)(13,"div",10)(14,"div",4)(15,"h2",11),m(16,"Roles"),r(),l(17,"span",7),m(18),r()(),l(19,"button",12),h("click",function(){return t.createNewRole()}),m(20," Nuevo "),r()(),l(21,"div",13),b(22,se,5,0,"div",14)(23,le,2,0),r()(),l(24,"div",15)(25,"div",16)(26,"div",17)(27,"div",4)(28,"h2",11),m(29,"Asignaciones"),r(),l(30,"span",7),m(31),r()(),b(32,ae,1,1,"button",18),r()(),l(33,"div",19),b(34,he,3,0,"div",20)(35,be,3,0,"div",21),r()(),l(36,"div",22)(37,"div",16)(38,"div",4)(39,"h2",11),m(40),r()()(),l(41,"div",23),b(42,Re,22,4)(43,ye,3,0,"div",21),r()()(),b(44,Pe,5,1,"div",24),r()()()),i&2){let n;d(18),v("(",t.roles().length,")"),d(4),C(t.roles().length===0?22:23),d(9),v("(",t.selectedRole()?t.selectedRole().assignments.length:0,")"),d(),C(t.selectedRole()?32:-1),d(2),C(t.selectedRole()?34:35),d(6),v(" ",(n=t.selectedRole())!=null&&n.id?"Editar Rol":t.selectedRole()?"Nuevo Rol":"Informaci\xF3n"," "),d(2),C(t.selectedRole()?42:43),d(2),C(t.selectedRole()?44:-1)}},dependencies:[G,Z,K,J,X,Y],encapsulation:2});let s=a;return s})();export{$e as RolesManagementComponent};
