{
  "version": 3,
  "sources": ["src/app/shared/components/payment-schedule/payment-schedule.component.ts", "src/app/collection-management/components/dynamic-field-renderer/dynamic-field-renderer.component.ts", "src/app/collection-management/services/api-system-config.service.ts", "src/app/maintenance/services/typification-v2.service.ts"],
  "sourcesContent": ["import { Component, input, Input, Output, EventEmitter, OnInit, signal, computed } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { LucideAngularModule } from 'lucide-angular';\r\nimport { PaymentScheduleConfig, PaymentInstallment } from '../../../maintenance/models/typification-v2.model';\r\n\r\nexport interface AmountOption {\r\n  label: string;\r\n  value: number;\r\n  field?: string;\r\n  restriccionFecha?: 'SIN_RESTRICCION' | 'DENTRO_MES' | 'FUERA_MES' | string;\r\n  generaCartaAcuerdo?: boolean;  // Indica si al seleccionar este monto se genera carta de acuerdo\r\n}\r\n\r\n@Component({\r\n  selector: 'app-payment-schedule',\r\n  standalone: true,\r\n  imports: [CommonModule, FormsModule, LucideAngularModule],\r\n  template: `\r\n    <div class=\"payment-schedule-container bg-slate-100 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-xl p-4 transition-colors duration-300\">\r\n      <!-- Selector de Monto -->\r\n      <div class=\"field-group mb-5\">\r\n        <label class=\"flex items-center gap-2 font-semibold text-slate-700 dark:text-slate-200 text-sm mb-3 transition-colors duration-300\">\r\n          <div class=\"w-6 h-6 bg-emerald-100 dark:bg-emerald-900/50 rounded-lg flex items-center justify-center transition-colors duration-300\">\r\n            <lucide-angular name=\"wallet\" [size]=\"14\" class=\"text-emerald-600 dark:text-emerald-400\"></lucide-angular>\r\n          </div>\r\n          Seleccionar Monto\r\n        </label>\r\n        <div class=\"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-2\">\r\n          @for (option of regularAmountOptions(); track option.field) {\r\n            <button\r\n              type=\"button\"\r\n              [class]=\"'flex flex-col items-center p-3 border-2 rounded-lg cursor-pointer transition-all duration-200 hover:shadow-md ' +\r\n                (selectedField() === option.field && !isCustomAmount()\r\n                  ? 'border-blue-500 bg-blue-500 dark:bg-blue-600 text-white shadow-lg shadow-blue-500/30'\r\n                  : 'border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 hover:border-blue-400 dark:hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-slate-600')\"\r\n              (click)=\"selectAmount(option.value, option.field, option.restriccionFecha, option.generaCartaAcuerdo)\"\r\n            >\r\n              <span class=\"text-[10px] opacity-70 leading-tight text-center\">{{ option.label }}</span>\r\n              <span class=\"text-sm font-bold mt-1\">{{ formatCurrency(option.value) }}</span>\r\n              @if (option.restriccionFecha && option.restriccionFecha !== 'SIN_RESTRICCION') {\r\n                <span class=\"text-[8px] mt-1 px-1.5 py-0.5 rounded-full\"\r\n                  [class]=\"option.restriccionFecha === 'DENTRO_MES'\r\n                    ? 'bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300'\r\n                    : 'bg-purple-100 dark:bg-purple-900/50 text-purple-700 dark:text-purple-300'\">\r\n                  {{ option.restriccionFecha === 'DENTRO_MES' ? 'Este mes' : 'Pr칩x. mes+' }}\r\n                </span>\r\n              }\r\n            </button>\r\n          }\r\n          <!-- Opci칩n personalizada -->\r\n          @if (hasCustomOption()) {\r\n            <button\r\n              type=\"button\"\r\n              [class]=\"'flex flex-col items-center p-3 border-2 rounded-lg cursor-pointer transition-all duration-200 hover:shadow-md ' +\r\n                (isCustomAmount()\r\n                  ? 'col-span-2 border-purple-500 bg-purple-500 dark:bg-purple-600 text-white shadow-lg shadow-purple-500/30'\r\n                  : 'border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 hover:border-purple-400 dark:hover:border-purple-500 hover:bg-purple-50 dark:hover:bg-slate-600')\"\r\n              (click)=\"enableCustomAmount()\"\r\n            >\r\n              <span class=\"text-[10px] opacity-70\">Otro monto</span>\r\n              @if (isCustomAmount()) {\r\n                <input\r\n                  type=\"number\"\r\n                  class=\"w-full mt-1 px-3 py-1.5 border border-white/30 rounded text-center text-base font-bold bg-white/90 dark:bg-slate-800 text-slate-800 dark:text-white min-w-[120px]\"\r\n                  [(ngModel)]=\"customAmountValue\"\r\n                  (ngModelChange)=\"onCustomAmountChange($event)\"\r\n                  (click)=\"$event.stopPropagation()\"\r\n                  placeholder=\"0.00\"\r\n                  min=\"0\"\r\n                  step=\"0.01\"\r\n                >\r\n              } @else {\r\n                <lucide-angular name=\"edit-3\" [size]=\"16\" class=\"mt-1\"></lucide-angular>\r\n              }\r\n            </button>\r\n          }\r\n        </div>\r\n\r\n        <!-- Selector de campo base para \"Otro monto\" -->\r\n        @if (isCustomAmount()) {\r\n          <div class=\"mt-3 flex items-center gap-3 p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-200 dark:border-purple-800\">\r\n            <lucide-angular name=\"link\" [size]=\"16\" class=\"text-purple-500 flex-shrink-0\"></lucide-angular>\r\n            <span class=\"text-xs text-purple-700 dark:text-purple-300\">Campo base:</span>\r\n            <select\r\n              class=\"flex-1 px-2 py-1.5 text-sm border border-purple-300 dark:border-purple-600 rounded-lg bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-2 focus:ring-purple-500\"\r\n              [ngModel]=\"selectedBaseField()\"\r\n              (ngModelChange)=\"onBaseFieldChange($event)\"\r\n            >\r\n              <option value=\"\">Ninguno (monto libre)</option>\r\n              @for (option of regularAmountOptions(); track option.field) {\r\n                <option [value]=\"option.field\">{{ option.label }} ({{ formatCurrency(option.value) }})</option>\r\n              }\r\n            </select>\r\n            @if (selectedBaseField()) {\r\n              <div class=\"relative\">\r\n                <!-- Badge clickeable -->\r\n                <button\r\n                  type=\"button\"\r\n                  class=\"text-xs font-medium px-2.5 py-1 rounded-full cursor-pointer transition-all duration-200 hover:scale-105 hover:shadow-md\"\r\n                  [class]=\"getDiscountInfo().isDiscount\r\n                    ? 'bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 hover:bg-red-200 dark:hover:bg-red-800/50'\r\n                    : 'bg-green-100 dark:bg-green-900/50 text-green-700 dark:text-green-300 hover:bg-green-200 dark:hover:bg-green-800/50'\"\r\n                  (click)=\"togglePercentageEditor($event)\"\r\n                >\r\n                  {{ getDiscountInfo().isDiscount ? '-' : '+' }}{{ getDiscountInfo().percentage }}%\r\n                </button>\r\n\r\n                <!-- Popover para editar porcentaje -->\r\n                @if (showPercentageEditor()) {\r\n                  <!-- Overlay para cerrar al hacer click fuera -->\r\n                  <div class=\"fixed inset-0 z-40\" (click)=\"showPercentageEditor.set(false)\"></div>\r\n                  <div class=\"absolute right-0 top-full mt-2 z-50 animate-in fade-in slide-in-from-top-2 duration-200\">\r\n                    <div class=\"bg-white dark:bg-slate-800 rounded-xl shadow-xl border border-slate-200 dark:border-slate-600 p-3 min-w-[180px]\">\r\n                      <!-- Flecha -->\r\n                      <div class=\"absolute -top-2 right-4 w-4 h-4 bg-white dark:bg-slate-800 border-l border-t border-slate-200 dark:border-slate-600 transform rotate-45\"></div>\r\n\r\n                      <div class=\"relative\">\r\n                        <label class=\"text-[10px] text-slate-500 dark:text-slate-400 uppercase tracking-wide font-medium\">Ajuste %</label>\r\n                        <div class=\"flex items-center gap-2 mt-1.5\">\r\n                          <button\r\n                            type=\"button\"\r\n                            class=\"w-7 h-7 rounded-lg flex items-center justify-center transition-colors\"\r\n                            [class]=\"isDiscountMode()\r\n                              ? 'bg-red-500 text-white'\r\n                              : 'bg-slate-100 dark:bg-slate-700 text-slate-500 hover:bg-red-100 dark:hover:bg-red-900/30'\"\r\n                            (click)=\"setDiscountMode(true)\"\r\n                          >\r\n                            <lucide-angular name=\"minus\" [size]=\"14\"></lucide-angular>\r\n                          </button>\r\n                          <input\r\n                            type=\"number\"\r\n                            class=\"flex-1 w-16 px-2 py-1.5 text-center text-sm font-bold border border-slate-200 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-700 text-slate-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500\"\r\n                            [ngModel]=\"editablePercentage()\"\r\n                            (ngModelChange)=\"onPercentageChange($event)\"\r\n                            (click)=\"$event.stopPropagation()\"\r\n                            min=\"0\"\r\n                            max=\"100\"\r\n                            step=\"1\"\r\n                          >\r\n                          <button\r\n                            type=\"button\"\r\n                            class=\"w-7 h-7 rounded-lg flex items-center justify-center transition-colors\"\r\n                            [class]=\"!isDiscountMode()\r\n                              ? 'bg-green-500 text-white'\r\n                              : 'bg-slate-100 dark:bg-slate-700 text-slate-500 hover:bg-green-100 dark:hover:bg-green-900/30'\"\r\n                            (click)=\"setDiscountMode(false)\"\r\n                          >\r\n                            <lucide-angular name=\"plus\" [size]=\"14\"></lucide-angular>\r\n                          </button>\r\n                        </div>\r\n                        <p class=\"text-[10px] text-slate-400 dark:text-slate-500 mt-2 text-center\">\r\n                          Base: {{ formatCurrency(montoBase() || 0) }}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                }\r\n              </div>\r\n            }\r\n          </div>\r\n        }\r\n      </div>\r\n\r\n      <!-- Selector de Cuotas -->\r\n      @if (selectedAmount() > 0) {\r\n        <div class=\"field-group mb-5\">\r\n          <label class=\"flex items-center gap-2 font-semibold text-slate-700 dark:text-slate-200 text-sm mb-3 transition-colors duration-300\">\r\n            <div class=\"w-6 h-6 bg-blue-100 dark:bg-blue-900/50 rounded-lg flex items-center justify-center transition-colors duration-300\">\r\n              <lucide-angular name=\"calendar-days\" [size]=\"14\" class=\"text-blue-600 dark:text-blue-400\"></lucide-angular>\r\n            </div>\r\n            N칰mero de Cuotas\r\n          </label>\r\n          <div class=\"flex flex-wrap gap-2\">\r\n            @for (num of installmentOptions; track num) {\r\n              <button\r\n                type=\"button\"\r\n                [class]=\"'px-4 py-2 border-2 rounded-lg cursor-pointer transition-all duration-200 text-sm font-medium hover:shadow-md ' +\r\n                  (numberOfInstallments() === num\r\n                    ? 'border-emerald-500 bg-emerald-500 dark:bg-emerald-600 text-white shadow-lg shadow-emerald-500/30'\r\n                    : 'border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 hover:border-emerald-400 dark:hover:border-emerald-500 hover:bg-emerald-50 dark:hover:bg-slate-600')\"\r\n                (click)=\"setInstallments(num)\"\r\n              >\r\n                {{ num }} {{ num === 1 ? 'cuota' : 'cuotas' }}\r\n              </button>\r\n            }\r\n          </div>\r\n        </div>\r\n      }\r\n\r\n      <!-- Detalle de Cuotas -->\r\n      @if (installments().length > 0) {\r\n        <div class=\"field-group\">\r\n          <label class=\"flex items-center gap-2 font-semibold text-slate-700 dark:text-slate-200 text-sm mb-3 transition-colors duration-300\">\r\n            <div class=\"w-6 h-6 bg-amber-100 dark:bg-amber-900/50 rounded-lg flex items-center justify-center transition-colors duration-300\">\r\n              <lucide-angular name=\"list-ordered\" [size]=\"14\" class=\"text-amber-600 dark:text-amber-400\"></lucide-angular>\r\n            </div>\r\n            Detalle del Cronograma\r\n          </label>\r\n          <!-- Mensaje de restricci칩n de fecha -->\r\n          @if (dateRestrictionInfo().message) {\r\n            <div class=\"mb-3 px-3 py-2 rounded-lg text-xs flex items-center gap-2\"\r\n              [class]=\"selectedRestriccion() === 'DENTRO_MES'\r\n                ? 'bg-amber-100 dark:bg-amber-900/40 text-amber-700 dark:text-amber-300 border border-amber-200 dark:border-amber-800'\r\n                : 'bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-300 border border-purple-200 dark:border-purple-800'\">\r\n              <lucide-angular name=\"info\" [size]=\"14\"></lucide-angular>\r\n              <span>{{ dateRestrictionInfo().message }}</span>\r\n            </div>\r\n          }\r\n          <div class=\"bg-white dark:bg-slate-700/50 rounded-xl border border-slate-200 dark:border-slate-600 overflow-hidden transition-colors duration-300\">\r\n            @for (installment of installments(); track installment.numeroCuota) {\r\n              <div class=\"grid grid-cols-1 sm:grid-cols-[100px_1fr_1fr] gap-3 p-3 border-b border-slate-100 dark:border-slate-600 last:border-b-0 items-center transition-colors duration-300\">\r\n                <div class=\"font-bold text-blue-600 dark:text-blue-400 text-sm flex items-center gap-2\">\r\n                  <lucide-angular name=\"hash\" [size]=\"14\"></lucide-angular>\r\n                  Cuota {{ installment.numeroCuota }}\r\n                </div>\r\n                <div class=\"flex items-center gap-2\">\r\n                  <label class=\"text-xs text-slate-500 dark:text-slate-400 min-w-[50px]\">Monto:</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    [(ngModel)]=\"installment.monto\"\r\n                    (ngModelChange)=\"onInstallmentAmountChange(installment.numeroCuota)\"\r\n                    [min]=\"1\"\r\n                    step=\"0.01\"\r\n                    class=\"flex-1 px-3 py-2 border border-slate-200 dark:border-slate-500 rounded-lg text-sm bg-slate-50 dark:bg-slate-600 text-slate-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200\"\r\n                  >\r\n                </div>\r\n                <div class=\"flex items-center gap-2\">\r\n                  <label class=\"text-xs text-slate-500 dark:text-slate-400 min-w-[50px]\">Fecha:</label>\r\n                  <input\r\n                    type=\"date\"\r\n                    [(ngModel)]=\"installment.fechaPago\"\r\n                    (ngModelChange)=\"onInstallmentChange()\"\r\n                    [min]=\"dateRestrictionInfo().minDate\"\r\n                    [max]=\"dateRestrictionInfo().maxDate\"\r\n                    class=\"flex-1 px-3 py-2 border border-slate-200 dark:border-slate-500 rounded-lg text-sm bg-slate-50 dark:bg-slate-600 text-slate-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200\"\r\n                  >\r\n                </div>\r\n              </div>\r\n            }\r\n          </div>\r\n\r\n          <!-- Resumen -->\r\n          <div class=\"mt-4 p-4 bg-emerald-50 dark:bg-emerald-900/30 rounded-xl border border-emerald-200 dark:border-emerald-800 transition-colors duration-300\">\r\n            <div class=\"flex justify-between items-center text-sm text-emerald-700 dark:text-emerald-300\">\r\n              <span class=\"flex items-center gap-2\">\r\n                <lucide-angular name=\"calculator\" [size]=\"16\"></lucide-angular>\r\n                Monto Total:\r\n              </span>\r\n              <span class=\"text-lg font-bold\">{{ formatCurrency(totalAmount()) }}</span>\r\n            </div>\r\n            @if (numberOfInstallments() > 1) {\r\n              <div class=\"flex justify-between items-center text-sm text-emerald-600 dark:text-emerald-400 mt-2 pt-2 border-t border-emerald-200 dark:border-emerald-700\">\r\n                <span>Monto por cuota:</span>\r\n                <span class=\"font-semibold\">{{ formatCurrency(amountPerInstallment()) }}</span>\r\n              </div>\r\n            }\r\n          </div>\r\n        </div>\r\n      }\r\n    </div>\r\n  `,\r\n  styles: [`\r\n    @keyframes fadeIn {\r\n      from {\r\n        opacity: 0;\r\n        transform: translateY(-5px);\r\n      }\r\n      to {\r\n        opacity: 1;\r\n        transform: translateY(0);\r\n      }\r\n    }\r\n\r\n    .animate-fade-in {\r\n      animation: fadeIn 0.3s ease-out forwards;\r\n    }\r\n\r\n    /* Date input styling for dark mode */\r\n    input[type=\"date\"]::-webkit-calendar-picker-indicator {\r\n      filter: invert(0);\r\n    }\r\n\r\n    :host-context(html.dark) input[type=\"date\"]::-webkit-calendar-picker-indicator {\r\n      filter: invert(1);\r\n    }\r\n\r\n    /* Number input arrows */\r\n    input[type=\"number\"]::-webkit-inner-spin-button,\r\n    input[type=\"number\"]::-webkit-outer-spin-button {\r\n      opacity: 1;\r\n    }\r\n  `]\r\n})\r\nexport class PaymentScheduleComponent implements OnInit {\r\n  // Signal inputs for reactivity\r\n  availableAmounts = input<AmountOption[]>([]);\r\n  @Input() maxInstallments: number = 6;\r\n  @Output() scheduleChange = new EventEmitter<PaymentScheduleConfig | null>();\r\n  @Output() customAmountSelected = new EventEmitter<boolean>();\r\n\r\n  // Signals\r\n  selectedAmount = signal<number>(0);\r\n  selectedField = signal<string | undefined>(undefined);\r\n  selectedRestriccion = signal<string>('SIN_RESTRICCION');\r\n  selectedGeneraCartaAcuerdo = signal<boolean>(false);  // Si la opci칩n seleccionada genera carta de acuerdo\r\n  numberOfInstallments = signal<number>(1);\r\n  installments = signal<PaymentInstallment[]>([]);\r\n  customAmountValue: number = 0;\r\n  private _isCustomAmount = signal<boolean>(false);\r\n  montoBase = signal<number | undefined>(undefined);  // Monto original del campo seleccionado\r\n  selectedBaseField = signal<string>('');  // Campo base seleccionado para \"Otro monto\"\r\n\r\n  // Signals para editor de porcentaje\r\n  showPercentageEditor = signal<boolean>(false);\r\n  editablePercentage = signal<number>(0);\r\n  isDiscountMode = signal<boolean>(true);  // true = descuento (-), false = aumento (+)\r\n\r\n  // Computed\r\n  amountOptions = computed(() => this.availableAmounts());\r\n\r\n  // Computed para restricci칩n de fecha\r\n  dateRestrictionInfo = computed(() => {\r\n    const restriccion = this.selectedRestriccion();\r\n    const today = new Date();\r\n    const currentMonth = today.getMonth();\r\n    const currentYear = today.getFullYear();\r\n\r\n    // 칔ltimo d칤a del mes actual\r\n    const lastDayOfMonth = new Date(currentYear, currentMonth + 1, 0);\r\n    // Primer d칤a del pr칩ximo mes\r\n    const firstDayNextMonth = new Date(currentYear, currentMonth + 1, 1);\r\n\r\n    // Helper para formatear sin timezone issues\r\n    const formatDate = (date: Date): string => {\r\n      const year = date.getFullYear();\r\n      const month = String(date.getMonth() + 1).padStart(2, '0');\r\n      const day = String(date.getDate()).padStart(2, '0');\r\n      return `${year}-${month}-${day}`;\r\n    };\r\n\r\n    switch (restriccion) {\r\n      case 'DENTRO_MES':\r\n        return {\r\n          minDate: formatDate(today),\r\n          maxDate: formatDate(lastDayOfMonth),\r\n          message: `Solo fechas dentro del mes actual (hasta ${lastDayOfMonth.toLocaleDateString('es-PE')})`\r\n        };\r\n      case 'FUERA_MES':\r\n        return {\r\n          minDate: formatDate(firstDayNextMonth),\r\n          maxDate: undefined,\r\n          message: `Solo fechas a partir del ${firstDayNextMonth.toLocaleDateString('es-PE')}`\r\n        };\r\n      default:\r\n        return {\r\n          minDate: formatDate(today),\r\n          maxDate: undefined,\r\n          message: undefined\r\n        };\r\n    }\r\n  });\r\n\r\n  regularAmountOptions = computed(() =>\r\n    this.availableAmounts().filter(opt => opt.field !== 'personalizado')\r\n  );\r\n\r\n  hasCustomOption = computed(() =>\r\n    this.availableAmounts().some(opt => opt.field === 'personalizado')\r\n  );\r\n\r\n  totalAmount = computed(() =>\r\n    this.installments().reduce((sum, i) => sum + (i.monto || 0), 0)\r\n  );\r\n\r\n  amountPerInstallment = computed(() => {\r\n    const num = this.numberOfInstallments();\r\n    const amount = this.selectedAmount();\r\n    return num > 0 ? amount / num : 0;\r\n  });\r\n\r\n  installmentOptions: number[] = [];\r\n  minDate: string = '';\r\n\r\n  ngOnInit(): void {\r\n    this.installmentOptions = Array.from({ length: this.maxInstallments }, (_, i) => i + 1);\r\n    const today = new Date();\r\n    this.minDate = this.formatDateToYYYYMMDD(today);\r\n  }\r\n\r\n  isCustomAmount(): boolean {\r\n    return this._isCustomAmount();\r\n  }\r\n\r\n  selectAmount(amount: number, field?: string, restriccion?: string, generaCartaAcuerdo?: boolean): void {\r\n    this._isCustomAmount.set(false);\r\n    this.selectedAmount.set(amount);\r\n    this.selectedField.set(field);\r\n    this.selectedRestriccion.set(restriccion || 'SIN_RESTRICCION');\r\n    this.selectedGeneraCartaAcuerdo.set(generaCartaAcuerdo || false);  // Guardar si genera carta\r\n    this.montoBase.set(amount);  // Guardar monto original del campo\r\n    this.generateInstallments();\r\n    this.customAmountSelected.emit(false);\r\n  }\r\n\r\n  // M칠todo para obtener la restricci칩n de una opci칩n por su field\r\n  getRestriccionForField(field: string): string {\r\n    const option = this.availableAmounts().find(o => o.field === field);\r\n    return option?.restriccionFecha || 'SIN_RESTRICCION';\r\n  }\r\n\r\n  enableCustomAmount(): void {\r\n    this._isCustomAmount.set(true);\r\n    this.selectedField.set(undefined);\r\n    this.montoBase.set(undefined);  // Monto libre no tiene base\r\n    this.selectedBaseField.set('');  // Resetear campo base\r\n    this.customAmountSelected.emit(true);\r\n    if (this.customAmountValue > 0) {\r\n      this.selectedAmount.set(this.customAmountValue);\r\n      this.generateInstallments();\r\n    }\r\n  }\r\n\r\n  onCustomAmountChange(value: number): void {\r\n    this.customAmountValue = value;\r\n    this.selectedAmount.set(value);\r\n    // Re-calcular montoBase si hay campo base seleccionado\r\n    if (this.selectedBaseField()) {\r\n      const option = this.availableAmounts().find(o => o.field === this.selectedBaseField());\r\n      if (option) {\r\n        this.montoBase.set(option.value);\r\n        this.selectedField.set(option.field);\r\n      }\r\n    }\r\n    this.generateInstallments();\r\n  }\r\n\r\n  /**\r\n   * Cuando el usuario selecciona un campo base para \"Otro monto\"\r\n   */\r\n  onBaseFieldChange(fieldValue: string): void {\r\n    this.selectedBaseField.set(fieldValue);\r\n\r\n    if (fieldValue) {\r\n      // Buscar la opci칩n seleccionada\r\n      const option = this.availableAmounts().find(o => o.field === fieldValue);\r\n      if (option) {\r\n        this.montoBase.set(option.value);\r\n        this.selectedField.set(option.field);\r\n      }\r\n    } else {\r\n      // \"Ninguno\" - monto libre\r\n      this.montoBase.set(undefined);\r\n      this.selectedField.set(undefined);\r\n    }\r\n    this.emitChange();\r\n  }\r\n\r\n  /**\r\n   * Calcula info del descuento para mostrar en el UI\r\n   */\r\n  getDiscountInfo(): { hasDiscount: boolean; isDiscount: boolean; percentage: number } {\r\n    const base = this.montoBase();\r\n    const actual = this.customAmountValue;\r\n\r\n    if (!base || !actual || base === actual) {\r\n      return { hasDiscount: false, isDiscount: false, percentage: 0 };\r\n    }\r\n\r\n    const diff = base - actual;\r\n    const percentage = Math.abs(Math.round((diff / base) * 100));\r\n\r\n    return {\r\n      hasDiscount: true,\r\n      isDiscount: diff > 0,  // true = descuento, false = exceso\r\n      percentage\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Abre/cierra el editor de porcentaje\r\n   */\r\n  togglePercentageEditor(event: Event): void {\r\n    event.stopPropagation();\r\n    const isOpen = !this.showPercentageEditor();\r\n    this.showPercentageEditor.set(isOpen);\r\n\r\n    if (isOpen) {\r\n      // Sincronizar valores al abrir\r\n      const info = this.getDiscountInfo();\r\n      this.editablePercentage.set(info.percentage);\r\n      this.isDiscountMode.set(info.isDiscount);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Cambia entre modo descuento (-) y aumento (+)\r\n   */\r\n  setDiscountMode(isDiscount: boolean): void {\r\n    this.isDiscountMode.set(isDiscount);\r\n    // Recalcular monto con el nuevo modo\r\n    this.applyPercentageToAmount(this.editablePercentage());\r\n  }\r\n\r\n  /**\r\n   * Cuando el usuario cambia el porcentaje manualmente\r\n   */\r\n  onPercentageChange(percentage: number): void {\r\n    this.editablePercentage.set(percentage);\r\n    this.applyPercentageToAmount(percentage);\r\n  }\r\n\r\n  /**\r\n   * Aplica el porcentaje al monto base y actualiza customAmountValue\r\n   */\r\n  private applyPercentageToAmount(percentage: number): void {\r\n    const base = this.montoBase();\r\n    if (!base) return;\r\n\r\n    let newAmount: number;\r\n    if (this.isDiscountMode()) {\r\n      // Descuento: restar porcentaje del base\r\n      newAmount = base * (1 - percentage / 100);\r\n    } else {\r\n      // Aumento: sumar porcentaje al base\r\n      newAmount = base * (1 + percentage / 100);\r\n    }\r\n\r\n    // Redondear a 2 decimales\r\n    this.customAmountValue = Math.round(newAmount * 100) / 100;\r\n    this.selectedAmount.set(this.customAmountValue);\r\n    this.generateInstallments();\r\n  }\r\n\r\n  setInstallments(num: number): void {\r\n    this.numberOfInstallments.set(num);\r\n    this.generateInstallments();\r\n  }\r\n\r\n  generateInstallments(): void {\r\n    const amount = this.selectedAmount();\r\n    const numInstallments = this.numberOfInstallments();\r\n\r\n    if (amount <= 0 || numInstallments <= 0) {\r\n      this.installments.set([]);\r\n      this.emitChange();\r\n      return;\r\n    }\r\n\r\n    const amountPerInstallment = Math.floor((amount / numInstallments) * 100) / 100;\r\n    const remainder = Math.round((amount - (amountPerInstallment * numInstallments)) * 100) / 100;\r\n\r\n    const newInstallments: PaymentInstallment[] = [];\r\n    const restriccion = this.selectedRestriccion();\r\n\r\n    // Determinar la fecha inicial seg칰n la restricci칩n\r\n    let startDate: Date;\r\n    const today = new Date();\r\n    const currentMonth = today.getMonth();\r\n    const currentYear = today.getFullYear();\r\n\r\n    if (restriccion === 'FUERA_MES') {\r\n      // Empezar desde el primer d칤a del pr칩ximo mes\r\n      startDate = new Date(currentYear, currentMonth + 1, 1);\r\n    } else {\r\n      // Para SIN_RESTRICCION o DENTRO_MES, empezar desde ma침ana\r\n      startDate = new Date(today);\r\n      startDate.setDate(startDate.getDate() + 1);\r\n    }\r\n\r\n    // Para DENTRO_MES, calcular el 칰ltimo d칤a permitido\r\n    const lastDayOfMonth = restriccion === 'DENTRO_MES'\r\n      ? new Date(currentYear, currentMonth + 1, 0)\r\n      : null;\r\n\r\n    for (let i = 0; i < numInstallments; i++) {\r\n      let dueDate: Date;\r\n\r\n      if (restriccion === 'DENTRO_MES' && lastDayOfMonth) {\r\n        // Distribuir fechas dentro del mes actual\r\n        const daysRemaining = Math.max(1, lastDayOfMonth.getDate() - startDate.getDate());\r\n        const dayIncrement = Math.floor(daysRemaining / numInstallments);\r\n        dueDate = new Date(startDate);\r\n        dueDate.setDate(startDate.getDate() + (dayIncrement * i));\r\n        // Asegurar que no pase del 칰ltimo d칤a del mes\r\n        if (dueDate > lastDayOfMonth) {\r\n          dueDate = new Date(lastDayOfMonth);\r\n        }\r\n      } else if (restriccion === 'FUERA_MES') {\r\n        // Cada cuota con 30 d칤as de diferencia, empezando desde el pr칩ximo mes\r\n        dueDate = new Date(startDate);\r\n        dueDate.setDate(dueDate.getDate() + (30 * i));\r\n      } else {\r\n        // SIN_RESTRICCION: comportamiento original\r\n        dueDate = new Date(today);\r\n        dueDate.setDate(dueDate.getDate() + (30 * (i + 1)));\r\n      }\r\n\r\n      const installmentAmount = i === numInstallments - 1\r\n        ? amountPerInstallment + remainder\r\n        : amountPerInstallment;\r\n\r\n      newInstallments.push({\r\n        numeroCuota: i + 1,\r\n        monto: installmentAmount,\r\n        fechaPago: this.formatDateToYYYYMMDD(dueDate)\r\n      });\r\n    }\r\n\r\n    this.installments.set(newInstallments);\r\n    this.emitChange();\r\n  }\r\n\r\n  onInstallmentChange(): void {\r\n    this.emitChange();\r\n  }\r\n\r\n  // Monto m칤nimo por cuota\r\n  private readonly MIN_CUOTA_AMOUNT = 1;\r\n\r\n  /**\r\n   * Recalcula las cuotas posteriores cuando se edita el monto de una cuota.\r\n   * Las cuotas anteriores a la editada no se modifican.\r\n   * El restante se distribuye equitativamente entre las cuotas posteriores.\r\n   *\r\n   * Validaciones:\r\n   * - Ninguna cuota puede ser menor a S/ 1.00\r\n   * - Ninguna cuota puede superar el monto total\r\n   * - La suma de cuotas debe ser exactamente igual al monto total\r\n   */\r\n  onInstallmentAmountChange(editedCuotaNumber: number): void {\r\n    const currentInstallments = this.installments();\r\n    const totalAmount = this.selectedAmount();\r\n    const numInstallments = currentInstallments.length;\r\n    const editedIndex = editedCuotaNumber - 1; // Convertir a 칤ndice base 0\r\n    const editedCuota = currentInstallments[editedIndex];\r\n\r\n    // Validaci칩n 1: El monto no puede ser menor al m칤nimo\r\n    if (editedCuota.monto < this.MIN_CUOTA_AMOUNT) {\r\n      editedCuota.monto = this.MIN_CUOTA_AMOUNT;\r\n    }\r\n\r\n    // Validaci칩n 2: Calcular el m치ximo permitido para esta cuota\r\n    // M치ximo = Total - (suma de cuotas anteriores) - (m칤nimo * cuotas posteriores)\r\n    let sumaPreviousCuotas = 0;\r\n    for (let i = 0; i < editedIndex; i++) {\r\n      sumaPreviousCuotas += currentInstallments[i].monto || 0;\r\n    }\r\n    const cuotasPosteriores = numInstallments - editedCuotaNumber;\r\n    const minimoReservadoParaPosteriores = cuotasPosteriores * this.MIN_CUOTA_AMOUNT;\r\n    const maxAllowedForThisCuota = totalAmount - sumaPreviousCuotas - minimoReservadoParaPosteriores;\r\n\r\n    // Si el monto editado supera el m치ximo permitido, ajustarlo\r\n    if (editedCuota.monto > maxAllowedForThisCuota) {\r\n      editedCuota.monto = Math.max(this.MIN_CUOTA_AMOUNT, Math.floor(maxAllowedForThisCuota * 100) / 100);\r\n    }\r\n\r\n    // Si es la 칰ltima cuota, solo validar y emitir\r\n    if (editedCuotaNumber >= numInstallments) {\r\n      this.installments.set([...currentInstallments]);\r\n      this.emitChange();\r\n      return;\r\n    }\r\n\r\n    // Calcular la suma de las cuotas desde la primera hasta la editada (inclusive)\r\n    let sumUpToEdited = 0;\r\n    for (let i = 0; i < editedCuotaNumber; i++) {\r\n      sumUpToEdited += currentInstallments[i].monto || 0;\r\n    }\r\n\r\n    // Calcular el restante para las cuotas posteriores\r\n    const remaining = totalAmount - sumUpToEdited;\r\n    const remainingInstallments = numInstallments - editedCuotaNumber;\r\n\r\n    // Distribuir el restante equitativamente entre las cuotas posteriores\r\n    // Asegurando que cada una tenga al menos el m칤nimo\r\n    if (remaining < remainingInstallments * this.MIN_CUOTA_AMOUNT) {\r\n      // No hay suficiente para dar el m칤nimo a cada cuota posterior\r\n      // Esto no deber칤a pasar si la validaci칩n de arriba funciona, pero por seguridad\r\n      const amountPerRemaining = Math.floor((remaining / remainingInstallments) * 100) / 100;\r\n      for (let i = editedCuotaNumber; i < numInstallments; i++) {\r\n        currentInstallments[i].monto = Math.max(this.MIN_CUOTA_AMOUNT, amountPerRemaining);\r\n      }\r\n    } else {\r\n      // Distribuir normalmente\r\n      const amountPerRemaining = Math.floor((remaining / remainingInstallments) * 100) / 100;\r\n      const remainder = Math.round((remaining - (amountPerRemaining * remainingInstallments)) * 100) / 100;\r\n\r\n      for (let i = editedCuotaNumber; i < numInstallments; i++) {\r\n        // La 칰ltima cuota recibe el remainder para cuadrar exacto\r\n        currentInstallments[i].monto = i === numInstallments - 1\r\n          ? amountPerRemaining + remainder\r\n          : amountPerRemaining;\r\n      }\r\n    }\r\n\r\n    // Actualizar el signal con los nuevos valores\r\n    this.installments.set([...currentInstallments]);\r\n    this.emitChange();\r\n  }\r\n\r\n  private emitChange(): void {\r\n    const installments = this.installments();\r\n\r\n    if (installments.length === 0) {\r\n      this.scheduleChange.emit(null);\r\n      return;\r\n    }\r\n\r\n    const config: PaymentScheduleConfig = {\r\n      montoTotal: this.selectedAmount(),\r\n      numeroCuotas: this.numberOfInstallments(),\r\n      cuotas: installments,\r\n      campoMontoOrigen: this.selectedField(),\r\n      montoBase: this.montoBase(),  // Monto original del campo (undefined si es monto libre)\r\n      generaCartaAcuerdo: this.selectedGeneraCartaAcuerdo()  // Si el monto seleccionado genera carta\r\n    };\r\n\r\n    this.scheduleChange.emit(config);\r\n  }\r\n\r\n  formatCurrency(value: number): string {\r\n    return new Intl.NumberFormat('es-PE', {\r\n      style: 'currency',\r\n      currency: 'PEN'\r\n    }).format(value);\r\n  }\r\n\r\n  /**\r\n   * Formatea una fecha a YYYY-MM-DD sin conversi칩n a UTC\r\n   * Evita el bug de timezone donde toISOString() resta un d칤a\r\n   */\r\n  private formatDateToYYYYMMDD(date: Date): string {\r\n    const year = date.getFullYear();\r\n    const month = String(date.getMonth() + 1).padStart(2, '0');\r\n    const day = String(date.getDate()).padStart(2, '0');\r\n    return `${year}-${month}-${day}`;\r\n  }\r\n}\r\n", "import { Component, effect, input, output, signal, untracked } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport {\n  FieldConfig,\n  MetadataSchema,\n  DynamicFieldData\n} from '../../../maintenance/models/field-config.model';\nimport { ManagementClassification } from '../../models/system-config.model';\nimport { PaymentScheduleComponent, AmountOption } from '../../../shared/components/payment-schedule/payment-schedule.component';\nimport { PaymentScheduleConfig } from '../../../maintenance/models/typification-v2.model';\n\n@Component({\n  selector: 'app-dynamic-field-renderer',\n  standalone: true,\n  imports: [CommonModule, FormsModule, PaymentScheduleComponent],\n  template: `\n    @if (schema() && schema()!.fields && schema()!.fields.length > 0) {\n      <div class=\"bg-purple-50 dark:bg-purple-950/20 border border-purple-200 dark:border-purple-900/50 rounded-lg shadow-md p-3\">\n        <!-- Header -->\n        <div class=\"flex items-center gap-2 text-purple-800 dark:text-purple-200 mb-3 pb-2 border-b border-purple-200 dark:border-purple-800\">\n          <h3 class=\"font-bold text-xs uppercase tracking-wide\">Campos Adicionales</h3>\n        </div>\n\n        <!-- Dynamic Fields in Grid -->\n        <div class=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n          @for (field of schema()!.fields; track field.id) {\n            <div [class.md:col-span-2]=\"field.type === 'table' || field.type === 'textarea' || field.type === 'payment_schedule'\">\n              <label class=\"text-[11px] font-bold text-gray-800 dark:text-gray-100 mb-1 flex items-center gap-1\">\n                {{ field.label }}\n                @if (field.required) {\n                  <span class=\"text-red-500 text-xs\">*</span>\n                }\n              </label>\n\n              @if (field.helpText) {\n                <p class=\"text-[9px] text-gray-500 dark:text-gray-400 mb-1 italic\">{{ field.helpText }}</p>\n              }\n\n              <!-- Text Input -->\n              @if (field.type === 'text') {\n                <input\n                  type=\"text\"\n                  [(ngModel)]=\"fieldData()[field.id]\"\n                  [placeholder]=\"field.placeholder || ''\"\n                  [required]=\"field.required ?? false\"\n                  [minlength]=\"field.minLength ?? null\"\n                  [maxlength]=\"field.maxLength ?? null\"\n                  class=\"w-full px-2 py-1.5 text-xs border border-gray-300 dark:border-gray-600 rounded focus:ring-1 focus:ring-purple-500 focus:border-purple-500 bg-white dark:bg-slate-800 text-gray-900 dark:text-gray-100\"\n                />\n              }\n\n              <!-- Number Input -->\n              @if (field.type === 'number') {\n                <input\n                  type=\"number\"\n                  [ngModel]=\"fieldData()[field.id]\"\n                  (ngModelChange)=\"updateFieldValue(field.id, $event)\"\n                  [placeholder]=\"field.placeholder || ''\"\n                  [required]=\"field.required ?? false\"\n                  [min]=\"field.min ?? null\"\n                  [max]=\"field.max ?? null\"\n                  class=\"w-full px-2 py-1.5 text-xs border border-gray-300 dark:border-gray-600 rounded focus:ring-1 focus:ring-purple-500 focus:border-purple-500 bg-white dark:bg-slate-800 text-gray-900 dark:text-gray-100\"\n                />\n              }\n\n              <!-- Currency Input -->\n              @if (field.type === 'currency') {\n                <div class=\"relative\">\n                  <span class=\"absolute left-2 top-1/2 -translate-y-1/2 text-[10px] text-gray-500 dark:text-gray-400 font-semibold\">S/</span>\n                  <input\n                    type=\"number\"\n                    [ngModel]=\"fieldData()[field.id]\"\n                    (ngModelChange)=\"updateFieldValue(field.id, $event)\"\n                    [placeholder]=\"field.placeholder || '0.00'\"\n                    [required]=\"field.required ?? false\"\n                    [min]=\"field.min || 0\"\n                    step=\"0.01\"\n                    class=\"w-full pl-7 pr-2 py-1.5 text-xs border border-gray-300 dark:border-gray-600 rounded focus:ring-1 focus:ring-purple-500 focus:border-purple-500 bg-white dark:bg-slate-800 text-gray-900 dark:text-gray-100\"\n                  />\n                </div>\n              }\n\n              <!-- Date Input -->\n              @if (field.type === 'date') {\n                <input\n                  type=\"date\"\n                  [(ngModel)]=\"fieldData()[field.id]\"\n                  [required]=\"field.required ?? false\"\n                  class=\"w-full px-2 py-1.5 text-xs border border-gray-300 dark:border-gray-600 rounded focus:ring-1 focus:ring-purple-500 focus:border-purple-500 bg-white dark:bg-slate-800 text-gray-900 dark:text-gray-100\"\n                />\n              }\n\n              <!-- DateTime Input -->\n              @if (field.type === 'datetime') {\n                <input\n                  type=\"datetime-local\"\n                  [(ngModel)]=\"fieldData()[field.id]\"\n                  [required]=\"field.required ?? false\"\n                  class=\"w-full px-2 py-1.5 text-xs border border-gray-300 dark:border-gray-600 rounded focus:ring-1 focus:ring-purple-500 focus:border-purple-500 bg-white dark:bg-slate-800 text-gray-900 dark:text-gray-100\"\n                />\n              }\n\n              <!-- Select Input -->\n              @if (field.type === 'select') {\n                <select\n                  [(ngModel)]=\"fieldData()[field.id]\"\n                  [required]=\"field.required ?? false\"\n                  class=\"w-full px-2 py-1.5 text-xs border border-gray-300 dark:border-gray-600 rounded focus:ring-1 focus:ring-purple-500 focus:border-purple-500 bg-white dark:bg-slate-800 text-gray-900 dark:text-gray-100\"\n                >\n                  <option value=\"\">-- Seleccionar --</option>\n                  @for (option of field.options; track option.value) {\n                    <option [value]=\"option.value\">{{ option.label }}</option>\n                  }\n                </select>\n              }\n\n              <!-- Textarea Input -->\n              @if (field.type === 'textarea') {\n                <textarea\n                  [(ngModel)]=\"fieldData()[field.id]\"\n                  [placeholder]=\"field.placeholder || ''\"\n                  [required]=\"field.required ?? false\"\n                  [minlength]=\"field.minLength ?? null\"\n                  [maxlength]=\"field.maxLength ?? null\"\n                  rows=\"2\"\n                  class=\"w-full px-2 py-1.5 text-xs border border-gray-300 dark:border-gray-600 rounded focus:ring-1 focus:ring-purple-500 focus:border-purple-500 resize-none bg-white dark:bg-slate-800 text-gray-900 dark:text-gray-100\"\n                ></textarea>\n              }\n\n              <!-- Checkbox Input -->\n              @if (field.type === 'checkbox') {\n                <div class=\"flex items-center gap-2\">\n                  <input\n                    type=\"checkbox\"\n                    [(ngModel)]=\"fieldData()[field.id]\"\n                    [required]=\"field.required ?? false\"\n                    class=\"w-4 h-4 text-purple-600 bg-gray-100 dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-purple-500 cursor-pointer\"\n                  />\n                  <span class=\"text-xs text-gray-700 dark:text-gray-300\">{{ field.placeholder || 'Marcar si aplica' }}</span>\n                </div>\n              }\n\n              <!-- Phone Input -->\n              @if (field.type === 'phone') {\n                <div class=\"relative\">\n                  <span class=\"absolute left-2 top-1/2 -translate-y-1/2 text-[10px] text-gray-500 dark:text-gray-400 font-semibold\">游님</span>\n                  <input\n                    type=\"tel\"\n                    [(ngModel)]=\"fieldData()[field.id]\"\n                    [placeholder]=\"field.placeholder || '999 999 999'\"\n                    [required]=\"field.required ?? false\"\n                    pattern=\"[0-9]{9}\"\n                    maxlength=\"9\"\n                    class=\"w-full pl-7 pr-2 py-1.5 text-xs border border-gray-300 dark:border-gray-600 rounded focus:ring-1 focus:ring-purple-500 focus:border-purple-500 bg-white dark:bg-slate-800 text-gray-900 dark:text-gray-100\"\n                  />\n                </div>\n              }\n\n              <!-- Time Input -->\n              @if (field.type === 'time') {\n                <input\n                  type=\"time\"\n                  [(ngModel)]=\"fieldData()[field.id]\"\n                  [required]=\"field.required ?? false\"\n                  class=\"w-full px-2 py-1.5 text-xs border border-gray-300 dark:border-gray-600 rounded focus:ring-1 focus:ring-purple-500 focus:border-purple-500 bg-white dark:bg-slate-800 text-gray-900 dark:text-gray-100\"\n                />\n              }\n\n              <!-- Email Input -->\n              @if (field.type === 'email') {\n                <input\n                  type=\"email\"\n                  [(ngModel)]=\"fieldData()[field.id]\"\n                  [placeholder]=\"field.placeholder || 'ejemplo@correo.com'\"\n                  [required]=\"field.required ?? false\"\n                  class=\"w-full px-2 py-1.5 text-xs border border-gray-300 dark:border-gray-600 rounded focus:ring-1 focus:ring-purple-500 focus:border-purple-500 bg-white dark:bg-slate-800 text-gray-900 dark:text-gray-100\"\n                />\n              }\n\n              <!-- URL Input -->\n              @if (field.type === 'url') {\n                <input\n                  type=\"url\"\n                  [(ngModel)]=\"fieldData()[field.id]\"\n                  [placeholder]=\"field.placeholder || 'https://ejemplo.com'\"\n                  [required]=\"field.required ?? false\"\n                  class=\"w-full px-2 py-1.5 text-xs border border-gray-300 dark:border-gray-600 rounded focus:ring-1 focus:ring-purple-500 focus:border-purple-500 bg-white dark:bg-slate-800 text-gray-900 dark:text-gray-100\"\n                />\n              }\n\n              <!-- Payment Schedule Input -->\n              @if (field.type === 'payment_schedule') {\n                <app-payment-schedule\n                  [availableAmounts]=\"getPaymentAmountOptions(field)\"\n                  [maxInstallments]=\"6\"\n                  (scheduleChange)=\"onPaymentScheduleChange(field.id, $event)\"\n                  (customAmountSelected)=\"onCustomAmountSelected($event)\"\n                />\n              }\n\n            <!-- Table/Cronograma Input -->\n            @if (field.type === 'table') {\n              <div class=\"rounded-lg border border-purple-200 dark:border-purple-800/50 overflow-hidden shadow-sm\">\n                <!-- Table Header -->\n                <div class=\"overflow-x-auto\">\n                  <table class=\"w-full border-collapse\">\n                    <thead>\n                      <tr class=\"bg-gradient-to-r from-purple-50 to-purple-100 dark:from-purple-950/50 dark:to-purple-900/30\">\n                        @for (column of field.columns; track column.id) {\n                          <th class=\"px-3 py-2 text-left text-[10px] font-bold text-purple-900 dark:text-purple-200 uppercase tracking-wide border-b-2 border-purple-300 dark:border-purple-700\">\n                            {{ column.label }}\n                            @if (column.required) {\n                              <span class=\"text-red-500 ml-0.5\">*</span>\n                            }\n                          </th>\n                        }\n                        @if (field.allowDeleteRow) {\n                          <th class=\"px-3 py-2 text-center text-[10px] font-bold text-purple-900 dark:text-purple-200 uppercase tracking-wide border-b-2 border-purple-300 dark:border-purple-700 w-16\">\n                          </th>\n                        }\n                      </tr>\n                    </thead>\n                    <tbody class=\"bg-white dark:bg-slate-800\">\n                      @for (row of getTableRows(field.id); track $index; let rowIdx = $index) {\n                        <tr class=\"border-b border-purple-100 dark:border-purple-900/30 hover:bg-purple-50/50 dark:hover:bg-purple-950/20 transition-colors\">\n                          @for (column of field.columns; track column.id) {\n                            <td class=\"px-3 py-2\">\n                              <!-- Auto-number column -->\n                              @if (column.type === 'auto-number') {\n                                <div class=\"flex items-center justify-center w-7 h-7 rounded-full bg-purple-100 dark:bg-purple-900/30 text-[11px] font-bold text-purple-700 dark:text-purple-300\">\n                                  {{ rowIdx + 1 }}\n                                </div>\n                              }\n                              <!-- Text column -->\n                              @else if (column.type === 'text') {\n                                <input\n                                  type=\"text\"\n                                  [(ngModel)]=\"row[column.id]\"\n                                  [required]=\"column.required ?? false\"\n                                  class=\"w-full px-2 py-1 text-[11px] border border-purple-200 dark:border-purple-800 rounded focus:ring-1 focus:ring-purple-500 focus:border-purple-500 bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100\"\n                                />\n                              }\n                              <!-- Number column -->\n                              @else if (column.type === 'number') {\n                                <input\n                                  type=\"number\"\n                                  [(ngModel)]=\"row[column.id]\"\n                                  [required]=\"column.required ?? false\"\n                                  class=\"w-full px-2 py-1 text-[11px] border border-purple-200 dark:border-purple-800 rounded focus:ring-1 focus:ring-purple-500 focus:border-purple-500 bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100\"\n                                />\n                              }\n                              <!-- Currency column -->\n                              @else if (column.type === 'currency') {\n                                <div class=\"relative\">\n                                  <span class=\"absolute left-2 top-1/2 -translate-y-1/2 text-[10px] text-purple-600 dark:text-purple-400 font-semibold\">S/</span>\n                                  <input\n                                    type=\"number\"\n                                    [(ngModel)]=\"row[column.id]\"\n                                    [required]=\"column.required ?? false\"\n                                    step=\"0.01\"\n                                    class=\"w-full pl-6 pr-2 py-1 text-[11px] border border-purple-200 dark:border-purple-800 rounded focus:ring-1 focus:ring-purple-500 focus:border-purple-500 bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100\"\n                                  />\n                                </div>\n                              }\n                              <!-- Date column -->\n                              @else if (column.type === 'date') {\n                                <input\n                                  type=\"date\"\n                                  [(ngModel)]=\"row[column.id]\"\n                                  [required]=\"column.required ?? false\"\n                                  [min]=\"getMinDate(column)\"\n                                  [max]=\"getMaxDate(column)\"\n                                  class=\"w-full px-2 py-1 text-[11px] border border-purple-200 dark:border-purple-800 rounded focus:ring-1 focus:ring-purple-500 focus:border-purple-500 bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100\"\n                                />\n                              }\n                              <!-- Time column -->\n                              @else if (column.type === 'time') {\n                                <input\n                                  type=\"time\"\n                                  [(ngModel)]=\"row[column.id]\"\n                                  [required]=\"column.required ?? false\"\n                                  class=\"w-full px-2 py-1 text-[11px] border border-purple-200 dark:border-purple-800 rounded focus:ring-1 focus:ring-purple-500 focus:border-purple-500 bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100\"\n                                />\n                              }\n                              <!-- Phone column -->\n                              @else if (column.type === 'phone') {\n                                <input\n                                  type=\"tel\"\n                                  [(ngModel)]=\"row[column.id]\"\n                                  [required]=\"column.required ?? false\"\n                                  pattern=\"[0-9]{9}\"\n                                  maxlength=\"9\"\n                                  placeholder=\"999999999\"\n                                  class=\"w-full px-2 py-1 text-[11px] border border-purple-200 dark:border-purple-800 rounded focus:ring-1 focus:ring-purple-500 focus:border-purple-500 bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100\"\n                                />\n                              }\n                              <!-- Select column -->\n                              @else if (column.type === 'select') {\n                                <select\n                                  [(ngModel)]=\"row[column.id]\"\n                                  [required]=\"column.required ?? false\"\n                                  class=\"w-full px-2 py-1 text-[11px] border border-purple-200 dark:border-purple-800 rounded focus:ring-1 focus:ring-purple-500 focus:border-purple-500 bg-white dark:bg-slate-900 text-gray-900 dark:text-gray-100\"\n                                >\n                                  <option value=\"\">Seleccionar...</option>\n                                  @for (option of column.options; track option.value || option) {\n                                    <option [value]=\"option.value || option\">\n                                      {{ option.label || option }}\n                                    </option>\n                                  }\n                                </select>\n                              }\n                            </td>\n                          }\n                          @if (field.allowDeleteRow) {\n                            <td class=\"px-3 py-2 text-center\">\n                              <button\n                                type=\"button\"\n                                (click)=\"removeTableRow(field.id, rowIdx)\"\n                                class=\"inline-flex items-center justify-center w-7 h-7 rounded-full hover:bg-red-50 dark:hover:bg-red-900/20 text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 transition-colors\"\n                                title=\"Eliminar fila\"\n                              >\n                              </button>\n                            </td>\n                          }\n                        </tr>\n                      }\n                      @if (getTableRows(field.id).length === 0) {\n                        <tr>\n                          <td [attr.colspan]=\"field.columns!.length + (field.allowDeleteRow ? 1 : 0)\" class=\"px-4 py-12 text-center\">\n                            <div class=\"flex flex-col items-center gap-2\">\n                              <div class=\"w-12 h-12 rounded-full bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center\">\n                              </div>\n                              <p class=\"text-[11px] text-gray-500 dark:text-gray-400 font-medium\">No hay registros en la tabla</p>\n                              <p class=\"text-[10px] text-gray-400 dark:text-gray-500\">Haz clic en \"Agregar Fila\" para comenzar</p>\n                            </div>\n                          </td>\n                        </tr>\n                      }\n                    </tbody>\n                  </table>\n                </div>\n\n                <!-- Add Row Button -->\n                @if (field.allowAddRow && (!field.maxRows || getTableRows(field.id).length < field.maxRows)) {\n                  <div class=\"border-t border-purple-300 dark:border-purple-700 p-2  from-purple-100/70 to-white dark:from-purple-950/40 dark:to-purple-800/60\">\n                    <button\n                      type=\"button\"\n                      (click)=\"addTableRow(field.id, field.columns || [])\"\n                      class=\"w-full py-1.5 px-3 border border-dashed border-purple-400 dark:border-purple-600 rounded-lg \n                            text-purple-900/50  dark:text-purple-300 \n                            hover:bg-purple-100 dark:hover:bg-purple-900/50 \n                            hover:border-purple-600 dark:hover:border-purple-400 \n                            transition-all flex items-center justify-center gap-2 text-[11px] font-semibold\"\n                    >\n                      Agregar Fila\n                    </button>\n                  </div>\n                }\n              </div>\n            }\n            </div>\n          }\n        </div>\n      </div>\n    }\n  `,\n  styles: [`\n    :host {\n      display: contents;\n    }\n  `]\n})\nexport class DynamicFieldRendererComponent {\n  schema = input<MetadataSchema | null>(null);\n  externalUpdates = input<DynamicFieldData>({});\n  selectedClassification = input<ManagementClassification | null>(null);\n  customerAmounts = input<AmountOption[]>([]); // Amounts from customer's debt data\n\n  // Field data with two-way binding\n  fieldData = signal<DynamicFieldData>({});\n\n  // Output when data changes\n  dataChange = output<DynamicFieldData>();\n  // Output when custom amount is selected (requires authorization)\n  customAmountDetected = output<boolean>();\n\n  constructor() {\n    // Initialize field data when schema changes\n    effect(() => {\n      const currentSchema = this.schema();\n\n      if (currentSchema && currentSchema.fields) {\n        console.log('[DynamicFieldRenderer] Schema received with fields:', currentSchema.fields.map(f => ({ id: f.id, type: f.type, label: f.label })));\n        const initialData: DynamicFieldData = {};\n\n        currentSchema.fields.forEach(field => {\n          console.log(`[DynamicFieldRenderer] Processing field: ${field.id}, type: ${field.type}`);\n          if (field.type === 'table') {\n            const minRows = field.minRows || 0;\n            initialData[field.id] = Array.from({ length: minRows }, () => this.createEmptyTableRow(field.columns || []));\n          } else if (field.type === 'checkbox') {\n            initialData[field.id] = false;\n          } else if (field.type === 'payment_schedule') {\n            initialData[field.id] = null; // PaymentScheduleConfig will be set by the component\n          } else {\n            initialData[field.id] = '';\n          }\n        });\n\n        this.fieldData.set(initialData);\n      }\n    });\n\n    // Watch for external updates and apply them\n    // Usamos untracked() para leer fieldData sin crear dependencia circular\n    effect(() => {\n      const updates = this.externalUpdates();\n\n      if (updates && Object.keys(updates).length > 0) {\n        console.log('[DynamicField] Received external updates:', updates);\n\n        // Leer el estado actual SIN crear dependencia en este effect\n        const currentData = untracked(() => ({ ...this.fieldData() }));\n\n        // Solo actualizar si hay cambios reales\n        let hasChanges = false;\n        Object.keys(updates).forEach(key => {\n          if (updates[key] !== undefined && updates[key] !== null && currentData[key] !== updates[key]) {\n            currentData[key] = updates[key];\n            hasChanges = true;\n          }\n        });\n\n        // Solo actualizar el signal si realmente hubo cambios\n        if (hasChanges) {\n          console.log('[DynamicField] Applying updates to fieldData');\n          this.fieldData.set(currentData);\n        } else {\n          console.log('[DynamicField] No changes detected, skipping update');\n        }\n      }\n    });\n\n    // Watch for changes in fields that control table row counts (linked tables)\n    effect(() => {\n      const data = this.fieldData();\n      const currentSchema = this.schema();\n\n      if (!currentSchema?.fields) {\n        return;\n      }\n\n      // Find all table fields that have linkedToField property\n      const linkedTables = currentSchema.fields.filter(\n        field => field.type === 'table' && (field as any).linkedToField\n      );\n\n      linkedTables.forEach(tableField => {\n        const linkedFieldId = (tableField as any).linkedToField;\n        const linkedFieldValue = data[linkedFieldId];\n\n        console.log(`游댕 Sincronizaci칩n n칰mero뇺abla: \"${linkedFieldId}\"=${linkedFieldValue}  tabla=\"${tableField.id}\"`);\n\n        if (linkedFieldValue && typeof linkedFieldValue === 'number' && linkedFieldValue > 0) {\n          const currentRows = this.getTableRows(tableField.id);\n          const targetRows = Math.floor(linkedFieldValue);\n\n          console.log(`   Filas actuales: ${currentRows.length}, Filas objetivo: ${targetRows}`);\n\n          if (currentRows.length !== targetRows) {\n            console.log(`   九 Ajustando tabla de ${currentRows.length} a ${targetRows} filas`);\n            this.adjustTableRows(tableField.id, targetRows, tableField.columns || []);\n          }\n        }\n      });\n    });\n\n    // Emit data changes\n    effect(() => {\n      this.dataChange.emit(this.fieldData());\n    });\n  }\n\n  updateFieldValue(fieldId: string, value: any) {\n    const currentData = { ...this.fieldData() };\n\n    // Convert string numbers to actual numbers\n    if (typeof value === 'string' && value !== '' && !isNaN(Number(value))) {\n      currentData[fieldId] = Number(value);\n    } else {\n      currentData[fieldId] = value;\n    }\n\n    this.fieldData.set(currentData);\n\n    // Check if this field controls any table rows (linked tables)\n    this.checkLinkedTables(fieldId, currentData);\n  }\n\n  checkLinkedTables(changedFieldId: string, currentData: DynamicFieldData) {\n    const currentSchema = this.schema();\n\n    if (!currentSchema?.fields) {\n      return;\n    }\n\n    // Find table fields that are linked to the changed field\n    const linkedTables = currentSchema.fields.filter(\n      field => field.type === 'table' && (field as any).linkedToField === changedFieldId\n    );\n\n    linkedTables.forEach(tableField => {\n      const linkedFieldValue = currentData[changedFieldId];\n\n      if (linkedFieldValue && typeof linkedFieldValue === 'number' && linkedFieldValue > 0) {\n        const currentRows = this.getTableRows(tableField.id);\n        const targetRows = Math.floor(linkedFieldValue);\n\n        if (currentRows.length !== targetRows) {\n          this.adjustTableRows(tableField.id, targetRows, tableField.columns || []);\n        }\n      }\n    });\n  }\n\n  getTableRows(fieldId: string): any[] {\n    const data = this.fieldData()[fieldId];\n    if (Array.isArray(data)) {\n      return data;\n    }\n    return [];\n  }\n\n  addTableRow(fieldId: string, columns: any[]) {\n    const currentData = { ...this.fieldData() };\n    if (!Array.isArray(currentData[fieldId])) {\n      currentData[fieldId] = [];\n    }\n\n    const newRow = this.createEmptyTableRow(columns);\n    (currentData[fieldId] as any[]).push(newRow);\n\n    const newRowCount = (currentData[fieldId] as any[]).length;\n    console.log(`俱 Tabla뇙칰mero: Agregada fila, total=${newRowCount}`);\n\n    this.fieldData.set(currentData);\n\n    // Sincronizaci칩n inversa: actualizar el campo linkedToField si existe\n    this.updateLinkedFieldFromTable(fieldId, newRowCount);\n  }\n\n  removeTableRow(fieldId: string, rowIndex: number) {\n    const currentData = { ...this.fieldData() };\n    if (Array.isArray(currentData[fieldId])) {\n      const currentRowCount = (currentData[fieldId] as any[]).length;\n      const typification = this.selectedClassification();\n\n      // Validar m칤nimo de filas seg칰n clasificaci칩n\n      if (typification?.codigo === 'PF') {\n        // Pago Fraccionado: m칤nimo 2 filas\n        if (currentRowCount <= 2) {\n          alert('Los Pagos Fraccionados requieren m칤nimo 2 cuotas. No se puede eliminar m치s filas.');\n          return;\n        }\n      } else if (typification?.codigo === 'CF') {\n        // Convenio Formal: m칤nimo 1 fila\n        if (currentRowCount <= 1) {\n          alert('Los Convenios requieren m칤nimo 1 cuota. No se puede eliminar esta fila.');\n          return;\n        }\n      }\n\n      (currentData[fieldId] as any[]).splice(rowIndex, 1);\n\n      const newRowCount = (currentData[fieldId] as any[]).length;\n      console.log(`俱 Tabla뇙칰mero: Eliminada fila, total=${newRowCount}`);\n\n      this.fieldData.set(currentData);\n\n      // Sincronizaci칩n inversa: actualizar el campo linkedToField si existe\n      this.updateLinkedFieldFromTable(fieldId, newRowCount);\n    }\n  }\n\n  /**\n   * Actualiza el campo vinculado (linkedToField) cuando cambian las filas de una tabla\n   */\n  private updateLinkedFieldFromTable(tableFieldId: string, rowCount: number) {\n    const currentSchema = this.schema();\n    console.log(`游댌 updateLinkedFieldFromTable: tableFieldId=\"${tableFieldId}\", rowCount=${rowCount}`);\n\n    if (!currentSchema?.fields) {\n      console.log(`   仇 No hay schema o fields`);\n      return;\n    }\n\n    // Buscar el campo de tabla para obtener su linkedToField\n    const tableField = currentSchema.fields.find(f => f.id === tableFieldId);\n    console.log(`   Campo tabla encontrado:`, tableField);\n\n    if (!tableField || tableField.type !== 'table') {\n      console.log(`   仇 Campo no encontrado o no es tabla`);\n      return;\n    }\n\n    const linkedFieldId = (tableField as any).linkedToField;\n    console.log(`   linkedToField=\"${linkedFieldId}\"`);\n\n    if (!linkedFieldId) {\n      console.log(`   仇 No hay linkedToField definido`);\n      return;\n    }\n\n    // Actualizar el valor del campo vinculado\n    const currentData = { ...this.fieldData() };\n    const currentValue = currentData[linkedFieldId];\n    console.log(`   Valor actual del campo vinculado: ${currentValue}`);\n\n    if (currentValue !== rowCount) {\n      currentData[linkedFieldId] = rowCount;\n      this.fieldData.set(currentData);\n      console.log(`   九 Campo \"${linkedFieldId}\" actualizado: ${currentValue}  ${rowCount}`);\n    } else {\n      console.log(`   丘멆잺 El valor ya es ${rowCount}, no se actualiza`);\n    }\n  }\n\n  adjustTableRows(fieldId: string, targetCount: number, columns: any[]) {\n    const currentData = { ...this.fieldData() };\n    if (!Array.isArray(currentData[fieldId])) {\n      currentData[fieldId] = [];\n    }\n\n    const currentRows = currentData[fieldId] as any[];\n    const currentCount = currentRows.length;\n\n    if (targetCount > currentCount) {\n      // Add rows\n      for (let i = currentCount; i < targetCount; i++) {\n        currentRows.push(this.createEmptyTableRow(columns));\n      }\n    } else if (targetCount < currentCount) {\n      // Remove rows\n      currentRows.splice(targetCount);\n    }\n\n    this.fieldData.set(currentData);\n  }\n\n  getTodayDate(): string {\n    const today = new Date();\n    const year = today.getFullYear();\n    const month = String(today.getMonth() + 1).padStart(2, '0');\n    const day = String(today.getDate()).padStart(2, '0');\n    return `${year}-${month}-${day}`;\n  }\n\n  getEndOfMonthDate(): string {\n    const today = new Date();\n    const year = today.getFullYear();\n    const month = today.getMonth();\n    // 칔ltimo d칤a del mes actual\n    const lastDay = new Date(year, month + 1, 0).getDate();\n    const monthStr = String(month + 1).padStart(2, '0');\n    const dayStr = String(lastDay).padStart(2, '0');\n    return `${year}-${monthStr}-${dayStr}`;\n  }\n\n  getMinDate(column: any): string | undefined {\n    const minDate = column.minDate;\n    if (minDate === 'today') {\n      return this.getTodayDate();\n    }\n    return minDate;\n  }\n\n  getMaxDate(column: any): string | undefined {\n    const typification = this.selectedClassification();\n\n    // Para Pago Fraccionado (PF), limitar fechas al mes actual\n    if (typification?.codigo === 'PF') {\n      return this.getEndOfMonthDate();\n    }\n\n    // Para Convenios (CF) y otros, sin l칤mite de fecha m치xima\n    return column.maxDate;\n  }\n\n  private createEmptyTableRow(columns: any[]): any {\n    const row: any = {};\n    columns.forEach(column => {\n      if (column.type === 'auto-number') {\n        // Auto-number is handled by index, no need to store\n        row[column.id] = null;\n      } else if (column.type === 'number' || column.type === 'currency') {\n        row[column.id] = column.defaultValue || 0;\n      } else if (column.type === 'date') {\n        row[column.id] = column.defaultValue || '';\n      } else {\n        row[column.id] = column.defaultValue || '';\n      }\n    });\n    return row;\n  }\n\n  // Public method to get current field data\n  getData(): DynamicFieldData {\n    return this.fieldData();\n  }\n\n  // Public method to set field data (for loading existing data)\n  setData(data: DynamicFieldData) {\n    this.fieldData.set(data);\n  }\n\n  // Payment Schedule methods\n  getPaymentAmountOptions(field: FieldConfig): AmountOption[] {\n    // First priority: use customer amounts from the ini_* table\n    const amounts = this.customerAmounts();\n    if (amounts && amounts.length > 0) {\n      console.log('[DynamicFieldRenderer] Using customer amounts:', amounts);\n      return amounts;\n    }\n\n    // Second priority: try to get options from field configuration\n    if (field.options && field.options.length > 0) {\n      return field.options.map(opt => ({\n        label: opt.label || String(opt.value),\n        value: typeof opt.value === 'number' ? opt.value : parseFloat(String(opt.value)) || 0,\n        field: opt.field\n      }));\n    }\n\n    // Default options if none configured (fallback)\n    console.log('[DynamicFieldRenderer] No customer amounts, using defaults');\n    return [\n      { label: 'Sin datos de deuda', value: 0, field: 'default' }\n    ];\n  }\n\n  onPaymentScheduleChange(fieldId: string, schedule: PaymentScheduleConfig | null): void {\n    const currentData = { ...this.fieldData() };\n    currentData[fieldId] = schedule;\n    this.fieldData.set(currentData);\n    console.log('[DynamicField] Payment schedule changed:', fieldId, schedule);\n  }\n\n  /**\n   * Maneja cuando se selecciona monto personalizado\n   * Emite al padre para que muestre el bot칩n de autorizaci칩n\n   */\n  onCustomAmountSelected(isCustom: boolean): void {\n    console.log('[DynamicField] Custom amount selected:', isCustom);\n    this.customAmountDetected.emit(isCustom);\n  }\n}\n", "import { Injectable, signal } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { environment } from '../../../environments/environment';\r\nimport { tap, catchError, of, Observable } from 'rxjs';\r\nimport { ClassificationFieldsResponse } from '../models/dynamic-field.model';\r\n\r\nexport interface ContactClassificationResource {\r\n  id: number;\r\n  codigo: string;\r\n  label: string; // Cambiado de 'description' a 'label' para coincidir con el backend\r\n  isSuccessful: boolean;\r\n}\r\n\r\nexport interface ManagementClassificationResource {\r\n  id: number;\r\n  codigo: string;\r\n  label: string;\r\n  requiresPayment: boolean;\r\n  requiresSchedule: boolean;\r\n  requiresFollowUp: boolean;\r\n  parentId?: number;\r\n  hierarchyLevel?: number;\r\n  // Campos del tipo de clasificaci칩n\r\n  suggestsFullAmount?: boolean | null;\r\n  allowsInstallmentSelection?: boolean | null;\r\n  requiresManualAmount?: boolean | null;\r\n}\r\n\r\nexport interface CampaignResource {\r\n  id: number;\r\n  campaignId: string;\r\n  nombre: string;\r\n  campaignType: string;\r\n  isActive: boolean;\r\n}\r\n\r\nexport interface TypificationCatalogResource {\r\n  id: number;\r\n  codigo: string;\r\n  nombre: string;\r\n  tipoClasificacion: string;\r\n  parentTypificationId?: number;\r\n  nivelJerarquia: number;\r\n  hierarchyPath: string;\r\n  description?: string;\r\n  displayOrder?: number;\r\n  iconName?: string;\r\n  colorHex?: string;\r\n  isSystem: boolean;\r\n  metadataSchema?: string;\r\n  isActive: boolean;\r\n  // Campos del tipo de clasificaci칩n\r\n  suggestsFullAmount?: boolean | null;\r\n  allowsInstallmentSelection?: boolean | null;\r\n  requiresManualAmount?: boolean | null;\r\n}\r\n\r\nexport interface TenantTypificationConfigResource {\r\n  id: number;\r\n  tenantId: number;\r\n  portfolioId?: number;\r\n  typification: TypificationCatalogResource;\r\n  isEnabled: boolean;\r\n  isRequired: boolean;\r\n  customName?: string;\r\n  customOrder?: number;\r\n  customIcon?: string;\r\n  customColor?: string;\r\n  requiresComment: boolean;\r\n  minCommentLength?: number;\r\n  requiresAttachment: boolean;\r\n  requiresFollowupDate: boolean;\r\n  effectiveName: string;\r\n  effectiveOrder?: number;\r\n  effectiveIcon?: string;\r\n  effectiveColor?: string;\r\n}\r\n\r\n/**\r\n * Recurso de tipo de campo\r\n *\r\n * @backend Esta interface mapea con:\r\n * @backend com.cashi.systemconfiguration.interfaces.rest.controllers.FieldTypeController.FieldTypeResource\r\n *\r\n * Los datos provienen de la entidad:\r\n * @backend com.cashi.shared.domain.model.entities.FieldTypeCatalog\r\n *\r\n * Y son sedeados autom치ticamente en:\r\n * @backend com.cashi.systemconfiguration.infrastructure.persistence.DataSeeder.seedFieldTypes()\r\n */\r\nexport interface FieldTypeResource {\r\n  id: number;\r\n  typeCode: string;        // C칩digo 칰nico del tipo (text, number, table, etc.)\r\n  typeName: string;        // Nombre legible (Texto, N칰mero, Tabla, etc.)\r\n  description?: string;    // Descripci칩n del tipo de campo\r\n  icon?: string;           // Nombre del icono de Lucide Angular\r\n  availableForMainField: boolean;    // Disponible para campos principales\r\n  availableForTableColumn: boolean;  // Disponible para columnas de tabla\r\n  displayOrder: number;    // Orden de visualizaci칩n en el UI\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ApiSystemConfigService {\r\n  private readonly baseUrl = `${environment.tipificacionUrl}/system-config`;\r\n  private readonly classificationsUrl = `${environment.tipificacionUrl}/typifications`;\r\n\r\n  // Signals para datos reactivos\r\n  contactClassifications = signal<ContactClassificationResource[]>([]);\r\n  managementClassifications = signal<ManagementClassificationResource[]>([]);\r\n  campaigns = signal<CampaignResource[]>([]);\r\n  tenantClassifications = signal<TenantTypificationConfigResource[]>([]);\r\n\r\n  // Estado de carga\r\n  isLoading = signal(false);\r\n  isLoaded = signal(false);\r\n\r\n  // Configuraci칩n de tenant/portfolio/subportfolio\r\n  private currentTenantId?: number;\r\n  private currentPortfolioId?: number;\r\n  private currentSubPortfolioId?: number;\r\n\r\n  constructor(private http: HttpClient) {\r\n    // NO cargar datos autom치ticamente - esperar a que se configure el tenant\r\n    // El componente llamar치 a setTenantAndPortfolio() cuando tenga el tenant correcto\r\n  }\r\n\r\n  /**\r\n   * Configura el tenant, portfolio y subportfolio actual y recarga las clasificaciones\r\n   */\r\n  setTenantAndPortfolio(tenantId: number, portfolioId?: number, subPortfolioId?: number) {\r\n    // IMPORTANTE: Limpiar clasificaciones anteriores ANTES de cambiar el contexto\r\n    this.tenantClassifications.set([]);\r\n    this.contactClassifications.set([]);\r\n    this.managementClassifications.set([]);\r\n\r\n    this.currentTenantId = tenantId;\r\n    this.currentPortfolioId = portfolioId;\r\n    this.currentSubPortfolioId = subPortfolioId;\r\n\r\n    // Recargar tipificaciones del cat치logo (CUSTOM) despu칠s de cambiar contexto\r\n    this.loadTenantClassifications();\r\n    this.loadTypificationsFromCatalog();\r\n  }\r\n\r\n  /**\r\n   * Carga todos los datos del backend\r\n   * Se ejecuta en segundo plano sin bloquear la UI\r\n   */\r\n  private loadAllData(): void {\r\n    // No mostramos loader porque usamos datos est치ticos inicialmente\r\n    this.isLoading.set(true);\r\n\r\n    // Cargar en paralelo\r\n    Promise.all([\r\n      // this.loadContactClassifications(),\r\n      // this.loadManagementClassifications(),\r\n      // this.loadActiveCampaigns(),\r\n      this.loadTenantClassifications(),\r\n      this.loadTypificationsFromCatalog()\r\n    ]).finally(() => {\r\n      this.isLoading.set(false);\r\n      this.isLoaded.set(true);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Carga tipificaciones desde el cat치logo global\r\n   * Filtra las tipificaciones CUSTOM que son espec칤ficas por tenant\r\n   */\r\n  private loadTypificationsFromCatalog(): Promise<void> {\r\n    return new Promise((resolve) => {\r\n      if (!this.currentTenantId) {\r\n        console.warn('[V2] No se puede cargar tipificaciones sin tenant configurado');\r\n        resolve();\r\n        return;\r\n      }\r\n\r\n      const subportfolioParam = this.currentSubPortfolioId || 0;\r\n      const portfolioParam = this.currentPortfolioId || 0;\r\n      const url = `${environment.gatewayUrl}/v2/typifications/config/effective/tenant/${this.currentTenantId}/portfolio/${portfolioParam}/subportfolio/${subportfolioParam}`;\r\n\r\n      console.log('[V2] Cargando tipificaciones efectivas desde:', url);\r\n\r\n      this.http.get<TypificationCatalogResource[]>(url)\r\n        .pipe(\r\n          tap(data => {\r\n            console.log('[V2] Tipificaciones efectivas cargadas:', data);\r\n            const managementClasses: ManagementClassificationResource[] = data.map(t => ({\r\n              id: t.id,\r\n              codigo: t.codigo,\r\n              label: t.nombre,\r\n              requiresPayment: false,\r\n              requiresSchedule: false,\r\n              requiresFollowUp: false,\r\n              parentId: t.parentTypificationId,\r\n              hierarchyLevel: t.nivelJerarquia,\r\n              suggestsFullAmount: t.suggestsFullAmount ?? null,\r\n              allowsInstallmentSelection: t.allowsInstallmentSelection ?? null,\r\n              requiresManualAmount: t.requiresManualAmount ?? null\r\n            }));\r\n\r\n            this.managementClassifications.set(managementClasses);\r\n            console.log('[V2] Nivel 1:', managementClasses.filter(c => c.hierarchyLevel === 1).map(c => `${c.codigo} (${c.label})`));\r\n            console.log('[V2] Nivel 2:', managementClasses.filter(c => c.hierarchyLevel === 2).map(c => `${c.codigo} -> parent:${c.parentId}`));\r\n            console.log('[V2] Nivel 3:', managementClasses.filter(c => c.hierarchyLevel === 3).map(c => `${c.codigo} -> parent:${c.parentId}`));\r\n            console.log('[V2] Nivel 4:', managementClasses.filter(c => c.hierarchyLevel === 4).map(c => `${c.codigo} -> parent:${c.parentId}`));\r\n          }),\r\n          catchError(error => {\r\n            console.error('[V2] Error cargando tipificaciones efectivas:', error);\r\n            this.managementClassifications.set([]);\r\n            return of([]);\r\n          })\r\n        )\r\n        .subscribe(() => resolve());\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Carga clasificaciones habilitadas para el tenant/portfolio actual\r\n   */\r\n  private loadTenantClassifications(): Promise<void> {\r\n    return new Promise((resolve) => {\r\n      // Si no hay tenant configurado, no intentar cargar\r\n      if (!this.currentTenantId) {\r\n        resolve();\r\n        return;\r\n      }\r\n\r\n      // TEMPORAL: Este endpoint no existe a칰n, usar datos de ejemplo\r\n      console.log('[TEMPORAL] loadTenantClassifications - endpoint /tenants/.../typifications no existe');\r\n\r\n      // Usar datos de ejemplo m칤nimos\r\n      const mockData: TenantTypificationConfigResource[] = [];\r\n      this.tenantClassifications.set(mockData);\r\n      this.contactClassifications.set([]);\r\n      this.managementClassifications.set([]);\r\n      resolve();\r\n      return;\r\n\r\n      /*\r\n      let url = `${environment.tipificacionUrl}/tenants/${this.currentTenantId}/typifications`;\r\n      if (this.currentPortfolioId) {\r\n        url += `?portfolioId=${this.currentPortfolioId}`;\r\n      }\r\n\r\n      this.http.get<TenantTypificationConfigResource[]>(url)\r\n        .pipe(\r\n          tap(data => {\r\n            this.tenantClassifications.set(data);\r\n\r\n            // Separar por tipo y actualizar los signals correspondientes\r\n            const contactClasses: ContactClassificationResource[] = data\r\n              .filter(c => c.typification.classificationType === 'CONTACT_RESULT')\r\n              .map(c => {\r\n                const metadata = c.typification.metadataSchema ? JSON.parse(c.typification.metadataSchema) : {};\r\n                return {\r\n                  id: c.typification.id,\r\n                  code: c.typification.code,\r\n                  label: c.typification.name,\r\n                  isSuccessful: metadata.isSuccessful || false\r\n                };\r\n              });\r\n\r\n            const managementClasses: ManagementClassificationResource[] = data\r\n              .filter(c => c.typification.classificationType === 'MANAGEMENT_TYPE' || c.typification.classificationType === 'CUSTOM')\r\n              .map(c => {\r\n                const metadata = c.typification.metadataSchema ? JSON.parse(c.typification.metadataSchema) : {};\r\n                return {\r\n                  id: c.typification.id,\r\n                  code: c.typification.code,\r\n                  label: c.typification.name,\r\n                  requiresPayment: metadata.requiresPayment || false,\r\n                  requiresSchedule: metadata.requiresSchedule || false,\r\n                  requiresFollowUp: metadata.requiresFollowUp || false,\r\n                  parentId: c.typification.parentTypificationId,\r\n                  hierarchyLevel: c.typification.hierarchyLevel,\r\n                  // Campos del tipo de clasificaci칩n\r\n                  suggestsFullAmount: c.typification.suggestsFullAmount,\r\n                  allowsInstallmentSelection: c.typification.allowsInstallmentSelection,\r\n                  requiresManualAmount: c.typification.requiresManualAmount\r\n                };\r\n              });\r\n\r\n            this.contactClassifications.set(contactClasses);\r\n            this.managementClassifications.set(managementClasses);\r\n          }),\r\n          catchError(error => {\r\n            console.error('Error cargando clasificaciones del tenant:', error);\r\n            return of([]);\r\n          })\r\n        )\r\n        .subscribe(() => resolve());\r\n      */\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Carga tipificaciones de contacto desde el backend\r\n   */\r\n  private loadContactClassifications(): Promise<void> {\r\n    return new Promise((resolve) => {\r\n      this.http.get<ContactClassificationResource[]>(`${this.baseUrl}/contact-typifications`)\r\n        .pipe(\r\n          tap(data => {\r\n            this.contactClassifications.set(data);\r\n          }),\r\n          catchError(error => {\r\n            console.error('Error cargando tipificaciones de contacto:', error);\r\n            return of([]);\r\n          })\r\n        )\r\n        .subscribe(() => resolve());\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Carga tipificaciones de gesti칩n desde el backend\r\n   */\r\n  private loadManagementClassifications(): Promise<void> {\r\n    return new Promise((resolve) => {\r\n      this.http.get<ManagementClassificationResource[]>(`${this.baseUrl}/management-typifications`)\r\n        .pipe(\r\n          tap(data => {\r\n            this.managementClassifications.set(data);\r\n          }),\r\n          catchError(error => {\r\n            console.error('Error cargando tipificaciones de gesti칩n:', error);\r\n            return of([]);\r\n          })\r\n        )\r\n        .subscribe(() => resolve());\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Carga campa침as activas desde el backend\r\n   */\r\n  private loadActiveCampaigns(): Promise<void> {\r\n    return new Promise((resolve) => {\r\n      this.http.get<CampaignResource[]>(`${this.baseUrl}/campaigns/active`)\r\n        .pipe(\r\n          tap(data => {\r\n            this.campaigns.set(data);\r\n          }),\r\n          catchError(error => {\r\n            console.error('Error cargando campa침as:', error);\r\n            return of([]);\r\n          })\r\n        )\r\n        .subscribe(() => resolve());\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Fuerza la recarga de todos los datos\r\n   */\r\n  refresh(): void {\r\n    this.loadAllData();\r\n  }\r\n\r\n  /**\r\n   * Convierte las tipificaciones de contacto del backend al formato del frontend\r\n   */\r\n  getContactClassificationsForUI() {\r\n    return this.contactClassifications().map(item => ({\r\n      id: item.codigo,\r\n      codigo: item.codigo,\r\n      label: item.label, // Ahora coincide con la interfaz\r\n      isSuccessful: item.isSuccessful\r\n    }));\r\n  }\r\n\r\n  /**\r\n   * Convierte las tipificaciones de gesti칩n del backend al formato del frontend\r\n   */\r\n  getManagementClassificationsForUI() {\r\n    return this.managementClassifications().map(item => ({\r\n      id: String(item.id),  // Usar el ID num칠rico como string para que funcione la jerarqu칤a\r\n      codigo: item.codigo,\r\n      label: item.label,\r\n      requiere_pago: item.requiresPayment,\r\n      requiere_cronograma: item.requiresSchedule,\r\n      requiere_seguimiento: item.requiresFollowUp,\r\n      parentId: item.parentId,\r\n      hierarchyLevel: item.hierarchyLevel,\r\n      // Campos del tipo de clasificaci칩n\r\n      suggestsFullAmount: item.suggestsFullAmount,\r\n      allowsInstallmentSelection: item.allowsInstallmentSelection,\r\n      requiresManualAmount: item.requiresManualAmount\r\n    }));\r\n  }\r\n\r\n  /**\r\n   * Obtiene la campa침a activa principal\r\n   */\r\n  getActiveCampaign() {\r\n    const campaigns = this.campaigns();\r\n    return campaigns.length > 0 ? {\r\n      id: campaigns[0].campaignId,\r\n      nombre: campaigns[0].nombre,\r\n      tipo: campaigns[0].campaignType\r\n    } : null;\r\n  }\r\n\r\n  /**\r\n   * Obtiene los campos din치micos configurados para una clasificaci칩n espec칤fica\r\n   * Solo las clasificaciones \"hoja\" (sin hijos) deber칤an tener campos\r\n   */\r\n  getClassificationFields(typificationId: number): Observable<ClassificationFieldsResponse> {\r\n    if (!this.currentTenantId) {\r\n      throw new Error('No hay tenant configurado');\r\n    }\r\n\r\n    // Llamar al endpoint V2 del backend discador a trav칠s del gateway\r\n    let url = `${environment.gatewayUrl}/v2/typifications/config/tenant/${this.currentTenantId}/typifications/${typificationId}/fields`;\r\n    if (this.currentPortfolioId) {\r\n      url += `?portfolioId=${this.currentPortfolioId}`;\r\n    }\r\n\r\n    console.log('[V2] Cargando campos din치micos desde:', url);\r\n\r\n    return this.http.get<ClassificationFieldsResponse>(url).pipe(\r\n      tap(response => {\r\n        console.log('[V2] Campos din치micos cargados:', response);\r\n      }),\r\n      catchError(error => {\r\n        console.error('[V2] Error cargando campos din치micos:', error);\r\n        // Retornar respuesta vac칤a en caso de error\r\n        return of({\r\n          typificationId,\r\n          isLeaf: false,\r\n          fields: []\r\n        } as ClassificationFieldsResponse);\r\n      })\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Obtiene todos los tipos de campo disponibles\r\n   */\r\n  getAllFieldTypes(): Observable<FieldTypeResource[]> {\r\n    const url = `${environment.tipificacionUrl}/field-types`;\r\n    return this.http.get<FieldTypeResource[]>(url).pipe(\r\n      catchError(error => {\r\n        console.error('Error cargando tipos de campo:', error);\r\n        return of([]);\r\n      })\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Obtiene tipos de campo disponibles para campos principales\r\n   */\r\n  getFieldTypesForMainFields(): Observable<FieldTypeResource[]> {\r\n    const url = `${environment.tipificacionUrl}/field-types/main-fields`;\r\n    return this.http.get<FieldTypeResource[]>(url).pipe(\r\n      catchError(error => {\r\n        console.error('Error cargando tipos para campos principales:', error);\r\n        return of([]);\r\n      })\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Obtiene tipos de campo disponibles para columnas de tabla\r\n   */\r\n  getFieldTypesForTableColumns(): Observable<FieldTypeResource[]> {\r\n    const url = `${environment.tipificacionUrl}/field-types/table-columns`;\r\n    return this.http.get<FieldTypeResource[]>(url).pipe(\r\n      catchError(error => {\r\n        console.error('Error cargando tipos para columnas de tabla:', error);\r\n        return of([]);\r\n      })\r\n    );\r\n  }\r\n}\r\n", "import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { environment } from '../../../environments/environment';\r\nimport {\r\n  TypificationCatalogV2,\r\n  TenantTypificationConfigV2,\r\n  CreateTypificationCommandV2,\r\n  UpdateTypificationCommandV2,\r\n  UpdateTypificationConfigCommandV2,\r\n  ClassificationTypeV2,\r\n  AdditionalFieldV2,\r\n  CampoOpcionDTO,\r\n  ConfigurarOpcionesCampoRequest,\r\n  CampoConOpcionesResponse\r\n} from '../models/typification-v2.model';\r\nimport { Portfolio } from '../models/portfolio.model';\r\nimport { Tenant } from '../models/tenant.model';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class TypificationV2Service {\r\n  private catalogUrl = `${environment.gatewayUrl}/v2/typifications/catalog`;\r\n  private configUrl = `${environment.gatewayUrl}/v2/typifications/config`;\r\n\r\n  constructor(private http: HttpClient) {}\r\n\r\n  // ========================================\r\n  // Catalog Management (V2)\r\n  // ========================================\r\n\r\n  getAllClassifications(): Observable<TypificationCatalogV2[]> {\r\n    return this.http.get<TypificationCatalogV2[]>(`${this.catalogUrl}`);\r\n  }\r\n\r\n  getActiveClassifications(): Observable<TypificationCatalogV2[]> {\r\n    return this.http.get<TypificationCatalogV2[]>(`${this.catalogUrl}/active`);\r\n  }\r\n\r\n  getTypificationsByType(type: ClassificationTypeV2): Observable<TypificationCatalogV2[]> {\r\n    return this.http.get<TypificationCatalogV2[]>(`${this.catalogUrl}/type/${type}`);\r\n  }\r\n\r\n  getTypificationsByLevel(level: number): Observable<TypificationCatalogV2[]> {\r\n    return this.http.get<TypificationCatalogV2[]>(`${this.catalogUrl}/level/${level}`);\r\n  }\r\n\r\n  getTypificationsByParent(parentId: number): Observable<TypificationCatalogV2[]> {\r\n    return this.http.get<TypificationCatalogV2[]>(`${this.catalogUrl}/${parentId}/children`);\r\n  }\r\n\r\n  getClassificationById(id: number): Observable<TypificationCatalogV2> {\r\n    return this.http.get<TypificationCatalogV2>(`${this.catalogUrl}/${id}`);\r\n  }\r\n\r\n  getRootTypifications(): Observable<TypificationCatalogV2[]> {\r\n    return this.http.get<TypificationCatalogV2[]>(`${this.catalogUrl}/roots`);\r\n  }\r\n\r\n  createTypification(command: CreateTypificationCommandV2): Observable<TypificationCatalogV2> {\r\n    return this.http.post<TypificationCatalogV2>(`${this.catalogUrl}`, command);\r\n  }\r\n\r\n  updateTypification(id: number, command: UpdateTypificationCommandV2): Observable<TypificationCatalogV2> {\r\n    return this.http.put<TypificationCatalogV2>(`${this.catalogUrl}/${id}`, command);\r\n  }\r\n\r\n  deleteTypification(id: number): Observable<void> {\r\n    return this.http.delete<void>(`${this.catalogUrl}/${id}`);\r\n  }\r\n\r\n  activateTypification(id: number): Observable<TypificationCatalogV2> {\r\n    return this.http.put<TypificationCatalogV2>(`${this.catalogUrl}/${id}/activate`, {});\r\n  }\r\n\r\n  deactivateTypification(id: number): Observable<TypificationCatalogV2> {\r\n    return this.http.put<TypificationCatalogV2>(`${this.catalogUrl}/${id}/deactivate`, {});\r\n  }\r\n\r\n  // ========================================\r\n  // Tenant Configuration Management (V2)\r\n  // ========================================\r\n\r\n  getTenantClassifications(tenantId: number, portfolioId?: number, includeDisabled?: boolean): Observable<TenantTypificationConfigV2[]> {\r\n    let params = new HttpParams();\r\n    if (includeDisabled) {\r\n      params = params.set('includeDisabled', 'true');\r\n    }\r\n\r\n    if (portfolioId) {\r\n      return this.http.get<TenantTypificationConfigV2[]>(\r\n        `${this.configUrl}/tenant/${tenantId}/portfolio/${portfolioId}`,\r\n        { params }\r\n      );\r\n    } else {\r\n      return this.http.get<TenantTypificationConfigV2[]>(\r\n        `${this.configUrl}/tenant/${tenantId}`,\r\n        { params }\r\n      );\r\n    }\r\n  }\r\n\r\n  getTenantClassificationsByType(\r\n    tenantId: number,\r\n    type: ClassificationTypeV2,\r\n    portfolioId?: number\r\n  ): Observable<TenantTypificationConfigV2[]> {\r\n    let params = new HttpParams();\r\n    if (portfolioId) {\r\n      params = params.set('portfolioId', portfolioId.toString());\r\n    }\r\n    return this.http.get<TenantTypificationConfigV2[]>(\r\n      `${this.configUrl}/tenant/${tenantId}/type/${type}`,\r\n      { params }\r\n    );\r\n  }\r\n\r\n  getEffectiveTypifications(\r\n    tenantId: number,\r\n    portfolioId: number,\r\n    subPortfolioId: number\r\n  ): Observable<TypificationCatalogV2[]> {\r\n    return this.http.get<TypificationCatalogV2[]>(\r\n      `${this.configUrl}/effective/tenant/${tenantId}/portfolio/${portfolioId}/subportfolio/${subPortfolioId}`\r\n    );\r\n  }\r\n\r\n  updateTenantTypificationConfig(\r\n    configId: number,\r\n    command: UpdateTypificationConfigCommandV2\r\n  ): Observable<TenantTypificationConfigV2> {\r\n    return this.http.put<TenantTypificationConfigV2>(\r\n      `${this.configUrl}/${configId}`,\r\n      command\r\n    );\r\n  }\r\n\r\n  enableClassification(\r\n    tenantId: number,\r\n    typificationId: number,\r\n    portfolioId?: number,\r\n    subPortfolioId?: number,\r\n    userId?: number\r\n  ): Observable<TenantTypificationConfigV2> {\r\n    const params = new HttpParams().set('userId', userId?.toString() || '1');\r\n\r\n    if (subPortfolioId && portfolioId) {\r\n      // Subportfolio level\r\n      return this.http.post<TenantTypificationConfigV2>(\r\n        `${this.configUrl}/tenant/${tenantId}/portfolio/${portfolioId}/subportfolio/${subPortfolioId}/typification/${typificationId}/enable`,\r\n        {},\r\n        { params }\r\n      );\r\n    } else if (portfolioId) {\r\n      // Portfolio level (no subportfolio)\r\n      return this.http.post<TenantTypificationConfigV2>(\r\n        `${this.configUrl}/tenant/${tenantId}/portfolio/${portfolioId}/typification/${typificationId}/enable`,\r\n        {},\r\n        { params }\r\n      );\r\n    } else {\r\n      // Tenant level (no portfolio/subportfolio)\r\n      return this.http.post<TenantTypificationConfigV2>(\r\n        `${this.configUrl}/tenant/${tenantId}/typification/${typificationId}/enable`,\r\n        {},\r\n        { params }\r\n      );\r\n    }\r\n  }\r\n\r\n  disableClassification(\r\n    tenantId: number,\r\n    typificationId: number,\r\n    portfolioId?: number,\r\n    subPortfolioId?: number,\r\n    userId?: number\r\n  ): Observable<TenantTypificationConfigV2> {\r\n    const params = new HttpParams().set('userId', userId?.toString() || '1');\r\n\r\n    if (subPortfolioId && portfolioId) {\r\n      // Subportfolio level\r\n      return this.http.post<TenantTypificationConfigV2>(\r\n        `${this.configUrl}/tenant/${tenantId}/portfolio/${portfolioId}/subportfolio/${subPortfolioId}/typification/${typificationId}/disable`,\r\n        {},\r\n        { params }\r\n      );\r\n    } else if (portfolioId) {\r\n      // Portfolio level (no subportfolio)\r\n      return this.http.post<TenantTypificationConfigV2>(\r\n        `${this.configUrl}/tenant/${tenantId}/portfolio/${portfolioId}/typification/${typificationId}/disable`,\r\n        {},\r\n        { params }\r\n      );\r\n    } else {\r\n      // Tenant level (no portfolio/subportfolio)\r\n      return this.http.post<TenantTypificationConfigV2>(\r\n        `${this.configUrl}/tenant/${tenantId}/typification/${typificationId}/disable`,\r\n        {},\r\n        { params }\r\n      );\r\n    }\r\n  }\r\n\r\n  // ========================================\r\n  // Tenant & Portfolio Management\r\n  // ========================================\r\n\r\n  getAllTenants(): Observable<Tenant[]> {\r\n    return this.http.get<Tenant[]>(`${environment.webServiceUrl}/v1/system-config/tenants`);\r\n  }\r\n\r\n  getPortfoliosByTenant(tenantId: number): Observable<Portfolio[]> {\r\n    return this.http.get<Portfolio[]>(`${environment.webServiceUrl}/v1/system-config/tenants/${tenantId}/portfolios`);\r\n  }\r\n\r\n  getSubPortfoliosByPortfolio(portfolioId: number): Observable<any[]> {\r\n    return this.http.get<any[]>(`${this.configUrl}/portfolios/${portfolioId}/subportfolios`);\r\n  }\r\n\r\n  // ========================================\r\n  // Additional Fields\r\n  // ========================================\r\n\r\n  getAdditionalFields(typificationId: number): Observable<AdditionalFieldV2[]> {\r\n    return this.http.get<AdditionalFieldV2[]>(\r\n      `${this.catalogUrl}/${typificationId}/additional-fields`\r\n    );\r\n  }\r\n\r\n  saveAdditionalFields(typificationId: number, fields: AdditionalFieldV2[]): Observable<AdditionalFieldV2[]> {\r\n    return this.http.put<AdditionalFieldV2[]>(\r\n      `${this.catalogUrl}/${typificationId}/additional-fields`,\r\n      fields\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Obtiene los campos adicionales de una tipificaci칩n con valores din치micos desde la tabla del cliente\r\n   * @param tenantId ID del tenant\r\n   * @param typificationId ID de la tipificaci칩n\r\n   * @param portfolioId ID del portfolio (opcional)\r\n   * @param clientId ID del cliente (opcional, para cargar valores din치micos)\r\n   */\r\n  getTypificationFieldsWithValues(\r\n    tenantId: number,\r\n    typificationId: number,\r\n    portfolioId?: number,\r\n    clientId?: number\r\n  ): Observable<{ typificationId: number; isLeaf: boolean; fields: AdditionalFieldV2[] }> {\r\n    let params = new HttpParams();\r\n    if (portfolioId) {\r\n      params = params.set('portfolioId', portfolioId.toString());\r\n    }\r\n    if (clientId) {\r\n      params = params.set('clientId', clientId.toString());\r\n    }\r\n\r\n    return this.http.get<{ typificationId: number; isLeaf: boolean; fields: AdditionalFieldV2[] }>(\r\n      `${this.configUrl}/tenant/${tenantId}/typifications/${typificationId}/fields`,\r\n      { params }\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Obtiene las columnas num칠ricas disponibles en la tabla din치mica de una subcartera\r\n   * @param tenantId ID del tenant\r\n   * @param portfolioId ID del portfolio\r\n   * @param subPortfolioId ID de la subcartera\r\n   */\r\n  getDynamicTableColumns(\r\n    tenantId: number,\r\n    portfolioId: number,\r\n    subPortfolioId: number\r\n  ): Observable<{ columns: string[] }> {\r\n    const params = new HttpParams()\r\n      .set('tenantId', tenantId.toString())\r\n      .set('portfolioId', portfolioId.toString())\r\n      .set('subPortfolioId', subPortfolioId.toString());\r\n\r\n    return this.http.get<{ columns: string[] }>(\r\n      `${this.configUrl}/dynamic-table-columns`,\r\n      { params }\r\n    );\r\n  }\r\n\r\n  // ========================================\r\n  // Field Options (Toggle System)\r\n  // ========================================\r\n\r\n  /**\r\n   * Genera opciones autom치ticamente desde las columnas din치micas de una subcartera\r\n   */\r\n  generarOpcionesCampo(\r\n    campoId: number,\r\n    tenantId: number,\r\n    portfolioId: number,\r\n    subPortfolioId: number\r\n  ): Observable<CampoOpcionDTO[]> {\r\n    const params = new HttpParams()\r\n      .set('tenantId', tenantId.toString())\r\n      .set('portfolioId', portfolioId.toString())\r\n      .set('subPortfolioId', subPortfolioId.toString());\r\n\r\n    return this.http.get<CampoOpcionDTO[]>(\r\n      `${this.catalogUrl}/campo/${campoId}/opciones/generar`,\r\n      { params }\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Inicializa las opciones de un campo en la base de datos\r\n   */\r\n  inicializarOpcionesCampo(\r\n    campoId: number,\r\n    tenantId: number,\r\n    portfolioId: number,\r\n    subPortfolioId: number\r\n  ): Observable<CampoOpcionDTO[]> {\r\n    const params = new HttpParams()\r\n      .set('tenantId', tenantId.toString())\r\n      .set('portfolioId', portfolioId.toString())\r\n      .set('subPortfolioId', subPortfolioId.toString());\r\n\r\n    return this.http.post<CampoOpcionDTO[]>(\r\n      `${this.catalogUrl}/campo/${campoId}/opciones/inicializar`,\r\n      {},\r\n      { params }\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Obtiene todas las opciones de un campo (para mostrar toggles al admin)\r\n   */\r\n  getOpcionesCampo(campoId: number): Observable<CampoOpcionDTO[]> {\r\n    return this.http.get<CampoOpcionDTO[]>(\r\n      `${this.catalogUrl}/campo/${campoId}/opciones`\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Obtiene solo las opciones habilitadas de un campo (para dropdown del agente)\r\n   */\r\n  getOpcionesHabilitadas(campoId: number): Observable<CampoOpcionDTO[]> {\r\n    return this.http.get<CampoOpcionDTO[]>(\r\n      `${this.catalogUrl}/campo/${campoId}/opciones/habilitadas`\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Configura las opciones de un campo (activa/desactiva toggles)\r\n   */\r\n  configurarOpciones(request: ConfigurarOpcionesCampoRequest): Observable<CampoOpcionDTO[]> {\r\n    return this.http.put<CampoOpcionDTO[]>(\r\n      `${this.catalogUrl}/campo/opciones/configurar`,\r\n      request\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Obtiene las opciones habilitadas con sus valores desde la tabla din치mica del cliente\r\n   */\r\n  getOpcionesConValores(\r\n    campoId: number,\r\n    tenantId: number,\r\n    portfolioId: number,\r\n    subPortfolioId: number,\r\n    clientId: number\r\n  ): Observable<CampoConOpcionesResponse> {\r\n    const params = new HttpParams()\r\n      .set('tenantId', tenantId.toString())\r\n      .set('portfolioId', portfolioId.toString())\r\n      .set('subPortfolioId', subPortfolioId.toString())\r\n      .set('clientId', clientId.toString());\r\n\r\n    return this.http.get<CampoConOpcionesResponse>(\r\n      `${this.catalogUrl}/campo/${campoId}/opciones/valores`,\r\n      { params }\r\n    );\r\n  }\r\n\r\n  // ========================================\r\n  // Payment Schedule\r\n  // ========================================\r\n\r\n  /**\r\n   * Crea un cronograma de pagos (1 cabecera + N cuotas en tabla separada)\r\n   */\r\n  createPaymentSchedule(request: any): Observable<any> {\r\n    return this.http.post<any>(\r\n      `${environment.gatewayUrl}/v2/management-records/payment-schedule`,\r\n      request\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Obtiene los cronogramas de pago de un cliente\r\n   */\r\n  getPaymentSchedulesByClient(clientId: number): Observable<any[]> {\r\n    return this.http.get<any[]>(\r\n      `${environment.gatewayUrl}/v2/management-records/payment-schedule/client/${clientId}`\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Obtiene un grupo de cuotas por su UUID\r\n   */\r\n  getPaymentScheduleByGroup(groupUuid: string): Observable<any[]> {\r\n    return this.http.get<any[]>(\r\n      `${environment.gatewayUrl}/v2/management-records/payment-schedule/group/${groupUuid}`\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Actualiza el estado de pago de una cuota\r\n   */\r\n  updatePaymentStatus(recordId: number, estadoPago: string, montoPagadoReal?: number, fechaPagoReal?: string): Observable<any> {\r\n    let params = new HttpParams().set('estadoPago', estadoPago);\r\n    if (montoPagadoReal !== undefined) {\r\n      params = params.set('montoPagadoReal', montoPagadoReal.toString());\r\n    }\r\n    if (fechaPagoReal) {\r\n      params = params.set('fechaPagoReal', fechaPagoReal);\r\n    }\r\n\r\n    return this.http.put<any>(\r\n      `${environment.gatewayUrl}/v2/management-records/${recordId}/payment-status`,\r\n      {},\r\n      { params }\r\n    );\r\n  }\r\n\r\n  // ========================================\r\n  // Helper Methods\r\n  // ========================================\r\n\r\n  buildClassificationTree(typifications: TypificationCatalogV2[]): any[] {\r\n    const map = new Map<number, any>();\r\n    const roots: any[] = [];\r\n\r\n    // Create nodes\r\n    typifications.forEach(typification => {\r\n      map.set(typification.id, {\r\n        typification,\r\n        children: [],\r\n        level: typification.nivelJerarquia\r\n      });\r\n    });\r\n\r\n    // Build tree\r\n    typifications.forEach(typification => {\r\n      const node = map.get(typification.id);\r\n      const parentId = typification.tipificacionPadre?.id;\r\n      if (parentId) {\r\n        const parent = map.get(parentId);\r\n        if (parent) {\r\n          parent.children.push(node);\r\n        }\r\n      } else {\r\n        roots.push(node);\r\n      }\r\n    });\r\n\r\n    // Sort children by ordenVisualizacion\r\n    const sortChildren = (node: any) => {\r\n      if (node.children.length > 0) {\r\n        node.children.sort((a: any, b: any) => {\r\n          const orderA = a.typification.ordenVisualizacion || 0;\r\n          const orderB = b.typification.ordenVisualizacion || 0;\r\n          return orderA - orderB;\r\n        });\r\n        node.children.forEach((child: any) => sortChildren(child));\r\n      }\r\n    };\r\n\r\n    roots.forEach(root => sortChildren(root));\r\n    return roots;\r\n  }\r\n}\r\n"],
  "mappings": "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",
  "names": ["_forTrack1", "_forTrack0"]
}
