import{c as Se,d as Ie}from"./chunk-VHHFB6JP.js";import{a as xe}from"./chunk-PUQ5RSXD.js";import{o as ye,r as ve}from"./chunk-JRQDYGIX.js";import{c as fe}from"./chunk-T2ZQ5EGI.js";import{Xb as be,Yb as _e}from"./chunk-BJ2AUU2F.js";import{a as L}from"./chunk-YQKVMPSG.js";import{$ as b,Bc as de,Da as ee,Eb as oe,Fb as ae,Gb as se,Lb as d,Mb as o,Nb as a,Ob as h,Oc as me,Pb as P,Qb as F,Rb as O,Sb as k,Sc as H,Tb as R,Vb as M,Xb as D,Zb as p,ab as s,ca as T,da as Q,ed as ue,fa as J,fb as te,ga as S,gb as E,ha as _,ic as X,jc as j,kc as le,lc as c,ld as pe,m as B,mc as Z,md as ge,na as I,nb as U,nc as $,oa as A,ob as re,oc as V,sb as N,sd as he,ud as z,vb as ie,wb as ne,xa as C,zc as ce}from"./chunk-SN4XSKG7.js";var Xe=(()=>{let t=class t{constructor(e,i){this.http=e,this.webSocketService=i,this.baseUrl=`${L.gatewayUrl}/autorizaciones`,this.supervisoresEnLinea=C([]),this.solicitudesPendientes=C([]),this.solicitudActual=C(null),this.cargando=C(!1),this.nuevaSolicitudSubject=new B,this.respuestaSubject=new B,this.nuevaSolicitud$=this.nuevaSolicitudSubject.asObservable(),this.respuesta$=this.respuestaSubject.asObservable(),this.wsSubscribed=!1,this.subscribeToWebSocket()}getHeaders(){let e=localStorage.getItem("callcenter_token");return new he({"Content-Type":"application/json",Authorization:e?`Bearer ${e}`:""})}getCurrentUserId(){try{let e=localStorage.getItem("callcenter_user");if(e)return JSON.parse(e).id||null}catch(e){console.error("[AUTORIZACION] Error obteniendo usuario actual:",e)}return null}obtenerSupervisoresEnLinea(){return console.log("[AUTORIZACION] Obteniendo supervisores en l\xEDnea..."),this.cargando.set(!0),this.http.get(`${this.baseUrl}/supervisores-en-linea`,{headers:this.getHeaders()}).pipe(b(e=>{this.supervisoresEnLinea.set(e),this.cargando.set(!1),console.log("[AUTORIZACION] Supervisores encontrados:",e.length)}))}crearSolicitud(e){return console.log("[AUTORIZACION] Creando solicitud:",e),this.cargando.set(!0),this.http.post(this.baseUrl,e,{headers:this.getHeaders()}).pipe(b(i=>{this.solicitudActual.set(i),this.cargando.set(!1),console.log("[AUTORIZACION] Solicitud creada:",i.uuid)}))}responderSolicitud(e){return console.log("[AUTORIZACION] Respondiendo solicitud:",e),this.http.post(`${this.baseUrl}/responder`,e,{headers:this.getHeaders()}).pipe(b(i=>{console.log("[AUTORIZACION] Solicitud respondida:",i.estado),this.solicitudesPendientes.update(l=>l.filter(m=>m.uuid!==i.uuid))}))}obtenerSolicitudesPendientes(e){return console.log("[AUTORIZACION] Obteniendo pendientes para supervisor:",e),this.http.get(`${this.baseUrl}/pendientes/${e}`,{headers:this.getHeaders()}).pipe(b(i=>{this.solicitudesPendientes.set(i),console.log("[AUTORIZACION] Solicitudes pendientes:",i.length)}))}obtenerPorUuid(e){return this.http.get(`${this.baseUrl}/${e}`,{headers:this.getHeaders()})}cancelarSolicitud(e,i){return console.log("[AUTORIZACION] Cancelando solicitud:",e),this.http.post(`${this.baseUrl}/${e}/cancelar`,{idAgente:i},{headers:this.getHeaders()}).pipe(b(l=>{this.solicitudActual.set(null),console.log("[AUTORIZACION] Solicitud cancelada")}))}subscribeToWebSocket(){this.wsSubscribed||(console.log("[AUTORIZACION] Iniciando suscripci\xF3n a WebSocket..."),this.webSocketService.isConnected()||(console.log("[AUTORIZACION] WebSocket no conectado, iniciando conexi\xF3n..."),this.webSocketService.connect()),console.log("[AUTORIZACION] Suscribiendo a /user/queue/messages..."),this.webSocketService.subscribe("/user/queue/messages").subscribe(e=>{console.log("[AUTORIZACION] \u{1F4EC} Mensaje recibido en /user/queue/messages:",e),this.handleWebSocketMessage(e)}),console.log("[AUTORIZACION] Suscribiendo a /topic/autorizaciones/supervisores..."),this.webSocketService.subscribe("/topic/autorizaciones/supervisores").subscribe(e=>{console.log("[AUTORIZACION] \u{1F4EC} Mensaje recibido en /topic/autorizaciones/supervisores:",e),this.handleWebSocketMessage(e)}),this.wsSubscribed=!0,console.log("[AUTORIZACION] \u2705 Subscrito a WebSocket para autorizaciones"))}ensureWebSocketSubscription(){console.log("[AUTORIZACION] Verificando suscripci\xF3n WebSocket..."),this.wsSubscribed?console.log("[AUTORIZACION] Ya est\xE1 suscrito a WebSocket"):this.subscribeToWebSocket()}handleWebSocketMessage(e){if(console.log("[AUTORIZACION] \u{1F4E8} Mensaje WebSocket recibido (raw):",JSON.stringify(e,null,2)),!e)return;let i;if(e.tipo&&e.solicitud)i=e,console.log("[AUTORIZACION] \u2705 Mensaje en formato directo:",i.tipo);else if(e.payload&&e.payload.tipo)i=e.payload,console.log("[AUTORIZACION] \u2705 Mensaje normalizado desde payload:",i.tipo);else if(e.type&&e.payload&&e.payload.solicitud)i=e.payload,console.log("[AUTORIZACION] \u2705 Mensaje normalizado desde type/payload:",i.tipo);else{console.log("[AUTORIZACION] \u26A0\uFE0F Formato de mensaje no reconocido:",e);return}if(!i.tipo||!i.solicitud){console.log("[AUTORIZACION] \u26A0\uFE0F Evento incompleto, ignorando:",i);return}let l=this.getCurrentUserId();switch(console.log("[AUTORIZACION] Procesando evento:",i.tipo,"| Usuario actual:",l),i.tipo){case"NUEVA_SOLICITUD_AUTORIZACION":if(i.solicitud.idSupervisor!==l){console.log("[AUTORIZACION] Ignorando solicitud - no es para este supervisor. Destinatario:",i.solicitud.idSupervisor,"Yo:",l);return}console.log("[AUTORIZACION] Nueva solicitud recibida para M\xCD!"),this.solicitudesPendientes.update(m=>[i.solicitud,...m]),this.nuevaSolicitudSubject.next(i.solicitud);break;case"SOLICITUD_APROBADA":if(i.solicitud.idAgenteSolicitante!==l){console.log("[AUTORIZACION] \u23ED\uFE0F Ignorando APROBADA - no es mi solicitud. Agente:",i.solicitud.idAgenteSolicitante,"Yo:",l);return}console.log("[AUTORIZACION] \u2705 \xA1MI Solicitud fue APROBADA!"),this.solicitudActual.set(i.solicitud),this.respuestaSubject.next(i.solicitud);break;case"SOLICITUD_RECHAZADA":if(i.solicitud.idAgenteSolicitante!==l){console.log("[AUTORIZACION] \u23ED\uFE0F Ignorando RECHAZADA - no es mi solicitud. Agente:",i.solicitud.idAgenteSolicitante,"Yo:",l);return}console.log("[AUTORIZACION] \u274C \xA1MI Solicitud fue RECHAZADA!"),this.solicitudActual.set(i.solicitud),this.respuestaSubject.next(i.solicitud);break;case"SOLICITUD_CANCELADA":console.log("[AUTORIZACION] Solicitud cancelada por agente"),this.solicitudesPendientes.update(m=>m.filter(f=>f.uuid!==i.solicitud.uuid));break;case"SOLICITUD_EXPIRADA":console.log("[AUTORIZACION] Solicitud expirada!"),this.solicitudActual.set(i.solicitud),this.respuestaSubject.next(i.solicitud);break}}limpiarEstado(){this.solicitudActual.set(null),this.supervisoresEnLinea.set([])}};t.\u0275fac=function(i){return new(i||t)(S(z),S(xe))},t.\u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"});let r=t;return r})();var Ae=(()=>{let t=class t{constructor(e){this.http=e,this.baseUrl=`${L.apiUrl}/v2/management-records/recordatorios`}getMisRecordatoriosHoy(e){return this.http.get(`${this.baseUrl}/hoy/${e}`)}getMisRecordatoriosProximos(e,i=3){return this.http.get(`${this.baseUrl}/proximos/${e}?dias=${i}`)}registrarIntento(e){return this.http.post(`${this.baseUrl}/registrar`,e)}getEstadisticas(e,i){let l=`${this.baseUrl}/estadisticas/${e}`;return i&&(l+=`?fecha=${i}`),this.http.get(l)}getResultadosPosibles(){return this.http.get(`${this.baseUrl}/resultados-posibles`)}iniciarDialer(e){return this.http.post(`${this.baseUrl}/dialer/iniciar/${e}`,{})}obtenerSiguiente(e){return this.http.get(`${this.baseUrl}/dialer/siguiente/${e}`)}completarActual(e,i,l,m){let f="",x=[];return i&&x.push(`resultado=${i}`),l&&x.push(`uuidLlamada=${l}`),m&&x.push(`observaciones=${encodeURIComponent(m)}`),x.length>0&&(f="?"+x.join("&")),this.http.post(`${this.baseUrl}/dialer/completar/${e}${f}`,{})}detenerDialer(e){return this.http.delete(`${this.baseUrl}/dialer/detener/${e}`)}obtenerEstadoDialer(e){return this.http.get(`${this.baseUrl}/dialer/estado/${e}`)}};t.\u0275fac=function(i){return new(i||t)(S(z))},t.\u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"});let r=t;return r})();var g=(function(r){return r[r.State=0]="State",r[r.Transition=1]="Transition",r[r.Sequence=2]="Sequence",r[r.Group=3]="Group",r[r.Animate=4]="Animate",r[r.Keyframes=5]="Keyframes",r[r.Style=6]="Style",r[r.Trigger=7]="Trigger",r[r.Reference=8]="Reference",r[r.AnimateChild=9]="AnimateChild",r[r.AnimateRef=10]="AnimateRef",r[r.Query=11]="Query",r[r.Stagger=12]="Stagger",r})(g||{}),ke="*";function w(r,t){return{type:g.Trigger,name:r,definitions:t,options:{}}}function y(r,t=null){return{type:g.Animate,styles:t,timings:r}}function Ye(r,t=null){return{type:g.Sequence,steps:r,options:t}}function u(r){return{type:g.Style,styles:r,offset:null}}function G(r,t,n){return{type:g.State,name:r,styles:t,options:n}}function K(r){return{type:g.Keyframes,steps:r}}function v(r,t,n=null){return{type:g.Transition,expr:r,animation:t,options:n}}var q=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(t=0,n=0){this.totalTime=t+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){let n=t=="start"?this._onStartFns:this._onDoneFns;n.forEach(e=>e()),n.length=0}},W=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(t){this.players=t;let n=0,e=0,i=0,l=this.players.length;l==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(m=>{m.onDone(()=>{++n==l&&this._onFinish()}),m.onDestroy(()=>{++e==l&&this._onDestroy()}),m.onStart(()=>{++i==l&&this._onStart()})}),this.totalTime=this.players.reduce((m,f)=>Math.max(m,f.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){let n=t*this.totalTime;this.players.forEach(e=>{let i=e.totalTime?Math.min(1,n/e.totalTime):1;e.setPosition(i)})}getPosition(){let t=this.players.reduce((n,e)=>n===null||e.totalTime>n.totalTime?e:n,null);return t!=null?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){let n=t=="start"?this._onStartFns:this._onDoneFns;n.forEach(e=>e()),n.length=0}},Re="!";function De(r,t){if(r&1){let n=M();k(0),o(1,"div",2)(2,"div",3),h(3,"lucide-angular",4),a(),o(4,"div")(5,"h2",5),c(6,"Recordatorios del d\xEDa"),a(),o(7,"p",6),c(8,"Promesas de pago que vencen hoy"),a()()(),o(9,"div",7)(10,"div",8)(11,"div")(12,"p",9),c(13,"Tienes"),a(),o(14,"p",10),c(15),a(),o(16,"p",9),c(17,"cliente(s) por llamar"),a()(),h(18,"lucide-angular",11),a()(),o(19,"p",12),c(20," Inicia el marcado autom\xE1tico para recordar a tus clientes sobre sus compromisos de pago. "),a(),o(21,"div",13)(22,"button",14),D("click",function(){I(n);let i=p();return A(i.cerrar())}),c(23," M\xE1s tarde "),a(),o(24,"button",15),D("click",function(){I(n);let i=p();return A(i.iniciarDiscado())}),h(25,"lucide-angular",16),c(26),a()(),R()}if(r&2){let n=p();s(3),d("size",24),s(12),Z(n.data.pendientes),s(3),d("size",48),s(6),d("disabled",n.isLoading),s(),d("size",16),s(),$(" ",n.isLoading?"Cargando...":"Iniciar"," ")}}function we(r,t){if(r&1&&(o(0,"div",23),c(1),a()),r&2){let n=p(2);j("text-red-500",n.countdownNumber<=2)("text-orange-500",n.countdownNumber===3)("text-yellow-500",n.countdownNumber===4)("text-green-500",n.countdownNumber===5),d("@countdownNumber",void 0),s(),$(" ",n.countdownNumber," ")}}function Te(r,t){if(r&1){let n=M();k(0),o(1,"div",17)(2,"p",18),c(3,"Iniciando en..."),a(),o(4,"div",19),N(5,we,2,10,"div",20),a(),o(6,"p",21),c(7," Preparando la llamada al cliente... "),a(),o(8,"button",22),D("click",function(){I(n);let i=p();return A(i.cancelarDiscado())}),c(9," Cancelar "),a()(),R()}if(r&2){let n=p();s(5),d("ngIf",n.countdownNumber>0)}}function Ue(r,t){if(r&1&&(o(0,"div",30)(1,"p",6),c(2,"Cliente"),a(),o(3,"p",31),c(4),a(),o(5,"div",32)(6,"div")(7,"p",33),c(8,"Tel\xE9fono"),a(),o(9,"p",34),c(10),a()(),o(11,"div")(12,"p",33),c(13,"Monto"),a(),o(14,"p",35),c(15),ce(16,"number"),a()()(),o(17,"div",36)(18,"p",33),c(19),a()()()),r&2){let n=p(2);s(4),Z(n.recordatorioActual.nombreCliente),s(6),Z(n.recordatorioActual.telefono),s(5),$("S/ ",de(16,5,n.recordatorioActual.monto,"1.2-2")),s(4),V("Cuota ",n.recordatorioActual.numeroCuota," de ",n.recordatorioActual.totalCuotas)}}function Ne(r,t){if(r&1&&(k(0),o(1,"div",24)(2,"div",25),h(3,"lucide-angular",26),a(),o(4,"h2",27),c(5,"Llamando..."),a(),N(6,Ue,20,8,"div",28),o(7,"div",29),c(8),a()(),R()),r&2){let n=p();s(),d("@fadeSlide",void 0),s(2),d("size",32),s(3),d("ngIf",n.recordatorioActual),s(2),V(" Recordatorio ",(n.estadoDialer==null?null:n.estadoDialer.recordatoriosCompletados)||0," de ",(n.estadoDialer==null?null:n.estadoDialer.totalRecordatorios)||0," ")}}function Pe(r,t){if(r&1){let n=M();k(0),o(1,"div",37)(2,"div",38),h(3,"lucide-angular",39),a(),o(4,"h2",27),c(5,"\xA1Terminaste!"),a(),o(6,"p",40),c(7," Has completado todos tus recordatorios de pago por hoy. "),a(),o(8,"div",41)(9,"div",42),h(10,"lucide-angular",43),o(11,"p",44),c(12," Ya puedes ponerte en l\xEDnea para gestionar "),a()()(),o(13,"button",45),D("click",function(){I(n);let i=p();return A(i.cerrar())}),h(14,"lucide-angular",46),c(15," Ir al Dialer "),a()(),R()}r&2&&(s(),d("@fadeSlide",void 0),s(2),d("size",40),s(7),d("size",24),s(4),d("size",18))}var mt=(()=>{let t=class t{constructor(e,i,l,m){this.dialogRef=e,this.data=i,this.router=l,this.recordatoriosService=m,this.modalState="initial",this.countdownNumber=5,this.isLoading=!1,this.recordatorioActual=null,this.estadoDialer=null,this.countdownInterval=null}ngOnInit(){this.data.modoFinalizado?this.modalState="finished":this.data.modoSiguiente&&this.data.recordatorio&&(this.recordatorioActual=this.data.recordatorio,this.iniciarCountdown())}ngOnDestroy(){this.limpiarInterval()}cerrar(){this.limpiarInterval(),this.dialogRef.close({action:"close"})}iniciarDiscado(){this.isLoading=!0,this.recordatoriosService.iniciarDialer(this.data.idAgente).subscribe({next:e=>{this.isLoading=!1,e.success?(this.estadoDialer={recordatoriosCompletados:e.estado.recordatoriosCompletados,totalRecordatorios:e.estado.totalRecordatorios},this.iniciarCountdown()):console.error("Error iniciando dialer:",e.mensaje)},error:e=>{this.isLoading=!1,console.error("Error iniciando dialer:",e)}})}iniciarCountdown(){this.modalState="countdown",this.countdownNumber=5,this.countdownInterval=setInterval(()=>{this.countdownNumber--,this.countdownNumber<=0&&(this.limpiarInterval(),this.obtenerSiguienteYLlamar())},1e3)}obtenerSiguienteYLlamar(){if(this.data.modoSiguiente&&this.recordatorioActual){this.modalState="calling",setTimeout(()=>{this.dialogRef.close({action:"call",recordatorio:this.recordatorioActual,estado:this.estadoDialer})},1500);return}this.recordatoriosService.obtenerSiguiente(this.data.idAgente).subscribe({next:e=>{e.hayMas&&e.recordatorio?(this.recordatorioActual=e.recordatorio,this.estadoDialer=e.estado?{recordatoriosCompletados:e.estado.recordatoriosCompletados,totalRecordatorios:e.estado.totalRecordatorios}:null,this.modalState="calling",setTimeout(()=>{this.dialogRef.close({action:"call",recordatorio:this.recordatorioActual,estado:this.estadoDialer})},1500)):this.modalState="finished"},error:e=>{console.error("Error obteniendo siguiente:",e),this.modalState="finished"}})}cancelarDiscado(){this.limpiarInterval(),this.recordatoriosService.detenerDialer(this.data.idAgente).subscribe({next:()=>{this.dialogRef.close({action:"cancelled"})},error:()=>{this.dialogRef.close({action:"cancelled"})}})}limpiarInterval(){this.countdownInterval&&(clearInterval(this.countdownInterval),this.countdownInterval=null)}};t.\u0275fac=function(i){return new(i||t)(E(Se),E(Ie),E(fe),E(Ae))},t.\u0275cmp=U({type:t,selectors:[["app-recordatorios-modal"]],decls:5,vars:4,consts:[[1,"p-6","max-w-md","min-w-[380px]"],[4,"ngIf"],[1,"flex","items-center","gap-3","mb-4"],[1,"w-12","h-12","bg-gradient-to-br","from-orange-500","to-orange-600","rounded-full","flex","items-center","justify-center","shadow-lg"],["name","bell-ring",1,"text-white",3,"size"],[1,"text-lg","font-bold","text-slate-800","dark:text-white"],[1,"text-sm","text-slate-500","dark:text-gray-400"],[1,"bg-orange-50","dark:bg-orange-500/10","border","border-orange-200","dark:border-orange-500/20","rounded-xl","p-4","mb-5"],[1,"flex","items-center","justify-between"],[1,"text-sm","text-orange-700","dark:text-orange-300"],[1,"text-3xl","font-bold","text-orange-600","dark:text-orange-400"],["name","phone-call",1,"text-orange-300","dark:text-orange-600",3,"size"],[1,"text-sm","text-slate-600","dark:text-gray-400","mb-5"],[1,"flex","gap-3"],[1,"flex-1","px-4","py-2.5","bg-slate-200","dark:bg-slate-700","hover:bg-slate-300","dark:hover:bg-slate-600","text-slate-700","dark:text-slate-300","text-sm","font-semibold","rounded-lg","transition-all","duration-200",3,"click"],[1,"flex-1","px-4","py-2.5","bg-gradient-to-r","from-green-500","to-green-600","hover:from-green-400","hover:to-green-500","text-white","text-sm","font-semibold","rounded-lg","transition-all","duration-200","flex","items-center","justify-center","gap-2","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["name","play",3,"size"],[1,"text-center","py-8"],[1,"text-lg","text-slate-600","dark:text-gray-400","mb-6"],[1,"relative","h-40","flex","items-center","justify-center"],["class","countdown-number",3,"text-red-500","text-orange-500","text-yellow-500","text-green-500",4,"ngIf"],[1,"text-sm","text-slate-500","dark:text-gray-500","mt-4"],[1,"mt-6","px-4","py-2","text-sm","text-slate-500","hover:text-slate-700","dark:text-gray-400","dark:hover:text-gray-300","underline",3,"click"],[1,"countdown-number"],[1,"text-center","py-4"],[1,"w-16","h-16","bg-gradient-to-br","from-green-500","to-green-600","rounded-full","flex","items-center","justify-center","mx-auto","mb-4","shadow-lg","animate-pulse"],["name","phone-outgoing",1,"text-white",3,"size"],[1,"text-xl","font-bold","text-slate-800","dark:text-white","mb-2"],["class","bg-slate-100 dark:bg-slate-800 rounded-xl p-4 mt-4 text-left",4,"ngIf"],[1,"mt-4","text-sm","text-slate-500","dark:text-gray-400"],[1,"bg-slate-100","dark:bg-slate-800","rounded-xl","p-4","mt-4","text-left"],[1,"text-lg","font-semibold","text-slate-800","dark:text-white"],[1,"grid","grid-cols-2","gap-3","mt-3"],[1,"text-xs","text-slate-400","dark:text-gray-500"],[1,"text-sm","font-medium","text-slate-700","dark:text-gray-300"],[1,"text-sm","font-medium","text-green-600","dark:text-green-400"],[1,"mt-3","pt-3","border-t","border-slate-200","dark:border-slate-700"],[1,"text-center","py-6"],[1,"w-20","h-20","bg-gradient-to-br","from-green-400","to-green-600","rounded-full","flex","items-center","justify-center","mx-auto","mb-5","shadow-xl"],["name","check",1,"text-white",3,"size"],[1,"text-slate-600","dark:text-gray-400","mb-6"],[1,"bg-green-50","dark:bg-green-500/10","border","border-green-200","dark:border-green-500/20","rounded-xl","p-4","mb-5"],[1,"flex","items-center","justify-center","gap-3"],["name","headset",1,"text-green-600","dark:text-green-400",3,"size"],[1,"text-green-700","dark:text-green-300","font-medium"],[1,"w-full","px-4","py-3","bg-gradient-to-r","from-green-500","to-green-600","hover:from-green-400","hover:to-green-500","text-white","font-semibold","rounded-lg","transition-all","duration-200","flex","items-center","justify-center","gap-2",3,"click"],["name","log-in",3,"size"]],template:function(i,l){i&1&&(o(0,"div",0),N(1,De,27,6,"ng-container",1)(2,Te,10,1,"ng-container",1)(3,Ne,9,5,"ng-container",1)(4,Pe,16,4,"ng-container",1),a()),i&2&&(s(),d("ngIf",l.modalState==="initial"),s(),d("ngIf",l.modalState==="countdown"),s(),d("ngIf",l.modalState==="calling"),s(),d("ngIf",l.modalState==="finished"))},dependencies:[ge,ue,_e,be,pe],styles:["[_nghost-%COMP%]{display:block}.countdown-number[_ngcontent-%COMP%]{font-size:8rem;font-weight:800;line-height:1;text-shadow:0 4px 20px rgba(0,0,0,.15)}@keyframes _ngcontent-%COMP%_pulseRing{0%{transform:scale(1);opacity:1}to{transform:scale(1.5);opacity:0}}"],data:{animation:[w("countdownNumber",[v(":enter",[u({opacity:0,transform:"scale(0.3)"}),y("400ms ease-out",u({opacity:1,transform:"scale(1)"}))]),v(":leave",[y("300ms ease-in",u({opacity:0,transform:"scale(1.5)"}))])]),w("fadeSlide",[v(":enter",[u({opacity:0,transform:"translateY(20px)"}),y("300ms ease-out",u({opacity:1,transform:"translateY(0)"}))])]),w("pulse",[G("active",u({transform:"scale(1)"})),v("* => active",[y("600ms ease-in-out",K([u({transform:"scale(1)",offset:0}),u({transform:"scale(1.1)",offset:.5}),u({transform:"scale(1)",offset:1})]))])])]}});let r=t;return r})();function Fe(r,t){r&1&&O(0,"div",2)}var Me=new J("MAT_PROGRESS_BAR_DEFAULT_OPTIONS");var It=(()=>{class r{_elementRef=_(ee);_ngZone=_(ne);_changeDetectorRef=_(me);_renderer=_(te);_cleanupTransitionEnd;constructor(){let n=ve(),e=_(Me,{optional:!0});this._isNoopAnimation=n==="di-disabled",n==="reduced-motion"&&this._elementRef.nativeElement.classList.add("mat-progress-bar-reduced-motion"),e&&(e.color&&(this.color=this._defaultColor=e.color),this.mode=e.mode||this.mode)}_isNoopAnimation;get color(){return this._color||this._defaultColor}set color(n){this._color=n}_color;_defaultColor="primary";get value(){return this._value}set value(n){this._value=Ce(n||0),this._changeDetectorRef.markForCheck()}_value=0;get bufferValue(){return this._bufferValue||0}set bufferValue(n){this._bufferValue=Ce(n||0),this._changeDetectorRef.markForCheck()}_bufferValue=0;animationEnd=new ie;get mode(){return this._mode}set mode(n){this._mode=n,this._changeDetectorRef.markForCheck()}_mode="determinate";ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._cleanupTransitionEnd=this._renderer.listen(this._elementRef.nativeElement,"transitionend",this._transitionendHandler)})}ngOnDestroy(){this._cleanupTransitionEnd?.()}_getPrimaryBarTransform(){return`scaleX(${this._isIndeterminate()?1:this.value/100})`}_getBufferBarFlexBasis(){return`${this.mode==="buffer"?this.bufferValue:100}%`}_isIndeterminate(){return this.mode==="indeterminate"||this.mode==="query"}_transitionendHandler=n=>{this.animationEnd.observers.length===0||!n.target||!n.target.classList.contains("mdc-linear-progress__primary-bar")||(this.mode==="determinate"||this.mode==="buffer")&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))};static \u0275fac=function(e){return new(e||r)};static \u0275cmp=U({type:r,selectors:[["mat-progress-bar"]],hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-mdc-progress-bar","mdc-linear-progress"],hostVars:10,hostBindings:function(e,i){e&2&&(oe("aria-valuenow",i._isIndeterminate()?null:i.value)("mode",i.mode),le("mat-"+i.color),j("_mat-animation-noopable",i._isNoopAnimation)("mdc-linear-progress--animation-ready",!i._isNoopAnimation)("mdc-linear-progress--indeterminate",i._isIndeterminate()))},inputs:{color:"color",value:[2,"value","value",H],bufferValue:[2,"bufferValue","bufferValue",H],mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],decls:7,vars:5,consts:[["aria-hidden","true",1,"mdc-linear-progress__buffer"],[1,"mdc-linear-progress__buffer-bar"],[1,"mdc-linear-progress__buffer-dots"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__primary-bar"],[1,"mdc-linear-progress__bar-inner"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__secondary-bar"]],template:function(e,i){e&1&&(P(0,"div",0),O(1,"div",1),ae(2,Fe,1,0,"div",2),F(),P(3,"div",3),O(4,"span",4),F(),P(5,"div",5),O(6,"span",4),F()),e&2&&(s(),X("flex-basis",i._getBufferBarFlexBasis()),s(),se(i.mode==="buffer"?2:-1),s(),X("transform",i._getPrimaryBarTransform()))},styles:[`.mat-mdc-progress-bar{--mat-progress-bar-animation-multiplier: 1;display:block;text-align:start}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}.mat-progress-bar-reduced-motion{--mat-progress-bar-animation-multiplier: 2}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow-x:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:max(var(--mat-progress-bar-track-height, 4px),var(--mat-progress-bar-active-indicator-height, 4px))}@media(forced-colors: active){.mdc-linear-progress{outline-color:CanvasText}}.mdc-linear-progress__bar{position:absolute;top:0;bottom:0;margin:auto 0;width:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:var(--mat-progress-bar-active-indicator-height, 4px)}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}[dir=rtl] .mdc-linear-progress__bar{right:0;transform-origin:center right}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid;border-color:var(--mat-progress-bar-active-indicator-color, var(--mat-sys-primary));border-top-width:var(--mat-progress-bar-active-indicator-height, 4px)}.mdc-linear-progress__buffer{display:flex;position:absolute;top:0;bottom:0;margin:auto 0;width:100%;overflow:hidden;height:var(--mat-progress-bar-track-height, 4px);border-radius:var(--mat-progress-bar-track-shape, var(--mat-sys-corner-none))}.mdc-linear-progress__buffer-dots{background-image:radial-gradient(circle, var(--mat-progress-bar-track-color, var(--mat-sys-surface-variant)) calc(var(--mat-progress-bar-track-height, 4px) / 2), transparent 0);background-repeat:repeat-x;background-size:calc(calc(var(--mat-progress-bar-track-height, 4px) / 2)*5);background-position:left;flex:auto;transform:rotate(180deg);animation:mdc-linear-progress-buffering calc(250ms*var(--mat-progress-bar-animation-multiplier)) infinite linear}@media(forced-colors: active){.mdc-linear-progress__buffer-dots{background-color:ButtonBorder}}[dir=rtl] .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse calc(250ms*var(--mat-progress-bar-animation-multiplier)) infinite linear;transform:rotate(0)}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);background-color:var(--mat-progress-bar-track-color, var(--mat-sys-surface-variant))}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate calc(2s*var(--mat-progress-bar-animation-multiplier)) infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale calc(2s*var(--mat-progress-bar-animation-multiplier)) infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate calc(2s*var(--mat-progress-bar-animation-multiplier)) infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale calc(2s*var(--mat-progress-bar-animation-multiplier)) infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(calc(var(--mat-progress-bar-track-height, 4px) * -2.5))}}@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(-83.67142%)}100%{transform:translateX(-200.611057%)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(-37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(-84.386165%)}100%{transform:translateX(-160.277782%)}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}
`],encapsulation:2,changeDetection:0})}return r})();function Ce(r,t=0,n=100){return Math.max(t,Math.min(n,r))}var At=(()=>{class r{static \u0275fac=function(e){return new(e||r)};static \u0275mod=re({type:r});static \u0275inj=Q({imports:[ye]})}return r})();export{g as a,ke as b,Ye as c,u as d,q as e,W as f,Re as g,Xe as h,Ae as i,mt as j,It as k,At as l};
