import{a as ee}from"./chunk-4RPT37EW.js";import{a as X}from"./chunk-VRR66VB6.js";import{a as Z}from"./chunk-2O4K65UD.js";import{a as Q}from"./chunk-R2MQ2ZPF.js";import{c as F,d as W,g as L}from"./chunk-EE5DSQYI.js";import"./chunk-FQG7AIOC.js";import{E as K,c as R,f as B,k as j,m as q,s as $,t as G,u as Y,v as U,w as H,x as J}from"./chunk-OBPTCZRJ.js";import{$b as N,_b as O}from"./chunk-G66VUATQ.js";import"./chunk-YQKVMPSG.js";import{$a as y,Eb as s,Fb as n,Gb as o,Hb as u,Ob as x,Qb as f,Sb as m,Va as a,Yc as z,Zc as D,bc as I,dc as k,dd as P,ec as l,fc as h,fd as A,ga as p,gb as M,gc as w,ha as g,hc as S,jc as _,kc as v,lb as b,lc as C,pc as E,sc as T,uc as V}from"./chunk-FJ3LLV4S.js";import"./chunk-GAL4ENT6.js";var ne=r=>["/admin/campaigns",r,"edit"];function ae(r,d){if(r&1&&(n(0,"div",18),u(1,"lucide-angular",19),l(2),o()),r&2){let t=m();a(),s("size",18),a(),w(" ",t.error)}}function oe(r,d){if(r&1&&(n(0,"div",20),u(1,"lucide-angular",21),l(2),o()),r&2){let t=m();a(),s("size",18),a(),w(" ",t.successMessage)}}function re(r,d){if(r&1){let t=x();n(0,"div",25)(1,"p"),u(2,"lucide-angular",26),l(3," No hay campa\xF1as creadas todav\xEDa"),o(),n(4,"button",27),f("click",function(){p(t);let i=m(2);return g(i.openCreateModal())}),l(5,"Crear Primera Campa\xF1a"),o()()}r&2&&(a(2),s("size",20))}function le(r,d){if(r&1){let t=x();n(0,"button",49),f("click",function(){p(t);let i=m().$implicit,c=m(2);return g(c.activarCampaign(i))}),u(1,"lucide-angular",50),o()}r&2&&(a(),s("size",16))}function se(r,d){if(r&1){let t=x();n(0,"button",51),f("click",function(){p(t);let i=m().$implicit,c=m(2);return g(c.pausarCampaign(i))}),u(1,"lucide-angular",52),o()}r&2&&(a(),s("size",16))}function ce(r,d){r&1&&u(0,"lucide-angular",56),r&2&&s("size",16)}function me(r,d){r&1&&u(0,"lucide-angular",57),r&2&&s("size",16)}function de(r,d){if(r&1){let t=x();n(0,"button",53),f("click",function(){p(t);let i=m().$implicit,c=m(2);return g(c.toggleDialing(i))}),b(1,ce,1,1,"lucide-angular",54)(2,me,1,1,"lucide-angular",55),o()}if(r&2){let t=m().$implicit;k(t.estaDiscando?"btn-action-small btn-pause":"btn-action-small btn-activate"),s("title",t.estaDiscando?"Detener Discado":"Iniciar Discado"),a(),s("ngIf",t.estaDiscando),a(),s("ngIf",!t.estaDiscando)}}function pe(r,d){if(r&1){let t=x();n(0,"button",58),f("click",function(){p(t);let i=m().$implicit,c=m(2);return g(c.deleteCampaign(i))}),u(1,"lucide-angular",59),o()}r&2&&(a(),s("size",16))}function ge(r,d){if(r&1&&(n(0,"p",60),l(1),o()),r&2){let t=m().$implicit;a(),w(" ",t.description," ")}}function ue(r,d){if(r&1&&(n(0,"div",61)(1,"div",62)(2,"span",63),l(3,"Total:"),o(),n(4,"span",64),l(5),o()(),n(6,"div",62)(7,"span",63),l(8,"Pendientes:"),o(),n(9,"span",64),l(10),o()(),n(11,"div",62)(12,"span",63),l(13,"Contactados:"),o(),n(14,"span",64),l(15),o()()()),r&2){let t=m().$implicit;a(5),h(t.totalContacts||0),a(5),h(t.pendingContacts||0),a(5),h(t.contactedContacts||0)}}function fe(r,d){r&1&&(n(0,"span",65),u(1,"lucide-angular",66),l(2," Discando "),o()),r&2&&(a(),s("size",14))}function be(r,d){if(r&1&&(n(0,"span"),l(1),T(2,"date"),o()),r&2){let t=m().$implicit;a(),h(V(2,1,t.createdAt,"short"))}}function he(r,d){if(r&1){let t=x();n(0,"div",28)(1,"div",29)(2,"div",30),f("click",function(){let i=p(t).$implicit,c=m(2);return g(c.viewCampaignDetail(i))}),n(3,"h3"),l(4),o(),n(5,"span",31),l(6),o()(),n(7,"div",32)(8,"button",33),f("click",function(){let i=p(t).$implicit,c=m(2);return g(c.viewCampaignDetail(i))}),u(9,"lucide-angular",34),o(),n(10,"button",35),u(11,"lucide-angular",36),o(),b(12,le,2,1,"button",37)(13,se,2,1,"button",38),n(14,"button",39),f("click",function(){let i=p(t).$implicit,c=m(2);return g(c.openImportModal(i))}),u(15,"lucide-angular",40),o(),b(16,de,3,5,"button",41)(17,pe,2,1,"button",42),o()(),n(18,"div",43),b(19,ge,2,1,"p",44)(20,ue,16,3,"div",45),n(21,"div",46)(22,"span"),l(23),o(),n(24,"span"),l(25),o(),n(26,"span"),l(27),o(),b(28,fe,3,1,"span",47)(29,be,3,4,"span",48),o()()()}if(r&2){let t=d.$implicit,e=m(2);a(4),h(t.name),a(),I("background-color",e.getStatusColor(t.status)),a(),w(" ",e.getStatusText(t.status)," "),a(3),s("size",16),a(),s("routerLink",E(19,ne,t.id)),a(),s("size",16),a(),s("ngIf",e.canActivate(t)),a(),s("ngIf",e.canPause(t)),a(2),s("size",16),a(),s("ngIf",t.status==="ACTIVE"),a(),s("ngIf",t.status==="DRAFT"||t.status==="COMPLETED"),a(2),s("ngIf",t.description),a(),s("ngIf",t.totalContacts!==void 0),a(3),h(t.dialMode),a(2),w("Max: ",t.maxAttempts),a(2),w("Intensidad: ",t.intensidad||50),a(),s("ngIf",t.estaDiscando),a(),s("ngIf",t.createdAt)}}function xe(r,d){if(r&1&&(n(0,"div",22),b(1,re,6,1,"div",23)(2,he,30,21,"div",24),o()),r&2){let t=m();a(),s("ngIf",t.campaigns.length===0),a(),s("ngForOf",t.campaigns)}}function _e(r,d){r&1&&(n(0,"div",67),u(1,"div",68),n(2,"p"),l(3,"Cargando..."),o()())}function ve(r,d){if(r&1&&(n(0,"option",80),l(1),o()),r&2){let t=d.$implicit;s("ngValue",t.id),a(),S(" ",t.tenantCode," - ",t.tenantName," ")}}function Ce(r,d){if(r&1&&(n(0,"option",80),l(1),o()),r&2){let t=d.$implicit;s("ngValue",t.id),a(),S(" ",t.portfolioCode," - ",t.portfolioName," ")}}function we(r,d){if(r&1&&(n(0,"option",80),l(1),o()),r&2){let t=d.$implicit;s("ngValue",t.id),a(),S(" ",t.subPortfolioCode," - ",t.subPortfolioName," ")}}function ye(r,d){if(r&1){let t=x();n(0,"div",69),f("click",function(){p(t);let i=m();return g(i.closeCreateModal())}),n(1,"div",70),f("click",function(i){return p(t),g(i.stopPropagation())}),n(2,"div",71)(3,"h2"),u(4,"lucide-angular",9),l(5," Nueva Campa\xF1a"),o(),n(6,"button",72),f("click",function(){p(t);let i=m();return g(i.closeCreateModal())}),u(7,"lucide-angular",73),o()(),n(8,"div",74)(9,"div",75)(10,"label"),l(11,"Nombre de la Campa\xF1a *"),o(),n(12,"input",76),C("ngModelChange",function(i){p(t);let c=m();return v(c.newCampaign.name,i)||(c.newCampaign.name=i),g(i)}),o()(),n(13,"div",75)(14,"label"),l(15,"Descripci\xF3n"),o(),n(16,"textarea",77),C("ngModelChange",function(i){p(t);let c=m();return v(c.newCampaign.description,i)||(c.newCampaign.description=i),g(i)}),o()(),n(17,"div",78)(18,"div",75)(19,"label"),l(20,"Proveedor (Inquilino) *"),o(),n(21,"select",79),C("ngModelChange",function(i){p(t);let c=m();return v(c.selectedTenantId,i)||(c.selectedTenantId=i),g(i)}),f("ngModelChange",function(){p(t);let i=m();return g(i.onTenantChange())}),n(22,"option",80),l(23,"Seleccione un proveedor..."),o(),b(24,ve,2,3,"option",81),o()(),n(25,"div",75)(26,"label"),l(27,"Cartera *"),o(),n(28,"select",82),C("ngModelChange",function(i){p(t);let c=m();return v(c.selectedPortfolioId,i)||(c.selectedPortfolioId=i),g(i)}),f("ngModelChange",function(){p(t);let i=m();return g(i.onPortfolioChange())}),n(29,"option",80),l(30,"Seleccione una cartera..."),o(),b(31,Ce,2,3,"option",81),o()()(),n(32,"div",75)(33,"label"),l(34,"Subcartera *"),o(),n(35,"select",82),C("ngModelChange",function(i){p(t);let c=m();return v(c.selectedSubPortfolioId,i)||(c.selectedSubPortfolioId=i),g(i)}),n(36,"option",80),l(37,"Seleccione una subcartera..."),o(),b(38,we,2,3,"option",81),o()(),n(39,"div",78)(40,"div",75)(41,"label"),l(42,"Modo de Discado"),o(),n(43,"select",83),C("ngModelChange",function(i){p(t);let c=m();return v(c.newCampaign.dialMode,i)||(c.newCampaign.dialMode=i),g(i)}),n(44,"option",84),l(45,"Manual"),o(),n(46,"option",85),l(47,"Progresivo"),o(),n(48,"option",86),l(49,"Predictivo"),o()()(),n(50,"div",75)(51,"label"),l(52,"Intentos M\xE1ximos"),o(),n(53,"input",87),C("ngModelChange",function(i){p(t);let c=m();return v(c.newCampaign.maxAttempts,i)||(c.newCampaign.maxAttempts=i),g(i)}),o()()(),n(54,"div",75)(55,"label"),l(56,"Intensidad de Discado (1-100)"),o(),n(57,"input",88),C("ngModelChange",function(i){p(t);let c=m();return v(c.newCampaign.intensidad,i)||(c.newCampaign.intensidad=i),g(i)}),o(),n(58,"small",89),l(59,"N\xFAmero de llamadas simult\xE1neas por agente. Ejemplo: 50 con 10 agentes = 5 llamadas por agente."),o()()(),n(60,"div",90)(61,"button",91),f("click",function(){p(t);let i=m();return g(i.closeCreateModal())}),l(62,"Cancelar"),o(),n(63,"button",92),f("click",function(){p(t);let i=m();return g(i.createCampaign())}),l(64,"Crear Campa\xF1a"),o()()()()}if(r&2){let t=m();a(4),s("size",20),a(3),s("size",18),a(5),_("ngModel",t.newCampaign.name),a(4),_("ngModel",t.newCampaign.description),a(5),_("ngModel",t.selectedTenantId),a(),s("ngValue",0),a(2),s("ngForOf",t.tenants),a(4),_("ngModel",t.selectedPortfolioId),s("disabled",t.selectedTenantId===0),a(),s("ngValue",0),a(2),s("ngForOf",t.portfolios),a(4),_("ngModel",t.selectedSubPortfolioId),s("disabled",t.selectedPortfolioId===0),a(),s("ngValue",0),a(2),s("ngForOf",t.subPortfolios),a(5),_("ngModel",t.newCampaign.dialMode),a(10),_("ngModel",t.newCampaign.maxAttempts),a(4),_("ngModel",t.newCampaign.intensidad)}}function Se(r,d){if(r&1){let t=x();n(0,"div",69),f("click",function(){p(t);let i=m();return g(i.closeImportModal())}),n(1,"div",70),f("click",function(i){return p(t),g(i.stopPropagation())}),n(2,"div",71)(3,"h2"),u(4,"lucide-angular",40),l(5," Importar Contactos"),o(),n(6,"button",72),f("click",function(){p(t);let i=m();return g(i.closeImportModal())}),u(7,"lucide-angular",73),o()(),n(8,"div",74)(9,"p")(10,"strong"),l(11,"Campa\xF1a:"),o(),l(12),o(),n(13,"div",93)(14,"p"),u(15,"lucide-angular",94),l(16," Los contactos se importar\xE1n desde: "),n(17,"strong"),l(18),o()(),n(19,"p"),u(20,"lucide-angular",95),l(21," Clientes disponibles: "),n(22,"strong"),l(23),o()(),n(24,"p"),u(25,"lucide-angular",96),l(26," Inquilino: "),n(27,"strong"),l(28),o()(),n(29,"p"),u(30,"lucide-angular",97),l(31," Cartera: "),n(32,"strong"),l(33),o()(),n(34,"p"),u(35,"lucide-angular",98),l(36," Subcartera: "),n(37,"strong"),l(38),o()()(),n(39,"div",99),u(40,"lucide-angular",100),l(41," Se importar\xE1n "),n(42,"strong"),l(43,"TODOS"),o(),l(44," los clientes de esta cartera/subcartera autom\xE1ticamente. "),o()(),n(45,"div",90)(46,"button",91),f("click",function(){p(t);let i=m();return g(i.closeImportModal())}),l(47,"Cancelar"),o(),n(48,"button",92),f("click",function(){p(t);let i=m();return g(i.importarContactos())}),l(49,"Importar"),o()()()()}if(r&2){let t=m();a(4),s("size",20),a(3),s("size",18),a(5),w(" ",t.selectedCampaign==null?null:t.selectedCampaign.name),a(3),s("size",16),a(3),h((t.importStats==null?null:t.importStats.fuenteDatos)||"cashi_db.clientes"),a(2),s("size",16),a(3),h((t.importStats==null?null:t.importStats.totalClientes)||0),a(2),s("size",16),a(3),h(t.importStats==null?null:t.importStats.inquilino),a(2),s("size",16),a(3),h(t.importStats==null?null:t.importStats.cartera),a(2),s("size",16),a(3),h(t.importStats==null?null:t.importStats.subcartera),a(2),s("size",16)}}var Oe=(()=>{let d=class d{constructor(e,i,c,te,ie){this.campaignService=e,this.autoDialerService=i,this.tenantService=c,this.portfolioService=te,this.router=ie,this.campaigns=[],this.loading=!1,this.error=null,this.successMessage=null,this.showCreateModal=!1,this.showImportModal=!1,this.selectedCampaign=null,this.importStats=null,this.newCampaign={name:"",description:"",status:"DRAFT",dialMode:"PROGRESSIVE",maxAttempts:3,retryInterval:60,intensidad:50,tenantId:void 0,portfolioId:void 0,subPortfolioId:void 0},this.tenants=[],this.portfolios=[],this.subPortfolios=[],this.selectedTenantId=0,this.selectedPortfolioId=0,this.selectedSubPortfolioId=0,this.isAutoDialerActive=!1,this.autoDialerLoading=!1}ngOnInit(){this.loadCampaigns(),this.loadAutoDialerState(),this.loadTenants()}loadTenants(){this.tenantService.getAllTenants().subscribe({next:e=>{this.tenants=e.filter(i=>i.isActive)},error:e=>console.error("Error loading tenants:",e)})}onTenantChange(){this.selectedPortfolioId=0,this.selectedSubPortfolioId=0,this.portfolios=[],this.subPortfolios=[],this.selectedTenantId>0&&this.portfolioService.getPortfoliosByTenant(this.selectedTenantId).subscribe({next:e=>{this.portfolios=e.filter(i=>i.isActive)},error:e=>console.error("Error loading portfolios:",e)})}onPortfolioChange(){this.selectedSubPortfolioId=0,this.subPortfolios=[],this.selectedPortfolioId>0&&this.portfolioService.getSubPortfoliosByPortfolio(this.selectedPortfolioId).subscribe({next:e=>{this.subPortfolios=e.filter(i=>i.isActive)},error:e=>console.error("Error loading sub-portfolios:",e)})}ngOnDestroy(){this.autoDialerSubscription&&this.autoDialerSubscription.unsubscribe()}loadCampaigns(){this.loading=!0,this.error=null,this.campaignService.getAllCampaigns().subscribe({next:e=>{this.campaigns=e,this.loading=!1},error:e=>{console.error("Error loading campaigns:",e),this.error="Error al cargar las campa\xF1as",this.loading=!1}})}loadImportStats(e){this.campaignService.getImportStats(e).subscribe({next:i=>{this.importStats=i},error:i=>{console.error("Error loading import stats:",i)}})}openCreateModal(){this.newCampaign={name:"",description:"",status:"DRAFT",dialMode:"PROGRESSIVE",maxAttempts:3,retryInterval:60,intensidad:50},this.showCreateModal=!0}closeCreateModal(){this.showCreateModal=!1}createCampaign(){if(!this.newCampaign.name){this.error="El nombre de la campa\xF1a es requerido";return}if(!this.selectedSubPortfolioId||this.selectedSubPortfolioId===0){this.error="Debe seleccionar una subcartera";return}this.newCampaign.tenantId=this.selectedTenantId,this.newCampaign.portfolioId=this.selectedPortfolioId,this.newCampaign.subPortfolioId=this.selectedSubPortfolioId,this.loading=!0,this.error=null,this.campaignService.createCampaign(this.newCampaign).subscribe({next:e=>{this.successMessage="Campa\xF1a creada exitosamente",this.showCreateModal=!1,this.loadCampaigns(),this.loading=!1,setTimeout(()=>{this.successMessage=null},3e3)},error:e=>{console.error("Error creating campaign:",e),this.error="Error al crear la campa\xF1a",this.loading=!1}})}activarCampaign(e){e.id&&(this.loading=!0,this.error=null,this.campaignService.activarCampaign(e.id).subscribe({next:()=>{this.successMessage=`Campa\xF1a "${e.name}" activada`,this.loadCampaigns(),this.loading=!1,setTimeout(()=>{this.successMessage=null},3e3)},error:i=>{console.error("Error activating campaign:",i),this.error=i.error?.error||"Error al activar la campa\xF1a",this.loading=!1}}))}pausarCampaign(e){e.id&&(this.loading=!0,this.error=null,this.campaignService.pausarCampaign(e.id).subscribe({next:()=>{this.successMessage=`Campa\xF1a "${e.name}" pausada`,this.loadCampaigns(),this.loading=!1,setTimeout(()=>{this.successMessage=null},3e3)},error:i=>{console.error("Error pausing campaign:",i),this.error="Error al pausar la campa\xF1a",this.loading=!1}}))}openImportModal(e){this.selectedCampaign=e,this.showImportModal=!0,e.id&&this.loadImportStats(e.id)}closeImportModal(){this.showImportModal=!1,this.selectedCampaign=null}importarContactos(){this.selectedCampaign?.id&&(this.loading=!0,this.error=null,this.campaignService.importarContactos(this.selectedCampaign.id).subscribe({next:e=>{this.successMessage=`${e.contactosImportados} contactos importados`,this.showImportModal=!1,this.loadCampaigns(),this.loading=!1,setTimeout(()=>{this.successMessage=null},3e3)},error:e=>{console.error("Error importing contacts:",e),this.error="Error al importar contactos",this.loading=!1}}))}deleteCampaign(e){e.id&&confirm(`\xBFEst\xE1s seguro de eliminar la campa\xF1a "${e.name}"?`)&&(this.loading=!0,this.error=null,this.campaignService.deleteCampaign(e.id).subscribe({next:()=>{this.successMessage=`Campa\xF1a "${e.name}" eliminada`,this.loadCampaigns(),this.loading=!1,setTimeout(()=>{this.successMessage=null},3e3)},error:i=>{console.error("Error deleting campaign:",i),this.error=i.error?.error||"Error al eliminar la campa\xF1a",this.loading=!1}}))}getStatusColor(e){return this.campaignService.getStatusColor(e)}getStatusText(e){return this.campaignService.getStatusText(e)}canActivate(e){return e.status==="DRAFT"||e.status==="PAUSED"}canPause(e){return e.status==="ACTIVE"}toggleDialing(e){e.estaDiscando?this.stopDialing(e):this.startDialing(e)}startDialing(e){e.id&&(this.loading=!0,this.error=null,this.campaignService.startDialing(e.id).subscribe({next:()=>{this.successMessage=`Discado iniciado para "${e.name}"`,this.loadCampaigns(),this.loading=!1,setTimeout(()=>{this.successMessage=null},3e3)},error:i=>{console.error("Error starting dialing:",i),this.error=i.error?.message||"Error al iniciar el discado",this.loading=!1}}))}stopDialing(e){e.id&&(this.loading=!0,this.error=null,this.campaignService.stopDialing(e.id).subscribe({next:()=>{this.successMessage=`Discado detenido para "${e.name}"`,this.loadCampaigns(),this.loading=!1,setTimeout(()=>{this.successMessage=null},3e3)},error:i=>{console.error("Error stopping dialing:",i),this.error="Error al detener el discado",this.loading=!1}}))}canStartDialing(e){return e.status==="ACTIVE"&&!e.estaDiscando}canStopDialing(e){return e.estaDiscando===!0}loadAutoDialerState(){this.autoDialerService.getEstado().subscribe({next:e=>{this.isAutoDialerActive=e.activo},error:e=>{console.error("Error loading auto-dialer state:",e)}})}toggleAutoDialer(){this.autoDialerLoading=!0,this.autoDialerService.toggle("admin").subscribe({next:e=>{this.autoDialerLoading=!1,this.isAutoDialerActive=e.activo,console.log("Auto-Dialer toggled:",e.mensaje)},error:e=>{console.error("Error toggling auto-dialer:",e),this.autoDialerLoading=!1}})}getAutoDialerButtonText(){return this.autoDialerLoading?"Procesando...":this.isAutoDialerActive?"PAUSAR DISCADO":"INICIAR DISCADO"}getAutoDialerButtonIcon(){return this.isAutoDialerActive?"pause":"play"}getAutoDialerButtonClass(){return this.isAutoDialerActive?"btn-pause":"btn-activate"}viewCampaignDetail(e){e.id&&this.router.navigate(["/admin/campaigns",e.id])}navigateToMonitoring(){this.router.navigate(["/admin/campaign-monitoring"])}};d.\u0275fac=function(i){return new(i||d)(y(Q),y(ee),y(X),y(Z),y(F))},d.\u0275cmp=M({type:d,selectors:[["app-campaign-management"]],decls:25,vars:9,consts:[[1,"campaign-container"],[1,"flex","items-center","gap-2","mb-2"],[1,"w-8","h-8","bg-gradient-to-br","from-purple-600","to-purple-700","rounded-lg","flex","items-center","justify-center"],["name","clipboard-list",1,"text-white",3,"size"],[1,"text-lg","font-bold","text-white"],[1,"text-xs","text-gray-400"],[1,"header"],[1,"header-actions"],["routerLink","/admin/campaigns/new",1,"btn-create"],["name","plus-circle",3,"size"],["class","error-message",4,"ngIf"],["class","success-message",4,"ngIf"],[1,"campaigns-section"],[1,"section-title"],["name","clipboard-list",3,"size"],["class","campaigns-scrollable",4,"ngIf"],["class","loading-state",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"error-message"],["name","x-circle",3,"size"],[1,"success-message"],["name","check-circle",3,"size"],[1,"campaigns-scrollable"],["class","empty-state",4,"ngIf"],["class","campaign-card-compact",4,"ngFor","ngForOf"],[1,"empty-state"],["name","inbox",3,"size"],[1,"btn-create",3,"click"],[1,"campaign-card-compact"],[1,"campaign-header-compact"],[1,"campaign-title-compact",2,"cursor","pointer",3,"click"],[1,"status-badge"],[1,"campaign-actions"],["title","Ver detalle",1,"btn-action-small","btn-view",3,"click"],["name","eye",3,"size"],["title","Editar campa\xF1a",1,"btn-action-small","btn-edit",3,"routerLink"],["name","pencil",3,"size"],["class","btn-action-small btn-activate","title","Activar campa\xF1a",3,"click",4,"ngIf"],["class","btn-action-small btn-pause","title","Pausar campa\xF1a",3,"click",4,"ngIf"],["title","Importar contactos",1,"btn-action-small","btn-import",3,"click"],["name","download",3,"size"],[3,"class","title","click",4,"ngIf"],["class","btn-action-small btn-delete","title","Eliminar campa\xF1a",3,"click",4,"ngIf"],[1,"campaign-body-compact"],["class","campaign-description-compact",4,"ngIf"],["class","campaign-stats-compact",4,"ngIf"],[1,"campaign-meta-compact"],["style","color: green; font-weight: bold;",4,"ngIf"],[4,"ngIf"],["title","Activar campa\xF1a",1,"btn-action-small","btn-activate",3,"click"],["name","play",3,"size"],["title","Pausar campa\xF1a",1,"btn-action-small","btn-pause",3,"click"],["name","pause",3,"size"],[3,"click","title"],["name","square",3,"size",4,"ngIf"],["name","phone-call",3,"size",4,"ngIf"],["name","square",3,"size"],["name","phone-call",3,"size"],["title","Eliminar campa\xF1a",1,"btn-action-small","btn-delete",3,"click"],["name","trash-2",3,"size"],[1,"campaign-description-compact"],[1,"campaign-stats-compact"],[1,"stat-compact"],[1,"stat-label-compact"],[1,"stat-value-compact"],[2,"color","green","font-weight","bold"],["name","activity",2,"vertical-align","middle",3,"size"],[1,"loading-state"],[1,"spinner"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"btn-close",3,"click"],["name","x",3,"size"],[1,"modal-body"],[1,"form-group"],["type","text","placeholder","Ej: Campa\xF1a Cobranza Enero 2025","required","",1,"form-input",3,"ngModelChange","ngModel"],["placeholder","Descripci\xF3n de la campa\xF1a...","rows","3",1,"form-textarea",3,"ngModelChange","ngModel"],[1,"form-row"],["required","",1,"form-select",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["required","",1,"form-select",3,"ngModelChange","ngModel","disabled"],[1,"form-select",3,"ngModelChange","ngModel"],["value","MANUAL"],["value","PROGRESSIVE"],["value","PREDICTIVE"],["type","number","min","1","max","10",1,"form-input",3,"ngModelChange","ngModel"],["type","number","min","1","max","100","placeholder","50",1,"form-input",3,"ngModelChange","ngModel"],[2,"color","#666"],[1,"modal-footer"],[1,"btn-cancel",3,"click"],[1,"btn-submit",3,"click"],[1,"info-box"],["name","info",3,"size"],["name","bar-chart-2",3,"size"],["name","building-2",3,"size"],["name","folder",3,"size"],["name","folder-open",3,"size"],[1,"alert","alert-info"],["name","alert-triangle",3,"size"]],template:function(i,c){i&1&&(n(0,"div",0)(1,"div",1)(2,"div",2),u(3,"lucide-angular",3),o(),n(4,"div")(5,"h1",4),l(6,"Gesti\xF3n de Campa\xF1as"),o(),n(7,"p",5),l(8,"Administraci\xF3n y configuraci\xF3n de campa\xF1as de marcaci\xF3n"),o()()(),n(9,"div",6)(10,"div",7)(11,"button",8),u(12,"lucide-angular",9),n(13,"span"),l(14,"Nueva Campa\xF1a"),o()()()(),b(15,ae,3,2,"div",10)(16,oe,3,2,"div",11),n(17,"div",12)(18,"h2",13),u(19,"lucide-angular",14),l(20," Campa\xF1as"),o(),b(21,xe,3,2,"div",15)(22,_e,4,0,"div",16),o()(),b(23,ye,65,18,"div",17)(24,Se,50,14,"div",17)),i&2&&(a(3),s("size",16),a(9),s("size",18),a(3),s("ngIf",c.error),a(),s("ngIf",c.successMessage),a(3),s("size",20),a(2),s("ngIf",!c.loading),a(),s("ngIf",c.loading),a(),s("ngIf",c.showCreateModal),a(),s("ngIf",c.showImportModal))},dependencies:[A,z,D,K,G,Y,R,q,$,B,J,H,U,j,L,W,N,O,P],styles:[`.campaign-container{min-height:100vh;background:linear-gradient(to bottom right,#0f172a,#1e293b,#0f172a);padding:1.5rem!important;max-width:1400px;margin:0 auto}.header{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;padding-bottom:1rem;border-bottom:1px solid #334155}.header h1{margin:0;font-size:1.5rem;color:#fff;font-weight:600}.header-actions{display:flex;align-items:center;gap:1rem}.btn-create{display:flex;align-items:center;gap:.5rem;background:#10b981;color:#fff;border:none;padding:.7rem 1.5rem;border-radius:8px;cursor:pointer;font-size:.9rem;font-weight:600;transition:all .3s}.btn-create:hover{transform:translateY(-2px);box-shadow:0 6px 20px #10b98166;background:#059669}.btn-monitoring{display:flex;align-items:center;gap:.5rem;background:#3b82f6;color:#fff;border:none;padding:.7rem 1.5rem;border-radius:8px;cursor:pointer;font-size:.9rem;font-weight:600;transition:all .3s}.btn-monitoring:hover{transform:translateY(-2px);box-shadow:0 6px 20px #3b82f666;background:#2563eb}.error-message,.success-message{padding:1rem;border-radius:8px;margin-bottom:1rem;font-weight:500}.error-message{background:#ef444426;color:#fca5a5;border:1px solid rgba(239,68,68,.3)}.success-message{background:#10b98126;color:#6ee7b7;border:1px solid rgba(16,185,129,.3)}.metrics-panel{background:#1e293b;border:1px solid #334155;border-radius:8px;padding:1rem;margin-bottom:1.5rem}.metrics-panel h3{margin:0 0 1rem;font-size:.95rem;color:#fff;font-weight:600}.metrics-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:.8rem}.metric-item{background:#0a0e27;border:1px solid #334155;border-radius:6px;padding:.7rem;display:flex;align-items:center;gap:.7rem;transition:transform .2s,box-shadow .2s}.metric-item:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000004d}.metric-icon{font-size:1.5rem;flex-shrink:0}.metric-info{display:flex;flex-direction:column;min-width:0}.metric-value{font-size:1.3rem;font-weight:700;color:#10b981;line-height:1.2}.metric-label{font-size:.7rem;color:#94a3b8;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.campaigns-section{display:flex;flex-direction:column;background:#1e293b;border:1px solid #334155;border-radius:8px;overflow:hidden;height:calc(100vh - 200px);min-height:600px}.section-title{margin:0;padding:1rem;font-size:1.2rem;color:#fff;background:#0a0e27;border-bottom:1px solid #334155}.campaigns-scrollable{flex:1;overflow-y:auto;padding:1rem;display:flex;flex-direction:column;gap:.8rem}.campaigns-scrollable::-webkit-scrollbar{width:8px}.campaigns-scrollable::-webkit-scrollbar-track{background:#0a0e27}.campaigns-scrollable::-webkit-scrollbar-thumb{background:#334155;border-radius:4px}.campaigns-scrollable::-webkit-scrollbar-thumb:hover{background:#475569}.empty-row td{padding:2rem 1rem}.campaign-card-compact{background:#0a0e27;border:1px solid #334155;border-radius:6px;overflow:hidden;transition:transform .2s,box-shadow .2s}.campaign-card-compact:hover{transform:translateY(-2px);box-shadow:0 4px 15px #0006}.campaign-header-compact{padding:.8rem;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #334155}.campaign-title-compact{display:flex;align-items:center;gap:.5rem;flex:1}.campaign-title-compact h3{margin:0;font-size:.9rem;color:#fff;font-weight:600}.status-badge{padding:.2rem .6rem;border-radius:50px;color:#fff;font-size:.65rem;font-weight:600;text-transform:uppercase;white-space:nowrap}.campaign-actions{display:flex;gap:.4rem}.btn-action-small{background:#ffffff1a;border:none;padding:.4rem;border-radius:4px;cursor:pointer;font-size:.85rem;transition:all .2s;display:flex;align-items:center;justify-content:center;min-width:28px;height:28px}.btn-action-small:hover{transform:scale(1.1)}.btn-action{background:#ffffff1a;border:none;padding:.5rem;border-radius:6px;cursor:pointer;font-size:1rem;transition:all .3s;display:flex;align-items:center;gap:.5rem}.btn-action:hover{transform:scale(1.1)}.btn-action:disabled{opacity:.5;cursor:not-allowed}.btn-activate{background:#10b981;color:#fff;padding:.7rem 1.5rem;font-weight:600}.btn-activate:hover{background:#059669;box-shadow:0 6px 20px #10b98166}.btn-pause{background:#f59e0b;color:#fff;padding:.7rem 1.5rem;font-weight:600}.btn-pause:hover{background:#d97706;box-shadow:0 6px 20px #f59e0b66}.btn-import:hover{background:#3b82f633}.btn-delete:hover{background:#ef444433}.campaign-body-compact{padding:.7rem .8rem}.campaign-description-compact{color:#94a3b8;font-size:.75rem;margin:0 0 .6rem;line-height:1.3;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.campaign-stats-compact{display:flex;gap:.8rem;margin-bottom:.6rem;padding:.5rem;background:#1e293b;border-radius:4px}.stat-compact{display:flex;flex-direction:column;gap:.1rem}.stat-label-compact{font-size:.65rem;color:#64748b}.stat-value-compact{font-size:.9rem;font-weight:600;color:#10b981}.campaign-meta-compact{display:flex;gap:.7rem;font-size:.7rem;color:#64748b;flex-wrap:wrap}.empty-state{grid-column:1 / -1;text-align:center;padding:4rem 2rem;color:#94a3b8}.loading-state{text-align:center;padding:4rem 2rem;color:#94a3b8}.spinner{width:50px;height:50px;border:4px solid #334155;border-top-color:#10b981;border-radius:50%;animation:spin 1s linear infinite;margin:0 auto 1rem}@keyframes spin{to{transform:rotate(360deg)}}.modal-overlay{position:fixed;inset:0;background:#000c;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content{background:#1e293b;border-radius:12px;width:90%;max-width:600px;max-height:90vh;overflow-y:auto;box-shadow:0 20px 60px #00000080}.modal-header{padding:1.5rem;border-bottom:1px solid #334155;display:flex;justify-content:space-between;align-items:center}.modal-header h2{margin:0;font-size:1.3rem;color:#fff}.btn-close{background:none;border:none;font-size:1.5rem;cursor:pointer;color:#94a3b8;transition:color .3s}.btn-close:hover{color:#ef4444}.modal-body{padding:1.5rem}.modal-footer{padding:1.5rem;border-top:1px solid #334155;display:flex;justify-content:flex-end;gap:1rem}.form-group{margin-bottom:1rem}.form-group label{display:block;margin-bottom:.5rem;color:#fff;font-weight:500;font-size:.9rem}.form-group small{display:block;margin-top:.3rem;color:#64748b;font-size:.8rem}.form-input,.form-textarea,.form-select{width:100%;background:#0a0e27;border:1px solid #334155;border-radius:6px;padding:.7rem;color:#fff;font-size:.9rem;transition:border .3s}.form-input:focus,.form-textarea:focus,.form-select:focus{outline:none;border-color:#10b981}.form-row{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem}.btn-cancel,.btn-submit{padding:.7rem 1.5rem;border:none;border-radius:6px;cursor:pointer;font-weight:600;transition:all .3s}.btn-cancel{background:#6b7280;color:#fff}.btn-cancel:hover{background:#4b5563}.btn-submit{background:#10b981;color:#fff}.btn-submit:hover{background:#059669}.info-box{background:#3b82f61a;border-left:4px solid #3B82F6;padding:1rem;border-radius:4px;margin-top:1rem}.info-box p{margin:.3rem 0;color:#94a3b8;font-size:.85rem}:root.light .campaign-container,body.light-theme .campaign-container{background:linear-gradient(to bottom right,#f0f9ff,#dbeafe,#e0f2fe)}:root.light .header,body.light-theme .header{border-bottom-color:#cbd5e1}:root.light .header h1,body.light-theme .header h1{color:#0f172a}:root.light .error-message,body.light-theme .error-message{background:#fef2f2;color:#dc2626;border-color:#fecaca}:root.light .success-message,body.light-theme .success-message{background:#f0fdf4;color:#16a34a;border-color:#bbf7d0}:root.light .metrics-panel,body.light-theme .metrics-panel{background:#fff;border-color:#e2e8f0}:root.light .metrics-panel h3,body.light-theme .metrics-panel h3{color:#0f172a}:root.light .metric-item,body.light-theme .metric-item{background:#f8fafc;border-color:#cbd5e1}:root.light .metric-item:hover,body.light-theme .metric-item:hover{box-shadow:0 4px 12px #00000014}:root.light .metric-value,body.light-theme .metric-value{color:#16a34a}:root.light .metric-label,body.light-theme .metric-label{color:#64748b}:root.light .campaigns-section,body.light-theme .campaigns-section{background:#fff;border-color:#e2e8f0}:root.light .section-title,body.light-theme .section-title{color:#0f172a;background:#f8fafc;border-bottom-color:#cbd5e1}:root.light .campaigns-scrollable::-webkit-scrollbar-track,body.light-theme .campaigns-scrollable::-webkit-scrollbar-track{background:#f8fafc}:root.light .campaigns-scrollable::-webkit-scrollbar-thumb,body.light-theme .campaigns-scrollable::-webkit-scrollbar-thumb{background:#cbd5e1}:root.light .campaigns-scrollable::-webkit-scrollbar-thumb:hover,body.light-theme .campaigns-scrollable::-webkit-scrollbar-thumb:hover{background:#94a3b8}:root.light .campaign-card-compact,body.light-theme .campaign-card-compact{background:#fff;border-color:#cbd5e1}:root.light .campaign-card-compact:hover,body.light-theme .campaign-card-compact:hover{box-shadow:0 4px 15px #00000014}:root.light .campaign-header-compact,body.light-theme .campaign-header-compact{border-bottom-color:#e2e8f0}:root.light .campaign-title-compact h3,body.light-theme .campaign-title-compact h3{color:#0f172a}:root.light .btn-action-small,body.light-theme .btn-action-small{background:#0000000d}:root.light .btn-action-small:hover,body.light-theme .btn-action-small:hover{background:#0000001a}:root.light .campaign-description-compact,body.light-theme .campaign-description-compact{color:#475569}:root.light .campaign-stats-compact,body.light-theme .campaign-stats-compact{background:#f8fafc}:root.light .stat-label-compact,body.light-theme .stat-label-compact{color:#64748b}:root.light .stat-value-compact,body.light-theme .stat-value-compact{color:#16a34a}:root.light .campaign-meta-compact,body.light-theme .campaign-meta-compact{color:#64748b}:root.light .empty-state,:root.light .loading-state,body.light-theme .empty-state,body.light-theme .loading-state{color:#64748b}:root.light .spinner,body.light-theme .spinner{border-color:#cbd5e1;border-top-color:#16a34a}:root.light .modal-overlay,body.light-theme .modal-overlay{background:#00000080}:root.light .modal-content,body.light-theme .modal-content{background:#fff}:root.light .modal-header,body.light-theme .modal-header{border-bottom-color:#e2e8f0}:root.light .modal-header h2,body.light-theme .modal-header h2{color:#0f172a}:root.light .btn-close,body.light-theme .btn-close{color:#64748b}:root.light .btn-close:hover,body.light-theme .btn-close:hover{color:#dc2626}:root.light .modal-footer,body.light-theme .modal-footer{border-top-color:#e2e8f0}:root.light .form-group label,body.light-theme .form-group label{color:#0f172a}:root.light .form-group small,body.light-theme .form-group small{color:#64748b}:root.light .form-input,:root.light .form-textarea,:root.light .form-select,body.light-theme .form-input,body.light-theme .form-textarea,body.light-theme .form-select{background:#fff;border-color:#cbd5e1;color:#0f172a}:root.light .form-input:focus,:root.light .form-textarea:focus,:root.light .form-select:focus,body.light-theme .form-input:focus,body.light-theme .form-textarea:focus,body.light-theme .form-select:focus{border-color:#16a34a}:root.light .info-box,body.light-theme .info-box{background:#3b82f60d;border-left-color:#3b82f6}:root.light .info-box p,body.light-theme .info-box p{color:#475569}@media (max-width: 1200px){.campaigns-section{min-height:400px;max-height:500px}.metrics-grid{grid-template-columns:repeat(auto-fit,minmax(120px,1fr))}}@media (max-width: 768px){.campaign-container{padding:1rem}.header{flex-direction:column;align-items:flex-start;gap:1rem}.header-actions{width:100%;flex-direction:column}.header-actions button{width:100%}.form-row{grid-template-columns:1fr}.metrics-grid{grid-template-columns:repeat(2,1fr)}}@media (max-width: 480px){.campaign-container{padding:.75rem}.header h1{font-size:1.25rem}.btn-create,.btn-monitoring{font-size:.85rem;padding:.6rem 1.2rem}.metrics-grid{grid-template-columns:1fr}.modal-content{width:95%}}.btn-create:focus-visible,.btn-monitoring:focus-visible,.btn-action:focus-visible,.btn-submit:focus-visible,.btn-cancel:focus-visible{outline:3px solid #10B981;outline-offset:2px}@media (prefers-contrast: high){.campaign-card-compact,.metric-item,.metrics-panel,.campaigns-section{border-width:2px}}@media (prefers-reduced-motion: reduce){.campaign-card-compact,.metric-item,.btn-create,.btn-monitoring,.btn-action,.spinner{transition:none;animation:none}.btn-create:hover,.btn-monitoring:hover,.btn-action:hover{transform:none}}
`],encapsulation:2});let r=d;return r})();export{Oe as CampaignManagementComponent};
