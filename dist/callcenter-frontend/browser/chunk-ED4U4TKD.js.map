{
  "version": 3,
  "sources": ["src/app/features/legacy/SMS_DYNAMIC/services/dyn-query.service.ts", "src/app/features/legacy/SMS_DYNAMIC/Common/round-wizard-dialog.component.ts", "src/app/features/legacy/SMS_DYNAMIC/pages/dyn-query-page/dyn-query-page.component.ts", "src/app/features/legacy/SMS_DYNAMIC/pages/dyn-query-page/dyn-query-page.component.html"],
  "sourcesContent": ["import { Injectable, inject } from '@angular/core';\r\nimport { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { DynamicQueryRequest, Row, SmsPrecheckResult } from '../models/dyn-query';\r\nimport { environment } from '../../../../../environments/environment';\r\n\r\nexport interface PreviewInitReq {\r\n  query: DynamicQueryRequest;\r\n  candidatas?: string[]; // opcional\r\n}\r\nexport interface PreviewCandidate {\r\n  variable: string;\r\n  filasQueResuelve: number;\r\n}\r\nexport interface PreviewItem {\r\n  documento: string;\r\n  nombre: string;\r\n  variableUsada: string | null;\r\n  valorUsado: number | null;\r\n  sms: string;\r\n}\r\nexport interface PreviewInitResp {\r\n  sessionId: string;\r\n  total: number;\r\n  resueltas: number;\r\n  pendientes: number;\r\n  candidatas: PreviewCandidate[];\r\n  muestraPreview: PreviewItem[];\r\n}\r\n\r\nexport interface PreviewStepResp extends PreviewInitResp {}\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class DynQueryService {\r\n  private http = inject(HttpClient);\r\n  private root = `${environment.webServiceUrl}/plantillas/sms`;\r\n\r\n  // ‚úÖ endpoints reales del backend\r\n  private dynamicQueryUrl = `${this.root}/dynamic-query`;\r\n  private exportUrl       = `${this.root}/export`;\r\n  private precheckUrl     = `${this.root}/precheck`;\r\n\r\n  // üëá nuevos\r\n  private previewInitUrl    = `${this.root}/preview/init`;\r\n  private previewChooseUrl  = `${this.root}/preview/choose`;\r\n  private previewSkipUrl    = `${this.root}/preview/skip`;\r\n  private previewDlUrl      = `${this.root}/preview/download`;\r\n\r\n\r\n  /** Ejecuta la consulta din√°mica (para tabla/preview en la misma p√°gina) */\r\n  run(body: DynamicQueryRequest) {\r\n    return this.http.post<Row[]>(this.dynamicQueryUrl, body);\r\n  }\r\n\r\n  /** Precheck de 160 caracteres (el backend espera { query, template }) */\r\n  precheck(body: DynamicQueryRequest, template: string) {\r\n    return this.http.post<SmsPrecheckResult>(this.precheckUrl, { query: body, template });\r\n  }\r\n\r\n// ‚úÖ no fuerces limit:null; no env√≠es plantillaTexto\r\n  export(body: DynamicQueryRequest, template: string) {\r\n    const payload: any = { ...body };\r\n    if (payload.limit == null) delete payload.limit;\r\n    payload.selectAll = false;      // para que vengan todas las columnas\r\n    payload.template = template;   // üëà MANDAR LA PLANTILLA EN EL BODY\r\n    return this.http.post(this.exportUrl, payload, { responseType: 'blob' });\r\n  }\r\n\r\n  // ======== PREVIEW (GUIADO) ========\r\n\r\n  previewInit(query: DynamicQueryRequest, template: string, candidatas?: string[]) {\r\n    const payload: PreviewInitReq = { query: { ...query, template } as any, candidatas };\r\n    // (el backend usa query.template internamente; no se manda plantillaTexto)\r\n    return this.http.post<PreviewInitResp>(this.previewInitUrl, payload);\r\n  }\r\n\r\n  previewChoose(sessionId: string, variableElegida: string) {\r\n    return this.http.post<PreviewStepResp>(this.previewChooseUrl, { sessionId, variableElegida });\r\n  }\r\n\r\n  previewSkip(sessionId: string) {\r\n    return this.http.post<PreviewStepResp>(this.previewSkipUrl, { sessionId });\r\n  }\r\n\r\n  previewDownload(sessionId: string) {\r\n    return this.http.post(this.previewDlUrl, { sessionId }, { responseType: 'blob' });\r\n  }\r\n\r\n  previewDownloadBase(sessionId: string) {\r\n    return this.http.get(`${this.root}/preview/${sessionId}/download-base`, {\r\n      responseType: 'blob'\r\n    });\r\n  }\r\n}\r\n", "import { Component, Inject, inject, signal, computed } from '@angular/core';\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\r\nimport { CommonModule } from '@angular/common';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport {\r\n  DynQueryService,\r\n  PreviewCandidate,\r\n  PreviewItem,\r\n  PreviewStepResp\r\n} from '@/SMS_DYNAMIC/services/dyn-query.service';\r\n\r\nexport type RoundWizardData = {\r\n  sessionId: string;\r\n  init: PreviewStepResp; // estado inicial\r\n  template: string;\r\n};\r\n\r\n@Component({\r\n  selector: 'app-round-wizard-dialog',\r\n  standalone: true,\r\n  imports: [CommonModule, MatButtonModule],\r\n  template: `\r\n    <div class=\"dlg\">\r\n    <header class=\"dlg__head\">\r\n      <h2>¬øCompletar con otro importe?</h2>\r\n    </header>\r\n\r\n    <section class=\"dlg__body\">\r\n      <!-- STATS -->\r\n      <div class=\"group-card\">\r\n        <div class=\"group-title\">Progreso</div>\r\n        <div class=\"stats\">\r\n          <div class=\"stat\"><span>Total</span><b>{{ state().total }}</b></div>\r\n          <div class=\"stat\"><span>Resueltas</span><b class=\"ok\">{{ state().resueltas }}</b></div>\r\n          <div class=\"stat\"><span>Pendientes</span><b class=\"warn\">{{ state().pendientes }}</b></div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- CANDIDATAS -->\r\n      <div class=\"group-card\">\r\n        <div class=\"group-title\">Opciones</div>\r\n\r\n        <ng-container *ngIf=\"state().candidatas?.length; else noCand\">\r\n          <div class=\"chip-container\">\r\n            <button type=\"button\" class=\"chip\"\r\n                    *ngFor=\"let c of state().candidatas\"\r\n                    (click)=\"choose(c.variable)\">\r\n              <span class=\"chip__var\">{{ pretty(c.variable) }}</span>\r\n              <span class=\"chip__count\">{{ c.filasQueResuelve }} casos</span>\r\n            </button>\r\n          </div>\r\n        </ng-container>\r\n        <ng-template #noCand>\r\n          <div class=\"muted\">No existen casos para resolver.</div>\r\n        </ng-template>\r\n      </div>\r\n\r\n      <!-- PREVIEW -->\r\n      <div class=\"group-card\">\r\n        <div class=\"group-title\">Previsualizaci√≥n</div>\r\n        <div class=\"preview-list\">\r\n          <div class=\"pv-item\" *ngFor=\"let p of (state().muestraPreview || [])\">\r\n            <div class=\"pv-left\">\r\n              <div class=\"pv-doc\">{{ p.documento || '(sin doc.)' }}</div>\r\n              <div class=\"pv-nom muted\">{{ p.nombre }}</div>\r\n              <div class=\"pv-meta\">\r\n                <span>Usada: <b>{{ pretty(p.variableUsada) || '‚Äî' }}</b></span>\r\n                <span>Valor: <b>{{ p.valorUsado ?? '‚Äî' }}</b></span>\r\n              </div>\r\n            </div>\r\n            <div class=\"pv-sms preview-box\">{{ p.sms }}</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n\r\n    <footer class=\"dlg__foot\">\r\n      <button mat-button type=\"button\" (click)=\"skip()\" [disabled]=\"loading()\">Omitir</button>\r\n      <span class=\"spacer\"></span>\r\n      <button mat-raised-button style=\"color: white; background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);\" type=\"button\" (click)=\"download()\" [disabled]=\"loading()\">\r\n        Generar\r\n      </button>\r\n    </footer>\r\n  </div>\r\n  `,\r\n  styles: [`\r\n  /* Reutiliza el mismo look del otro di√°logo */\r\n  .dlg{\r\n    width: 100%;\r\n    max-width: 100%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    max-height: 80vh;          /* conserva el alto */\r\n  }\r\n\r\n\r\n  .dlg__head{\r\n    display:flex; align-items:center; gap:22px;\r\n    padding:14px 18px; border-bottom:1px solid #e5e7eb;\r\n    justify-content: center;\r\n  }\r\n  .dlg__head h2{ margin:0; font-size:1.2rem; font-weight:700; }\r\n  .icon-btn{ border:none; background:transparent; font-size:18px; margin-left:auto; cursor:pointer; }\r\n\r\n  .dlg__body{\r\n    flex: 1 1 auto;            /* llena el ancho/alto disponible */\r\n    overflow: auto;\r\n  }\r\n  .dlg__foot{\r\n    padding:12px 18px; border-top:1px solid #e5e7eb; background:#fff;\r\n    box-shadow: 0 -6px 12px -10px rgba(0,0,0,.12);\r\n    display:flex; align-items:center; gap:10px;\r\n  }\r\n  .spacer{ flex:1; }\r\n\r\n  /* Cards / grupos (id√©ntico al editar) */\r\n  .group-card{\r\n    border:1px solid #e5e7eb; background:#fff; border-radius:12px; padding:12px;\r\n    margin-top:20px;margin-left: 15px;margin-right: 15px;\r\n  }\r\n  .group-title{\r\n    margin:0 0 10px 0; font-size:14px; font-weight:600; color:#374151;\r\n  }\r\n\r\n  /* Stats */\r\n  .stats{\r\n    display:grid; grid-template-columns: repeat(auto-fit,minmax(150px,1fr)); gap:10px;\r\n  }\r\n  .stat{\r\n    border:1px solid #e5e7eb; border-radius:10px; padding:10px 12px; background:#fafafa;\r\n    display:flex; align-items:center; justify-content:space-between;\r\n  }\r\n  .stat span{ color:#6b7280; font-size:.9rem; }\r\n  .stat b{ font-size:1rem; }\r\n  .stat b.ok{ color:#059669; }\r\n  .stat b.warn{ color:#b45309; }\r\n\r\n  /* Chips de candidatas (mismo estilo) */\r\n  .chip-container{ display:flex; flex-wrap:wrap; gap:10px; align-items:center; }\r\n  .chip{\r\n    appearance:none; border:1px solid #dfe3ee; background:#f8f9fc; color:#111827;\r\n    border-radius:999px; padding:8px 14px; font-weight:600; line-height:1.1;\r\n    cursor:pointer; transition: background .15s, border-color .15s, transform .04s;\r\n    box-shadow: 0 1px 0 rgba(0,0,0,.02);\r\n  }\r\n  .chip:hover{ background:#f8fafc; }\r\n  .chip:active{ transform: translateY(1px); }\r\n  .chip:focus-visible{ outline:2px solid #6366f1; outline-offset:2px; }\r\n  .chip__var{ margin-right:8px; }\r\n  .chip__count{ font-size:12px; color:#4b5563; }\r\n\r\n  /* Preview items (alineado al estilo) */\r\n  .preview-list{ display:flex; flex-direction:column; gap:10px; }\r\n  .pv-item{\r\n    display:grid; grid-template-columns: 260px 1fr; gap:12px;\r\n    border:1px solid #e5e7eb; border-radius:12px; padding:12px; background:#fff;\r\n  }\r\n  .pv-left{ display:flex; flex-direction:column; gap:4px; }\r\n  .pv-doc{ font-weight:600; font-size:13px; }\r\n  .pv-meta{ display:flex; gap:12px; font-size:12px; color:#334155; }\r\n  .muted{ color:#6b7280; }\r\n\r\n  /* SMS box igual que el preview del otro di√°logo */\r\n  .preview-box{\r\n    background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);\r\n    color:#fff; padding:12px; border-radius:12px; min-height:85px;\r\n    font-family: monospace; font-size:14px; line-height:1.5; white-space:pre-wrap;\r\n  }\r\n\r\n  /* m√°s aire entre secciones directas del di√°logo */\r\n  .dlg__body > * + * {\r\n    margin-top: 16px;   /* prueba 16/20/24px */\r\n  }\r\n\r\n  /* si quieres a√∫n m√°s aire entre bloques dentro de .adv */\r\n  .adv .grid > * + * {\r\n    margin-top: 12px;\r\n  }\r\n\r\n  /* cards/grupos con separaci√≥n vertical consistente */\r\n  .group-card + .group-card {\r\n    margin-top: 16px;\r\n  }\r\n\r\n  /* listas: separaciones internas */\r\n  .cand-list { gap: 12px; }\r\n  .preview-list { gap: 12px; }\r\n  .pv-item { padding: 12px; }  /* un poco m√°s de padding */\r\n\r\n\r\n  @media (max-width: 720px){\r\n    .pv-item{ grid-template-columns: 1fr; }\r\n  }\r\n  `]\r\n})\r\nexport class RoundWizardDialogComponent {\r\n  private dialogRef = inject(MatDialogRef<RoundWizardDialogComponent>);\r\n  private api = inject(DynQueryService);\r\n\r\n  // dentro de RoundWizardDialogComponent\r\n  private prettyMap: Record<string, string> = {\r\n    // Siglas que deben quedar en may√∫sculas\r\n    'LTD': 'LTD',\r\n    'LTDE': 'LTDE',\r\n    'PKM': 'PKM',\r\n\r\n    // Finanzas legibles\r\n    'SALDO_MORA': 'Saldo Mora',\r\n    'BAJA30': 'Baja 30',\r\n    'BAJA30_SALDOMORA': 'Baja 30 + Mora',\r\n    'CAPITAL': 'Capital',\r\n    'DEUDA_TOTAL': 'Deuda Total',\r\n\r\n    // Otros (por si aparecen en preview)\r\n    'NOMBRECOMPLETO': 'Nombre completo',\r\n    'NUMCUENTAPMCP': 'N¬∞ de Cuenta',\r\n    'DIASMORA': 'D√≠as mora',\r\n    'LTD_LTDE': 'LTD + LTDE'\r\n  };\r\n\r\n  pretty(v: string | null | undefined): string {\r\n    const key = (v ?? '').toUpperCase();\r\n    if (!key) return '';\r\n    if (this.prettyMap[key]) return this.prettyMap[key];\r\n\r\n    // Default: \"SALDO_EXTRA\" -> \"Saldo Extra\"\r\n    return key\r\n      .replace(/_/g, ' ')\r\n      .toLowerCase()\r\n      .replace(/\\b\\p{L}/gu, m => m.toUpperCase());\r\n  }\r\n\r\n\r\n  constructor(@Inject(MAT_DIALOG_DATA) public data: RoundWizardData) {}\r\n\r\n  state = signal<PreviewStepResp>(this.data.init);\r\n  loading = signal(false);\r\n\r\n  choose(variable: string) {\r\n    this.loading.set(true);\r\n    this.api.previewChoose(this.data.sessionId, variable).subscribe({\r\n      next: (res) => { this.state.set(res); this.loading.set(false); },\r\n      error: () => this.loading.set(false)\r\n    });\r\n  }\r\n\r\n  skip() {\r\n    this.loading.set(true);\r\n    this.api.previewDownloadBase(this.data.sessionId).subscribe({\r\n      next: (blob) => {\r\n        const url = URL.createObjectURL(blob);\r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        a.download = `sms_report_${new Date().toISOString().slice(0,10)}.xlsx`;\r\n        document.body.appendChild(a); a.click(); a.remove();\r\n        URL.revokeObjectURL(url);\r\n        this.loading.set(false);\r\n        this.dialogRef.close(true);\r\n      },\r\n      error: () => this.loading.set(false)\r\n    });\r\n  }\r\n\r\n  download() {\r\n    this.loading.set(true);\r\n    this.api.previewDownload(this.data.sessionId).subscribe({\r\n      next: (blob) => {\r\n        const url = URL.createObjectURL(blob);\r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        a.download = `sms_report_${new Date().toISOString().slice(0,10)}.xlsx`;\r\n        document.body.appendChild(a); a.click(); a.remove();\r\n        URL.revokeObjectURL(url);\r\n        this.loading.set(false);\r\n        this.dialogRef.close(true);\r\n      },\r\n      error: () => this.loading.set(false)\r\n    });\r\n  }\r\n\r\n  close(){ this.dialogRef.close(false); }\r\n}\r\n", "import { Component, inject, OnInit, signal, ElementRef, ViewChild } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport {FormBuilder, FormGroupName, ReactiveFormsModule} from '@angular/forms';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatCheckboxModule } from '@angular/material/checkbox';\r\nimport { MatSelectModule } from '@angular/material/select';\r\nimport { MatTableModule } from '@angular/material/table';\r\nimport { DynQueryService } from '../../services/dyn-query.service';\r\nimport { DynamicQueryRequest, Row } from '../../models/dyn-query';\r\nimport { ComboService } from '../../services/combo.service';\r\nimport { ComboCreateRequest } from '../../models/combo';\r\nimport { Router } from '@angular/router';\r\nimport {AlertDialogComponent} from \"@/SMS_DYNAMIC/Common/alert-dialog.component\";\r\nimport {MatDialog} from \"@angular/material/dialog\";\r\nimport {finalize} from \"rxjs\";\r\nimport {LoadingDialogComponent} from \"@/SMS_DYNAMIC/Common/loading-dialog/loading-dialog.component\";\r\nimport { debounceTime, map, distinctUntilChanged, startWith } from 'rxjs/operators';\r\nimport { computed } from '@angular/core';\r\nimport { toSignal } from '@angular/core/rxjs-interop';\r\nimport { SuccessDialogComponent } from '@/SMS_DYNAMIC/Common/success-dialog.component';\r\nimport {RoundWizardDialogComponent} from \"@/SMS_DYNAMIC/Common/round-wizard-dialog.component\";\r\nimport { FormArray, FormGroup, Validators, ValidatorFn, AbstractControl, ValidationErrors } from '@angular/forms';\r\n\r\n\r\n\r\nconst VAR_PATTERN_I = /\\{([A-Z0-9_]+)\\}/gi;\r\nconst VAR_PATTERN = /\\{([A-Z0-9_]+)\\}/g;\r\ntype VarChip = { key: string; label: string; affectsSelects: boolean };\r\ntype VarGroup = { key: 'cliente' | 'financiero' | 'fechas'; title: string; items: VarChip[] };\r\n@Component({\r\n  selector: 'app-dyn-query-page',\r\n  standalone: true,\r\n  imports: [\r\n    CommonModule,\r\n    ReactiveFormsModule,\r\n    MatButtonModule,\r\n    MatCheckboxModule,\r\n    MatSelectModule,\r\n    MatTableModule\r\n  ],\r\n  templateUrl: './dyn-query-page.component.html',\r\n  styleUrl: './dyn-query-page.component.css'\r\n})\r\n\r\nexport class DynQueryPageComponent implements OnInit {\r\n  private fbRef = inject(FormBuilder);\r\n  private api = inject(DynQueryService);\r\n  private comboApi = inject(ComboService);\r\n  private router = inject(Router);\r\n  sampleRow = signal<Row|null>(null);\r\n\r\n  @ViewChild('tplArea') tplArea?: ElementRef<HTMLTextAreaElement>;\r\n\r\n  rangeFields = [\r\n    { key: 'DEUDA_TOTAL', label: 'Deuda total' },\r\n    { key: 'CAPITAL',     label: 'Capital' },\r\n    { key: 'SALDO_MORA',  label: 'Saldo mora' },\r\n    { key: 'BAJA30',      label: 'Baja 30' },\r\n    { key: 'LTD',         label: 'LTD' },\r\n    { key: 'LTDE',        label: 'LTDE' },\r\n    { key: 'PKM',         label: 'PKM' },\r\n    { key: 'DIASMORA',    label: 'D√≠as mora' },\r\n  ];\r\n\r\n  private insertAtCursor(text: string) {\r\n    const ctrl = this.form.controls.plantillaTexto;\r\n    const el = this.tplArea?.nativeElement;\r\n\r\n    // Fallback: si no hay ref a√∫n, agrega al final como antes\r\n    if (!el) {\r\n      const cur = ctrl.value ?? '';\r\n      const sep = cur && !cur.endsWith(' ') ? ' ' : '';\r\n      ctrl.setValue(cur + sep + text);\r\n      ctrl.markAsDirty();\r\n      return;\r\n    }\r\n\r\n    const val = ctrl.value ?? '';\r\n    const start = el.selectionStart ?? val.length;\r\n    const end   = el.selectionEnd ?? start;\r\n\r\n    const before = val.slice(0, start);\r\n    const after  = val.slice(end);\r\n\r\n    const needsSpaceBefore = before.length && !/\\s$/.test(before);\r\n    const insert = (needsSpaceBefore ? ' ' : '') + text;\r\n\r\n    const next = before + insert + after;\r\n    ctrl.setValue(next);\r\n    ctrl.markAsDirty();\r\n\r\n    // Deja el cursor justo despu√©s del token\r\n    const caret = (before + insert).length;\r\n    setTimeout(() => {\r\n      el.focus();\r\n      el.selectionStart = el.selectionEnd = caret;\r\n    }, 0);\r\n  }\r\n\r\n\r\n  private selects = new Set<string>();\r\n  private condiciones = new Set<string>(); // solo PROMESAS_* visibles\r\n\r\n\r\n\r\n  // GRUPOS\r\n  chipGroups: VarGroup[] = [\r\n    {\r\n      key: 'cliente',\r\n      title: 'Cliente',\r\n      items: [\r\n        { key: 'NOMBRE',         label: 'Nombre',           affectsSelects: true },\r\n        { key: 'NOMBRECOMPLETO', label: 'Nombre completo',  affectsSelects: true },\r\n        { key: 'EMAIL',          label: 'Correo',           affectsSelects: true },\r\n        { key: 'NUMCUENTAPMCP',  label: 'N¬∞ de Cuenta',     affectsSelects: true },\r\n      ]\r\n    },\r\n    {\r\n      key: 'financiero',\r\n      title: 'Financiero',\r\n      items: [\r\n        { key: 'LTD',              label: 'LTD',                    affectsSelects: true },\r\n        { key: 'LTDE',             label: 'LTDE',                   affectsSelects: true },\r\n        { key: 'LTD_LTDE',         label: 'LTD y LTDE',             affectsSelects: true },\r\n        { key: 'BAJA30',           label: 'Baja 30',                affectsSelects: true },\r\n        { key: 'MORA',             label: 'Saldo Mora',             affectsSelects: true },\r\n        { key: 'BAJA30_SALDOMORA', label: 'Baja 30 y Saldo Mora',   affectsSelects: true },\r\n        { key: 'PKM',              label: 'PKM',                    affectsSelects: true },\r\n        { key: 'CAPITAL',          label: 'Capital',                affectsSelects: true },\r\n        { key: 'DEUDA_TOTAL',      label: 'Deuda Total',            affectsSelects: true },\r\n      ]\r\n    },\r\n    {\r\n      key: 'fechas',\r\n      title: 'Fechas',\r\n      items: [\r\n        { key: 'DIASMORA', label: 'D√≠as mora', affectsSelects: true },\r\n        { key: 'HOY',      label: 'Hoy',       affectsSelects: false },\r\n        { key: 'MANANA',   label: 'Ma√±ana',    affectsSelects: false },\r\n      ]\r\n    }\r\n  ];\r\n\r\n// (compat) si a√∫n usas 'chips' en alg√∫n lado, lo dejamos como flatten:\r\n  chips = this.chipGroups.flatMap(g => g.items);\r\n\r\n  // estado visual de selecci√≥n\r\n  selectedChips = new Set<string>();\r\n\r\n  isSelected(key: string) { return this.selectedChips.has(key); }\r\n\r\n  // --- ALIAS de columnas que pueden venir con espacios/underscore ---\r\n  private aliasKeys(raw: string): string[] {\r\n    const k = raw.toUpperCase();\r\n    switch (k) {\r\n      case 'MORA':\r\n      case 'SALDO_MORA':\r\n        return ['SALDO_MORA', 'MORA', 'SALDO MORA'];\r\n\r\n      case 'BAJA30':\r\n        return ['BAJA30', 'BAJA_30', 'BAJA 30'];\r\n\r\n      case 'BAJA30_SALDOMORA':\r\n        return ['BAJA30_SALDOMORA', 'BAJA30_SALDO_MORA', 'BAJA 30 SALDO MORA'];\r\n\r\n      case 'DEUDA_TOTAL':\r\n        return ['DEUDA_TOTAL', 'DEUDA TOTAL'];\r\n\r\n      case 'LTD_LTDE':\r\n        return ['LTD_LTDE', 'LTD+LTDE', 'LTD LTDE'];\r\n\r\n      case 'NOMBRECOMPLETO':\r\n        return ['NOMBRECOMPLETO', 'NOMBRE COMPLETO'];\r\n\r\n      case 'EMAIL':\r\n        return ['EMAIL'];\r\n\r\n      case 'NUMCUENTAPMCP':\r\n        return ['NUMCUENTAPMCP', 'NUMCUENTA_PMCP', 'NUM_CUENTA_PMCP', 'NUMCUENTA PMCP', 'N¬∞ CUENTA PMCP'];\r\n\r\n      case 'DIASMORA':\r\n        return ['DIASMORA', 'DIAS_MORA', 'DIAS MORA'];\r\n\r\n      default:\r\n        return [k, k.replace(/\\s+/g, '_')];\r\n    }\r\n  }\r\n\r\n  // Normaliza nombre de variable de plantilla a su ‚Äúfamilia‚Äù base\r\n  private mapVar(key: string): string {\r\n    const k = key.toUpperCase();\r\n    if (k === 'MORA') return 'SALDO_MORA';\r\n    return k;\r\n  }\r\n\r\n  // Obtiene el valor probando alias\r\n  private getVal(r: Record<string, any>, key: string): any {\r\n    const candidates = this.aliasKeys(this.mapVar(key));\r\n    for (const c of candidates) {\r\n      if (r.hasOwnProperty(c)) return r[c];\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  // Reglas de ‚Äúvalor significativo‚Äù (usa getVal + alias)\r\n  private hasMeaningfulValue(row: Record<string, any>, col: string): boolean {\r\n    const v = this.getVal(row, col);\r\n    if (v === null || v === undefined) return false;\r\n    if (typeof v === 'string') return v.trim().length > 0;\r\n    if (typeof v === 'number') return v > 0;\r\n    return true;\r\n  }\r\n\r\n  private requiredColumnsForPreview(): string[] {\r\n    const fromChips = Array.from(this.selects);\r\n    const tpl = this.form.controls.plantillaTexto.value ?? '';\r\n    const fromTpl = (tpl.match(VAR_PATTERN) || []).map((m: string) => m.slice(1, -1));\r\n\r\n    const all = Array.from(new Set([...fromChips, ...fromTpl])).map(k => this.mapVar(k));\r\n\r\n    const candidates = new Set([\r\n      'LTD', 'LTDE', 'LTD_LTDE', 'BAJA30', 'SALDO_MORA',\r\n      'BAJA30_SALDOMORA', 'CAPITAL', 'DEUDA_TOTAL', 'PKM'\r\n    ]);\r\n\r\n    // Requeridas: solo las ‚Äúnum√©ricas/negocio‚Äù que marcaste por chip\r\n    return Array.from(new Set(fromChips.map(k => this.mapVar(k))))\r\n      .filter(k => candidates.has(k));\r\n  }\r\n\r\n  private preferredColumnsForPreview(): string[] {\r\n    const tpl = this.form.controls.plantillaTexto.value ?? '';\r\n    const fromTpl = (tpl.match(VAR_PATTERN) || []).map((m: string) => this.mapVar(m.slice(1, -1)));\r\n    const req = new Set(this.requiredColumnsForPreview());\r\n    return Array.from(new Set(fromTpl.filter(k => !req.has(k))));\r\n  }\r\n\r\n  // === NUEVO: selecciona la ‚Äúmejor‚Äù fila con dos pasos ===\r\n  private pickBestRow(\r\n    rows: Row[],\r\n    required: string[],\r\n    preferred: string[],\r\n  ): Row | null {\r\n    const R = rows as Record<string, any>[];\r\n\r\n    // A) filas que cumplen TODAS las requeridas\r\n    const full = R.filter(r => required.every(c => this.hasMeaningfulValue(r, c)));\r\n    if (full.length) {\r\n      // de esas, la que cumple m√°s ‚Äúpreferred‚Äù\r\n      full.sort((a, b) => {\r\n        const sa = preferred.reduce((acc, c) => acc + (this.hasMeaningfulValue(a, c) ? 1 : 0), 0);\r\n        const sb = preferred.reduce((acc, c) => acc + (this.hasMeaningfulValue(b, c) ? 1 : 0), 0);\r\n        return sb - sa;\r\n      });\r\n      return full[0] as Row;\r\n    }\r\n\r\n    let best: Row | null = null;\r\n    let bestReq = -1;\r\n    let bestPref = -1;\r\n\r\n    for (const r of R) {\r\n      const reqCount = required.reduce((acc, c) => acc + (this.hasMeaningfulValue(r, c) ? 1 : 0), 0);\r\n      const prefCount = preferred.reduce((acc, c) => acc + (this.hasMeaningfulValue(r, c) ? 1 : 0), 0);\r\n\r\n      if (\r\n        reqCount > bestReq ||\r\n        (reqCount === bestReq && prefCount > bestPref)\r\n      ) {\r\n        best = r as Row;\r\n        bestReq = reqCount;\r\n        bestPref = prefCount;\r\n      }\r\n    }\r\n    return best ?? (rows[0] ?? null);\r\n  }\r\n\r\n\r\n// Toggle visual + l√≥gica (insertar solo al seleccionar)\r\n  toggleChip(key: string, affectsSelects = true) {\r\n    const wasActive = this.selectedChips.has(key);\r\n\r\n    if (wasActive) {\r\n      // Quitar selecci√≥n normal\r\n      this.selectedChips.delete(key);\r\n      if (affectsSelects) this.selects.delete(key);\r\n      this.removePlaceholder(key);\r\n    } else {\r\n      // üîí Reglas de exclusi√≥n existentes (BAJA30/MORA ‚Üî BAJA30_SALDOMORA)\r\n      if (key === 'BAJA30' || key === 'MORA') {\r\n        if (this.selectedChips.has('BAJA30_SALDOMORA')) {\r\n          this.selectedChips.delete('BAJA30_SALDOMORA');\r\n          this.selects.delete('BAJA30_SALDOMORA');\r\n          this.removePlaceholder('BAJA30_SALDOMORA');\r\n        }\r\n      }\r\n      if (key === 'BAJA30_SALDOMORA') {\r\n        if (this.selectedChips.has('BAJA30')) {\r\n          this.selectedChips.delete('BAJA30');\r\n          this.selects.delete('BAJA30');\r\n          this.removePlaceholder('BAJA30');\r\n        }\r\n        if (this.selectedChips.has('MORA')) {\r\n          this.selectedChips.delete('MORA');\r\n          this.selects.delete('MORA');\r\n          this.removePlaceholder('MORA');\r\n        }\r\n      }\r\n\r\n      // üîí NUEVO: Reglas de exclusi√≥n para LTD / LTDE ‚Üî LTD_LTDE\r\n      if (key === 'LTD' || key === 'LTDE') {\r\n        this.forceDeselect('LTD_LTDE');\r\n      }\r\n      if (key === 'LTD_LTDE') {\r\n        this.forceDeselect('LTD');\r\n        this.forceDeselect('LTDE');\r\n      }\r\n\r\n      // Selecci√≥n normal\r\n      this.selectedChips.add(key);\r\n      if (affectsSelects) this.selects.add(key);\r\n      this.insertPlaceholderOnce(key);\r\n    }\r\n\r\n    if (!this.hasTopUpSelect()) {\r\n      this.form.controls.importeExtra.setValue(0);\r\n    }\r\n    this.fetchSampleRow();\r\n  }\r\n\r\n\r\n\r\n  previewText = computed(() => {\r\n    const tpl = this.tplSig();\r\n    const row = this.sampleRow();\r\n    return this.renderTemplate(tpl, row);\r\n  });\r\n\r\n  // 1) Helper: normaliza claves del row\r\n  private normalizeRow(row: any): Record<string, any> {\r\n    const out: Record<string, any> = {};\r\n    Object.keys(row || {}).forEach(k => {\r\n      const key = k.replace(/\\s+/g, '_').toUpperCase(); // ej: 'deuda total' -> 'DEUDA_TOTAL'\r\n      out[key] = (row as any)[k];\r\n    });\r\n    return out;\r\n  }\r\n\r\n  // 2) Pide la fila de muestra con fallback y normalizaci√≥n\r\n  private fetchSampleRow() {\r\n    // En modo AUTO: dispara la vista previa inmediatamente (como antes)\r\n    if (this.previewMode() === 'auto') {\r\n      this.triggerPreview();\r\n    }\r\n    // En modo MANUAL: no hace nada; quedar√° el indicador de \"cambios sin aplicar\"\r\n  }\r\n\r\n\r\n\r\n\r\n  private renderTemplate(tpl: string, row: Row | null): string {\r\n    if (!tpl) return '';\r\n    if (!row) return tpl;\r\n\r\n    const r = this.normalizeRow(row as any);\r\n\r\n    const firstName = (s: any) => String(s ?? '').trim().split(/\\s+/)[0] || '';\r\n    const fmtInt = (v: any) => {\r\n      const n = Number(v);\r\n      return Number.isFinite(n) ? Math.trunc(n).toLocaleString('es-PE') : '';\r\n    };\r\n    const hoy = new Date();\r\n    const manana = new Date(hoy.getTime() + 24 * 60 * 60 * 1000);\r\n    const fmtDate = (d: Date) =>\r\n      d.toLocaleDateString('es-PE', { day: '2-digit', month: '2-digit'});\r\n\r\n    return tpl.replace(VAR_PATTERN, (_m, key: string) => {\r\n      switch (key) {\r\n        case 'NOMBRE': return firstName(this.getVal(r, 'NOMBRE'));\r\n        case 'HOY':    return fmtDate(hoy);\r\n        case 'MANANA': return fmtDate(manana);\r\n\r\n        // num√©ricas esperadas (todas pasan por getVal para soportar alias)\r\n        case 'DIASMORA':\r\n        case 'LTD':\r\n        case 'LTDE':\r\n        case 'LTD_LTDE':\r\n        case 'BAJA30':\r\n        case 'SALDO_MORA':\r\n        case 'BAJA30_SALDOMORA':\r\n        case 'CAPITAL':\r\n        case 'DEUDA_TOTAL':\r\n        case 'PKM':\r\n          return fmtInt(this.getVal(r, key));\r\n\r\n        default:\r\n          const v = this.getVal(r, key);\r\n          return v === undefined ? '' : String(v);\r\n      }\r\n    });\r\n  }\r\n\r\n  private expandWithAliases(keys: string[]): string[] {\r\n    const out = new Set<string>();\r\n    keys.forEach(k => this.aliasKeys(k).forEach(a => out.add(a)));\r\n    return Array.from(out);\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  ngOnInit() {\r\n    // ‚ûä stream con lo que afecta al sample\r\n    const form$ = this.form.valueChanges.pipe(\r\n      startWith(this.form.getRawValue()),\r\n      debounceTime(300),\r\n      map(v => ({\r\n        tramo: v.tramo,\r\n        importeExtra: v.importeExtra,\r\n        plantillaTexto: v.plantillaTexto,\r\n        // convierto tu Set a array estable\r\n        selects: Array.from(this.selects),\r\n        condiciones: Array.from(this.condiciones),\r\n      })),\r\n      // evita llamadas si no cambia nada importante\r\n      distinctUntilChanged((a,b) => JSON.stringify(a) === JSON.stringify(b)),\r\n    );\r\n\r\n    form$.subscribe(() => {\r\n      this.syncChipsWithTemplate();\r\n      if (this.previewMode() === 'auto') this.triggerPreview();\r\n    });\r\n\r\n\r\n    this.form.controls.plantillaTexto.valueChanges\r\n      .pipe(debounceTime(200))\r\n      .subscribe(() => {\r\n        this.syncChipsWithTemplate();\r\n        if (this.previewMode() === 'auto') this.triggerPreview();\r\n      });\r\n\r\n    // primera carga\r\n    this.syncChipsWithTemplate();\r\n    if (this.previewMode() === 'auto') this.triggerPreview();\r\n  }\r\n\r\n  // Inserta {KEY} una sola vez\r\n  private insertPlaceholderOnce(key: string) {\r\n    const ctrl = this.form.controls.plantillaTexto;\r\n    const cur = ctrl.value ?? '';\r\n    const re = new RegExp(`\\\\{${key}\\\\}(?!\\\\w)`, 'i'); // respeta tu l√≥gica anterior\r\n    if (re.test(cur)) return;\r\n    this.insertAtCursor(`{${key}}`);\r\n  }\r\n\r\n  private hasTopUpSelect(): boolean {\r\n    return (\r\n      this.selectedChips.has('LTD') ||\r\n      this.selectedChips.has('LTDE') ||\r\n      this.selectedChips.has('LTD_LTDE')\r\n    );\r\n  }\r\n\r\n  form = inject(FormBuilder).nonNullable.group({\r\n    tramo: '3' as '3' | '5' | 'CONTACTO_TOTAL',\r\n    noContenido: false,\r\n    excluirPromesasPeriodoActual: true,\r\n    excluirCompromisos: true,\r\n    excluirBlacklist: true,\r\n    limit: 1000,\r\n\r\n    // estos tres siguen siendo string\r\n    nombre: inject(FormBuilder).nonNullable.control<string>(''),\r\n    plantillaTexto: inject(FormBuilder).nonNullable.control<string>(''),\r\n    descripcion: inject(FormBuilder).nonNullable.control<string>(''),\r\n\r\n    // üëá TIPAR COMO N√öMERO\r\n    importeExtra: inject(FormBuilder).nonNullable.control<number>(0),\r\n\r\n    rangos: inject(FormBuilder).array<FormGroup<any>>([])\r\n  });\r\n\r\n  get rangosFA(): FormArray {\r\n    return this.form.get('rangos') as FormArray;\r\n  }\r\n\r\n  private validateMinLTMax(): ValidatorFn {\r\n    return (control: AbstractControl): ValidationErrors | null => {\r\n      const fg = control as FormGroup;        // üëà casteo\r\n      const min = fg.get('min')?.value;\r\n      const max = fg.get('max')?.value;\r\n\r\n      if (min != null && max != null && Number(min) > Number(max)) {\r\n        return { rangeOrder: true };\r\n      }\r\n      return null;\r\n    };\r\n  }\r\n\r\n  private makeRange(): FormGroup {\r\n    return this.fbRef.nonNullable.group(\r\n      {\r\n        field:        this.fbRef.nonNullable.control<string>('DEUDA_TOTAL', { validators: [Validators.required] }),\r\n        mode:         this.fbRef.nonNullable.control<'gt' | 'lt'>('gt'), // operador inicial\r\n        // l√≠mites\r\n        useMin:       this.fbRef.nonNullable.control<boolean>(true),  // al empezar con 'gt'\r\n        min:          this.fbRef.control<number | null>(null),\r\n        inclusiveMin: this.fbRef.nonNullable.control<boolean>(false),\r\n\r\n        useMax:       this.fbRef.nonNullable.control<boolean>(false),\r\n        max:          this.fbRef.control<number | null>(null),\r\n        inclusiveMax: this.fbRef.nonNullable.control<boolean>(true),\r\n      },\r\n      { validators: [this.validateRange()] }\r\n    );\r\n  }\r\n\r\n  // cambia operador inicial y enciende el l√≠mite correspondiente\r\n  changeOperator(i: number, mode: 'gt'|'lt') {\r\n    const g = this.rangosFA.at(i) as FormGroup;\r\n    g.get('mode')?.setValue(mode);\r\n    if (mode === 'gt') {\r\n      g.get('useMin')?.setValue(true);\r\n      g.get('useMax')?.setValue(false);\r\n      // opcional: limpiar max\r\n      g.get('max')?.setValue(null);\r\n    } else {\r\n      g.get('useMin')?.setValue(false);\r\n      g.get('useMax')?.setValue(true);\r\n      // opcional: limpiar min\r\n      g.get('min')?.setValue(null);\r\n    }\r\n  }\r\n\r\n  toggleUseMin(i: number, checked: boolean) {\r\n    const g = this.rangosFA.at(i) as FormGroup;\r\n    g.get('useMin')?.setValue(checked);\r\n    if (!checked) g.get('min')?.setValue(null);\r\n    // si ambos quedan false, deja el operador decidir (validator lo marcar√°)\r\n  }\r\n\r\n  toggleUseMax(i: number, checked: boolean) {\r\n    const g = this.rangosFA.at(i) as FormGroup;\r\n    g.get('useMax')?.setValue(checked);\r\n    if (!checked) g.get('max')?.setValue(null);\r\n  }\r\n\r\n\r\n  private validateRange(): ValidatorFn {\r\n    return (control: AbstractControl): ValidationErrors | null => {\r\n      const fg = control as FormGroup;\r\n      const useMin = !!fg.get('useMin')?.value;\r\n      const useMax = !!fg.get('useMax')?.value;\r\n      const min = fg.get('min')?.value;\r\n      const max = fg.get('max')?.value;\r\n\r\n      // Debe haber al menos un l√≠mite activo\r\n      if (!useMin && !useMax) return { noBoundSelected: true };\r\n\r\n      // Si se marc√≥ useMin pero no hay valor\r\n      if (useMin && (min == null || min === '')) return { minRequired: true };\r\n      // Si se marc√≥ useMax pero no hay valor\r\n      if (useMax && (max == null || max === '')) return { maxRequired: true };\r\n\r\n      // Si es ‚Äúentre‚Äù, valida el orden\r\n      if (useMin && useMax && Number(min) > Number(max)) return { rangeOrder: true };\r\n\r\n      return null;\r\n    };\r\n  }\r\n\r\n\r\n\r\n\r\n  addRange() { this.rangosFA.push(this.makeRange()); }\r\n  removeRange(i: number) { this.rangosFA.removeAt(i); }\r\n\r\n  tplSig = toSignal(\r\n    this.form.controls.plantillaTexto.valueChanges.pipe(\r\n      startWith(this.form.controls.plantillaTexto.value ?? '')\r\n    ),\r\n    { initialValue: this.form.controls.plantillaTexto.value ?? '' }\r\n  );\r\n\r\n  rows = signal<Row[]>([]);\r\n  cols = signal<string[]>([]);\r\n\r\n  // change de checkbox con inserci√≥n solo al marcar\r\n  onSelectChange(ev: Event, key: string) {\r\n    const input = ev.target as HTMLInputElement;\r\n    if (input.checked) {\r\n      this.selects.add(input.value);\r\n      this.insertPlaceholder(key);\r\n    } else {\r\n      this.selects.delete(input.value);\r\n      this.removePlaceholder(key);\r\n    }\r\n  }\r\n\r\n  // change de condiciones (solo PROMESAS)\r\n  toggleCond(ev: Event, key: 'PROMESAS_HOY'|'PROMESAS_MANANA'|'PROMESAS_MANANA2'|'PROMESAS_ROTAS') {\r\n    const input = ev.target as HTMLInputElement;\r\n    if (input.checked) this.condiciones.add(key);\r\n    else this.condiciones.delete(key);\r\n    this.fetchSampleRow();\r\n  }\r\n\r\n  private buildBody(limitForPreview: boolean): DynamicQueryRequest {\r\n    const v = this.form.getRawValue();\r\n\r\n    // base desde chips (normalizando MORA -> SALDO_MORA)\r\n    let selects = Array.from(this.selects)\r\n      .map(s => (s === 'MORA' ? 'SALDO_MORA' : s));\r\n\r\n    const PROMESAS = new Set(['PROMESAS_HOY','PROMESAS_MANANA','PROMESAS_MANANA2','PROMESAS_ROTAS']);\r\n    const condiciones = Array.from(this.condiciones).filter(c => PROMESAS.has(c));\r\n\r\n    // a√±ade variables que est√°n escritas en el texto y que afectan selects\r\n    const tokens = Array.from(this.extractTokens());\r\n    const fromText = tokens.filter(t => this.affectsMap.get(t));\r\n    selects = Array.from(new Set([...selects, ...fromText]));\r\n\r\n    const importeExtraAplica =\r\n      this.hasTopUpSelect() && Number(v.importeExtra) > 0\r\n        ? Math.trunc(Number(v.importeExtra))\r\n        : null;\r\n\r\n    const rangos = this.rangosFA.controls\r\n      .map(g => {\r\n        const field = String(g.get('field')?.value || '').toUpperCase();\r\n        const useMin = !!g.get('useMin')?.value;\r\n        const useMax = !!g.get('useMax')?.value;\r\n        const min = g.get('min')?.value;\r\n        const max = g.get('max')?.value;\r\n\r\n        return {\r\n          field,\r\n          min:  useMin ? Number(min) : undefined,\r\n          max:  useMax ? Number(max) : undefined,\r\n          inclusiveMin: !!g.get('inclusiveMin')?.value,\r\n          inclusiveMax: !!g.get('inclusiveMax')?.value,\r\n        };\r\n      })\r\n      // manda el rango solo si hay al menos un l√≠mite\r\n      .filter(r => r.min != null || r.max != null);\r\n\r\n    return {\r\n      selects,\r\n      tramo: v.tramo,\r\n      condiciones,\r\n      restricciones: {\r\n        noContenido: !!v.noContenido,\r\n        excluirPromesasPeriodoActual: !!v.excluirPromesasPeriodoActual,\r\n        excluirCompromisos: !!v.excluirCompromisos,\r\n        excluirBlacklist: !!v.excluirBlacklist,\r\n      },\r\n      limit: limitForPreview ? Number(v.limit || 1000) : undefined,\r\n      importeExtra: importeExtraAplica,\r\n      rangos: rangos.length ? rangos : undefined,   // üëà solo si hay\r\n    } as any;\r\n  }\r\n\r\n\r\n  ejecutar() {\r\n    const body = this.buildBody(true);\r\n    this.api.run(body).subscribe(rs => {\r\n      this.rows.set(rs);\r\n      this.cols.set(rs.length ? Object.keys(rs[0]) : []);\r\n    });\r\n  }\r\n\r\n  private matDialog = inject(MatDialog);\r\n\r\n  // helper para mostrar pop-up\r\n  private alert(message: string, title = 'Aviso') {\r\n    this.matDialog.open(AlertDialogComponent, {\r\n      width: '420px',\r\n      data: { title, message }\r\n    });\r\n  }\r\n\r\n  /** Borra claves que el backend no quiere ver si est√°n null/undefined */\r\n  private compactQuery<T extends Record<string, any>>(q: T): T {\r\n    const c: any = { ...q };\r\n    if (c.limit == null) delete c.limit;\r\n    if (c.importeExtra == null) delete c.importeExtra;\r\n    delete c.plantillaTexto;\r\n    return c;\r\n  }\r\n\r\n\r\n  exportar() {\r\n    const rawQuery = this.buildBody(false);\r\n    const query = this.compactQuery(rawQuery);           // base limpia\r\n    const queryAll = { ...query, selectAll: true };      // ‚úÖ TODAS las columnas en pruebas\r\n    const template = (this.form.controls.plantillaTexto.value ?? '').trim();\r\n    if (!template) {\r\n      this.alert('Ingresa un texto de SMS antes de exportar.', 'Falta texto');\r\n      return;\r\n    }\r\n\r\n    const dlg = this.matDialog.open(LoadingDialogComponent, {\r\n      disableClose: true,\r\n      data: { title: 'Generando Excel‚Ä¶', subtitle: 'Preparando datos y creando archivo' },\r\n      panelClass: 'loading-dialog-panel',\r\n      backdropClass: 'blur-dialog-backdrop',\r\n      width: '320px',       // Opcional: 280‚Äì320 queda bien\r\n      autoFocus: false\r\n    });\r\n\r\n    // ‚úÖ Precheck usando TODAS las columnas\r\n    this.api.precheck(queryAll as any, template).subscribe({\r\n      next: (res) => {\r\n        if (!res.ok) {\r\n          dlg.close();\r\n          const header = `${res.excedidos} ${res.excedidos === 1 ? 'fila' : 'filas'} superan ${res.limite} caracteres.`;\r\n          const ejemplosTxt = (res.ejemplos ?? [])\r\n            .map((e) => `‚Ä¢ ${e.len} caracteres ‚Äî DNI: ${e.documento || '(sin DNI)'}`)\r\n            .join('\\n');\r\n          this.alert(`${header}\\n\\nPrimeros ${Math.min((res.ejemplos ?? []).length, 3)} casos:\\n${ejemplosTxt}`, 'Mensaje demasiado largo');\r\n          return;\r\n        }\r\n\r\n        // ‚úÖ Export tambi√©n con TODAS las columnas\r\n        this.api.export(queryAll, template)\r\n          .pipe(finalize(() => dlg.close()))\r\n          .subscribe({\r\n            next: (blob) => {\r\n              const url = URL.createObjectURL(blob);\r\n              const a = document.createElement('a');\r\n              a.href = url;\r\n              a.download = `sms report ${new Date().toISOString().slice(0, 10)}.xlsx`;\r\n              document.body.appendChild(a); a.click(); a.remove();\r\n              URL.revokeObjectURL(url);\r\n              this.showSuccess('Exportaci√≥n exitosa', 'Tu archivo se gener√≥ correctamente.').subscribe();\r\n            },\r\n            error: (err) => {\r\n              const msg =\r\n                err?.status === 422\r\n                  ? (err?.error?.message || 'No hay filas para exportar con los filtros seleccionados.')\r\n                  : (err?.error?.message || err?.message || 'Ocurri√≥ un error al exportar.');\r\n              this.alert(msg, err?.status === 422 ? 'Sin resultados' : 'Error');\r\n            }\r\n          });\r\n      },\r\n      error: (err) => {\r\n        dlg.close();\r\n        const msg = err?.error?.message || err?.message || 'No se pudo validar el SMS.';\r\n        this.alert(msg, 'Error en precheck');\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n\r\n\r\n  // inserta {KEY} al final del textarea\r\n  insertPlaceholder(key: string) {\r\n    this.insertAtCursor(`{${key}}`);\r\n  }\r\n\r\n\r\n  private mapRangosForPayload() {\r\n    return this.rangosFA.controls\r\n      .map(g => {\r\n        const field = String(g.get('field')?.value || '').toUpperCase();\r\n        const useMin = !!g.get('useMin')?.value;\r\n        const useMax = !!g.get('useMax')?.value;\r\n        const min = g.get('min')?.value;\r\n        const max = g.get('max')?.value;\r\n        return {\r\n          field,\r\n          min:  useMin ? Number(min) : undefined,\r\n          max:  useMax ? Number(max) : undefined,\r\n          inclusiveMin: !!g.get('inclusiveMin')?.value,\r\n          inclusiveMax: !!g.get('inclusiveMax')?.value,\r\n        };\r\n      })\r\n      .filter(r => r.min != null || r.max != null);\r\n  }\r\n\r\n  guardarCombo() {\r\n    const v = this.form.getRawValue();\r\n    const importeExtraAplica =\r\n      this.hasTopUpSelect() && Number(v.importeExtra) > 0\r\n        ? Math.trunc(Number(v.importeExtra))\r\n        : null;\r\n    const rangos = this.mapRangosForPayload(); // ‚¨ÖÔ∏è NUEVO\r\n\r\n\r\n    const payload: ComboCreateRequest = {\r\n      name: v.nombre,\r\n      plantillaName: v.nombre,\r\n      descripcion: v.descripcion,\r\n      tramo: v.tramo,\r\n      selects: Array.from(this.selects),\r\n      condiciones: Array.from(this.condiciones),\r\n      restricciones: {\r\n        noContenido: !!v.noContenido,\r\n        excluirPromesasPeriodoActual: !!v.excluirPromesasPeriodoActual,\r\n        excluirCompromisos: !!v.excluirCompromisos,\r\n        excluirBlacklist: !!v.excluirBlacklist\r\n      },\r\n      // crea tambi√©n la plantilla si viene el texto\r\n      plantillaTexto: v.plantillaTexto,\r\n      importeExtra: importeExtraAplica,\r\n      rangos: rangos.length ? rangos : undefined,\r\n\r\n    };\r\n\r\n    this.comboApi.createCombo(payload).subscribe({\r\n      next: (_id) => {\r\n        // reset suave (tal cual lo ten√≠as)\r\n        this.form.reset({\r\n          tramo: '3',\r\n          excluirPromesasPeriodoActual: true,\r\n          excluirCompromisos: true,\r\n          excluirBlacklist: true,\r\n          limit: 1000,\r\n          nombre: '',\r\n          plantillaTexto: '',\r\n          descripcion: ''\r\n        });\r\n        this.selects.clear();\r\n        this.condiciones.clear();\r\n        this.rows.set([]);\r\n        this.cols.set([]);\r\n\r\n        // ‚úÖ dialog bonito + navegar\r\n        this.showSuccess('Guardado', 'El combo se guard√≥ correctamente.')\r\n          .subscribe(() => this.router.navigate(['/sms/combos']));\r\n      },\r\n      error: (err) => {\r\n        const msg = err?.error?.message || err?.message || 'No se pudo guardar el combo.';\r\n        this.alert(msg, 'Error');\r\n      }\r\n    });\r\n\r\n\r\n  }\r\n\r\n  Cancel() {\r\n    this.router.navigate(['/sms/combos']);\r\n  }\r\n\r\n  protected readonly Math = Math;\r\n\r\n\r\n  private removePlaceholder(key: string) {\r\n    const ctrl = this.form.controls.plantillaTexto;\r\n    const cur = ctrl.value ?? '';\r\n\r\n    // Coincide exactamente {KEY} (no afecta {KEY_ALGO} porque cerramos con })\r\n    const re = new RegExp(`\\\\{${key}\\\\}`, 'g');\r\n\r\n    // quita tokens, colapsa espacios y bordes\r\n    let next = cur.replace(re, '');\r\n    next = next.replace(/\\s{2,}/g, ' ').replace(/\\s+([.,;:!?])/g, '$1').trim();\r\n\r\n    if (next !== cur) {\r\n      ctrl.setValue(next);\r\n      ctrl.markAsDirty();\r\n    }\r\n  }\r\n\r\n  fieldLabel(key: string | null | undefined): string {\r\n    const k = String(key || '').toUpperCase();\r\n    const f = this.rangeFields.find(x => x.key === k);\r\n    return f?.label ?? k;\r\n  }\r\n\r\n  private showSuccess(title: string, message?: string, ms = 1800) {\r\n    return this.matDialog.open(SuccessDialogComponent, {\r\n      data: { title, message, autoCloseMs: ms },\r\n      panelClass: 'dialog-success',\r\n      disableClose: true\r\n    }).afterClosed();\r\n  }\r\n\r\n  private forceDeselect(key: string, affectsSelects = true) {\r\n    if (!this.selectedChips.has(key)) return;\r\n    this.selectedChips.delete(key);\r\n    if (affectsSelects) this.selects.delete(key);\r\n    this.removePlaceholder(key);\r\n  }\r\n\r\n  isChipDisabled(key: string): boolean {\r\n    // si ya est√° activo (por chip o por token en texto), no deshabilites\r\n    if (this.isActive(key)) return false;\r\n\r\n    // LTD/LTDE ‚Üî LTD_LTDE\r\n    if (key === 'LTD_LTDE') return this.isActive('LTD') || this.isActive('LTDE');\r\n    if (key === 'LTD' || key === 'LTDE') return this.isActive('LTD_LTDE');\r\n\r\n    // BAJA30/MORA ‚Üî BAJA30_SALDOMORA\r\n    if (key === 'BAJA30_SALDOMORA') return this.isActive('BAJA30') || this.isActive('MORA');\r\n    if (key === 'BAJA30' || key === 'MORA') return this.isActive('BAJA30_SALDOMORA');\r\n\r\n    return false;\r\n  }\r\n\r\n  private tokensInText = signal<Set<string>>(new Set());\r\n\r\n  // mapa de si un chip afecta selects (sale de tu definici√≥n de grupos)\r\n  private affectsMap = new Map<string, boolean>(\r\n    this.chipGroups.flatMap(g =>\r\n      g.items.map(i => [this.mapVar(i.key), i.affectsSelects !== false] as [string, boolean])\r\n    )\r\n  );\r\n\r\n  // extrae {TOKENS} del textarea normalizados (MORA -> SALDO_MORA)\r\n  private extractTokens(): Set<string> {\r\n    const tpl = this.form.controls.plantillaTexto.value ?? '';\r\n    const ks = (tpl.match(VAR_PATTERN) || []).map(m => this.mapVar(m.slice(1, -1)));\r\n    return new Set(ks);\r\n  }\r\n\r\n// sincroniza chips/sets con el contenido del textarea\r\n  private syncChipsWithText() {\r\n    const tokens = this.extractTokens();\r\n    this.tokensInText.set(tokens);\r\n\r\n    // podas autom√°ticas: si ya no est√° el token, des-selecciona\r\n    for (const k of Array.from(this.selectedChips)) {\r\n      const norm = this.mapVar(k);\r\n      const affects = this.affectsMap.get(norm) ?? true;\r\n      if (affects && !tokens.has(norm)) {\r\n        this.selectedChips.delete(k);\r\n        // ojo con el mapeo MORA -> SALDO_MORA en selects\r\n        this.selects.delete(k === 'MORA' ? 'SALDO_MORA' : k);\r\n      }\r\n    }\r\n  }\r\n\r\n  // ‚Äúactivo‚Äù si est√° seleccionado o si el token existe en el texto\r\n  isActive(key: string): boolean {\r\n    return this.selectedChips.has(key) || this.tokensInText().has(this.mapVar(key));\r\n  }\r\n\r\n  // devuelve el meta del chip\r\n  private chipMeta(key: string) {\r\n    for (const g of this.chipGroups) {\r\n      const f = g.items.find(i => i.key === key);\r\n      if (f) return f;\r\n    }\r\n    return undefined;\r\n  }\r\n  private affectsSelects(key: string) {\r\n    return this.chipMeta(key)?.affectsSelects !== false;\r\n  }\r\n\r\n  /** Mantiene chips y selects en sincron√≠a con lo que realmente hay escrito en el textarea */\r\n  private syncChipsWithTemplate() {\r\n    const tpl = this.form.controls.plantillaTexto.value ?? '';\r\n\r\n    const tokens = new Set<string>();\r\n    for (const m of tpl.matchAll(VAR_PATTERN_I)) tokens.add(String(m[1]).toUpperCase());\r\n\r\n    if (tokens.has('SALDO_MORA')) tokens.add('MORA');\r\n    if (tokens.has('MORA'))      tokens.add('SALDO_MORA');\r\n\r\n    // üîÅ mantener se√±al sincronizada para isActive()\r\n    this.tokensInText.set(new Set(tokens));\r\n\r\n    const want = (k: string) => tokens.has(k.toUpperCase());\r\n\r\n    const activate = (k: string) => {\r\n      if (!this.selectedChips.has(k)) {\r\n        this.selectedChips.add(k);\r\n        if (this.affectsSelects(k)) this.selects.add(k === 'MORA' ? 'SALDO_MORA' : k);\r\n      }\r\n    };\r\n    const deactivate = (k: string) => {\r\n      if (this.selectedChips.has(k)) {\r\n        this.selectedChips.delete(k);\r\n        if (this.affectsSelects(k)) this.selects.delete(k === 'MORA' ? 'SALDO_MORA' : k);\r\n      }\r\n    };\r\n\r\n    // 2) reglas exclusivas (primero las combinadas)\r\n    if (want('BAJA30_SALDOMORA')) {\r\n      activate('BAJA30_SALDOMORA'); deactivate('BAJA30'); deactivate('MORA');\r\n    } else {\r\n      deactivate('BAJA30_SALDOMORA');\r\n      want('BAJA30') ? activate('BAJA30') : deactivate('BAJA30');\r\n      want('MORA')   ? activate('MORA')   : deactivate('MORA');\r\n    }\r\n\r\n    if (want('LTD_LTDE')) {\r\n      activate('LTD_LTDE'); deactivate('LTD'); deactivate('LTDE');\r\n    } else {\r\n      deactivate('LTD_LTDE');\r\n      want('LTD')  ? activate('LTD')  : deactivate('LTD');\r\n      want('LTDE') ? activate('LTDE') : deactivate('LTDE');\r\n    }\r\n\r\n    // 3) resto de chips (no exclusivos)\r\n    const alreadyHandled = new Set(['BAJA30','MORA','BAJA30_SALDOMORA','LTD','LTDE','LTD_LTDE']);\r\n    for (const g of this.chipGroups) {\r\n      for (const c of g.items) {\r\n        if (alreadyHandled.has(c.key)) continue;\r\n        want(c.key) ? activate(c.key) : deactivate(c.key);\r\n      }\r\n    }\r\n\r\n    // 4) coherencia del importe extra\r\n    if (!this.hasTopUpSelect()) this.form.controls.importeExtra.setValue(0);\r\n  }\r\n\r\n  generarGuiado() {\r\n    const template = (this.form.controls.plantillaTexto.value ?? '').trim();\r\n    if (!template) { this.alert('Ingresa un texto de SMS antes de generar.', 'Falta texto'); return; }\r\n\r\n    // base de consulta (sin limit ni nulls molestos)\r\n    const raw = this.buildBody(false);\r\n    const query: any = this.compactQuery(raw);\r\n    const tokens = Array.from(this.extractTokens());\r\n    const textVars = tokens.filter(t => this.affectsMap.get(t));\r\n    query.selects = Array.from(new Set([...(query.selects || []), ...textVars]));\r\n\r\n    // candidatas por defecto (puedes parametrizarlo)\r\n    const candidatas = [\r\n      'BAJA30','SALDO_MORA','BAJA30_SALDOMORA',\r\n      'LTD','LTDE','LTD_LTDE',\r\n      'PKM','CAPITAL'\r\n    ];\r\n\r\n    const loadingDlg = this.matDialog.open(LoadingDialogComponent, {\r\n      disableClose: true,\r\n      data: { title: 'Preparando cohorte‚Ä¶', subtitle: 'Calculando variables candidatas' },\r\n      panelClass: 'loading-dialog-panel',\r\n      width: '320px',\r\n      autoFocus: false\r\n    });\r\n\r\n    this.api.previewInit(query, template, candidatas).subscribe({\r\n      next: (init) => {\r\n        loadingDlg.close();\r\n        this.matDialog.open(RoundWizardDialogComponent, {\r\n          width: '820px',\r\n          data: { sessionId: init.sessionId, init, template },\r\n          disableClose: false\r\n        });\r\n      },\r\n      error: (err) => {\r\n        loadingDlg.close();\r\n        const msg = err?.error?.message || err?.message || 'No se pudo iniciar el guiado.';\r\n        this.alert(msg, 'Error');\r\n      }\r\n    });\r\n  }\r\n\r\n  private triggerPreview() {\r\n    const base = this.currentQueryForPreview();\r\n    const h = this.hash(base);\r\n    if (h === this.lastHash() && this.sampleRow()) return; // evita refetch\r\n\r\n    this.lastHash.set(h);\r\n    this.loadingPreview.set(true);\r\n\r\n    const required = this.requiredColumnsForPreview();\r\n    const preferred = this.preferredColumnsForPreview();\r\n\r\n    this.api.run(base).subscribe({\r\n      next: (rows) => {\r\n        const pick = this.pickBestRow(rows || [], required, preferred);\r\n        this.sampleRow.set(pick ?? null);\r\n        this.loadingPreview.set(false);\r\n      },\r\n      error: () => { this.sampleRow.set(null); this.loadingPreview.set(false); }\r\n    });\r\n  }\r\n\r\n  refreshPreview(){ this.triggerPreview(); }\r\n\r\n\r\n  // --- Modo de vista previa: auto / manual (sin backend)\r\n  previewMode = signal<'auto'|'manual'>('manual');  // ‚Üê arranca en manual\r\n  loadingPreview = signal(false);\r\n  private lastHash = signal<string>('');\r\n\r\n// Cambiar modo\r\n  setMode(m: 'auto'|'manual') {\r\n    this.previewMode.set(m);\r\n    if (m === 'auto') this.triggerPreview(); // al pasar a auto, refresca\r\n  }\r\n\r\n// Hash estable del ‚Äúquery‚Äù que afecta la fila de muestra\r\n  private hash(q: DynamicQueryRequest): string {\r\n    const key = {\r\n      tramo: q.tramo,\r\n      selects: [...(q.selects || [])].sort(),\r\n      condiciones: [...(q.condiciones || [])].sort(),\r\n      restricciones: q.restricciones,\r\n      importeExtra: q.importeExtra ?? null\r\n    };\r\n    return JSON.stringify(key);\r\n  }\r\n\r\n// Construye el body para la PREVIEW (incluye tokens/aliases como ya hac√≠as)\r\n  private currentQueryForPreview(): DynamicQueryRequest {\r\n    const base = this.buildBody(true);\r\n\r\n    const tpl = this.form.controls.plantillaTexto.value ?? '';\r\n    const needed = Array.from(new Set(\r\n      (tpl.match(VAR_PATTERN) || []).map(m => this.mapVar(m.slice(1, -1)))\r\n    ));\r\n    base.selects = Array.from(new Set([...(base.selects || []), ...needed]));\r\n    base.selects = Array.from(new Set([...(base.selects || []), ...this.expandWithAliases(base.selects || [])]));\r\n    return base as DynamicQueryRequest;\r\n  }\r\n\r\n// Flag para avisar que, en manual, hay cambios no aplicados\r\n  pendingPreview = computed(() =>\r\n    this.previewMode() === 'manual' &&\r\n    this.hash(this.currentQueryForPreview()) !== this.lastHash()\r\n  );\r\n\r\n\r\n}\r\n", "<div class=\"container\">\r\n  <!-- Header -->\r\n  <div class=\"header\">\r\n    <h1 class=\"page-title\">Consulta Din√°mica</h1>\r\n  </div>\r\n\r\n  <div class=\"layout\">\r\n    <!-- Main Form -->\r\n    <div class=\"main-card\">\r\n      <form [formGroup]=\"form\" class=\"dynamic-form\">\r\n        <!-- Tramo Section -->\r\n        <div class=\"form-field\">\r\n          <label class=\"form-label\">Tramo</label>\r\n          <select formControlName=\"tramo\" class=\"form-select\">\r\n            <option value=\"3\">Tramo 3</option>\r\n            <option value=\"5\">Tramo 5</option>\r\n            <option value=\"CONTACTO_TOTAL\">Cartera Propia</option>  <!-- ‚Üê A√ëADIR ESTA L√çNEA -->\r\n          </select>\r\n        </div>\r\n\r\n        <!-- Variables Section -->\r\n        <h2 class=\"section-title\">\r\n          <span class=\"material-icons\">tune</span>\r\n          Variables\r\n        </h2>\r\n\r\n        <div class=\"chip-groups\">\r\n          <ng-container *ngFor=\"let g of chipGroups\">\r\n            <!-- ‚¨áÔ∏è wrapper con clase por grupo -->\r\n            <div class=\"chip-group\" [ngClass]=\"'chip-group--' + g.key\">\r\n              <h3 class=\"chip-group-title\">{{ g.title }}</h3>\r\n\r\n              <div class=\"chip-container\">\r\n                <button\r\n                  *ngFor=\"let c of g.items\"\r\n                  type=\"button\"\r\n                  class=\"chip\"\r\n                  [class.active]=\"isActive(c.key)\"\r\n                (click)=\"toggleChip(c.key, c.affectsSelects !== false)\"\r\n                [attr.aria-pressed]=\"isActive(c.key)\"\r\n                [disabled]=\"isChipDisabled(c.key)\"\r\n                >\r\n                {{ c.label }}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </ng-container>\r\n        </div>\r\n\r\n\r\n        <!-- Importe Extra -->\r\n        <div *ngIf=\"selectedChips.has('LTD') || selectedChips.has('LTDE') || selectedChips.has('LTD_LTDE')\" class=\"form-field\">\r\n          <label class=\"form-label\">Sumar importe</label>\r\n          <input type=\"number\" min=\"0\" step=\"1\" class=\"form-input\" formControlName=\"importeExtra\" placeholder=\"0\">\r\n        </div>\r\n\r\n        <!-- Rangos Section -->\r\n        <h2 class=\"section-title\">\r\n          <span class=\"material-icons\">filter_alt</span>\r\n          Rangos\r\n        </h2>\r\n\r\n        <div class=\"form-field\">\r\n          <button type=\"button\" class=\"btn btn-secondary\" (click)=\"addRange()\">\r\n            <span class=\"material-icons\">add</span>\r\n            A√±adir rango\r\n          </button>\r\n        </div>\r\n\r\n        <div class=\"range-item\"\r\n             *ngFor=\"let rg of rangosFA.controls; let i = index\"\r\n             [formGroup]=\"$any(rg)\">\r\n\r\n          <!-- Modo intervalo: cuando ambos l√≠mites est√°n activos -->\r\n          <div *ngIf=\"$any(rg).get('useMin')?.value && $any(rg).get('useMax')?.value; else singleMode\"\r\n               class=\"interval-mode\">\r\n\r\n            <div class=\"interval-header\">\r\n              <select class=\"form-select slim interval-field\" formControlName=\"field\" title=\"Campo\">\r\n                <option *ngFor=\"let f of rangeFields\" [value]=\"f.key\">{{ f.label }}</option>\r\n              </select>\r\n\r\n              <button type=\"button\" class=\"btn btn-danger btn-small\" (click)=\"removeRange(i)\">\r\n                <span class=\"material-icons\">delete</span>\r\n                Borrar\r\n              </button>\r\n            </div>\r\n\r\n            <div class=\"interval-expression\">\r\n              <!-- MIN -->\r\n              <input type=\"number\" class=\"form-input slim interval-input\" formControlName=\"min\" placeholder=\"m√≠n\">\r\n\r\n              <!-- S√≠mbolo < o ‚â§ con checkbox -->\r\n              <label class=\"interval-check\">\r\n                <input type=\"checkbox\" formControlName=\"inclusiveMin\">\r\n                <span class=\"interval-symbol\">{{ $any(rg).get('inclusiveMin')?.value ? '‚â§' : '<' }}</span>\r\n              </label>\r\n\r\n              <!-- VARIABLE -->\r\n              <div class=\"interval-variable\">\r\n                {{ fieldLabel($any(rg).get('field')?.value) || 'Variable' }}\r\n              </div>\r\n\r\n              <!-- S√≠mbolo < o ‚â§ con checkbox -->\r\n              <label class=\"interval-check\">\r\n                <input type=\"checkbox\" formControlName=\"inclusiveMax\">\r\n                <span class=\"interval-symbol\">{{ $any(rg).get('inclusiveMax')?.value ? '‚â§' : '<' }}</span>\r\n              </label>\r\n\r\n              <!-- MAX -->\r\n              <input type=\"number\" class=\"form-input slim interval-input\" formControlName=\"max\" placeholder=\"m√°x\">\r\n            </div>\r\n\r\n            <!-- Checkbox para desactivar intervalo -->\r\n            <div class=\"interval-footer\">\r\n              <label class=\"tiny-check\">\r\n                <input type=\"checkbox\"\r\n                       checked\r\n                       (change)=\"$any(rg).get('mode')?.value === 'gt' ? toggleUseMax(i, false) : toggleUseMin(i, false)\">\r\n                <span>Desactivar intervalo</span>\r\n              </label>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Modo simple: un solo l√≠mite -->\r\n          <ng-template #singleMode>\r\n            <div class=\"range-row\">\r\n              <!-- 1) Campo -->\r\n              <select class=\"form-select slim col-field\" formControlName=\"field\" title=\"Campo\">\r\n                <option *ngFor=\"let f of rangeFields\" [value]=\"f.key\">{{ f.label }}</option>\r\n              </select>\r\n\r\n              <!-- 2) Operador -->\r\n              <select class=\"form-select slim col-op\"\r\n                      [value]=\"$any(rg).get('mode')?.value\"\r\n                      (change)=\"changeOperator(i, $any($event.target).value)\"\r\n                      title=\"Operador\">\r\n                <option value=\"gt\">&gt;</option>\r\n                <option value=\"lt\">&lt;</option>\r\n              </select>\r\n\r\n              <!-- 3) Valor √∫nico -->\r\n              <div class=\"value-box col-value\">\r\n                <ng-container [ngSwitch]=\"$any(rg).get('mode')?.value\">\r\n                  <ng-container *ngSwitchCase=\"'gt'\">\r\n                    <input type=\"number\" class=\"form-input slim\" formControlName=\"min\" placeholder=\"valor m√≠nimo\">\r\n                    <label class=\"tiny-check\">\r\n                      <input type=\"checkbox\" formControlName=\"inclusiveMin\">\r\n                      <span>{{ $any(rg).get('inclusiveMin')?.value ? '‚â•' : '>' }}</span>\r\n                    </label>\r\n                  </ng-container>\r\n                  <ng-container *ngSwitchCase=\"'lt'\">\r\n                    <input type=\"number\" class=\"form-input slim\" formControlName=\"max\" placeholder=\"valor m√°ximo\">\r\n                    <label class=\"tiny-check\">\r\n                      <input type=\"checkbox\" formControlName=\"inclusiveMax\">\r\n                      <span>{{ $any(rg).get('inclusiveMax')?.value ? '‚â§' : '<' }}</span>\r\n                    </label>\r\n                  </ng-container>\r\n                </ng-container>\r\n              </div>\r\n\r\n              <!-- 4) Borrar -->\r\n              <button type=\"button\" class=\"btn btn-danger btn-small col-del\" (click)=\"removeRange(i)\">\r\n                <span class=\"material-icons\">delete</span>\r\n                Borrar\r\n              </button>\r\n            </div>\r\n\r\n            <!-- Checkbox para activar el segundo l√≠mite -->\r\n            <div class=\"hint\" style=\"margin:8px 0 0 0;\">\r\n              <label class=\"tiny-check\">\r\n                <ng-container *ngIf=\"$any(rg).get('mode')?.value === 'gt'\">\r\n                  <input type=\"checkbox\"\r\n                         [checked]=\"$any(rg).get('useMax')?.value\"\r\n                         (change)=\"toggleUseMax(i, $any($event.target).checked)\">\r\n                  <span>a√±adir l√≠mite superior</span>\r\n                </ng-container>\r\n                <ng-container *ngIf=\"$any(rg).get('mode')?.value === 'lt'\">\r\n                  <input type=\"checkbox\"\r\n                         [checked]=\"$any(rg).get('useMin')?.value\"\r\n                         (change)=\"toggleUseMin(i, $any($event.target).checked)\">\r\n                  <span>a√±adir l√≠mite inferior</span>\r\n                </ng-container>\r\n              </label>\r\n            </div>\r\n          </ng-template>\r\n\r\n          <!-- Error de orden -->\r\n          <div *ngIf=\"$any(rg).errors?.['rangeOrder']\" class=\"hint error-inline\">\r\n            ‚ö†Ô∏è El valor m√≠nimo no puede ser mayor que el m√°ximo.\r\n          </div>\r\n        </div>\r\n\r\n\r\n\r\n        <!-- Condiciones Section -->\r\n        <h2 class=\"section-title\">\r\n          <span class=\"material-icons\">rule</span>\r\n          Condiciones\r\n        </h2>\r\n        <div class=\"checkbox-group\">\r\n          <label class=\"checkbox-item\">\r\n            <div class=\"checkbox\">\r\n              <input type=\"checkbox\" (change)=\"toggleCond($event,'PROMESAS_HOY')\">\r\n              <span class=\"checkmark\"></span>\r\n            </div>\r\n            PROMESAS HOY\r\n          </label>\r\n          <label class=\"checkbox-item\">\r\n            <div class=\"checkbox\">\r\n              <input type=\"checkbox\" (change)=\"toggleCond($event,'PROMESAS_MANANA')\">\r\n              <span class=\"checkmark\"></span>\r\n            </div>\r\n            PROMESAS MA√ëANA\r\n          </label>\r\n          <label class=\"checkbox-item\">\r\n            <div class=\"checkbox\">\r\n              <input type=\"checkbox\" (change)=\"toggleCond($event,'PROMESAS_MANANA2')\">\r\n              <span class=\"checkmark\"></span>\r\n            </div>\r\n            PROMESAS HOY Y MA√ëANA\r\n          </label>\r\n          <label class=\"checkbox-item\">\r\n            <div class=\"checkbox\">\r\n              <input type=\"checkbox\" (change)=\"toggleCond($event,'PROMESAS_ROTAS')\">\r\n              <span class=\"checkmark\"></span>\r\n            </div>\r\n            PROMESAS ROTAS\r\n          </label>\r\n        </div>\r\n\r\n        <!-- Restricciones Section -->\r\n        <h2 class=\"section-title\">\r\n          <span class=\"material-icons\">block</span>\r\n          Restricciones\r\n        </h2>\r\n        <div class=\"checkbox-group\">\r\n          <label class=\"checkbox-item\">\r\n            <div class=\"checkbox\">\r\n              <input type=\"checkbox\" formControlName=\"noContenido\">\r\n              <span class=\"checkmark\"></span>\r\n            </div>\r\n            No Contenido\r\n          </label>\r\n          <label class=\"checkbox-item\">\r\n            <div class=\"checkbox\">\r\n              <input type=\"checkbox\" formControlName=\"excluirPromesasPeriodoActual\">\r\n              <span class=\"checkmark\"></span>\r\n            </div>\r\n            Excluir Promesas periodo actual\r\n          </label>\r\n          <label class=\"checkbox-item\">\r\n            <div class=\"checkbox\">\r\n              <input type=\"checkbox\" formControlName=\"excluirCompromisos\">\r\n              <span class=\"checkmark\"></span>\r\n            </div>\r\n            Excluir Compromisos\r\n          </label>\r\n          <label class=\"checkbox-item\">\r\n            <div class=\"checkbox\">\r\n              <input type=\"checkbox\" formControlName=\"excluirBlacklist\">\r\n              <span class=\"checkmark\"></span>\r\n            </div>\r\n            Excluir Blacklist\r\n          </label>\r\n        </div>\r\n\r\n        <!-- Plantilla Section -->\r\n        <h2 class=\"section-title\">\r\n          <span class=\"material-icons\">description</span>\r\n          Plantilla\r\n        </h2>\r\n        <div class=\"form-field\">\r\n          <label class=\"form-label\">Nombre</label>\r\n          <input type=\"text\" class=\"form-input\" formControlName=\"nombre\" placeholder=\"Nombre del combo/plantilla\">\r\n        </div>\r\n\r\n        <div class=\"form-field\">\r\n          <label class=\"form-label label-with-count\">\r\n            <span>Texto de SMS</span>\r\n          </label>\r\n          <textarea #tplArea class=\"form-textarea\" formControlName=\"plantillaTexto\" placeholder=\"Escribe el mensaje y usa las variables\"></textarea>\r\n        </div>\r\n      </form>\r\n\r\n      <!-- Results Table -->\r\n      <div *ngIf=\"rows().length\" class=\"results-card\">\r\n        <h2 class=\"section-title\">\r\n          <span class=\"material-icons\">table_chart</span>\r\n          Resultado\r\n        </h2>\r\n        <div class=\"table-container\">\r\n          <table class=\"data-table\" mat-table [dataSource]=\"rows()\">\r\n            <ng-container *ngFor=\"let c of cols()\" [matColumnDef]=\"c\">\r\n              <th mat-header-cell *matHeaderCellDef>{{ c }}</th>\r\n              <td mat-cell *matCellDef=\"let r\">{{ r[c] }}</td>\r\n            </ng-container>\r\n            <tr mat-header-row *matHeaderRowDef=\"cols()\"></tr>\r\n            <tr mat-row *matRowDef=\"let row; columns: cols();\"></tr>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Sidebar -->\r\n    <aside class=\"aside-card\">\r\n\r\n      <!-- Controles de vista previa (toggle a la derecha) -->\r\n      <div class=\"preview-controls\">\r\n        <span class=\"mode-label\">Manual</span>\r\n\r\n        <label class=\"switch\" aria-label=\"Cambiar modo de previsualizaci√≥n\">\r\n          <input type=\"checkbox\"\r\n                 [checked]=\"previewMode() === 'auto'\"\r\n                 (change)=\"setMode($any($event.target).checked ? 'auto' : 'manual')\">\r\n          <span class=\"slider\"></span>\r\n        </label>\r\n\r\n        <span class=\"mode-label\">Auto</span>\r\n\r\n      </div>\r\n\r\n\r\n\r\n      <!-- Header de previsualizaci√≥n con bot√≥n a la derecha -->\r\n      <div class=\"preview-header\">\r\n        <h3 class=\"preview-title\">\r\n          <span class=\"material-icons\">preview</span>\r\n          Previsualizaci√≥n\r\n        </h3>\r\n\r\n        <button type=\"button\"\r\n                class=\"btn btn-small btn-ghost\"\r\n                (click)=\"refreshPreview()\"\r\n                [disabled]=\"previewMode() !== 'manual' || loadingPreview()\">\r\n          Actualizar\r\n        </button>\r\n      </div>\r\n\r\n      <div class=\"preview-box\">\r\n        {{ previewText() || 'Tu SMS aparecer√° aqu√≠‚Ä¶' }}\r\n      </div>\r\n\r\n      <div class=\"character-meter\">\r\n        <div class=\"character-bar\"\r\n             [class.warning]=\"previewText().length > 120\"\r\n             [class.danger]=\"previewText().length > 160\"\r\n             [style.width.%]=\"Math.min((previewText().length / 160) * 100, 100)\">\r\n        </div>\r\n      </div>\r\n      <div class=\"character-count\">\r\n        {{ previewText().length }} / 160\r\n      </div>\r\n\r\n\r\n\r\n\r\n      <p class=\"hint\">\r\n        üí° Consejo: mant√©n el mensaje bajo 160 caracteres o usa variables cortas.\r\n      </p>\r\n\r\n      <div class=\"button-group\">\r\n        <button type=\"button\" class=\"btn btn-primary\" (click)=\"generarGuiado()\">\r\n          <span class=\"material-icons\">send</span>\r\n          Generar\r\n        </button>\r\n        <button type=\"button\" class=\"btn btn-secondary\" (click)=\"guardarCombo()\">\r\n          <span class=\"material-icons\">save</span>\r\n          Guardar\r\n        </button>\r\n        <button type=\"button\" class=\"btn btn-danger\" (click)=\"Cancel()\">\r\n          <span class=\"material-icons\">cancel</span>\r\n          Cancelar\r\n        </button>\r\n      </div>\r\n    </aside>\r\n  </div>\r\n</div>\r\n"],
  "mappings": "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",
  "names": []
}
