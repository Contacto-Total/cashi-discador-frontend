import{a as R}from"./chunk-Q3HKRGV2.js";import{a as G}from"./chunk-WCH2SBI5.js";import{A as V,D as q,F as j,c as F,d as g,f as I,g as L,l as A,o as T,r as z}from"./chunk-YEUR475X.js";import{Rb as N,Sb as k}from"./chunk-UE4ONSKR.js";import"./chunk-DF6EJM3T.js";import{Ic as M,Mb as d,Nb as n,Ob as t,Pb as p,Wb as v,Yb as f,_b as h,bb as r,ed as D,fd as S,hb as _,kc as y,ld as E,mc as i,nc as u,oa as b,ob as P,oc as O,pa as C,tb as x}from"./chunk-QOPKCBWK.js";function U(s,m){if(s&1){let l=v();n(0,"div",17)(1,"span",18),i(2),t(),n(3,"span",19),i(4),t(),n(5,"button",20),f("click",function(){let e=b(l).$implicit,a=h();return C(a.removeToast(e.id))}),i(6,"\xD7"),t()()}if(s&2){let l=m.$implicit;y("toast-error",l.type==="error")("toast-warning",l.type==="warning")("toast-success",l.type==="success"),r(2),u(l.icon),r(2),u(l.message)}}function B(s,m){if(s&1){let l=v();n(0,"button",21),f("click",function(){b(l);let e=h();return C(e.resetForm())}),p(1,"lucide-angular",22),i(2," Limpiar "),t()}s&2&&(r(),d("size",18))}function $(s,m){if(s&1){let l=v();n(0,"button",23),f("click",function(){b(l);let e=h();return C(e.generarPDF())}),p(1,"lucide-angular",24),i(2),t()}if(s&2){let l=h();d("disabled",l.isLoading||!l.letterForm.valid),r(),d("size",18),r(),O(" ",l.isLoading?"Generando...":"Generar PDF"," ")}}function Y(s,m){s&1&&(n(0,"div",25),p(1,"lucide-angular",26),t()),s&2&&(r(),d("size",24))}function H(s,m){if(s&1&&(n(0,"div",27)(1,"div",28)(2,"form",29)(3,"div",30)(4,"div",31)(5,"div",32),i(6,"LOGO NSOLUCIONES"),t()(),n(7,"div",33)(8,"div",32),i(9,"LOGO NS"),t()()(),n(10,"div",34),p(11,"input",35),n(12,"div",36),i(13),t()(),n(14,"h2",37),i(15,"CARTA DE NO ADEUDO"),t(),n(16,"p",38),i(17," Mediante la presente dejamos constancia que: "),t(),n(18,"div",39)(19,"div",40),p(20,"input",41),n(21,"span",42),i(22,"DNI:"),t(),p(23,"input",43),t(),n(24,"div",40)(25,"span",44),i(26,"Titular de la cuenta Nro."),t(),p(27,"input",45),t()(),n(28,"div",46)(29,"p"),i(30," Originada(s) en "),n(31,"strong"),i(32,"FINANCIERA OH!"),t(),i(33," S.A, con RUC "),n(34,"strong"),i(35),t(),i(36,", cedido(s) a favor de "),n(37,"strong"),i(38,"NSOLUCIONES CONSULTING S.A.C."),t(),i(39," con RUC "),n(40,"strong"),i(41),t(),i(42,", mediante contrato de trasferencia de cartera crediticia en la modalidad de cesi\xF3n de derechos, quien a la fecha es el actual acreedor, no mantiene deuda o saldo deudor en nuestra empresa sobre el(los) cr\xE9dito(s) antes mencionado(s), registr\xE1ndose en situaci\xF3n de "),n(43,"strong"),i(44,"CANCELADO"),t(),i(45,". "),t()(),n(46,"div",47)(47,"p"),i(48," Y la fecha de cancelaci\xF3n de esta(s) obligaci\xF3n(es) fue el d\xEDa "),p(49,"input",48),n(50,"span",49),i(51),t(),i(52,". "),t()(),n(53,"div",50)(54,"p"),i(55,"Atentamente,"),t()(),n(56,"div",51)(57,"div",52)(58,"div",53),i(59,"FIRMA"),t()(),n(60,"div",54)(61,"p",55),i(62),t(),n(63,"p",56),i(64),t()()(),n(65,"div",57),p(66,"div",58),n(67,"div",59)(68,"p"),i(69),t(),n(70,"p"),i(71),t()()()()()()),s&2){let l,o,e=h();r(2),d("formGroup",e.letterForm),r(11),O(" ",e.formatDisplayDate((l=e.letterForm.get("fechaActual"))==null?null:l.value)," "),r(22),u(e.rucFinanciera),r(6),u(e.rucNsoluciones),r(10),O(" ",e.formatDisplayDate((o=e.letterForm.get("fechaCancelacion"))==null?null:o.value)," "),r(11),u(e.firmaNombre),r(2),u(e.firmaCargo),r(5),u(e.direccion),r(2),u(e.telefono)}}var re=(()=>{let m=class m{constructor(o,e,a){this.fb=o,this.agreementsService=e,this.themeService=a,this.isDarkMode=!1,this.isLoading=!1,this.mostrarDocumento=!1,this.toasts=[],this.toastIdCounter=0,this.entidad="nsoluciones",this.rucFinanciera="20522291201",this.rucNsoluciones="20611923202",this.direccion="Calle Morelli 217, Int 205 San Borja \u2013 Lima \u2013 Per\xFA",this.telefono="+51 915 326 798",this.firmaNombre="Emily Dayana Saenz Martinez",this.firmaCargo="Administraci\xF3n",this.searchForm=this.fb.group({dniBusqueda:["",[g.required,g.pattern(/^\d{8}$/)]]}),this.letterForm=this.fb.group({nombreCompleto:["",g.required],dni:["",[g.required,g.pattern(/^\d{8}$/)]],numeroCuenta:["",g.required],fechaActual:[this.formatDate(new Date),g.required],fechaCancelacion:[this.formatDate(new Date),g.required]}),M(()=>{this.isDarkMode=this.themeService.isDarkMode()})}formatDate(o){return o.toISOString().split("T")[0]}formatDisplayDate(o){if(!o)return"";let[e,a,c]=o.split("-").map(Number);return new Date(e,a-1,c).toLocaleDateString("es-PE",{day:"numeric",month:"long",year:"numeric"}).replace("septiembre","setiembre")}buscarPorDni(){if(this.searchForm.invalid){this.searchForm.markAllAsTouched();return}let o=this.searchForm.get("dniBusqueda")?.value;this.limpiarCampos(),this.searchForm.reset(),this.isLoading=!0,this.agreementsService.getAgreementData(o).subscribe({next:e=>{this.letterForm.patchValue({nombreCompleto:e.nombreDelTitular,dni:o,numeroCuenta:e.cuentaTarjeta,fechaActual:this.formatDate(new Date),fechaCancelacion:this.formatDate(new Date)}),this.mostrarDocumento=!0,this.isLoading=!1,this.showToast("success","Datos cargados correctamente")},error:e=>{this.isLoading=!1,e.status===404?this.showToast("error","Cliente no encontrado en la base de datos."):e.status===422?this.showToast("warning","El cliente no tiene datos registrados."):this.showToast("error","Error al obtener datos del cliente.")}})}generarPDF(){if(!this.letterForm.valid){this.showToast("error","Complete los campos requeridos.");return}this.isLoading=!0;let o=this.letterForm.value,e={entidad:this.entidad,nombreCompleto:o.nombreCompleto,dni:o.dni,numeroCuenta:o.numeroCuenta,fechaActual:this.formatDisplayDate(o.fechaActual),fechaCancelacion:this.formatDisplayDate(o.fechaCancelacion),rucFinanciera:this.rucFinanciera,rucNsoluciones:this.rucNsoluciones};this.agreementsService.downloadNoDebtLetter(e).subscribe({next:a=>{this.downloadFile(a,`CARTA_NO_ADEUDO_${o.dni}.pdf`),this.isLoading=!1,this.showToast("success","Carta de No Adeudo descargada correctamente")},error:a=>{console.error("Error completo:",a),this.isLoading=!1,this.showToast("error",`Error al generar documento: ${a.message||"Error desconocido"}`)}})}downloadFile(o,e){let a=window.URL.createObjectURL(o),c=document.createElement("a");c.href=a,c.download=e,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(a)}limpiarCampos(){this.mostrarDocumento=!1,this.toasts=[],this.letterForm.patchValue({nombreCompleto:"",dni:"",numeroCuenta:"",fechaActual:this.formatDate(new Date),fechaCancelacion:this.formatDate(new Date)})}resetForm(){confirm("Limpiar todos los campos?")&&this.limpiarCampos()}showToast(o,e){let a=o==="error"?"\u274C":o==="warning"?"\u26A0\uFE0F":"\u2705",c=this.toastIdCounter++;this.toasts.push({id:c,type:o,message:e,icon:a}),setTimeout(()=>this.removeToast(c),5e3)}removeToast(o){this.toasts=this.toasts.filter(e=>e.id!==o)}onlyNumbers(o){let e=o.target;e.value=e.value.replace(/[^0-9]/g,"")}};m.\u0275fac=function(e){return new(e||m)(_(q),_(R),_(G))},m.\u0275cmp=P({type:m,selectors:[["app-no-debt-letter-page"]],decls:20,vars:14,consts:[[1,"no-debt-letter-container","min-h-screen","p-6","transition-colors","duration-200"],[1,"toast-container"],["class","toast",3,"toast-error","toast-warning","toast-success",4,"ngFor","ngForOf"],[1,"header-section","bg-white","dark:bg-gray-800","rounded-lg","shadow-md","p-6","mb-6"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-2xl","font-bold","text-gray-800","dark:text-gray-100"],[1,"flex","gap-3"],["type","button","class","btn-secondary",3,"click",4,"ngIf"],["type","button","class","btn-primary",3,"disabled","click",4,"ngIf"],[1,"flex","items-center","gap-3",3,"formGroup"],[1,"flex-1","max-w-xs"],[1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-1"],["formControlName","dniBusqueda","type","text","placeholder","Ingrese DNI","maxlength","8",1,"input-field",3,"input"],["type","button",1,"btn-search","mt-6",3,"click","disabled"],["name","search",3,"size"],["class","mt-6",4,"ngIf"],["class","document-wrapper",4,"ngIf"],[1,"toast"],[1,"toast-icon"],[1,"toast-message"],[1,"toast-close",3,"click"],["type","button",1,"btn-secondary",3,"click"],["name","x",3,"size"],["type","button",1,"btn-primary",3,"click","disabled"],["name","download",3,"size"],[1,"mt-6"],["name","loader",1,"animate-spin","text-blue-600",3,"size"],[1,"document-wrapper"],[1,"document-container","bg-white","shadow-2xl"],[3,"formGroup"],[1,"header-logos"],[1,"logo-left"],[1,"logo-placeholder"],[1,"logo-right"],[1,"fecha-container"],["type","date","formControlName","fechaActual",1,"fecha-input"],[1,"fecha-display"],[1,"titulo-carta"],[1,"texto-introduccion"],[1,"datos-titular"],[1,"dato-row"],["type","text","formControlName","nombreCompleto","readonly","",1,"nombre-input"],[1,"dni-label"],["type","text","formControlName","dni","readonly","",1,"dni-input"],[1,"cuenta-label"],["type","text","formControlName","numeroCuenta","readonly","",1,"cuenta-input"],[1,"parrafo-principal"],[1,"fecha-cancelacion"],["type","date","formControlName","fechaCancelacion",1,"fecha-input","inline-block"],[1,"fecha-display","inline-block"],[1,"despedida"],[1,"firma-section"],[1,"firma-imagen"],[1,"logo-placeholder","small"],[1,"firma-datos"],[1,"firma-nombre"],[1,"firma-cargo"],[1,"footer-section"],[1,"footer-line"],[1,"footer-datos"]],template:function(e,a){if(e&1&&(n(0,"div",0)(1,"div",1),x(2,U,7,8,"div",2),t(),n(3,"div",3)(4,"div",4)(5,"h1",5),i(6," Generador de Carta de No Adeudo "),t(),n(7,"div",6),x(8,B,3,1,"button",7)(9,$,3,3,"button",8),t()(),n(10,"form",9)(11,"div",10)(12,"label",11),i(13," DNI del Cliente "),t(),n(14,"input",12),f("input",function(w){return a.onlyNumbers(w)}),t()(),n(15,"button",13),f("click",function(){return a.buscarPorDni()}),p(16,"lucide-angular",14),i(17," Buscar "),t(),x(18,Y,2,1,"div",15),t()(),x(19,H,72,9,"div",16),t()),e&2){let c;y("bg-gray-50",!a.isDarkMode)("bg-gray-900",a.isDarkMode),r(2),d("ngForOf",a.toasts),r(6),d("ngIf",a.mostrarDocumento),r(),d("ngIf",a.mostrarDocumento),r(),d("formGroup",a.searchForm),r(4),y("border-red-500",((c=a.searchForm.get("dniBusqueda"))==null?null:c.invalid)&&((c=a.searchForm.get("dniBusqueda"))==null?null:c.touched)),r(),d("disabled",a.searchForm.invalid||a.isLoading),r(),d("size",18),r(2),d("ngIf",a.isLoading),r(),d("ngIf",a.mostrarDocumento)}},dependencies:[E,D,S,j,A,F,I,L,V,T,z,k,N],styles:[".no-debt-letter-container[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto}.toast-container[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;z-index:9999;display:flex;flex-direction:column;gap:10px}.toast[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 16px;border-radius:8px;box-shadow:0 4px 12px #00000026;min-width:300px;max-width:500px;animation:_ngcontent-%COMP%_slideIn .3s ease-out;background:#fff}.toast-error[_ngcontent-%COMP%]{border-left:4px solid #ef4444}.toast-warning[_ngcontent-%COMP%]{border-left:4px solid #f59e0b}.toast-success[_ngcontent-%COMP%]{border-left:4px solid #10b981}.toast-icon[_ngcontent-%COMP%]{font-size:20px;flex-shrink:0}.toast-message[_ngcontent-%COMP%]{flex:1;font-size:14px;color:#374151}.toast-close[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;color:#9ca3af;cursor:pointer;padding:0;width:24px;height:24px;display:flex;align-items:center;justify-content:center;border-radius:4px;transition:all .2s}.toast-close[_ngcontent-%COMP%]:hover{background:#f3f4f6;color:#374151}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translate(400px);opacity:0}to{transform:translate(0);opacity:1}}.btn-primary[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:10px 20px;background:linear-gradient(135deg,#3b82f6,#8b5cf6);color:#fff;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:all .3s;box-shadow:0 4px 6px #3b82f64d}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 12px #3b82f666}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-secondary[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:10px 20px;background:#fff;color:#6b7280;border:2px solid #e5e7eb;border-radius:8px;font-weight:600;cursor:pointer;transition:all .3s}.btn-secondary[_ngcontent-%COMP%]:hover{background:#f9fafb;border-color:#d1d5db}.btn-search[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:10px 20px;background:#3b82f6;color:#fff;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:all .3s}.btn-search[_ngcontent-%COMP%]:hover:not(:disabled){background:#2563eb}.btn-search[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.input-field[_ngcontent-%COMP%]{width:100%;padding:10px 14px;border:2px solid #e5e7eb;border-radius:8px;font-size:14px;transition:all .3s;background:#fff;color:#111827}.input-field[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.input-field[_ngcontent-%COMP%]:disabled{background:#f3f4f6;cursor:not-allowed}.dark[_nghost-%COMP%]   .input-field[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .input-field[_ngcontent-%COMP%]{background:#374151;border-color:#4b5563;color:#f9fafb}.document-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:20px 0}.document-container[_ngcontent-%COMP%]{width:21cm;min-height:29.7cm;padding:2cm;background:#fff;box-shadow:0 0 20px #0000001a;position:relative}.header-logos[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:40px}.logo-placeholder[_ngcontent-%COMP%]{display:inline-block;padding:10px 20px;background:#ecf0f1;border:2px dashed #bdc3c7;color:#7f8c8d;font-weight:700;font-size:12px}.logo-placeholder.small[_ngcontent-%COMP%]{padding:5px 10px;font-size:10px}.fecha-container[_ngcontent-%COMP%]{text-align:right;margin-bottom:40px;position:relative}.fecha-input[_ngcontent-%COMP%]{position:absolute;right:0;opacity:0;width:0;height:0;pointer-events:none}.fecha-display[_ngcontent-%COMP%]{font-size:14px;color:#000}.titulo-carta[_ngcontent-%COMP%]{text-align:center;font-size:18px;font-weight:700;margin:30px 0;color:#000}.texto-introduccion[_ngcontent-%COMP%]{font-size:14px;margin-bottom:20px;color:#000}.datos-titular[_ngcontent-%COMP%]{margin:20px 0}.dato-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;font-size:14px;color:#000}.nombre-input[_ngcontent-%COMP%]{border:none;background:transparent;font-weight:700;font-size:14px;color:#000;padding:0;min-width:300px;text-transform:uppercase}.nombre-input[_ngcontent-%COMP%]:focus{outline:none}.dni-label[_ngcontent-%COMP%]{font-weight:400;margin-left:auto}.dni-input[_ngcontent-%COMP%]{border:none;background:transparent;font-weight:700;font-size:14px;color:#000;padding:0;width:80px;text-align:right}.dni-input[_ngcontent-%COMP%]:focus{outline:none}.cuenta-label[_ngcontent-%COMP%]{font-weight:400}.cuenta-input[_ngcontent-%COMP%]{border:none;background:transparent;font-weight:700;font-size:14px;color:#000;padding:0;width:200px}.cuenta-input[_ngcontent-%COMP%]:focus{outline:none}.parrafo-principal[_ngcontent-%COMP%]{margin:30px 0;font-size:14px;line-height:1.8;text-align:justify;color:#000}.parrafo-principal[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:700}.fecha-cancelacion[_ngcontent-%COMP%]{margin:30px 0;font-size:14px;color:#000}.despedida[_ngcontent-%COMP%]{margin:50px 0 20px;font-size:14px;color:#000;text-align:center}.firma-section[_ngcontent-%COMP%]{margin:40px 0 60px;display:flex;flex-direction:column;align-items:center}.firma-imagen[_ngcontent-%COMP%]{margin-bottom:10px}.firma-datos[_ngcontent-%COMP%]{text-align:center}.firma-nombre[_ngcontent-%COMP%]{font-weight:400;font-size:14px;margin:5px 0 0;color:#000}.firma-cargo[_ngcontent-%COMP%]{font-size:14px;margin:5px 0 0;color:#000}.footer-section[_ngcontent-%COMP%]{position:absolute;bottom:2cm;left:2cm;right:2cm}.footer-line[_ngcontent-%COMP%]{width:100%;height:1px;background:#000;margin-bottom:10px}.footer-datos[_ngcontent-%COMP%]{text-align:center;font-size:12px;color:#666;font-family:Arial Narrow,Arial,sans-serif}.footer-datos[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:2px 0}@media print{.header-section[_ngcontent-%COMP%]{display:none!important}.document-wrapper[_ngcontent-%COMP%]{padding:0}.document-container[_ngcontent-%COMP%]{box-shadow:none;margin:0}.toast-container[_ngcontent-%COMP%]{display:none!important}}"]});let s=m;return s})();export{re as NoDebtLetterPageComponent};
