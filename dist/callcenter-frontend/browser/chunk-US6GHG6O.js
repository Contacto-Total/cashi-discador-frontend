import{a as $}from"./chunk-25SQIUEF.js";import{a as Y}from"./chunk-G2AHVVCT.js";import{c as V}from"./chunk-4QMVQERR.js";import"./chunk-3XLV6A3K.js";import{D as W,e as B,j,r as q,s as H,t as G}from"./chunk-4T7YNYFA.js";import{Rb as A,Sb as k}from"./chunk-XLQ3V3R5.js";import{$a as a,Ac as L,Kb as s,Lb as e,Mb as t,Nb as m,Ub as M,Wb as f,Yb as u,cd as R,dd as y,fb as S,hc as I,hd as N,ic as w,jd as C,kc as i,lc as p,ma as b,mb as E,mc as x,na as v,nc as T,pc as D,qc as P,rb as g,rc as O,yc as F,za as z}from"./chunk-S5LLKQFC.js";function X(d,c){d&1&&(e(0,"span",3),i(1,"!"),t())}var U=(()=>{let c=class c{constructor(){this.color="verde",this.excedido=!1,this.size=18,this.tooltip="",this.tooltipText=""}ngOnChanges(n){this.updateTooltip()}updateTooltip(){if(this.tooltip)this.tooltipText=this.tooltip;else switch(this.color){case"verde":this.tooltipText="Tiempo normal";break;case"amarillo":this.tooltipText="Acerc\xE1ndose al l\xEDmite";break;case"rojo":this.tooltipText=this.excedido?"Tiempo excedido":"Tiempo cr\xEDtico";break}}};c.\u0275fac=function(o){return new(o||c)},c.\u0275cmp=E({type:c,selectors:[["app-status-alarm-clock"]],inputs:{color:"color",excedido:"excedido",size:"size",tooltip:"tooltip"},features:[z],decls:3,vars:13,consts:[[1,"alarm-clock-container",3,"title"],["name","alarm-clock",1,"alarm-icon",3,"size"],["class","exclamation",4,"ngIf"],[1,"exclamation"]],template:function(o,l){o&1&&(e(0,"div",0),m(1,"lucide-angular",1),g(2,X,2,0,"span",2),t()),o&2&&(w("verde",l.color==="verde")("amarillo",l.color==="amarillo")("rojo",l.color==="rojo")("pulse",l.color==="rojo")("shake",l.excedido),s("title",l.tooltipText),a(),s("size",l.size),a(),s("ngIf",l.excedido))},dependencies:[C,y,k,A],styles:[".alarm-clock-container[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;position:relative;padding:6px;border-radius:50%;transition:all .3s ease;cursor:default}.alarm-clock-container.verde[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);box-shadow:0 2px 8px #10b98166}.alarm-clock-container.verde[_ngcontent-%COMP%]   .alarm-icon[_ngcontent-%COMP%]{color:#fff}.alarm-clock-container.amarillo[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706);box-shadow:0 2px 8px #f59e0b66}.alarm-clock-container.amarillo[_ngcontent-%COMP%]   .alarm-icon[_ngcontent-%COMP%]{color:#fff}.alarm-clock-container.rojo[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626);box-shadow:0 2px 12px #ef444480}.alarm-clock-container.rojo[_ngcontent-%COMP%]   .alarm-icon[_ngcontent-%COMP%]{color:#fff}.alarm-clock-container.pulse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 1.5s ease-in-out infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1);box-shadow:0 2px 12px #ef444480}50%{transform:scale(1.1);box-shadow:0 4px 20px #ef4444b3}}.alarm-clock-container.shake[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_shake .5s ease-in-out infinite,_ngcontent-%COMP%_pulse 1.5s ease-in-out infinite}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:rotate(0)}25%{transform:rotate(-5deg)}75%{transform:rotate(5deg)}}.exclamation[_ngcontent-%COMP%]{position:absolute;top:-4px;right:-4px;background:#fff;color:#ef4444;font-size:10px;font-weight:700;width:14px;height:14px;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 1px 3px #0003;animation:_ngcontent-%COMP%_bounce 1s ease infinite}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:translateY(0)}50%{transform:translateY(-2px)}}.alarm-icon[_ngcontent-%COMP%]{display:block}"]});let d=c;return d})();function K(d,c){if(d&1&&(e(0,"option",34),i(1),t()),d&2){let r=c.$implicit;s("value",r.id),a(),T(" ",r.name," (",r.status,") ")}}function ee(d,c){if(d&1&&(e(0,"div",35)(1,"h3"),m(2,"lucide-angular",36),i(3," M\xE9tricas del Auto-Dialer en Tiempo Real"),t(),e(4,"div",37)(5,"div",38)(6,"span",39),m(7,"lucide-angular",36),t(),e(8,"div",40)(9,"span",41),i(10),t(),e(11,"span",42),i(12,"Total llamadas"),t()()(),e(13,"div",38)(14,"span",39),m(15,"lucide-angular",43),t(),e(16,"div",40)(17,"span",41),i(18),t(),e(19,"span",42),i(20,"Llamadas en cola"),t()()(),e(21,"div",38)(22,"span",39),m(23,"lucide-angular",44),t(),e(24,"div",40)(25,"span",41),i(26),t(),e(27,"span",42),i(28,"Llamadas conectadas"),t()()(),e(29,"div",38)(30,"span",39),m(31,"lucide-angular",45),t(),e(32,"div",40)(33,"span",41),i(34),t(),e(35,"span",42),i(36,"Llamadas por realizar"),t()()(),e(37,"div",38)(38,"span",39),m(39,"lucide-angular",18),t(),e(40,"div",40)(41,"span",41),i(42),t(),e(43,"span",42),i(44,"Llamadas siendo marcadas"),t()()(),e(45,"div",38)(46,"span",39),m(47,"lucide-angular",46),t(),e(48,"div",40)(49,"span",41),i(50),t(),e(51,"span",42),i(52,"Llamadas siendo procesadas"),t()()(),e(53,"div",38)(54,"span",39),m(55,"lucide-angular",47),t(),e(56,"div",40)(57,"span",41),i(58),t(),e(59,"span",42),i(60,"Llamadas fallidas"),t()()(),e(61,"div",38)(62,"span",39),m(63,"lucide-angular",48),t(),e(64,"div",40)(65,"span",41),i(66),t(),e(67,"span",42),i(68,"Llamadas no contestadas"),t()()(),e(69,"div",38)(70,"span",39),m(71,"lucide-angular",49),t(),e(72,"div",40)(73,"span",41),i(74),t(),e(75,"span",42),i(76,"Llamadas abandonadas"),t()()(),e(77,"div",38)(78,"span",39),m(79,"lucide-angular",43),t(),e(80,"div",40)(81,"span",41),i(82),t(),e(83,"span",42),i(84,"Duraci\xF3n promedio de llamada"),t()()(),e(85,"div",38)(86,"span",39),m(87,"lucide-angular",50),t(),e(88,"div",40)(89,"span",41),i(90),t(),e(91,"span",42),i(92,"Duraci\xF3n m\xE1xima de llamada"),t()()()()()),d&2){let r=u();a(2),s("size",20),a(5),s("size",24),a(3),p(r.autoDialerStats.totalLlamadas),a(5),s("size",24),a(3),p(r.autoDialerStats.llamadasEnCola),a(5),s("size",24),a(3),p(r.autoDialerStats.llamadasConectadas),a(5),s("size",24),a(3),p(r.autoDialerStats.contactosPendientes),a(5),s("size",24),a(3),p(r.autoDialerStats.llamadasMarcando),a(5),s("size",24),a(3),p(r.autoDialerStats.llamadasActivas),a(5),s("size",24),a(3),p(r.autoDialerStats.contactosFallidos),a(5),s("size",24),a(3),p(r.autoDialerStats.llamadasNoContestadas),a(5),s("size",24),a(3),p(r.autoDialerStats.llamadasAbandonadas),a(5),s("size",24),a(3),p(r.autoDialerStats.duracionPromedioFormato),a(5),s("size",24),a(3),p(r.autoDialerStats.duracionMaximaFormato)}}function te(d,c){if(d&1&&(e(0,"tr",51)(1,"td",52),i(2),F(3,"date"),t(),e(4,"td",53),i(5),t(),e(6,"td",54),i(7),t(),e(8,"td",55)(9,"span",56),i(10),t()(),e(11,"td",57),i(12),t()()),d&2){let r=c.$implicit,n=u();a(2),p(L(3,5,r.fechaInicio,"HH:mm:ss")),a(3),p(r.anexoDestino),a(2),p(r.nombreAgente),a(3),p(r.estadoLlamada),a(2),p(n.formatTiempo(r.duracionSegundos))}}function ae(d,c){d&1&&(e(0,"tr",58)(1,"td",59),i(2," No hay llamadas en curso "),t()())}function ie(d,c){if(d&1&&(e(0,"tr",60)(1,"td",61)(2,"div",62),i(3),t(),e(4,"div",63),i(5),t()(),e(6,"td",64)(7,"span",65),m(8,"lucide-angular",66),i(9),t()(),e(10,"td",67),i(11),t(),e(12,"td",68),i(13),t(),e(14,"td",69),m(15,"app-status-alarm-clock",70),t()()),d&2){let r=c.$implicit,n=u();w("alert-row",r.excedeTiempoMaximo),a(3),x("SIP/",r.sipExtension),a(2),p(r.nombreCompleto),a(2),I("background-color",n.getEstadoColor(r.estadoActual)),a(),s("name",n.getEstadoIcon(r.estadoActual))("size",14),a(),x(" ",n.getEstadoTexto(r.estadoActual)," "),a(2),x(" ",r.telefonoDestino||"-"," "),a(2),x(" ",n.formatTiempo(r.segundosEnEstado)," "),a(2),s("color",r.colorIndicador)("excedido",r.excedeTiempoMaximo)("size",20)("tooltip",r.mensajeAlerta||"")}}function ne(d,c){d&1&&(e(0,"tr",58)(1,"td",59),i(2," No hay agentes registrados "),t()())}function re(d,c){if(d&1){let r=M();e(0,"div",71),f("click",function(o){b(r);let l=u();return v(l.onOverlayClick(o))}),e(1,"div",72)(2,"button",73),f("click",function(){b(r);let o=u();return v(o.dismissAlert())}),m(3,"lucide-angular",74),t(),e(4,"div",75)(5,"div",76),m(6,"lucide-angular",77),t(),e(7,"h3"),i(8,"Alerta de Agente"),t()(),e(9,"div",78)(10,"div",79)(11,"div",80),m(12,"lucide-angular",81),t(),e(13,"div",82)(14,"span",83),i(15),t(),e(16,"span",84),i(17),t()()(),e(18,"div",85)(19,"span",86),i(20,"Estado:"),t(),e(21,"span",87),i(22),t()(),e(23,"div",88),m(24,"lucide-angular",43),e(25,"span"),i(26,"Tiempo en estado: "),e(27,"strong"),i(28),t()()(),e(29,"div",89),m(30,"lucide-angular",90),e(31,"span"),i(32),t()()(),e(33,"div",91)(34,"button",92),f("click",function(){b(r);let o=u();return v(o.dismissAlert())}),i(35," Entendido "),t()()()()}if(d&2){let r=u();a(3),s("size",20),a(3),s("size",32),a(6),s("size",24),a(3),p(r.alertaActiva.agente.nombreCompleto),a(2),x("SIP/",r.alertaActiva.agente.sipExtension),a(4),I("background-color",r.getEstadoColor(r.alertaActiva.agente.estadoActual)),a(),x(" ",r.getEstadoTexto(r.alertaActiva.agente.estadoActual)," "),a(2),s("size",18),a(4),p(r.formatTiempo(r.alertaActiva.agente.segundosEnEstado)),a(2),s("size",18),a(2),p(r.alertaActiva.agente.mensajeAlerta)}}var he=(()=>{let c=class c{constructor(n,o,l){this.campaignService=n,this.autoDialerService=o,this.router=l,this.campaigns=[],this.selectedCampaignId=null,this.loadingCampaigns=!1,this.autoDialerStats=null,this.agentesMonitoreo=[],this.llamadasEnTiempoReal=[],this.alertaActiva=null,this.alertasDismissed=new Set,this.alarmAudio=null}ngOnInit(){this.initAlarmAudio(),this.loadCampaigns(),this.startAutoDialerPolling(),this.startAgentesPolling(),this.startLlamadasPolling()}ngOnDestroy(){this.autoDialerSubscription&&this.autoDialerSubscription.unsubscribe(),this.agentesSubscription&&this.agentesSubscription.unsubscribe(),this.llamadasSubscription&&this.llamadasSubscription.unsubscribe(),this.stopAlarm()}initAlarmAudio(){this.alarmAudio=new Audio,this.alarmAudio.src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdH2LkZuam5aTiXxsWk1EU2h9j5yhpqSfloV0X0g4OExfc4iaqrCxraSWg2xTPC00RFtxh5mqtLi1raCPeV9GMTAvRFpwh5iqtLi1raCQeWBHMTAwRVtxh5iqtLi1raCPeV9GMTEvRFpxiJmqtLm1raCQeV9HMjAvRVtxh5mqtLi0rJ+PeF5FMS8vRFpwh5mqtLm1raCQeWBGMTAvRVtxh5mqtLi1raCPeV9HMTAwRVtxh5mqtLi1raCPeWBHMTAwRVxxiJmqtLi1raCQeWBGMTAwRVtxh5mqtLi0rJ+PeF5FMS8vRFpwh5mqtLm1raCQeWBGMTAvRVtxh5mqtLi1raCPeV9HMTAwRVtxh5mqtLi1raCPeWBHMTAwRVxxiJmqtLi1raCQeWBGMTAwRVtxh5mqtLi0rJ+PeF5FMS8vRFpwh5mqtLm1",this.alarmAudio.loop=!0}loadCampaigns(){this.loadingCampaigns=!0,this.campaignService.getAllCampaigns().subscribe({next:n=>{if(this.campaigns=n,this.loadingCampaigns=!1,n.length>0&&!this.selectedCampaignId){let o=n.find(l=>l.status==="ACTIVE");this.selectedCampaignId=o?.id||n[0].id||null}},error:n=>{console.error("Error loading campaigns:",n),this.loadingCampaigns=!1}})}onCampaignChange(){console.log("Selected campaign changed to:",this.selectedCampaignId),this.autoDialerSubscription&&this.autoDialerSubscription.unsubscribe(),this.startAutoDialerPolling(),this.llamadasSubscription&&this.llamadasSubscription.unsubscribe(),this.startLlamadasPolling()}startAutoDialerPolling(){let n=this.selectedCampaignId||void 0;this.autoDialerSubscription=this.autoDialerService.startStatsPolling(n).subscribe({next:o=>{this.autoDialerStats=o},error:o=>{console.error("Error polling auto-dialer stats:",o)}})}startAgentesPolling(){this.agentesSubscription=this.autoDialerService.startAgentesPolling().subscribe({next:n=>{this.agentesMonitoreo=n,this.checkAgentAlerts(n)},error:n=>{console.error("Error polling agentes:",n)}})}checkAgentAlerts(n){if(!this.alertaActiva){for(let o of n)if(o.excedeTiempoMaximo&&o.mensajeAlerta){let l=`${o.idUsuario}-${o.estadoActual}`;if(this.alertasDismissed.has(l))continue;this.showAlert(o);break}}}showAlert(n){this.alertaActiva={agente:n,timestamp:new Date},n.sonidoAlerta&&this.playAlarm()}dismissAlert(){if(this.alertaActiva){let n=`${this.alertaActiva.agente.idUsuario}-${this.alertaActiva.agente.estadoActual}`;this.alertasDismissed.add(n),this.alertaActiva=null,this.stopAlarm()}}onOverlayClick(n){n.target.classList.contains("alert-overlay")&&this.dismissAlert()}playAlarm(){this.alarmAudio&&(this.alarmAudio.currentTime=0,this.alarmAudio.play().catch(n=>{console.warn("No se pudo reproducir la alarma:",n)}))}stopAlarm(){this.alarmAudio&&(this.alarmAudio.pause(),this.alarmAudio.currentTime=0)}clearDismissedForAgent(n){let o=[];this.alertasDismissed.forEach(l=>{l.startsWith(`${n}-`)&&o.push(l)}),o.forEach(l=>this.alertasDismissed.delete(l))}startLlamadasPolling(){let n=this.selectedCampaignId||void 0;this.llamadasSubscription=this.autoDialerService.startLlamadasPolling(n).subscribe({next:o=>{this.llamadasEnTiempoReal=o},error:o=>{console.error("Error polling llamadas en tiempo real:",o)}})}getCurrentTime(){return new Date().toLocaleTimeString("es-PE",{hour12:!1})}getEstadoColor(n){switch(n){case"DISPONIBLE":return"#10B981";case"EN_LLAMADA":return"#3B82F6";case"DESCONECTADO":return"#EF4444";case"PAUSADO":return"#F59E0B";case"EN_REUNION":return"#8B5CF6";case"REFRIGERIO":return"#F59E0B";case"SSHH":return"#F59E0B";case"TIPIFICANDO":return"#06B6D4";default:return"#6B7280"}}getEstadoIcon(n){switch(n){case"DISPONIBLE":return"circle";case"EN_LLAMADA":return"phone-call";case"DESCONECTADO":return"circle";case"PAUSADO":return"pause";case"EN_REUNION":return"users";case"REFRIGERIO":return"coffee";case"SSHH":return"user";case"TIPIFICANDO":return"edit";default:return"circle"}}getEstadoTexto(n){switch(n){case"DISPONIBLE":return"Libre";case"EN_LLAMADA":return"En Llamada";case"DESCONECTADO":return"Desconectado";case"PAUSADO":return"Pausado";case"EN_REUNION":return"En Reuni\xF3n";case"REFRIGERIO":return"Refrigerio";case"SSHH":return"SSHH";case"TIPIFICANDO":return"Tipificando";default:return n}}formatTiempo(n){if(!n||n<0)return"-";let o=Math.floor(n/3600),l=Math.floor(n%3600/60),h=n%60;return o>0?`${o.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}:${h.toString().padStart(2,"0")}`:`${l.toString().padStart(2,"0")}:${h.toString().padStart(2,"0")}`}goBack(){this.router.navigate(["/admin/campaigns"])}navigateToExtensions(){this.router.navigate(["/admin/extensions"])}};c.\u0275fac=function(o){return new(o||c)(S(Y),S($),S(V))},c.\u0275cmp=E({type:c,selectors:[["app-campaign-monitoring"]],decls:72,vars:14,consts:[[1,"monitoring-container"],[1,"flex","items-center","gap-2","mb-2"],[1,"w-8","h-8","bg-gradient-to-br","from-blue-600","to-blue-700","rounded-lg","flex","items-center","justify-center"],["name","bar-chart-2",1,"text-white",3,"size"],[1,"text-lg","font-bold","text-white"],[1,"text-xs","text-gray-400"],[1,"header"],[1,"btn-back",3,"click"],["name","arrow-left",3,"size"],[1,"campaign-selector"],["for","campaignSelect"],["id","campaignSelect",1,"campaign-select",3,"ngModelChange","change","ngModel"],["disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],["class","metrics-panel",4,"ngIf"],[1,"two-column-layout"],[1,"left-column"],[1,"discado-panel"],["name","phone-call",3,"size"],[1,"discado-table-container"],[1,"discado-table"],["class","llamada-row",4,"ngFor","ngForOf"],["class","empty-row",4,"ngIf"],[1,"right-column"],[1,"agentes-panel"],[1,"agentes-header"],["name","users",3,"size"],[1,"btn-view-all",3,"click"],["name","phone",3,"size"],[1,"agentes-table-container"],[1,"agentes-table"],[2,"width","50px","text-align","center"],["class","agente-row",3,"alert-row",4,"ngFor","ngForOf"],["class","alert-overlay",3,"click",4,"ngIf"],[3,"value"],[1,"metrics-panel"],["name","bar-chart-2",3,"size"],[1,"metrics-grid"],[1,"metric-item"],[1,"metric-icon"],[1,"metric-info"],[1,"metric-value"],[1,"metric-label"],["name","clock",3,"size"],["name","check-circle",3,"size"],["name","clipboard-list",3,"size"],["name","activity",3,"size"],["name","x-circle",3,"size"],["name","phone-missed",3,"size"],["name","phone-off",3,"size"],["name","timer",3,"size"],[1,"llamada-row"],[1,"llamada-hora"],[1,"llamada-telefono"],[1,"llamada-agente"],[1,"llamada-estado"],[1,"estado-badge-mini"],[1,"llamada-duracion"],[1,"empty-row"],["colspan","5",2,"text-align","center","color","#94a3b8"],[1,"agente-row"],[1,"agente-info"],[1,"agente-extension"],[1,"agente-nombre"],[1,"agente-estado"],[1,"estado-badge"],[3,"name","size"],[1,"agente-telefono"],[1,"agente-tiempo"],[1,"agente-alerta",2,"text-align","center"],[3,"color","excedido","size","tooltip"],[1,"alert-overlay",3,"click"],[1,"alert-modal"],[1,"alert-close",3,"click"],["name","x",3,"size"],[1,"alert-header"],[1,"alert-icon-container"],["name","alert-triangle",1,"alert-icon",3,"size"],[1,"alert-body"],[1,"alert-agent-info"],[1,"agent-avatar"],["name","user",3,"size"],[1,"agent-details"],[1,"agent-name"],[1,"agent-extension"],[1,"alert-status"],[1,"status-label"],[1,"status-badge"],[1,"alert-time"],[1,"alert-message"],["name","alert-circle",3,"size"],[1,"alert-footer"],[1,"btn-dismiss",3,"click"]],template:function(o,l){o&1&&(e(0,"div",0)(1,"div",1)(2,"div",2),m(3,"lucide-angular",3),t(),e(4,"div")(5,"h1",4),i(6,"Monitoreo por Campa\xF1a"),t(),e(7,"p",5),i(8,"M\xE9tricas del auto-dialer en tiempo real"),t()()(),e(9,"div",6)(10,"button",7),f("click",function(){return l.goBack()}),m(11,"lucide-angular",8),e(12,"span"),i(13,"Volver a Campa\xF1as"),t()()(),e(14,"div",9)(15,"label",10),i(16,"Seleccionar Campa\xF1a:"),t(),e(17,"select",11),O("ngModelChange",function(_){return P(l.selectedCampaignId,_)||(l.selectedCampaignId=_),_}),f("change",function(){return l.onCampaignChange()}),e(18,"option",12),i(19,"-- Seleccione una campa\xF1a --"),t(),g(20,K,2,3,"option",13),t()(),g(21,ee,93,23,"div",14),e(22,"div",15)(23,"div",16)(24,"div",17)(25,"h3"),m(26,"lucide-angular",18),i(27," Discado en Tiempo Real"),t(),e(28,"div",19)(29,"table",20)(30,"thead")(31,"tr")(32,"th"),i(33,"Hora"),t(),e(34,"th"),i(35,"Tel\xE9fono"),t(),e(36,"th"),i(37,"Agente"),t(),e(38,"th"),i(39,"Estado"),t(),e(40,"th"),i(41,"Duraci\xF3n"),t()()(),e(42,"tbody"),g(43,te,13,8,"tr",21)(44,ae,3,0,"tr",22),t()()()()(),e(45,"div",23)(46,"div",24)(47,"div",25)(48,"h3"),m(49,"lucide-angular",26),i(50," Agentes en Tiempo Real"),t(),e(51,"button",27),f("click",function(){return l.navigateToExtensions()}),m(52,"lucide-angular",28),i(53," Ver Extensiones "),t()(),e(54,"div",29)(55,"table",30)(56,"thead")(57,"tr")(58,"th"),i(59,"Agente"),t(),e(60,"th"),i(61,"Estado"),t(),e(62,"th"),i(63,"Tel\xE9fono"),t(),e(64,"th"),i(65,"Tiempo"),t(),e(66,"th",31),i(67,"Alerta"),t()()(),e(68,"tbody"),g(69,ie,16,15,"tr",32)(70,ne,3,0,"tr",22),t()()()()()()(),g(71,re,36,12,"div",33)),o&2&&(a(3),s("size",16),a(8),s("size",18),a(6),D("ngModel",l.selectedCampaignId),a(),s("value",null),a(2),s("ngForOf",l.campaigns),a(),s("ngIf",l.autoDialerStats),a(5),s("size",20),a(17),s("ngForOf",l.llamadasEnTiempoReal),a(),s("ngIf",l.llamadasEnTiempoReal.length===0),a(5),s("size",20),a(3),s("size",16),a(17),s("ngForOf",l.agentesMonitoreo),a(),s("ngIf",l.agentesMonitoreo.length===0),a(),s("ngIf",l.alertaActiva))},dependencies:[C,R,y,W,H,G,q,B,j,k,A,U,N],styles:[`.monitoring-container{min-height:100vh;background:linear-gradient(to bottom right,#0f172a,#1e293b,#0f172a);padding:1.5rem!important;max-width:1600px;margin:0 auto}.header{display:flex;align-items:center;gap:1rem;margin-bottom:1.5rem;padding-bottom:1rem;border-bottom:1px solid #334155}.header h1{margin:0;font-size:1.5rem;color:#fff;font-weight:600}.btn-back{display:flex;align-items:center;gap:.5rem;background:#ffffff1a;border:1px solid #334155;color:#fff;padding:.6rem 1rem;border-radius:8px;cursor:pointer;font-size:.9rem;transition:all .3s}.btn-back:hover{background:#ffffff26;transform:translate(-3px)}.campaign-selector{background:#1e293b;border:1px solid #334155;border-radius:8px;padding:1rem;margin-bottom:1.5rem;display:flex;align-items:center;gap:1rem}.campaign-selector label{color:#fff;font-weight:600;font-size:.95rem;white-space:nowrap}.campaign-select{flex:1;max-width:500px;background:#0a0e27;border:1px solid #334155;border-radius:6px;padding:.7rem;color:#fff;font-size:.95rem;transition:border .3s;cursor:pointer}.campaign-select:focus{outline:none;border-color:#10b981}.campaign-select option{background:#0a0e27;color:#fff}.metrics-panel{background:#1e293b;border:1px solid #334155;border-radius:8px;padding:1rem;margin-bottom:1.5rem}.metrics-panel h3{margin:0 0 1rem;font-size:.95rem;color:#fff;font-weight:600}.metrics-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:.8rem}.metric-item{background:#0a0e27;border:1px solid #334155;border-radius:6px;padding:.7rem;display:flex;align-items:center;gap:.7rem;transition:transform .2s,box-shadow .2s}.metric-item:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000004d}.metric-icon{font-size:1.5rem;flex-shrink:0}.metric-info{display:flex;flex-direction:column;min-width:0}.metric-value{font-size:1.3rem;font-weight:700;color:#10b981;line-height:1.2}.metric-label{font-size:.7rem;color:#94a3b8;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.two-column-layout{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem;height:calc(100vh - 400px);min-height:500px}.left-column{display:flex;flex-direction:column;background:#1e293b;border:1px solid #334155;border-radius:8px;overflow:hidden}.discado-panel{flex:1;display:flex;flex-direction:column;overflow:hidden}.discado-panel h3{margin:0;padding:1rem;font-size:.95rem;color:#fff;font-weight:600;background:#0a0e27;border-bottom:1px solid #334155}.discado-table-container{flex:1;overflow-y:auto;overflow-x:auto}.discado-table-container::-webkit-scrollbar{width:8px;height:8px}.discado-table-container::-webkit-scrollbar-track{background:#0a0e27}.discado-table-container::-webkit-scrollbar-thumb{background:#334155;border-radius:4px}.discado-table-container::-webkit-scrollbar-thumb:hover{background:#475569}.discado-table{width:100%;border-collapse:collapse;font-size:.8rem}.discado-table thead{position:sticky;top:0;background:#0a0e27;z-index:10}.discado-table th{padding:.7rem .8rem;text-align:left;font-weight:600;color:#94a3b8;font-size:.75rem;text-transform:uppercase;border-bottom:1px solid #334155}.discado-table tbody tr{transition:background-color .2s;animation:fadeIn .3s ease-in}@keyframes fadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.llamada-row:hover{background:#3b82f60d}.discado-table td{padding:.7rem .8rem;border-bottom:1px solid #334155;color:#e2e8f0}.llamada-hora{font-family:monospace;font-size:.75rem;color:#94a3b8}.llamada-telefono{font-family:monospace;font-size:.8rem;color:#10b981;font-weight:600}.llamada-agente{font-size:.75rem;color:#e2e8f0}.llamada-estado{text-align:center}.estado-badge-mini{display:inline-block;padding:.2rem .5rem;border-radius:50px;background:#3b82f6;color:#fff;font-size:.7rem;font-weight:600;white-space:nowrap}.llamada-duracion{font-family:monospace;font-size:.75rem;font-weight:600;color:#10b981;text-align:center}.right-column{display:flex;flex-direction:column}.agentes-panel{flex:1;background:#1e293b;border:1px solid #334155;border-radius:8px;overflow:hidden;display:flex;flex-direction:column}.agentes-header{display:flex;justify-content:space-between;align-items:center;padding:1rem;background:#0a0e27;border-bottom:1px solid #334155}.agentes-panel h3{margin:0;font-size:.95rem;color:#fff;font-weight:600}.btn-view-all{padding:6px 12px;background:#3b82f6;color:#fff;border:none;border-radius:6px;cursor:pointer;font-size:13px;font-weight:500;transition:all .3s}.btn-view-all:hover{background:#2563eb;transform:translateY(-2px)}.agentes-table-container{flex:1;overflow-y:auto;overflow-x:auto}.agentes-table-container::-webkit-scrollbar{width:8px;height:8px}.agentes-table-container::-webkit-scrollbar-track{background:#0a0e27}.agentes-table-container::-webkit-scrollbar-thumb{background:#334155;border-radius:4px}.agentes-table-container::-webkit-scrollbar-thumb:hover{background:#475569}.agentes-table{width:100%;border-collapse:collapse;font-size:.8rem}.agentes-table thead{position:sticky;top:0;background:#0a0e27;z-index:10}.agentes-table th{padding:.7rem .8rem;text-align:left;font-weight:600;color:#94a3b8;font-size:.75rem;text-transform:uppercase;border-bottom:1px solid #334155}.agentes-table tbody tr{transition:background-color .2s}.agente-row:hover{background:#10b9810d}.agentes-table td{padding:.7rem .8rem;border-bottom:1px solid #334155;color:#e2e8f0}.agente-info{display:flex;flex-direction:column;gap:.2rem}.agente-extension{font-size:.75rem;color:#10b981;font-weight:600;font-family:monospace}.agente-nombre{font-size:.7rem;color:#94a3b8;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:180px}.agente-estado{text-align:center}.estado-badge{display:inline-flex;align-items:center;gap:.3rem;padding:.3rem .6rem;border-radius:50px;color:#fff;font-size:.7rem;font-weight:600;white-space:nowrap}.agente-telefono{font-family:monospace;font-size:.75rem;color:#e2e8f0}.agente-tiempo{font-family:monospace;font-size:.75rem;font-weight:600;color:#10b981;text-align:center}.empty-row td{padding:2rem 1rem}@media (max-width: 1200px){.two-column-layout{grid-template-columns:1fr;height:auto}.left-column,.right-column{min-height:400px;max-height:500px}.metrics-grid{grid-template-columns:repeat(auto-fit,minmax(120px,1fr))}}@media (max-width: 768px){.monitoring-container{padding:1rem}.header{flex-direction:column;align-items:flex-start;gap:.5rem}.campaign-selector{flex-direction:column;align-items:flex-start}.campaign-select{max-width:100%}.two-column-layout{gap:1rem}.metrics-grid{grid-template-columns:repeat(2,1fr)}}.agente-row.alert-row{background:#ef44441a!important;animation:alertRowPulse 2s ease-in-out infinite}@keyframes alertRowPulse{0%,to{background:#ef44441a}50%{background:#ef444433}}.alert-overlay{position:fixed;inset:0;background:#000000b3;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:9999;animation:fadeIn .3s ease}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.alert-modal{background:linear-gradient(135deg,#1e293b,#0f172a);border:1px solid #EF4444;border-radius:16px;padding:0;width:90%;max-width:420px;box-shadow:0 20px 60px #ef44444d,0 0 40px #ef44441a;animation:modalSlideIn .3s ease,modalPulse 2s ease-in-out infinite;position:relative;overflow:hidden}@keyframes modalSlideIn{0%{transform:scale(.9) translateY(-20px);opacity:0}to{transform:scale(1) translateY(0);opacity:1}}@keyframes modalPulse{0%,to{box-shadow:0 20px 60px #ef44444d,0 0 40px #ef44441a}50%{box-shadow:0 20px 80px #ef444480,0 0 60px #ef444433}}.alert-close{position:absolute;top:12px;right:12px;background:#ffffff1a;border:none;color:#94a3b8;width:32px;height:32px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s;z-index:1}.alert-close:hover{background:#ef444433;color:#ef4444}.alert-header{background:linear-gradient(135deg,#ef4444,#dc2626);padding:1.5rem;text-align:center}.alert-icon-container{width:64px;height:64px;background:#fff3;border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto .75rem;animation:iconShake .5s ease-in-out infinite}@keyframes iconShake{0%,to{transform:rotate(0)}25%{transform:rotate(-5deg)}75%{transform:rotate(5deg)}}.alert-icon{color:#fff}.alert-header h3{margin:0;color:#fff;font-size:1.25rem;font-weight:600}.alert-body{padding:1.5rem;display:flex;flex-direction:column;gap:1rem}.alert-agent-info{display:flex;align-items:center;gap:1rem;background:#ffffff0d;padding:1rem;border-radius:12px;border:1px solid #334155}.agent-avatar{width:48px;height:48px;background:linear-gradient(135deg,#3b82f6,#2563eb);border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff}.agent-details{display:flex;flex-direction:column;gap:.25rem}.agent-name{color:#fff;font-weight:600;font-size:1rem}.agent-extension{color:#94a3b8;font-size:.85rem}.alert-status{display:flex;align-items:center;gap:.75rem}.status-label{color:#94a3b8;font-size:.9rem}.alert-status .status-badge{padding:.35rem .75rem;border-radius:20px;color:#fff;font-size:.85rem;font-weight:500}.alert-time,.alert-message{display:flex;align-items:center;gap:.75rem;color:#cbd5e1;font-size:.95rem}.alert-time lucide-angular,.alert-message lucide-angular{color:#94a3b8}.alert-message{background:#ef44441a;padding:.75rem 1rem;border-radius:8px;border-left:3px solid #EF4444}.alert-message lucide-angular{color:#ef4444}.alert-footer{padding:1rem 1.5rem 1.5rem;display:flex;justify-content:center}.btn-dismiss{background:linear-gradient(135deg,#3b82f6,#2563eb);border:none;color:#fff;padding:.75rem 2rem;border-radius:8px;font-size:1rem;font-weight:500;cursor:pointer;transition:all .2s;min-width:150px}.btn-dismiss:hover{transform:translateY(-2px);box-shadow:0 4px 12px #3b82f666}
`],encapsulation:2});let d=c;return d})();export{he as CampaignMonitoringComponent};
