import{f as Tt,g as Ot}from"./chunk-ADYMDQSJ.js";import{a as Ct,b as wt,c as J,e as U,g as yt,h as A,i as Et,l as St}from"./chunk-S3RFAWP7.js";import{a as It}from"./chunk-TBHWBS4H.js";import{B as bt,D as vt,E as xt,F as Pt,G as Dt,c as lt,e as v,g as dt,h as ct,m as ht,n as pt,p as gt,q as mt,r as ut,s as _t,x as ft}from"./chunk-V2IYOAOV.js";import{Lb as rt,Mb as st}from"./chunk-DUZP3RRA.js";import{a as at}from"./chunk-CVSECBKN.js";import{$b as b,Ca as We,E as Le,F as re,Fa as le,I as ze,Kc as Xe,M as Ve,Nb as m,Ob as c,Pb as l,Qb as P,Rc as Je,T as He,Ub as D,Uc as ge,Vb as C,Vc as Qe,Xb as G,Y as Be,Z as Ge,Zb as S,_ as Z,a as Re,aa as Ue,b as ke,cb as p,da as H,ea as je,fd as et,ga as B,gb as de,gd as tt,h as N,ha as $e,hd as it,ia as _,ib as K,j as oe,kb as Ze,lc as w,m as f,n as Me,nc as d,nd as nt,o as Ae,oa as R,oc as X,pa as k,pb as L,pc as M,qb as Ke,qc as he,rb as ce,s as Fe,sa as qe,ta as se,td as me,ub as x,v as Ne,vd as ot,wc as pe,xb as F,ya as ae,yb as Y,zb as Ye}from"./chunk-AWCKI45D.js";function fe(o){let e=o.cloneNode(!0),t=e.querySelectorAll("[id]"),i=o.nodeName.toLowerCase();e.removeAttribute("id");for(let n=0;n<t.length;n++)t[n].removeAttribute("id");return i==="canvas"?Mt(o,e):(i==="input"||i==="select"||i==="textarea")&&kt(o,e),Rt("canvas",o,e,Mt),Rt("input, textarea, select",o,e,kt),e}function Rt(o,e,t,i){let n=e.querySelectorAll(o);if(n.length){let r=t.querySelectorAll(o);for(let s=0;s<n.length;s++)i(n[s],r[s])}}var ri=0;function kt(o,e){e.type!=="file"&&(e.value=o.value),e.type==="radio"&&e.name&&(e.name=`mat-clone-${e.name}-${ri++}`)}function Mt(o,e){let t=e.getContext("2d");if(t)try{t.drawImage(o,0,0)}catch{}}function ye(o){let e=o.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function be(o,e,t){let{top:i,bottom:n,left:r,right:s}=o;return t>=i&&t<=n&&e>=r&&e<=s}function si(o,e){let t=e.left<o.left,i=e.left+e.width>o.right,n=e.top<o.top,r=e.top+e.height>o.bottom;return t||i||n||r}function q(o,e,t){o.top+=e,o.bottom=o.top+o.height,o.left+=t,o.right=o.left+o.width}function At(o,e,t,i){let{top:n,right:r,bottom:s,left:a,width:h,height:g}=o,u=h*e,E=g*e;return i>n-E&&i<s+E&&t>a-u&&t<r+u}var Q=class{_document;positions=new Map;constructor(e){this._document=e}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:ye(t)})})}handleScroll(e){let t=U(e),i=this.positions.get(t);if(!i)return null;let n=i.scrollPosition,r,s;if(t===this._document){let g=this.getViewportScrollPosition();r=g.top,s=g.left}else r=t.scrollTop,s=t.scrollLeft;let a=n.top-r,h=n.left-s;return this.positions.forEach((g,u)=>{g.clientRect&&t!==u&&t.contains(u)&&q(g.clientRect,a,h)}),n.top=r,n.left=s,{top:a,left:h}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function $t(o,e){let t=o.rootNodes;if(t.length===1&&t[0].nodeType===e.ELEMENT_NODE)return t[0];let i=e.createElement("div");return t.forEach(n=>i.appendChild(n)),i}function Ee(o,e,t){for(let i in e)if(e.hasOwnProperty(i)){let n=e[i];n?o.setProperty(i,n,t?.has(i)?"important":""):o.removeProperty(i)}return o}function z(o,e){let t=e?"":"none";Ee(o.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function Ft(o,e,t){Ee(o.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},t)}function ee(o,e){return e&&e!="none"?o+" "+e:o}function Nt(o,e){o.style.width=`${e.width}px`,o.style.height=`${e.height}px`,o.style.transform=W(e.left,e.top)}function W(o,e){return`translate3d(${Math.round(o)}px, ${Math.round(e)}px, 0)`}function Lt(o){let e=o.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(o)*e}function ai(o){let e=getComputedStyle(o),t=ue(e,"transition-property"),i=t.find(a=>a==="transform"||a==="all");if(!i)return 0;let n=t.indexOf(i),r=ue(e,"transition-duration"),s=ue(e,"transition-delay");return Lt(r[n])+Lt(s[n])}function ue(o,e){return o.getPropertyValue(e).split(",").map(i=>i.trim())}var li=new Set(["position"]),ve=class{_document;_rootElement;_direction;_initialDomRect;_previewTemplate;_previewClass;_pickupPositionOnPage;_initialTransform;_zIndex;_renderer;_previewEmbeddedView;_preview;get element(){return this._preview}constructor(e,t,i,n,r,s,a,h,g,u){this._document=e,this._rootElement=t,this._direction=i,this._initialDomRect=n,this._previewTemplate=r,this._previewClass=s,this._pickupPositionOnPage=a,this._initialTransform=h,this._zIndex=g,this._renderer=u}attach(e){this._preview=this._createPreview(),e.appendChild(this._preview),zt(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(e){this._preview.style.transform=e}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(e){this._preview.classList.add(e)}getTransitionDuration(){return ai(this._preview)}addEventListener(e,t){return this._renderer.listen(this._preview,e,t)}_createPreview(){let e=this._previewTemplate,t=this._previewClass,i=e?e.template:null,n;if(i&&e){let r=e.matchSize?this._initialDomRect:null,s=e.viewContainer.createEmbeddedView(i,e.context);s.detectChanges(),n=$t(s,this._document),this._previewEmbeddedView=s,e.matchSize?Nt(n,r):n.style.transform=W(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else n=fe(this._rootElement),Nt(n,this._initialDomRect),this._initialTransform&&(n.style.transform=this._initialTransform);return Ee(n.style,{"pointer-events":"none",margin:zt(n)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},li),z(n,!1),n.classList.add("cdk-drag-preview"),n.setAttribute("popover","manual"),n.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(r=>n.classList.add(r)):n.classList.add(t)),n}};function zt(o){return"showPopover"in o}var di={passive:!0},Vt={passive:!1},ci={passive:!1,capture:!0},hi=800,Ht="cdk-drag-placeholder",Bt=new Set(["position"]),xe=class{_config;_document;_ngZone;_viewportRuler;_dragDropRegistry;_renderer;_rootElementCleanups;_cleanupShadowRootSelectStart;_preview;_previewContainer;_placeholderRef;_placeholder;_pickupPositionInElement;_pickupPositionOnPage;_marker;_anchor=null;_passiveTransform={x:0,y:0};_activeTransform={x:0,y:0};_initialTransform;_hasStartedDragging=ae(!1);_hasMoved;_initialContainer;_initialIndex;_parentPositions;_moveEvents=new f;_pointerDirectionDelta;_pointerPositionAtLastDirectionChange;_lastKnownPointerPosition;_rootElement;_ownerSVGElement;_rootElementTapHighlight;_pointerMoveSubscription=N.EMPTY;_pointerUpSubscription=N.EMPTY;_scrollSubscription=N.EMPTY;_resizeSubscription=N.EMPTY;_lastTouchEventTime;_dragStartTime;_boundaryElement=null;_nativeInteractionsEnabled=!0;_initialDomRect;_previewRect;_boundaryRect;_previewTemplate;_placeholderTemplate;_handles=[];_disabledHandles=new Set;_dropContainer;_direction="ltr";_parentDragRef;_cachedShadowRoot;lockAxis=null;dragStartDelay=0;previewClass;scale=1;get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(e){e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(t=>z(t,e)))}_disabled=!1;beforeStarted=new f;started=new f;released=new f;ended=new f;entered=new f;exited=new f;dropped=new f;moved=this._moveEvents;data;constrainPosition;constructor(e,t,i,n,r,s,a){this._config=t,this._document=i,this._ngZone=n,this._viewportRuler=r,this._dragDropRegistry=s,this._renderer=a,this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new Q(i),s.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(i=>A(i)),this._handles.forEach(i=>z(i,this.disabled)),this._toggleNativeDragInteractions();let t=new Set;return this._disabledHandles.forEach(i=>{this._handles.indexOf(i)>-1&&t.add(i)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){let t=A(e);if(t!==this._rootElement){this._removeRootElementListeners();let i=this._renderer;this._rootElementCleanups=this._ngZone.runOutsideAngular(()=>[i.listen(t,"mousedown",this._pointerDown,Vt),i.listen(t,"touchstart",this._pointerDown,di),i.listen(t,"dragstart",this._nativeDragStart,Vt)]),this._initialTransform=void 0,this._rootElement=t}return typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?A(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){this._removeRootElementListeners(),this.isDragging()&&this._rootElement?.remove(),this._marker?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._marker=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}resetToBoundary(){if(this._boundaryElement&&this._rootElement&&si(this._boundaryElement.getBoundingClientRect(),this._rootElement.getBoundingClientRect())){let e=this._boundaryElement.getBoundingClientRect(),t=this._rootElement.getBoundingClientRect(),i=0,n=0;t.left<e.left?i=e.left-t.left:t.right>e.right&&(i=e.right-t.right),t.top<e.top?n=e.top-t.top:t.bottom>e.bottom&&(n=e.bottom-t.bottom);let r=this._activeTransform.x,s=this._activeTransform.y,a=r+i,h=s+n;this._rootElement.style.transform=W(a,h),this._activeTransform={x:a,y:h},this._passiveTransform={x:a,y:h}}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),z(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),z(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){let e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){let e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._cleanupShadowRootSelectStart?.(),this._cleanupShadowRootSelectStart=void 0}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._anchor?.remove(),this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._anchor=this._placeholderRef=null}_pointerDown=e=>{if(this.beforeStarted.next(),this._handles.length){let t=this._getTargetHandle(e);t&&!this._disabledHandles.has(t)&&!this.disabled&&this._initializeDragSequence(t,e)}else this.disabled||this._initializeDragSequence(this._rootElement,e)};_pointerMove=e=>{let t=this._getPointerPositionOnPage(e);if(!this._hasStartedDragging()){let n=Math.abs(t.x-this._pickupPositionOnPage.x),r=Math.abs(t.y-this._pickupPositionOnPage.y);if(n+r>=this._config.dragStartThreshold){let a=Date.now()>=this._dragStartTime+this._getDragStartDelay(e),h=this._dropContainer;if(!a){this._endDragSequence(e);return}(!h||!h.isDragging()&&!h.isReceiving())&&(e.cancelable&&e.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(e)))}return}e.cancelable&&e.preventDefault();let i=this._getConstrainedPointerPosition(t);if(this._hasMoved=!0,this._lastKnownPointerPosition=t,this._updatePointerDirectionDelta(i),this._dropContainer)this._updateActiveDropContainer(i,t);else{let n=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,r=this._activeTransform;r.x=i.x-n.x+this._passiveTransform.x,r.y=i.y-n.y+this._passiveTransform.y,this._applyRootElementTransform(r.x,r.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:i,event:e,distance:this._getDragDistance(i),delta:this._pointerDirectionDelta})})};_pointerUp=e=>{this._endDragSequence(e)};_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:e}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let t=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){j(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let t=this._getShadowRoot(),i=this._dropContainer;if(t&&this._ngZone.runOutsideAngular(()=>{this._cleanupShadowRootSelectStart=this._renderer.listen(t,"selectstart",pi,ci)}),i){let n=this._rootElement,r=n.parentNode,s=this._placeholder=this._createPlaceholderElement(),a=this._marker=this._marker||this._document.createComment("");r.insertBefore(a,n),this._initialTransform=n.style.transform||"",this._preview=new ve(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3,this._renderer),this._preview.attach(this._getPreviewInsertionPoint(r,t)),Ft(n,!1,Bt),this._document.body.appendChild(r.replaceChild(s,n)),this.started.next({source:this,event:e}),i.start(),this._initialContainer=i,this._initialIndex=i.getItemIndex(this)}else this.started.next({source:this,event:e}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(i?i.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();let i=this.isDragging(),n=j(t),r=!n&&t.button!==0,s=this._rootElement,a=U(t),h=!n&&this._lastTouchEventTime&&this._lastTouchEventTime+hi>Date.now(),g=n?wt(t):Ct(t);if(a&&a.draggable&&t.type==="mousedown"&&t.preventDefault(),i||r||h||g)return;if(this._handles.length){let I=s.style;this._rootElementTapHighlight=I.webkitTapHighlightColor||"",I.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(I=>this._updateOnScroll(I)),this._boundaryElement&&(this._boundaryRect=ye(this._boundaryElement));let u=this._previewTemplate;this._pickupPositionInElement=u&&u.template&&!u.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,e,t);let E=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:E.x,y:E.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){Ft(this._rootElement,!0,Bt),this._marker.parentNode.replaceChild(this._rootElement,this._marker),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let t=this._dropContainer,i=t.getItemIndex(this),n=this._getPointerPositionOnPage(e),r=this._getDragDistance(n),s=t._isOverContainer(n.x,n.y);this.ended.next({source:this,distance:r,dropPoint:n,event:e}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:s,distance:r,dropPoint:n,event:e}),t.drop(this,i,this._initialIndex,this._initialContainer,s,r,n,e),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:i,y:n}){let r=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!r&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(r=this._initialContainer),r&&r!==this._dropContainer&&this._ngZone.run(()=>{let s=this._dropContainer.getItemIndex(this),a=this._dropContainer.getItemAtIndex(s+1)?.getVisibleElement()||null;this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._conditionallyInsertAnchor(r,this._dropContainer,a),this._dropContainer=r,this._dropContainer.enter(this,e,t,r===this._initialContainer&&r.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:r,currentIndex:r.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(i,n),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(e,t):this._applyPreviewTransform(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let e=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);let t=this._preview.getTransitionDuration();return t===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(i=>{let n=a=>{(!a||this._preview&&U(a)===this._preview.element&&a.propertyName==="transform")&&(s(),i(),clearTimeout(r))},r=setTimeout(n,t*1.5),s=this._preview.addEventListener("transitionend",n)}))}_createPlaceholderElement(){let e=this._placeholderTemplate,t=e?e.template:null,i;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),i=$t(this._placeholderRef,this._document)):i=fe(this._rootElement),i.style.pointerEvents="none",i.classList.add(Ht),i}_getPointerPositionInElement(e,t,i){let n=t===this._rootElement?null:t,r=n?n.getBoundingClientRect():e,s=j(i)?i.targetTouches[0]:i,a=this._getViewportScrollPosition(),h=s.pageX-r.left-a.left,g=s.pageY-r.top-a.top;return{x:r.left-e.left+h,y:r.top-e.top+g}}_getPointerPositionOnPage(e){let t=this._getViewportScrollPosition(),i=j(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,n=i.pageX-t.left,r=i.pageY-t.top;if(this._ownerSVGElement){let s=this._ownerSVGElement.getScreenCTM();if(s){let a=this._ownerSVGElement.createSVGPoint();return a.x=n,a.y=r,a.matrixTransform(s.inverse())}}return{x:n,y:r}}_getConstrainedPointerPosition(e){let t=this._dropContainer?this._dropContainer.lockAxis:null,{x:i,y:n}=this.constrainPosition?this.constrainPosition(e,this,this._initialDomRect,this._pickupPositionInElement):e;if(this.lockAxis==="x"||t==="x"?n=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||t==="y")&&(i=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:r,y:s}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,a=this._boundaryRect,{width:h,height:g}=this._getPreviewRect(),u=a.top+s,E=a.bottom-(g-s),I=a.left+r,V=a.right-(h-r);i=Gt(i,I,V),n=Gt(n,u,E)}return{x:i,y:n}}_updatePointerDirectionDelta(e){let{x:t,y:i}=e,n=this._pointerDirectionDelta,r=this._pointerPositionAtLastDirectionChange,s=Math.abs(t-r.x),a=Math.abs(i-r.y);return s>this._config.pointerDirectionChangeThreshold&&(n.x=t>r.x?1:-1,r.x=t),a>this._config.pointerDirectionChangeThreshold&&(n.y=i>r.y?1:-1,r.y=i),n}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,z(this._rootElement,e))}_removeRootElementListeners(){this._rootElementCleanups?.forEach(e=>e()),this._rootElementCleanups=void 0}_applyRootElementTransform(e,t){let i=1/this.scale,n=W(e*i,t*i),r=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=r.transform&&r.transform!="none"?r.transform:""),r.transform=ee(n,this._initialTransform)}_applyPreviewTransform(e,t){let i=this._previewTemplate?.template?void 0:this._initialTransform,n=W(e,t);this._preview.setTransform(ee(n,i))}_getDragDistance(e){let t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(e===0&&t===0||this.isDragging()||!this._boundaryElement)return;let i=this._rootElement.getBoundingClientRect(),n=this._boundaryElement.getBoundingClientRect();if(n.width===0&&n.height===0||i.width===0&&i.height===0)return;let r=n.left-i.left,s=i.right-n.right,a=n.top-i.top,h=i.bottom-n.bottom;n.width>i.width?(r>0&&(e+=r),s>0&&(e-=s)):e=0,n.height>i.height?(a>0&&(t+=a),h>0&&(t-=h)):t=0,(e!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){let t=this.dragStartDelay;return typeof t=="number"?t:j(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){let t=this._parentPositions.handleScroll(e);if(t){let i=U(e);this._boundaryRect&&i!==this._boundaryElement&&i.contains(this._boundaryElement)&&q(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=J(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,t){let i=this._previewContainer||"global";if(i==="parent")return e;if(i==="global"){let n=this._document;return t||n.fullscreenElement||n.webkitFullscreenElement||n.mozFullScreenElement||n.msFullscreenElement||n.body}return A(i)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_nativeDragStart=e=>{if(this._handles.length){let t=this._getTargetHandle(e);t&&!this._disabledHandles.has(t)&&!this.disabled&&e.preventDefault()}else this.disabled||e.preventDefault()};_getTargetHandle(e){return this._handles.find(t=>e.target&&(e.target===t||t.contains(e.target)))}_conditionallyInsertAnchor(e,t,i){if(e===this._initialContainer)this._anchor?.remove(),this._anchor=null;else if(t===this._initialContainer&&t.hasAnchor){let n=this._anchor??=fe(this._placeholder);n.classList.remove(Ht),n.classList.add("cdk-drag-anchor"),n.style.transform="",i?i.before(n):A(t.element).appendChild(n)}}};function Gt(o,e,t){return Math.max(e,Math.min(t,o))}function j(o){return o.type[0]==="t"}function pi(o){o.preventDefault()}function qt(o,e,t){let i=Ut(e,o.length-1),n=Ut(t,o.length-1);if(i===n)return;let r=o[i],s=n<i?-1:1;for(let a=i;a!==n;a+=s)o[a]=o[a+s];o[n]=r}function Ut(o,e){return Math.max(0,Math.min(e,o))}var te=class{_dragDropRegistry;_element;_sortPredicate;_itemPositions=[];_activeDraggables;orientation="vertical";direction;constructor(e){this._dragDropRegistry=e}_previousSwap={drag:null,delta:0,overlaps:!1};start(e){this.withItems(e)}sort(e,t,i,n){let r=this._itemPositions,s=this._getItemIndexFromPointerPosition(e,t,i,n);if(s===-1&&r.length>0)return null;let a=this.orientation==="horizontal",h=r.findIndex(T=>T.drag===e),g=r[s],u=r[h].clientRect,E=g.clientRect,I=h>s?1:-1,V=this._getItemOffsetPx(u,E,I),ie=this._getSiblingOffsetPx(h,r,I),ni=r.slice();return qt(r,h,s),r.forEach((T,oi)=>{if(ni[oi]===T)return;let Te=T.drag===e,ne=Te?V:ie,Oe=Te?e.getPlaceholderElement():T.drag.getRootElement();T.offset+=ne;let Ie=Math.round(T.offset*(1/T.drag.scale));a?(Oe.style.transform=ee(`translate3d(${Ie}px, 0, 0)`,T.initialTransform),q(T.clientRect,0,ne)):(Oe.style.transform=ee(`translate3d(0, ${Ie}px, 0)`,T.initialTransform),q(T.clientRect,ne,0))}),this._previousSwap.overlaps=be(E,t,i),this._previousSwap.drag=g.drag,this._previousSwap.delta=a?n.x:n.y,{previousIndex:h,currentIndex:s}}enter(e,t,i,n){let r=n==null||n<0?this._getItemIndexFromPointerPosition(e,t,i):n,s=this._activeDraggables,a=s.indexOf(e),h=e.getPlaceholderElement(),g=s[r];if(g===e&&(g=s[r+1]),!g&&(r==null||r===-1||r<s.length-1)&&this._shouldEnterAsFirstChild(t,i)&&(g=s[0]),a>-1&&s.splice(a,1),g&&!this._dragDropRegistry.isDragging(g)){let u=g.getRootElement();u.parentElement.insertBefore(h,u),s.splice(r,0,e)}else this._element.appendChild(h),s.push(e);h.style.transform="",this._cacheItemPositions()}withItems(e){this._activeDraggables=e.slice(),this._cacheItemPositions()}withSortPredicate(e){this._sortPredicate=e}reset(){this._activeDraggables?.forEach(e=>{let t=e.getRootElement();if(t){let i=this._itemPositions.find(n=>n.drag===e)?.initialTransform;t.style.transform=i||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(e){return this._getVisualItemPositions().findIndex(t=>t.drag===e)}getItemAtIndex(e){return this._getVisualItemPositions()[e]?.drag||null}updateOnScroll(e,t){this._itemPositions.forEach(({clientRect:i})=>{q(i,e,t)}),this._itemPositions.forEach(({drag:i})=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()})}withElementContainer(e){this._element=e}_cacheItemPositions(){let e=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(t=>{let i=t.getVisibleElement();return{drag:t,offset:0,initialTransform:i.style.transform||"",clientRect:ye(i)}}).sort((t,i)=>e?t.clientRect.left-i.clientRect.left:t.clientRect.top-i.clientRect.top)}_getVisualItemPositions(){return this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions}_getItemOffsetPx(e,t,i){let n=this.orientation==="horizontal",r=n?t.left-e.left:t.top-e.top;return i===-1&&(r+=n?t.width-e.width:t.height-e.height),r}_getSiblingOffsetPx(e,t,i){let n=this.orientation==="horizontal",r=t[e].clientRect,s=t[e+i*-1],a=r[n?"width":"height"]*i;if(s){let h=n?"left":"top",g=n?"right":"bottom";i===-1?a-=s.clientRect[h]-r[g]:a+=r[h]-s.clientRect[g]}return a}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;let i=this._itemPositions,n=this.orientation==="horizontal";if(i[0].drag!==this._activeDraggables[0]){let s=i[i.length-1].clientRect;return n?e>=s.right:t>=s.bottom}else{let s=i[0].clientRect;return n?e<=s.left:t<=s.top}}_getItemIndexFromPointerPosition(e,t,i,n){let r=this.orientation==="horizontal",s=this._itemPositions.findIndex(({drag:a,clientRect:h})=>{if(a===e)return!1;if(n){let g=r?n.x:n.y;if(a===this._previousSwap.drag&&this._previousSwap.overlaps&&g===this._previousSwap.delta)return!1}return r?t>=Math.floor(h.left)&&t<Math.floor(h.right):i>=Math.floor(h.top)&&i<Math.floor(h.bottom)});return s===-1||!this._sortPredicate(s,e)?-1:s}},Pe=class{_document;_dragDropRegistry;_element;_sortPredicate;_rootNode;_activeItems;_previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1};_relatedNodes=[];constructor(e,t){this._document=e,this._dragDropRegistry=t}start(e){let t=this._element.childNodes;this._relatedNodes=[];for(let i=0;i<t.length;i++){let n=t[i];this._relatedNodes.push([n,n.nextSibling])}this.withItems(e)}sort(e,t,i,n){let r=this._getItemIndexFromPointerPosition(e,t,i),s=this._previousSwap;if(r===-1||this._activeItems[r]===e)return null;let a=this._activeItems[r];if(s.drag===a&&s.overlaps&&s.deltaX===n.x&&s.deltaY===n.y)return null;let h=this.getItemIndex(e),g=e.getPlaceholderElement(),u=a.getRootElement();r>h?u.after(g):u.before(g),qt(this._activeItems,h,r);let E=this._getRootNode().elementFromPoint(t,i);return s.deltaX=n.x,s.deltaY=n.y,s.drag=a,s.overlaps=u===E||u.contains(E),{previousIndex:h,currentIndex:r}}enter(e,t,i,n){let r=this._activeItems.indexOf(e);r>-1&&this._activeItems.splice(r,1);let s=n==null||n<0?this._getItemIndexFromPointerPosition(e,t,i):n;s===-1&&(s=this._getClosestItemIndexToPointer(e,t,i));let a=this._activeItems[s];a&&!this._dragDropRegistry.isDragging(a)?(this._activeItems.splice(s,0,e),a.getRootElement().before(e.getPlaceholderElement())):(this._activeItems.push(e),this._element.appendChild(e.getPlaceholderElement()))}withItems(e){this._activeItems=e.slice()}withSortPredicate(e){this._sortPredicate=e}reset(){let e=this._element,t=this._previousSwap;for(let i=this._relatedNodes.length-1;i>-1;i--){let[n,r]=this._relatedNodes[i];n.parentNode===e&&n.nextSibling!==r&&(r===null?e.appendChild(n):r.parentNode===e&&e.insertBefore(n,r))}this._relatedNodes=[],this._activeItems=[],t.drag=null,t.deltaX=t.deltaY=0,t.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(e){return this._activeItems.indexOf(e)}getItemAtIndex(e){return this._activeItems[e]||null}updateOnScroll(){this._activeItems.forEach(e=>{this._dragDropRegistry.isDragging(e)&&e._sortFromLastPointerPosition()})}withElementContainer(e){e!==this._element&&(this._element=e,this._rootNode=void 0)}_getItemIndexFromPointerPosition(e,t,i){let n=this._getRootNode().elementFromPoint(Math.floor(t),Math.floor(i)),r=n?this._activeItems.findIndex(s=>{let a=s.getRootElement();return n===a||a.contains(n)}):-1;return r===-1||!this._sortPredicate(r,e)?-1:r}_getRootNode(){return this._rootNode||(this._rootNode=J(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(e,t,i){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let n=1/0,r=-1;for(let s=0;s<this._activeItems.length;s++){let a=this._activeItems[s];if(a!==e){let{x:h,y:g}=a.getRootElement().getBoundingClientRect(),u=Math.hypot(t-h,i-g);u<n&&(n=u,r=s)}}return r}},jt=.05,Wt=.05,O=(function(o){return o[o.NONE=0]="NONE",o[o.UP=1]="UP",o[o.DOWN=2]="DOWN",o})(O||{}),y=(function(o){return o[o.NONE=0]="NONE",o[o.LEFT=1]="LEFT",o[o.RIGHT=2]="RIGHT",o})(y||{}),De=class{_dragDropRegistry;_ngZone;_viewportRuler;element;disabled=!1;sortingDisabled=!1;lockAxis=null;autoScrollDisabled=!1;autoScrollStep=2;hasAnchor=!1;enterPredicate=()=>!0;sortPredicate=()=>!0;beforeStarted=new f;entered=new f;exited=new f;dropped=new f;sorted=new f;receivingStarted=new f;receivingStopped=new f;data;_container;_isDragging=!1;_parentPositions;_sortStrategy;_domRect;_draggables=[];_siblings=[];_activeSiblings=new Set;_viewportScrollSubscription=N.EMPTY;_verticalScrollDirection=O.NONE;_horizontalScrollDirection=y.NONE;_scrollNode;_stopScrollTimers=new f;_cachedShadowRoot=null;_document;_scrollableElements=[];_initialScrollSnap;_direction="ltr";constructor(e,t,i,n,r){this._dragDropRegistry=t,this._ngZone=n,this._viewportRuler=r;let s=this.element=A(e);this._document=i,this.withOrientation("vertical").withElementContainer(s),t.registerDropContainer(this),this._parentPositions=new Q(i)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,i,n){this._draggingStarted(),n==null&&this.sortingDisabled&&(n=this._draggables.indexOf(e)),this._sortStrategy.enter(e,t,i,n),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,i,n,r,s,a,h={}){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:i,container:this,previousContainer:n,isPointerOverContainer:r,distance:s,dropPoint:a,event:h})}withItems(e){let t=this._draggables;return this._draggables=e,e.forEach(i=>i._withDropContainer(this)),this.isDragging()&&(t.filter(n=>n.isDragging()).every(n=>e.indexOf(n)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(e){return this._direction=e,this._sortStrategy instanceof te&&(this._sortStrategy.direction=e),this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){if(e==="mixed")this._sortStrategy=new Pe(this._document,this._dragDropRegistry);else{let t=new te(this._dragDropRegistry);t.direction=this._direction,t.orientation=e,this._sortStrategy=t}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((t,i)=>this.sortPredicate(t,i,this)),this}withScrollableParents(e){let t=this._container;return this._scrollableElements=e.indexOf(t)===-1?[t,...e]:e.slice(),this}withElementContainer(e){if(e===this._container)return this;let t=A(this.element),i=this._scrollableElements.indexOf(this._container),n=this._scrollableElements.indexOf(e);return i>-1&&this._scrollableElements.splice(i,1),n>-1&&this._scrollableElements.splice(n,1),this._sortStrategy&&this._sortStrategy.withElementContainer(e),this._cachedShadowRoot=null,this._scrollableElements.unshift(e),this._container=e,this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?this._sortStrategy.getItemIndex(e):this._draggables.indexOf(e)}getItemAtIndex(e){return this._isDragging?this._sortStrategy.getItemAtIndex(e):this._draggables[e]||null}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,i,n){if(this.sortingDisabled||!this._domRect||!At(this._domRect,jt,t,i))return;let r=this._sortStrategy.sort(e,t,i,n);r&&this.sorted.next({previousIndex:r.previousIndex,currentIndex:r.currentIndex,container:this,item:e})}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let i,n=O.NONE,r=y.NONE;if(this._parentPositions.positions.forEach((s,a)=>{a===this._document||!s.clientRect||i||At(s.clientRect,jt,e,t)&&([n,r]=gi(a,s.clientRect,this._direction,e,t),(n||r)&&(i=a))}),!n&&!r){let{width:s,height:a}=this._viewportRuler.getViewportSize(),h={width:s,height:a,top:0,right:s,bottom:a,left:0};n=Zt(h,t),r=Kt(h,e),i=window}i&&(n!==this._verticalScrollDirection||r!==this._horizontalScrollDirection||i!==this._scrollNode)&&(this._verticalScrollDirection=n,this._horizontalScrollDirection=r,this._scrollNode=i,(n||r)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let e=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let e=this._container.style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_startScrollInterval=()=>{this._stopScrolling(),Le(0,Ae).pipe(Z(this._stopScrollTimers)).subscribe(()=>{let e=this._scrollNode,t=this.autoScrollStep;this._verticalScrollDirection===O.UP?e.scrollBy(0,-t):this._verticalScrollDirection===O.DOWN&&e.scrollBy(0,t),this._horizontalScrollDirection===y.LEFT?e.scrollBy(-t,0):this._horizontalScrollDirection===y.RIGHT&&e.scrollBy(t,0)})};_isOverContainer(e,t){return this._domRect!=null&&be(this._domRect,e,t)}_getSiblingContainerFromPosition(e,t,i){return this._siblings.find(n=>n._canReceive(e,t,i))}_canReceive(e,t,i){if(!this._domRect||!be(this._domRect,t,i)||!this.enterPredicate(e,this))return!1;let n=this._getShadowRoot().elementFromPoint(t,i);return n?n===this._container||this._container.contains(n):!1}_startReceiving(e,t){let i=this._activeSiblings;!i.has(e)&&t.every(n=>this.enterPredicate(n,this)||this._draggables.indexOf(n)>-1)&&(i.add(e),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:e,receiver:this,items:t}))}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:e,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){let t=this._parentPositions.handleScroll(e);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let e=J(this._container);this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let e=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}};function Zt(o,e){let{top:t,bottom:i,height:n}=o,r=n*Wt;return e>=t-r&&e<=t+r?O.UP:e>=i-r&&e<=i+r?O.DOWN:O.NONE}function Kt(o,e){let{left:t,right:i,width:n}=o,r=n*Wt;return e>=t-r&&e<=t+r?y.LEFT:e>=i-r&&e<=i+r?y.RIGHT:y.NONE}function gi(o,e,t,i,n){let r=Zt(e,n),s=Kt(e,i),a=O.NONE,h=y.NONE;if(r){let g=o.scrollTop;r===O.UP?g>0&&(a=O.UP):o.scrollHeight-g>o.clientHeight&&(a=O.DOWN)}if(s){let g=o.scrollLeft;t==="rtl"?s===y.RIGHT?g<0&&(h=y.RIGHT):o.scrollWidth+g>o.clientWidth&&(h=y.LEFT):s===y.LEFT?g>0&&(h=y.LEFT):o.scrollWidth-g>o.clientWidth&&(h=y.RIGHT)}return[a,h]}var $={capture:!0},_e={passive:!1,capture:!0},mi=(()=>{class o{static \u0275fac=function(i){return new(i||o)};static \u0275cmp=L({type:o,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],decls:0,vars:0,template:function(i,n){},styles:[`@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}
`],encapsulation:2,changeDetection:0})}return o})(),Se=(()=>{class o{_ngZone=_(Y);_document=_(se);_styleLoader=_(Et);_renderer=_(de).createRenderer(null,null);_cleanupDocumentTouchmove;_scroll=new f;_dropInstances=new Set;_dragInstances=new Set;_activeDragInstances=ae([]);_globalListeners;_draggingPredicate=t=>t.isDragging();_domNodesToDirectives=null;pointerMove=new f;pointerUp=new f;constructor(){}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._cleanupDocumentTouchmove?.(),this._cleanupDocumentTouchmove=this._renderer.listen(this._document,"touchmove",this._persistentTouchmoveListener,_e)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),this._dragInstances.size===0&&this._cleanupDocumentTouchmove?.()}startDragging(t,i){if(!(this._activeDragInstances().indexOf(t)>-1)&&(this._styleLoader.load(mi),this._activeDragInstances.update(n=>[...n,t]),this._activeDragInstances().length===1)){let n=i.type.startsWith("touch"),r=a=>this.pointerUp.next(a),s=[["scroll",a=>this._scroll.next(a),$],["selectstart",this._preventDefaultWhileDragging,_e]];n?s.push(["touchend",r,$],["touchcancel",r,$]):s.push(["mouseup",r,$]),n||s.push(["mousemove",a=>this.pointerMove.next(a),_e]),this._ngZone.runOutsideAngular(()=>{this._globalListeners=s.map(([a,h,g])=>this._renderer.listen(this._document,a,h,g))})}}stopDragging(t){this._activeDragInstances.update(i=>{let n=i.indexOf(t);return n>-1?(i.splice(n,1),[...i]):i}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(t){return this._activeDragInstances().indexOf(t)>-1}scrolled(t){let i=[this._scroll];return t&&t!==this._document&&i.push(new oe(n=>this._ngZone.runOutsideAngular(()=>{let r=this._renderer.listen(t,"scroll",s=>{this._activeDragInstances().length&&n.next(s)},$);return()=>{r()}}))),re(...i)}registerDirectiveNode(t,i){this._domNodesToDirectives??=new WeakMap,this._domNodesToDirectives.set(t,i)}removeDirectiveNode(t){this._domNodesToDirectives?.delete(t)}getDragDirectiveForNode(t){return this._domNodesToDirectives?.get(t)||null}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._domNodesToDirectives=null,this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_preventDefaultWhileDragging=t=>{this._activeDragInstances().length>0&&t.preventDefault()};_persistentTouchmoveListener=t=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&t.preventDefault(),this.pointerMove.next(t))};_clearGlobalListeners(){this._globalListeners?.forEach(t=>t()),this._globalListeners=void 0}static \u0275fac=function(i){return new(i||o)};static \u0275prov=H({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),ui={dragStartThreshold:5,pointerDirectionChangeThreshold:5},Yt=(()=>{class o{_document=_(se);_ngZone=_(Y);_viewportRuler=_(Tt);_dragDropRegistry=_(Se);_renderer=_(de).createRenderer(null,null);constructor(){}createDrag(t,i=ui){return new xe(t,i,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry,this._renderer)}createDropList(t){return new De(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static \u0275fac=function(i){return new(i||o)};static \u0275prov=H({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),Ce=new B("CDK_DRAG_PARENT");var Xt=new B("CdkDragHandle"),Jt=(()=>{class o{element=_(le);_parentDrag=_(Ce,{optional:!0,skipSelf:!0});_dragDropRegistry=_(Se);_stateChanges=new f;get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._stateChanges.next(this)}_disabled=!1;constructor(){this._parentDrag?._addHandle(this)}ngAfterViewInit(){if(!this._parentDrag){let t=this.element.nativeElement.parentElement;for(;t;){let i=this._dragDropRegistry.getDragDirectiveForNode(t);if(i){this._parentDrag=i,i._addHandle(this);break}t=t.parentElement}}}ngOnDestroy(){this._parentDrag?._removeHandle(this),this._stateChanges.complete()}static \u0275fac=function(i){return new(i||o)};static \u0275dir=ce({type:o,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:[2,"cdkDragHandleDisabled","disabled",ge]},features:[pe([{provide:Xt,useExisting:o}])]})}return o})(),_i=new B("CDK_DRAG_CONFIG"),fi=new B("CdkDropList"),Qt=(()=>{class o{element=_(le);dropContainer=_(fi,{optional:!0,skipSelf:!0});_ngZone=_(Y);_viewContainerRef=_(Ze);_dir=_(St,{optional:!0});_changeDetectorRef=_(Je);_selfHandle=_(Xt,{optional:!0,self:!0});_parentDrag=_(Ce,{optional:!0,skipSelf:!0});_dragDropRegistry=_(Se);_destroyed=new f;_handles=new Me([]);_previewTemplate;_placeholderTemplate;_dragRef;data;lockAxis=null;rootElementSelector;boundaryElement;dragStartDelay;freeDragPosition;get disabled(){return this._disabled||!!(this.dropContainer&&this.dropContainer.disabled)}set disabled(t){this._disabled=t,this._dragRef.disabled=this._disabled}_disabled;constrainPosition;previewClass;previewContainer;scale=1;started=new F;released=new F;ended=new F;entered=new F;exited=new F;dropped=new F;moved=new oe(t=>{let i=this._dragRef.moved.pipe(Ne(n=>({source:this,pointerPosition:n.pointerPosition,event:n.event,delta:n.delta,distance:n.distance}))).subscribe(t);return()=>{i.unsubscribe()}});_injector=_(qe);constructor(){let t=this.dropContainer,i=_(_i,{optional:!0}),n=_(Yt);this._dragRef=n.createDrag(this.element,{dragStartThreshold:i&&i.dragStartThreshold!=null?i.dragStartThreshold:5,pointerDirectionChangeThreshold:i&&i.pointerDirectionChangeThreshold!=null?i.pointerDirectionChangeThreshold:5,zIndex:i?.zIndex}),this._dragRef.data=this,this._dragDropRegistry.registerDirectiveNode(this.element.nativeElement,this),i&&this._assignDefaults(i),t&&(t.addItem(this),t._dropListRef.beforeStarted.pipe(Z(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}resetToBoundary(){this._dragRef.resetToBoundary()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(t){this._dragRef.setFreeDragPosition(t)}ngAfterViewInit(){Ye(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(t){let i=t.rootElementSelector,n=t.freeDragPosition;i&&!i.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,n&&!n.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this),this._dragDropRegistry.removeDirectiveNode(this.element.nativeElement),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(t){let i=this._handles.getValue();i.push(t),this._handles.next(i)}_removeHandle(t){let i=this._handles.getValue(),n=i.indexOf(t);n>-1&&(i.splice(n,1),this._handles.next(i))}_setPreviewTemplate(t){this._previewTemplate=t}_resetPreviewTemplate(t){t===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(t){this._placeholderTemplate=t}_resetPlaceholderTemplate(t){t===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let t=this.element.nativeElement,i=t;this.rootElementSelector&&(i=t.closest!==void 0?t.closest(this.rootElementSelector):t.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(i||t)}_getBoundaryElement(){let t=this.boundaryElement;return t?typeof t=="string"?this.element.nativeElement.closest(t):A(t):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){let i=this._dir,n=this.dragStartDelay,r=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,s=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.scale=this.scale,t.dragStartDelay=typeof n=="object"&&n?n:yt(n),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(r).withPreviewTemplate(s).withPreviewContainer(this.previewContainer||"global"),i&&t.withDirection(i.value)}}),t.beforeStarted.pipe(Ve(1)).subscribe(()=>{if(this._parentDrag){t.withParent(this._parentDrag._dragRef);return}let i=this.element.nativeElement.parentElement;for(;i;){let n=this._dragDropRegistry.getDragDirectiveForNode(i);if(n){t.withParent(n._dragRef);break}i=i.parentElement}})}_handleEvents(t){t.started.subscribe(i=>{this.started.emit({source:this,event:i.event}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(i=>{this.released.emit({source:this,event:i.event})}),t.ended.subscribe(i=>{this.ended.emit({source:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(i=>{this.entered.emit({container:i.container.data,item:this,currentIndex:i.currentIndex})}),t.exited.subscribe(i=>{this.exited.emit({container:i.container.data,item:this})}),t.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,isPointerOverContainer:i.isPointerOverContainer,item:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event})})}_assignDefaults(t){let{lockAxis:i,dragStartDelay:n,constrainPosition:r,previewClass:s,boundaryElement:a,draggingDisabled:h,rootElementSelector:g,previewContainer:u}=t;this.disabled=h??!1,this.dragStartDelay=n||0,this.lockAxis=i||null,r&&(this.constrainPosition=r),s&&(this.previewClass=s),a&&(this.boundaryElement=a),g&&(this.rootElementSelector=g),u&&(this.previewContainer=u)}_setupHandlesListener(){this._handles.pipe(Ue(t=>{let i=t.map(n=>n.element);this._selfHandle&&this.rootElementSelector&&i.push(this.element),this._dragRef.withHandles(i)}),Ge(t=>re(...t.map(i=>i._stateChanges.pipe(Be(i))))),Z(this._destroyed)).subscribe(t=>{let i=this._dragRef,n=t.element.nativeElement;t.disabled?i.disableHandle(n):i.enableHandle(n)})}static \u0275fac=function(i){return new(i||o)};static \u0275dir=ce({type:o,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(i,n){i&2&&w("cdk-drag-disabled",n.disabled)("cdk-drag-dragging",n._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",ge],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",Qe]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[pe([{provide:Ce,useExisting:o}]),We]})}return o})();var ei=(()=>{class o{static \u0275fac=function(i){return new(i||o)};static \u0275mod=Ke({type:o});static \u0275inj=je({providers:[Yt],imports:[Ot]})}return o})();var ti=(()=>{let e=class e{constructor(i){this.http=i,this.baseUrl=at.webServiceUrl+"/cartas",this.httpOptions={headers:new me({"Content-Type":"application/json"})},this.fileHttpOptions={headers:new me({"Content-Type":"application/json"}),responseType:"blob"}}handleError(i){return typeof ErrorEvent<"u"&&i.error instanceof ErrorEvent?console.log(`An error occurred ${i.status}, body was: ${i.error.message}`):console.log(`Backend returned code ${i.status}, body was: ${i.error.message}`),Fe(()=>({status:i.status,message:i.error.message}))}downloadAgreementCard(i){return this.http.post(this.baseUrl+"/carta-acuerdo",i,ke(Re({},this.fileHttpOptions),{responseType:"blob"})).pipe(He(2),ze(this.handleError))}getAgreementData(i){return this.http.get(this.baseUrl+`/datos-cliente/${i}`,this.httpOptions)}};e.\u0275fac=function(n){return new(n||e)($e(ot))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let o=e;return o})();function xi(o,e){if(o&1&&(c(0,"div",19),d(1),l()),o&2){let t=b();p(),M(" Tramo: ",t.tramoDetectado," ")}}function Pi(o,e){if(o&1&&(c(0,"div",20),d(1),l()),o&2){let t=b();w("bg-blue-50",t.selectedEntidad==="financiera_oh")("border-blue-500",t.selectedEntidad==="financiera_oh")("text-blue-700",t.selectedEntidad==="financiera_oh")("bg-purple-50",t.selectedEntidad==="nsoluciones")("border-purple-500",t.selectedEntidad==="nsoluciones")("text-purple-700",t.selectedEntidad==="nsoluciones")("border",!0),p(),M(" Plantilla: ",t.selectedEntidad==="financiera_oh"?"Financiera Oh":"NSoluciones"," ")}}function Di(o,e){o&1&&P(0,"span",21)}function Ci(o,e){if(o&1&&(c(0,"div",22)(1,"div",23)(2,"div",24),P(3,"lucide-angular",25),l(),c(4,"h3",26),d(5," Busca un cliente para comenzar "),l(),c(6,"p",27),d(7," Ingresa el DNI del cliente en el buscador para cargar autom\xE1ticamente los datos y generar el acuerdo de pago. "),l()()()),o&2){let t=b();p(),w("bg-white",!t.isDarkMode)("bg-slate-800",t.isDarkMode),p(2),m("size",48),p(),w("text-slate-900",!t.isDarkMode)("text-white",t.isDarkMode),p(2),w("text-slate-600",!t.isDarkMode)("text-slate-400",t.isDarkMode)}}function wi(o,e){if(o&1&&(c(0,"div",82),d(1),l()),o&2){let t,i=b(2);p(),M(" ",i.formatDisplayDate((t=i.agreementForm.get("fechaActual"))==null?null:t.value)," ")}}function yi(o,e){if(o&1&&(c(0,"div",83),d(1),l()),o&2){let t=b(2);p(),M(" ",t.getFieldError("fechaActual")," ")}}function Ei(o,e){o&1&&(D(0),d(1," ACUERDO DE PAGO - CAMPA\xD1A LIMPIA TU DEUDA "),C())}function Si(o,e){o&1&&(D(0),d(1," ACUERDO DE PAGO - CANCELACI\xD3N TOTAL "),C())}function Ti(o,e){if(o&1&&(c(0,"div",82),d(1),l()),o&2){let t,i=b(2);p(),M(" ",i.formatDisplayDate((t=i.agreementForm.get("fechaCompromiso"))==null?null:t.value)," ")}}function Oi(o,e){if(o&1&&(c(0,"div",83),d(1),l()),o&2){let t=b(2);p(),M(" ",t.getFieldError("fechaCompromiso")," ")}}function Ii(o,e){if(o&1){let t=G();c(0,"tr",84)(1,"td",85)(2,"div",86)(3,"div",87)(4,"strong"),d(5),l(),d(6),l(),c(7,"div",88)(8,"button",89),S("click",function(){let n=R(t).index,r=b(2);return k(r.abrirEditorFormaPago(n))}),d(9,"Editar"),l(),c(10,"button",90),S("click",function(){let n=R(t).index,r=b(2);return k(r.removeFormaPago(n))}),d(11,"Eliminar"),l()()()()()}if(o&2){let t,i=e.$implicit,n=e.index,r=b(2);m("formGroupName",n),p(5),he("",n+1,"",r.getOrdinalSuffix(n+1)," PAGO"),p(),he(" \u2014 ",(t=i.get("fechaPago"))==null?null:t.value," \u2014 S/ ",(t=i.get("montoPago"))==null?null:t.value," SOLES "),p(4),m("disabled",r.formasDePagoArray.length<=1)}}function Ri(o,e){if(o&1&&(c(0,"tr")(1,"td",91)(2,"div",92),d(3,"Observaci\xF3n:"),l(),c(4,"div",93),d(5),l()()()),o&2){let t=b(2);p(5),X(t.observacionTexto)}}function ki(o,e){o&1&&(c(0,"tr")(1,"td",94)(2,"em"),d(3,"No hay formas de pago definidas."),l()()())}function Mi(o,e){o&1&&(D(0),d(1," Acercarse con su DNI, tarjeta Oh! y este documento; Indicar en los cajeros que va a realizar un "),c(2,"strong"),d(3,"pago o abono"),l(),d(4," a su Tarjeta Oh por el monto "),c(5,"strong"),d(6,"APROBADO"),l(),d(7,", en caso de no tener la tarjeta puede pagar con el n\xFAmero de cuenta de su tarjeta consignada en la parte superior de este documento. "),C())}function Ai(o,e){o&1&&(D(0),d(1," Acercarse a cualquier agencia o Agente BCP, realice el pago al N\xFAmero de cuenta corriente BCP Soles: 1931851985017 "),P(2,"br"),d(3," El N\xFAmero de cuenta interbancaria es 00219300185198501718. Una vez realizado el dep\xF3sito enviar el voucher de pago n\xFAmero telefonico 915326798 para iniciar el tramite de la Carta de no adeudo. "),C())}function Fi(o,e){o&1&&(D(0),d(1," Con su n\xFAmero de DNI "),C())}function Ni(o,e){o&1&&(D(0),d(1," NUMERO DE CUENTA CORRIENTE - 1931851985017 "),C())}function Li(o,e){o&1&&(D(0),d(1," Presentando su DNI "),C())}function zi(o,e){o&1&&(D(0),d(1," NUMERO DE CUENTA CORRIENTE - 1931851985017 "),C())}function Vi(o,e){o&1&&(D(0),d(1," Enviar foto del voucher de transacci\xF3n al WhatsApp corporativo de Financiera Oh para su validaci\xF3n, registro, cancelaci\xF3n de deuda y retiro de cobranza. "),C())}function Hi(o,e){o&1&&(D(0),d(1," Enviar foto del v\xF3ucher de transacci\xF3n al WhatsApp corporativo de NSOLUCIONES para su validaci\xF3n, registro, cancelaci\xF3n de deuda y retiro de cobranza. "),C())}function Bi(o,e){o&1&&(D(0),d(1," A partir de 15 d\xEDas h\xE1biles de la cancelaci\xF3n ya puede solicitar el tr\xE1mite su carta de no adeudo escribiendo al "),c(2,"strong"),d(3,"WhatsApp: 980732405 - OPCION 2"),l(),d(4," o llamando al (01) 619-4800; (01) 631-5400; para que lo pueda recoger en plataforma o solicitar el env\xEDo a su correo. "),C())}function Gi(o,e){o&1&&(D(0),d(1," A partir de 24 HORAS posterior al pago ya podr\xE1 solicitar el tr\xE1mite su carta de no adeudo escribiendo al WhatsApp: 915326798 para coordinar el env\xEDo a su correo. "),C())}function Ui(o,e){o&1&&(D(0),d(1," Si desea mayor informaci\xF3n, comun\xEDquese a los siguientes n\xFAmeros de contacto directo: V\xEDa Telf.: o v\xEDa WhatsApp: "),c(2,"strong"),d(3,"968437436"),l(),C())}function ji(o,e){o&1&&(D(0),d(1," Si desea mayor informaci\xF3n, comun\xEDquese a los siguientes n\xFAmeros de contacto directo: V\xEDa Telf.: o v\xEDa WhatsApp: "),c(2,"strong"),d(3,"915257493"),l(),C())}function $i(o,e){o&1&&(D(0),c(1,"div",79),d(2,"LOGO BCP"),l(),c(3,"div",95)(4,"strong"),d(5,"Romina Tapia Albinagorta \xA0\xA0\xA0\xA0\xA0\xA0 Dpto."),l(),P(6,"br"),c(7,"strong"),d(8,"COBRANZAS Oh!"),l()(),C())}function qi(o,e){o&1&&(D(0),c(1,"div",79),d(2,"FIRMA"),l(),c(3,"div",95)(4,"strong"),d(5,"Emily Dayana Saenz Martinez"),l(),P(6,"br"),c(7,"strong"),d(8,"NSOLUCIONES CONSULTING S.A.C"),l()(),C())}function Wi(o,e){if(o&1){let t=G();c(0,"div",96)(1,"div",97)(2,"div",98)(3,"h3"),d(4,"Editar forma de pago"),l(),c(5,"button",99),S("click",function(){R(t);let n=b(2);return k(n.cerrarEditor())}),d(6,"\xD7"),l()(),c(7,"div",100)(8,"div",101)(9,"label",102),d(10,"\u{1F4C5} Fecha del pago"),l(),P(11,"input",103),l(),c(12,"div",101)(13,"label",104),d(14,"\u{1F4B0} Monto (S/)"),l(),P(15,"input",105),l()(),c(16,"div",106)(17,"button",107),S("click",function(){R(t);let n=b(2);return k(n.cerrarEditor())}),d(18,"Cancelar"),l(),c(19,"button",108),S("click",function(){R(t);let n=b(2);return k(n.guardarEdicionFormaPago())}),d(20,"Guardar"),l()()()()}if(o&2){let t=b(2);p(7),m("formGroup",t.formaPagoTemporal)}}function Zi(o,e){if(o&1){let t=G();c(0,"div",22)(1,"form",28)(2,"div",29)(3,"div",30)(4,"div",31)(5,"div",32),d(6,"LOGO 1"),l()(),c(7,"div",33)(8,"div",32),d(9,"LOGO 2"),l()()()(),P(10,"div",34),c(11,"div",35)(12,"div",36),P(13,"input",37),x(14,wi,2,1,"div",38),l(),x(15,yi,2,1,"div",39),l(),c(16,"div",40),x(17,Ei,2,0,"ng-container",41)(18,Si,2,0,"ng-container",41),l(),c(19,"table",42)(20,"tr")(21,"td",43),d(22,"NOMBRE DEL TITULAR"),l(),c(23,"td",44),P(24,"input",45),l()(),c(25,"tr")(26,"td",43),d(27,"NUMERO DNI"),l(),c(28,"td",44),P(29,"input",46),l()(),c(30,"tr")(31,"td",43),d(32,"Nro. CUENTA TARJETA Oh!"),l(),c(33,"td",44),P(34,"input",47),l()()(),c(35,"div",48),d(36," \xA1Felicitaciones!, ya se encuentra "),c(37,"strong"),d(38,"APROBADO"),l(),d(39," su "),c(40,"strong"),d(41,"CAMPA\xD1A ESPECIAL"),l(),d(42," con el cual estar\xEDa cancelando "),c(43,"strong"),d(44,"TODA SU DEUDA"),l(),d(45,", lo puede pagar desde el d\xEDa de hoy, se encontrar\xE1 habilitado hasta este: "),l(),c(46,"div",49)(47,"div",36),P(48,"input",50),x(49,Ti,2,1,"div",38),l(),x(50,Oi,2,1,"div",39),l(),c(51,"div",51),d(52," DETALLE DE DEUDA Y PROMOCI\xD3N APROBADA "),l(),c(53,"table",52)(54,"tr")(55,"th",53),d(56,"DEUDA TOTAL"),l(),c(57,"th",53),d(58,"DESCUENTO"),l(),c(59,"th",53),d(60,"MONTO APROBADO"),l()(),c(61,"tr")(62,"td",54)(63,"div",55),d(64," S/ "),c(65,"input",56),S("input",function(){R(t);let n=b();return k(n.calculateDiscount())}),l()()(),c(66,"td",54)(67,"div",55),d(68," S/ "),P(69,"input",57),l()(),c(70,"td",58)(71,"div",55),d(72," S/ "),c(73,"input",59),S("input",function(){R(t);let n=b();return k(n.calculateDiscount())}),l(),c(74,"button",60),S("click",function(){R(t);let n=b();return k(n.toggleBlackoutMode())}),d(75),l()()()(),c(76,"tr")(77,"td",61)(78,"div",62)(79,"span",63),d(80,"Formas de pago"),l(),c(81,"button",64),S("click",function(){R(t);let n=b();return k(n.addFormaPago())}),d(82,"+ Agregar"),l()()()(),D(83,65),x(84,Ii,12,6,"tr",66),C(),x(85,Ri,6,1,"tr",41)(86,ki,4,0,"tr",41),l(),c(87,"div",67),x(88,Mi,8,0,"ng-container",41)(89,Ai,4,0,"ng-container",41),l(),c(90,"div",68),d(91,"CENTROS DE PAGO VIRTUAL:"),l(),c(92,"div",69)(93,"div",70)(94,"div",71),d(95,"BCP"),l(),c(96,"div",72),d(97,"APP/WEB"),l(),c(98,"div",73),x(99,Fi,2,0,"ng-container",41)(100,Ni,2,0,"ng-container",41),l()()(),c(101,"div",68),d(102,"CENTROS DE PAGO PRESENCIAL :"),l(),c(103,"div",69)(104,"div",70)(105,"div",71),d(106,"BCP"),l(),c(107,"div",72),d(108,"AGENTE/VENTANILLA"),l(),c(109,"div",73),x(110,Li,2,0,"ng-container",41)(111,zi,2,0,"ng-container",41),l()()(),c(112,"div",68),d(113,"CONFIRMACI\xD3N DE PAGO:"),l(),c(114,"div",69),x(115,Vi,2,0,"ng-container",41)(116,Hi,2,0,"ng-container",41),l(),c(117,"div",68),d(118,"TRAMITE DE CARTA DE NO ADEUDO:"),l(),c(119,"div",69),x(120,Bi,5,0,"ng-container",41)(121,Gi,2,0,"ng-container",41),l(),c(122,"div",74),x(123,Ui,4,0,"ng-container",41)(124,ji,4,0,"ng-container",41),l(),c(125,"div",75)(126,"div",76)(127,"span"),d(128,"Atentamente,"),l()(),c(129,"div",77),x(130,$i,9,0,"ng-container",41)(131,qi,9,0,"ng-container",41),l(),c(132,"div",78)(133,"div",79),d(134,"COMPROMISO"),l()()(),c(135,"div",80)(136,"p"),d(137,"(*) Si al recibir esta comunicaci\xF3n Ud. Ha cancelado o regularizado su deuda, por favor desestimar su contenido."),l(),c(138,"p"),d(139,"(*) Para acceder a las facilidades deber\xE1 estar incluida en la relaci\xF3n de cuentas pre -aprobado."),l(),c(140,"p"),d(141,"(*) Sujeto a variaci\xF3n, por negativa a facilidad."),l()()(),x(142,Wi,21,1,"div",81),l()}if(o&2){let t,i,n=b();p(),m("formGroup",n.agreementForm),p(12),w("is-invalid",n.isFieldInvalid("fechaActual")),p(),m("ngIf",(t=n.agreementForm.get("fechaActual"))==null?null:t.value),p(),m("ngIf",n.isFieldInvalid("fechaActual")),p(),w("bg-[#d32f2f]",n.selectedEntidad==="financiera_oh")("bg-black",n.selectedEntidad==="nsoluciones"),p(),m("ngIf",n.selectedEntidad==="financiera_oh"),p(),m("ngIf",n.selectedEntidad==="nsoluciones"),p(30),w("is-invalid",n.isFieldInvalid("fechaCompromiso")),m("readonly",n.readonlyInputs),p(),m("ngIf",(i=n.agreementForm.get("fechaCompromiso"))==null?null:i.value),p(),m("ngIf",n.isFieldInvalid("fechaCompromiso")),p(),w("bg-[#d32f2f]",n.selectedEntidad==="financiera_oh")("bg-black",n.selectedEntidad==="nsoluciones"),p(14),w("blackout",n.isBlackoutMode)("is-invalid",n.isFieldInvalid("deudaTotal")),p(4),w("blackout",n.isBlackoutMode),p(4),w("is-invalid",n.isFieldInvalid("montoAprobado")),p(),w("active",n.isBlackoutMode),m("title",n.getToggleTitle()),p(),M(" ",n.getToggleIcon()," "),p(9),m("ngForOf",n.formasDePagoArray.controls),p(),m("ngIf",n.mostrarObservacion),p(),m("ngIf",n.formasDePagoArray.length===0),p(2),m("ngIf",n.selectedEntidad==="financiera_oh"),p(),m("ngIf",n.selectedEntidad==="nsoluciones"),p(10),m("ngIf",n.selectedEntidad==="financiera_oh"),p(),m("ngIf",n.selectedEntidad==="nsoluciones"),p(10),m("ngIf",n.selectedEntidad==="financiera_oh"),p(),m("ngIf",n.selectedEntidad==="nsoluciones"),p(4),m("ngIf",n.selectedEntidad==="financiera_oh"),p(),m("ngIf",n.selectedEntidad==="nsoluciones"),p(4),m("ngIf",n.selectedEntidad==="financiera_oh"),p(),m("ngIf",n.selectedEntidad==="nsoluciones"),p(2),m("ngIf",n.selectedEntidad==="financiera_oh"),p(),m("ngIf",n.selectedEntidad==="nsoluciones"),p(6),m("ngIf",n.selectedEntidad==="financiera_oh"),p(),m("ngIf",n.selectedEntidad==="nsoluciones"),p(11),m("ngIf",n.formaPagoSeleccionadaIndex!==null)}}function Ki(o,e){if(o&1){let t=G();c(0,"div",109)(1,"span",110),d(2),l(),c(3,"div",111),d(4),l(),c(5,"button",112),S("click",function(){let n=R(t).$implicit,r=b();return k(r.removeToast(n.id))}),d(6,"\xD7"),l()()}if(o&2){let t=e.$implicit;m("ngClass",t.type),p(2),X(t.icon),p(2),X(t.message)}}var ii=(()=>{let e=class e{constructor(i,n,r){this.fb=i,this.agreementsService=n,this.themeService=r,this.isDarkMode=!1,this.readonlyInputs=!1,this.isLoading=!1,this.isBlackoutMode=!1,this.isDeudaTotalReset=!1,this.tramoDetectado="",this.mostrarObservacion=!1,this.observacionTexto="",this.mostrarDocumento=!1,this.toasts=[],this.toastIdCounter=0,this.formaPagoSeleccionadaIndex=null,this.formaPagoTemporal=this.fb.group({fechaPago:[""],montoPago:[0]}),this.agreementForm=this.createForm(),this.searchForm=this.fb.group({dniBusqueda:["",[v.required,v.pattern(/^\d{8}$/)]]}),Xe(()=>{this.isDarkMode=this.themeService.isDarkMode()})}ngOnInit(){this.setupFormValueChanges()}createForm(){return this.fb.group({entidad:["financiera_oh",v.required],fechaActual:[this.formatDate(new Date),v.required],nombreTitular:["",[v.required,v.minLength(2)]],dni:["",[v.required,v.pattern(/^\d{8}$/)]],cuentaTarjeta:["",[v.required,v.minLength(10)]],fechaCompromiso:[this.formatDate(new Date(Date.now()+720*60*60*1e3)),v.required],deudaTotal:[0,[v.required,v.min(.01)]],descuento:[0,[v.required,v.min(0)]],montoAprobado:[0,[v.required,v.min(.01)]],formasDePago:this.fb.array([])})}createFormaPago(){return this.fb.group({fechaPago:[this.formatDate(new Date),v.required],montoPago:[0,[v.required,v.min(.01)]]})}get formasDePagoArray(){return this.agreementForm.get("formasDePago")}setupFormValueChanges(){this.agreementForm.get("deudaTotal")?.valueChanges.subscribe(()=>{this.isDeudaTotalReset||this.calculateDiscount()}),this.agreementForm.get("descuento")?.valueChanges.subscribe(()=>{this.isDeudaTotalReset||this.calculateDiscount()}),this.agreementForm.get("montoAprobado")?.valueChanges.subscribe(()=>{this.isDeudaTotalReset||this.calculateDiscount()})}formatDate(i){return i.toISOString().split("T")[0]}formatDisplayDate(i){if(!i)return"";let[n,r,s]=i.split("-").map(Number);return new Date(n,r-1,s).toLocaleDateString("es-PE",{weekday:"long",year:"numeric",month:"long",day:"numeric"}).replace("septiembre","setiembre")}determinarEntidadPorTramo(i){return i==="Tramo 3"||i==="Tramo 5"?"financiera_oh":i==="CONTACTO_TOTAL"?"nsoluciones":"financiera_oh"}calculateDiscount(){let i=this.agreementForm.get("deudaTotal")?.value||0,n=this.agreementForm.get("montoAprobado")?.value||0,r=i-n;r<0&&(r=0),this.agreementForm.patchValue({descuento:Number(r.toFixed(2))},{emitEvent:!1})}addFormaPago(){this.formasDePagoArray.length<10&&this.formasDePagoArray.push(this.createFormaPago())}removeFormaPago(i){this.formasDePagoArray.removeAt(i)}buscarPorDni(){if(this.searchForm.invalid){this.searchForm.markAllAsTouched();return}let i=this.searchForm.get("dniBusqueda")?.value;this.limpiarCampos(),this.searchForm.reset(),this.isLoading=!0,this.agreementsService.getAgreementData(i).subscribe({next:n=>{let r=this.determinarEntidadPorTramo(n.tramo);this.agreementForm.patchValue({entidad:r,fechaActual:n.fechaActual,nombreTitular:n.nombreDelTitular,dni:i,cuentaTarjeta:n.cuentaTarjeta,fechaCompromiso:n.fechaCompromiso}),this.readonlyInputs=!0,this.tramoDetectado=n.tramo,this.observacionTexto=`Deuda total: ${n.deudaTotal}
Saldo capital asignado: ${n.saldoCapitalAsig}
LTD: ${n.ltd}
LTDE: ${n.ltde}
Asesor: ${n.asesor}
Tipificaci\xF3n: ${n.observacion}`,this.mostrarObservacion=!0,this.mostrarDocumento=!0,this.isLoading=!1},error:n=>{this.isLoading=!1,this.readonlyInputs=!1,n.status===404?this.showToast("error","Cliente no encontrado en la base de datos."):n.status===422?this.showToast("warning","El cliente no tiene promesa de pago registrada."):this.showToast("error","Error al obtener datos del cliente.")}})}toggleBlackoutMode(){if(this.isBlackoutMode)confirm("Desea volver a mostrar los campos?")&&(this.isBlackoutMode=!1);else{let i=this.agreementForm.get("montoAprobado")?.value||0;if(i<=0){this.showToast("error","Ingrese un monto aprobado v\xE1lido.");return}confirm("Usar monto aprobado como deuda total?")&&(this.isDeudaTotalReset=!0,this.isBlackoutMode=!0,this.agreementForm.patchValue({deudaTotal:i,descuento:0},{emitEvent:!1}),setTimeout(()=>{this.isDeudaTotalReset=!1},100))}}calculateFromPercentage(){let i=this.agreementForm.get("deudaTotal")?.value||0;if(i<=0){this.showToast("error","Ingrese primero el monto de la deuda total.");return}let n=prompt("Ingrese porcentaje de descuento (0-100):");if(n&&!isNaN(Number(n))&&Number(n)>=0&&Number(n)<=100){let r=i*Number(n)/100,s=i-r;this.agreementForm.patchValue({descuento:Number(r.toFixed(2)),montoAprobado:Number(s.toFixed(2))})}}onSubmit(){if(!this.agreementForm.valid){this.markFormGroupTouched(),this.showToast("error","Campos requeridos incompletos.");return}let i=this.agreementForm.get("montoAprobado")?.value||0;if(this.formasDePagoArray.length>0){let a=this.formasDePagoArray.controls.reduce((g,u)=>g+Number(u.get("montoPago")?.value||0),0);if(Math.abs(a-i)>.01){this.showToast("error","Suma de pagos no coincide con monto aprobado");return}}this.isLoading=!0;let n=this.agreementForm.value,r=this.isBlackoutMode?n.montoAprobado:n.deudaTotal,s={entidad:n.entidad,fechaActual:this.formatDisplayDate(n.fechaActual),nombreTitular:n.nombreTitular,dni:n.dni,cuentaTarjeta:n.cuentaTarjeta,fechaCompromiso:this.formatDisplayDate(n.fechaCompromiso),deudaTotal:r,descuento:n.descuento,montoAprobado:n.montoAprobado,formasDePago:this.formasDePagoArray.controls.map((a,h)=>{let g=a.get("fechaPago")?.value,u=a.get("montoPago")?.value,[E,I,V]=g.split("-"),ie=`${V}/${I}`;return`${h+1}${this.getOrdinalSuffix(h+1)} PAGO - ${ie} - ${u} SOLES`})};this.agreementsService.downloadAgreementCard(s).subscribe({next:a=>{this.downloadFile(a,`ACUERDO_DE_PAGO_${s.dni}.pdf`),this.isLoading=!1,this.showToast("success","Acuerdo descargado.")},error:a=>{console.error("Error completo:",a),console.error("Status:",a.status),console.error("Mensaje:",a.message),console.error("Request enviado:",s),this.isLoading=!1,this.showToast("error",`Error ${a.status}: ${a.message||"Error al generar documento"}`)}})}limpiarCampos(){for(;this.formasDePagoArray.length>0;)this.formasDePagoArray.removeAt(0);this.isDeudaTotalReset=!1,this.mostrarObservacion=!1,this.observacionTexto="",this.readonlyInputs=!1,this.isBlackoutMode=!1,this.tramoDetectado="",this.mostrarDocumento=!1,this.toasts=[];let i=this.agreementForm.get("entidad")?.value||"financiera_oh";this.agreementForm.patchValue({entidad:i,fechaActual:this.formatDate(new Date),nombreTitular:"",dni:"",cuentaTarjeta:"",fechaCompromiso:this.formatDate(new Date(Date.now()+720*60*60*1e3)),deudaTotal:0,descuento:0,montoAprobado:0})}resetForm(){confirm("Limpiar todos los campos?")&&this.limpiarCampos()}isFieldInvalid(i){let n=this.agreementForm.get(i);return!!(n?.invalid&&(n?.touched||n?.dirty))}getFieldError(i){let n=this.agreementForm.get(i);if(n?.errors&&(n?.touched||n?.dirty)){if(n.errors.required)return`${this.getFieldLabel(i)} requerido`;if(n.errors.pattern)return i==="dni"?"DNI: 8 d\xEDgitos":`${this.getFieldLabel(i)} inv\xE1lido`;if(n.errors.minLength)return`${this.getFieldLabel(i)} m\xEDn ${n.errors.minLength.requiredLength}`;if(n.errors.min)return`${this.getFieldLabel(i)} > ${n.errors.min.min}`}return""}getFieldLabel(i){return{fechaActual:"Fecha",nombreTitular:"Nombre",dni:"DNI",cuentaTarjeta:"Cuenta",fechaCompromiso:"Fecha Compromiso",deudaTotal:"Deuda",descuento:"Descuento",montoAprobado:"Monto Aprobado"}[i]||i}getOrdinalSuffix(i){let n=["ER","DO","ER","TO","TO","TO","MO","VO","NO","MO"];return i<=10?n[i-1]:""}downloadFile(i,n){let r=window.URL.createObjectURL(i),s=document.createElement("a");s.href=r,s.download=n,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(r)}markFormGroupTouched(){Object.keys(this.agreementForm.controls).forEach(i=>{let n=this.agreementForm.get(i);n?.markAsTouched(),n instanceof vt&&n.controls.forEach(r=>r.markAsTouched())})}showToast(i,n){let r=i==="error"?"\u274C":i==="warning"?"\u26A0\uFE0F":"\u2705",s=this.toastIdCounter++;this.toasts.push({id:s,type:i,message:n,icon:r}),setTimeout(()=>this.removeToast(s),5e3)}removeToast(i){this.toasts=this.toasts.filter(n=>n.id!==i)}onlyNumbers(i){let n=i.target;n.value=n.value.replace(/[^0-9]/g,"")}getFormGroupAt(i){return this.formasDePagoArray.at(i)}abrirEditorFormaPago(i){this.formaPagoSeleccionadaIndex=i;let n=this.formasDePagoArray.at(i);this.formaPagoTemporal.setValue({fechaPago:n.get("fechaPago")?.value,montoPago:n.get("montoPago")?.value})}guardarEdicionFormaPago(){if(this.formaPagoTemporal.invalid){this.formaPagoTemporal.markAllAsTouched(),this.showToast("error","Complete todos los campos del pago.");return}this.formaPagoSeleccionadaIndex!==null&&(this.formasDePagoArray.at(this.formaPagoSeleccionadaIndex).patchValue({fechaPago:this.formaPagoTemporal.get("fechaPago")?.value,montoPago:this.formaPagoTemporal.get("montoPago")?.value}),this.cerrarEditor())}cerrarEditor(){this.formaPagoSeleccionadaIndex=null,this.formaPagoTemporal.reset({fechaPago:"",montoPago:0})}getToggleIcon(){return this.isBlackoutMode?"\u21B6":"\xD7"}getToggleTitle(){return this.isBlackoutMode?"Restaurar vista de deuda total":"Ocultar deuda total y usar monto aprobado como deuda"}get selectedEntidad(){return this.agreementForm.get("entidad")?.value||"financiera_oh"}};e.\u0275fac=function(n){return new(n||e)(K(xt),K(ti),K(It))},e.\u0275cmp=L({type:e,selectors:[["app-agreements-page"]],decls:26,vars:11,consts:[[1,"payment-agreement-container"],[1,"flex","items-center","gap-2","mb-3"],[1,"w-8","h-8","bg-gradient-to-br","from-blue-600","to-purple-700","rounded-lg","flex","items-center","justify-center"],["name","file-text",1,"text-white",3,"size"],[1,"text-lg","font-bold","text-slate-900","dark:text-white"],[1,"text-xs","text-slate-600","dark:text-slate-400"],[1,"document-header"],[1,"flex","gap-2","items-center",3,"formGroup"],["formControlName","dniBusqueda","type","text","placeholder","DNI","maxlength","8",1,"h-10","w-[120px]","px-3","text-sm","border","border-slate-300","dark:border-slate-600","rounded-lg","bg-white","dark:bg-slate-700","text-slate-900","dark:text-white","placeholder:text-slate-400","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-colors"],["type","button",1,"h-10","px-4","text-sm","font-medium","text-white","bg-gradient-to-r","from-emerald-500","to-emerald-600","hover:from-emerald-600","hover:to-emerald-700","rounded-lg","transition-all","duration-200","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["class","ml-2 px-3 py-1 bg-green-50 border border-green-500 rounded text-sm font-bold text-green-700",4,"ngIf"],["class","ml-2 px-3 py-1 rounded text-sm font-bold",3,"bg-blue-50","border-blue-500","text-blue-700","bg-purple-50","border-purple-500","text-purple-700","border",4,"ngIf"],["class","spinner",4,"ngIf"],[1,"document-actions"],["type","button",1,"h-10","px-4","text-sm","font-medium","text-white","bg-gradient-to-r","from-red-500","to-red-600","hover:from-red-600","hover:to-red-700","rounded-lg","transition-all","duration-200",3,"click"],["type","button",1,"h-10","px-4","text-sm","font-medium","text-white","bg-gradient-to-r","from-blue-600","to-purple-700","hover:from-blue-700","hover:to-purple-800","rounded-lg","transition-all","duration-200","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["class","document-container",4,"ngIf"],[1,"toast-container"],["class","toast",3,"ngClass",4,"ngFor","ngForOf"],[1,"ml-2","px-3","py-1","bg-green-50","border","border-green-500","rounded","text-sm","font-bold","text-green-700"],[1,"ml-2","px-3","py-1","rounded","text-sm","font-bold"],[1,"spinner"],[1,"document-container"],[1,"flex","flex-col","items-center","justify-center","py-20","px-8","rounded-lg","shadow-sm"],[1,"w-24","h-24","bg-gradient-to-br","from-blue-600","to-purple-700","rounded-full","flex","items-center","justify-center","mb-6","shadow-lg"],["name","search",2,"color","white",3,"size"],[1,"text-xl","font-bold","mb-2"],[1,"text-sm","text-center","max-w-md"],[1,"document","bg-white","text-black",3,"formGroup"],[1,"header"],[1,"logo-section"],[1,"logo-left"],[1,"logo-placeholder"],[1,"logo-right"],[1,"line"],[1,"date-location"],[1,"date-input-container"],["type","date","formControlName","fechaActual",1,"editable-input","date-input"],["class","formatted-date",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"red-header","text-white"],[4,"ngIf"],[1,"client-table","bg-white","text-black"],[1,"label-cell","bg-[#f8f9fa]","text-black"],[1,"highlight","input-cell","bg-white","text-black"],["type","text","formControlName","nombreTitular","readonly","","placeholder","JUAN CARLOS PEREZ GARCIA",1,"editable-input","large-input","readonly-input"],["type","text","formControlName","dni","readonly","","placeholder","12345678",1,"editable-input","readonly-input"],["type","text","formControlName","cuentaTarjeta","readonly","","placeholder","1234567890123456",1,"editable-input","large-input","readonly-input"],[1,"congratulations","text-black"],[1,"date-highlight","text-black"],["type","date","formControlName","fechaCompromiso",1,"editable-input","date-input",3,"readonly"],[1,"debt-header","text-white"],[1,"debt-table","bg-white","text-black"],[1,"bg-white","text-black"],[1,"amount","bg-white","text-black"],[1,"amount-input-container"],["type","number","formControlName","deudaTotal","step","1","min","0",1,"editable-input","number-input",3,"input"],["type","number","formControlName","descuento","readonly","",1,"editable-input","number-input"],[1,"highlight-amount","bg-yellow-300","text-black"],["type","number","formControlName","montoAprobado","step","1","min","0",1,"editable-input","number-input",3,"input"],["type","button",1,"btn-toggle-debt",3,"click","title"],["colspan","3",1,"payment-header-clean"],[1,"payment-header-container"],[1,"payment-title"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],["formArrayName","formasDePago"],[3,"formGroupName",4,"ngFor","ngForOf"],[1,"instructions","text-black"],[1,"section-header","bg-[#e0e0e0]","text-black"],[1,"section-content","text-black"],[1,"centers-content"],[1,"bcp-logo"],[1,"center"],[1,"dni","text-black"],[1,"contact-info","text-black"],[1,"signature-section","text-black"],[1,"signature-left","text-black"],[1,"signature-center","text-black"],[1,"signature-right"],[1,"logo-placeholder","small"],[1,"footer-notes"],["class","modal-backdrop",4,"ngIf"],[1,"formatted-date"],[1,"error-message"],[3,"formGroupName"],["colspan","3",1,"payment-row"],[1,"payment-row-content"],[1,"payment-info"],[1,"payment-actions"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"click"],["type","button",1,"btn","btn-outline-danger","btn-sm",3,"click","disabled"],["colspan","3",1,"payment-observation-unique"],[1,"observation-header"],[1,"observation-content"],["colspan","3",1,"payment-section"],[2,"text-align","center","padding","10px"],[1,"modal-backdrop"],["cdkDrag","",1,"modal-dialog","enhanced"],["cdkDragHandle","",1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body",3,"formGroup"],[1,"modal-field"],["for","fechaPago"],["type","date","formControlName","fechaPago","id","fechaPago",1,"editable-input","date-input"],["for","montoPago"],["type","number","formControlName","montoPago","step","0.01","min","0","id","montoPago",1,"editable-input","number-input"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click"],[1,"toast",3,"ngClass"],[1,"toast-icon"],[1,"toast-content"],[1,"toast-close",3,"click"]],template:function(n,r){n&1&&(c(0,"div",0)(1,"div",1)(2,"div",2),P(3,"lucide-angular",3),l(),c(4,"div")(5,"h1",4),d(6,"Generador de Acuerdo de Pago"),l(),c(7,"p",5),d(8,"Creaci\xF3n de acuerdos de pago para clientes"),l()()(),c(9,"div",6)(10,"form",7),P(11,"input",8),c(12,"button",9),S("click",function(){return r.buscarPorDni()}),d(13," Buscar "),l(),x(14,xi,2,1,"div",10)(15,Pi,2,15,"div",11)(16,Di,1,0,"span",12),l(),c(17,"div",13)(18,"button",14),S("click",function(){return r.resetForm()}),d(19," Limpiar "),l(),c(20,"button",15),S("click",function(){return r.onSubmit()}),d(21),l()()(),x(22,Ci,8,13,"div",16)(23,Zi,143,50,"div",16),l(),c(24,"div",17),x(25,Ki,7,3,"div",18),l()),n&2&&(p(3),m("size",16),p(7),m("formGroup",r.searchForm),p(2),m("disabled",r.searchForm.invalid),p(2),m("ngIf",r.tramoDetectado),p(),m("ngIf",r.tramoDetectado),p(),m("ngIf",r.isLoading),p(4),m("disabled",r.agreementForm.invalid||r.isLoading),p(),M(" ",r.isLoading?"Generando...":"Generar PDF"," "),p(),m("ngIf",!r.mostrarDocumento),p(),m("ngIf",r.mostrarDocumento),p(2),m("ngForOf",r.toasts))},dependencies:[nt,et,tt,it,Dt,ht,lt,pt,dt,ct,bt,ft,gt,_t,mt,ut,Pt,st,rt,ei,Qt,Jt],styles:["body[_ngcontent-%COMP%]{margin-top:5rem;margin-bottom:2rem}.payment-agreement-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh;font-family:Arial,sans-serif;background-color:#f5f5f5;padding:2rem 20px 20px;transition:background-color .3s ease}.dark[_nghost-%COMP%]   .payment-agreement-container[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .payment-agreement-container[_ngcontent-%COMP%]{background-color:#0f172a}.dark[_nghost-%COMP%]   .document-header[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .document-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1e293b,#0f172a);border-color:#334155}.dark[_nghost-%COMP%]   .document-title[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .document-title[_ngcontent-%COMP%]{color:#e2e8f0}.document-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;padding:1.5rem 2rem;background:linear-gradient(135deg,#fff,#f8fafc);border-radius:16px;box-shadow:0 4px 20px #00000014;border:1px solid #e2e8f0;gap:1rem}.document-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:center}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:8px;cursor:pointer;font-size:.95rem;font-weight:500;transition:all .3s ease;text-decoration:none;display:inline-flex;align-items:center;gap:8px;box-shadow:0 2px 8px #0000000a;position:relative;overflow:hidden}.btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #0000001f}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#8b5cf6);color:#fff;border:none}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#2563eb,#7c3aed);box-shadow:0 4px 16px #3b82f64d}.btn-primary[_ngcontent-%COMP%]:disabled{background:linear-gradient(135deg,#94a3b8,#cbd5e1);cursor:not-allowed;transform:none}.btn-secondary[_ngcontent-%COMP%]{background:#64748b;color:#fff;border:none}.btn-secondary[_ngcontent-%COMP%]:hover{background:#475569}.btn-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff;border:none}.btn-success[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#059669,#047857);box-shadow:0 4px 16px #10b9814d}.btn-search[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff;border:none}.btn-search[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#059669,#047857);box-shadow:0 4px 16px #10b9814d}.btn-clean[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626);color:#fff;border:none}.btn-clean[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#dc2626,#b91c1c);box-shadow:0 4px 16px #ef44444d}.spinner[_ngcontent-%COMP%]{width:20px;height:20px;border:2px solid rgba(255,255,255,.3);border-top:2px solid currentColor;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.document-container[_ngcontent-%COMP%]{display:flex;justify-content:center;background:linear-gradient(135deg,#fff,#f8fafc);border-radius:8px;padding:40px;box-shadow:0 4px 8px #0000001a}.dark[_nghost-%COMP%]   .document-container[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .document-container[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1e293b,#0f172a)}.document[_ngcontent-%COMP%]{width:100%;max-width:800px;margin:0 auto;padding:30px;border:2px solid black;background:#fff;font-family:Arial,sans-serif;font-size:12px;position:relative}.editable-input[_ngcontent-%COMP%]{border:1px dashed #3498db;background:#f8f9fa;padding:6px 10px;border-radius:4px;font-family:inherit;font-size:inherit;font-weight:inherit;color:inherit;display:inline-block;transition:all .3s ease;vertical-align:middle;box-sizing:border-box}.editable-input.blackout[_ngcontent-%COMP%]{background:#000!important;color:transparent!important;border-color:#000!important}.editable-input.blackout[_ngcontent-%COMP%]:focus{background:#000!important;color:transparent!important;box-shadow:none!important}.editable-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#2980b9;background:#fff;box-shadow:0 0 0 2px #3498db33}.editable-input.is-invalid[_ngcontent-%COMP%]{border-color:#e74c3c;background:#fdf2f2}.readonly-input[_ngcontent-%COMP%]{background:#e2e8f0!important;border:1px solid #94a3b8!important;cursor:not-allowed!important;color:#475569!important;font-weight:500!important;box-shadow:inset 0 1px 3px #00000026!important}.readonly-input[_ngcontent-%COMP%]::placeholder{color:#94a3b8!important;opacity:.9!important;font-style:normal!important}.editable-input[_ngcontent-%COMP%]:readonly{background:#d1d5db;opacity:.85;border:1px solid #9ca3af;border-style:solid;cursor:not-allowed;color:#4b5563;font-weight:500;box-shadow:inset 0 2px 4px #00000026}.editable-input[_ngcontent-%COMP%]:readonly::placeholder{color:#9ca3af;opacity:1;font-style:italic}.date-input-container[_ngcontent-%COMP%]{position:relative;display:inline-block}.amount-input-container[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;justify-content:center;position:relative}.btn-toggle-debt[_ngcontent-%COMP%]{background:#e74c3c;color:#fff;border:none;border-radius:50%;width:22px;height:22px;font-size:12px;font-weight:700;cursor:pointer;display:flex;align-items:center;justify-content:center;margin-left:6px;transition:all .2s ease;line-height:1;padding:0}.btn-toggle-debt[_ngcontent-%COMP%]:hover{background:#c0392b;transform:scale(1.1)}.btn-toggle-debt[_ngcontent-%COMP%]:active{transform:scale(.95)}.btn-toggle-debt.active[_ngcontent-%COMP%]{background:#28a745}.btn-toggle-debt.active[_ngcontent-%COMP%]:hover{background:#218838}.editable-input.date-input[_ngcontent-%COMP%]{min-width:140px;width:140px}input[type=date][_ngcontent-%COMP%]{color-scheme:light}input[type=date][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{filter:none;opacity:1;cursor:pointer}.editable-input.number-input[_ngcontent-%COMP%]{text-align:right;min-width:80px;width:80px}.editable-input.large-input[_ngcontent-%COMP%]{min-width:280px;width:280px}.editable-input.dni-input[_ngcontent-%COMP%]{min-width:100px;width:100px;text-align:center}.header[_ngcontent-%COMP%]{padding:5px 0;position:relative;width:100%}.logo-section[_ngcontent-%COMP%]{width:100%;display:table}.logo-left[_ngcontent-%COMP%]{display:table-cell;width:50%;text-align:left;vertical-align:top}.logo-right[_ngcontent-%COMP%]{display:table-cell;width:50%;text-align:right;vertical-align:top}.logo-placeholder[_ngcontent-%COMP%]{display:inline-block;padding:10px 20px;background:#ecf0f1;border:2px dashed #bdc3c7;color:#7f8c8d;font-weight:700;font-size:12px}.logo-placeholder.small[_ngcontent-%COMP%]{padding:5px 10px;font-size:10px}.date-location[_ngcontent-%COMP%]{text-align:right;font-size:11px;margin:10px 0}.formatted-date[_ngcontent-%COMP%]{margin-top:8px;font-size:12px;color:#2c3e50;font-weight:500}.line[_ngcontent-%COMP%]{border-top:2px solid black;margin:5px 0 10px}.red-header[_ngcontent-%COMP%]{color:#fff;text-align:center;padding:10px;font-weight:700;font-size:13px;margin:10px 0}.client-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin:15px 0}.client-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #ccc;font-size:12px}.client-table[_ngcontent-%COMP%]   td.label-cell[_ngcontent-%COMP%]{background:#f8f9fa}.label-cell[_ngcontent-%COMP%]{width:40%;font-weight:400;background:#f8f9fa}.input-cell[_ngcontent-%COMP%]{width:60%;position:relative}.highlight[_ngcontent-%COMP%]{font-weight:700}.congratulations[_ngcontent-%COMP%]{padding:15px;text-align:center;font-size:12px;line-height:1.5;margin:15px 0}.date-highlight[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:14px;padding:15px 0}.debt-header[_ngcontent-%COMP%]{color:#fff;text-align:center;padding:10px;font-weight:700;font-size:12px;margin:15px 0 0}.debt-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;table-layout:fixed}.debt-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .debt-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ccc;padding:12px;text-align:center;font-size:12px;vertical-align:middle}.highlight-amount[_ngcontent-%COMP%]{background:#ff0;font-weight:700;font-size:13px}.amount[_ngcontent-%COMP%]{font-weight:700}.payment-header-clean[_ngcontent-%COMP%]{background:none;padding:12px;font-size:14px;font-weight:700;border:none}.payment-header-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.payment-title[_ngcontent-%COMP%]{font-weight:700;font-size:14px}.payment-row[_ngcontent-%COMP%]{padding:12px;border:1px solid #ccc;font-size:13px;background:#f8f9fa}.payment-row-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:15px;flex-wrap:wrap}.payment-info[_ngcontent-%COMP%]{flex:1;font-weight:500;order:1}.payment-actions[_ngcontent-%COMP%]{display:flex;gap:8px;flex-shrink:0;order:2}.payment-observation-unique[_ngcontent-%COMP%]{border:1px solid #ccc;padding:15px;background:#fff9e6;font-size:12px}.observation-header[_ngcontent-%COMP%]{font-weight:700;color:#d32f2f;margin-bottom:8px;font-size:13px}.observation-content[_ngcontent-%COMP%]{white-space:pre-line;line-height:1.4;color:#2c3e50}.btn-sm[_ngcontent-%COMP%]{font-size:12px;padding:6px 12px;border-radius:4px}.btn-outline-primary[_ngcontent-%COMP%]{background:#fff;color:#3498db;border:1px solid #3498db}.btn-outline-primary[_ngcontent-%COMP%]:hover{background:#3498db;color:#fff}.btn-outline-danger[_ngcontent-%COMP%]{background:#fff;color:#e74c3c;border:1px solid #e74c3c}.btn-outline-danger[_ngcontent-%COMP%]:hover{background:#e74c3c;color:#fff}.btn-outline-danger[_ngcontent-%COMP%]:disabled{background:#f8f9fa;color:#6c757d;border-color:#dee2e6;cursor:not-allowed}.payment-section[_ngcontent-%COMP%]{padding:20px;text-align:center;color:#6c757d;font-style:italic;background:#f8f9fa}.instructions[_ngcontent-%COMP%]{padding:15px;text-align:justify;font-size:12px;line-height:1.4;margin:15px 0}.section-header[_ngcontent-%COMP%]{background:#e0e0e0;padding:8px 12px;font-weight:700;font-size:11px;margin:10px 0 0}.section-content[_ngcontent-%COMP%]{padding:10px 12px;font-size:12px;border:1px solid #e0e0e0;border-top:none}.centers-content[_ngcontent-%COMP%]{width:100%;display:table}.bcp-logo[_ngcontent-%COMP%]{color:#203764;font-weight:700;font-size:14px;display:table-cell;width:80px;text-align:center;vertical-align:middle}.center[_ngcontent-%COMP%]{display:table-cell;width:120px;text-align:center;color:red;vertical-align:middle}.dni[_ngcontent-%COMP%]{display:table-cell;width:150px;text-align:center;vertical-align:middle;padding-left:20px}.contact-info[_ngcontent-%COMP%]{padding:10px 12px;font-size:12px;text-align:justify;margin:10px 0}.signature-section[_ngcontent-%COMP%]{margin-top:30px;padding:10px 12px;width:100%;display:table}.signature-left[_ngcontent-%COMP%]{display:table-cell;width:25%;vertical-align:top;text-align:left}.signature-center[_ngcontent-%COMP%]{display:table-cell;width:50%;vertical-align:top;text-align:center;padding:0 10px}.signature-right[_ngcontent-%COMP%]{display:table-cell;width:25%;vertical-align:top;text-align:center}.footer-notes[_ngcontent-%COMP%]{padding:10px 12px;font-size:9px;border-top:1px solid #ccc;margin-top:20px}.footer-notes[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:3px 0;line-height:1.3}.error-message[_ngcontent-%COMP%]{color:#e74c3c;font-size:10px;font-style:italic;margin-top:4px;display:block}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#0000004d;display:flex;align-items:center;justify-content:center;z-index:9999}.modal-dialog[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;width:300px;box-shadow:0 4px 12px #0003;position:relative}.modal-header[_ngcontent-%COMP%]{font-weight:700;display:flex;justify-content:space-between;align-items:center;cursor:move;margin-bottom:15px}.close-btn[_ngcontent-%COMP%]{border:none;background:transparent;font-size:20px;cursor:pointer}.modal-dialog.enhanced[_ngcontent-%COMP%]{width:360px;max-width:90%;border-radius:10px;overflow:hidden;animation:_ngcontent-%COMP%_fadeInUp .3s ease-out}.modal-body[_ngcontent-%COMP%]{padding-top:10px;display:flex;flex-direction:column;gap:15px}.modal-field[_ngcontent-%COMP%]{display:flex;flex-direction:column}.modal-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:13px;font-weight:600;margin-bottom:6px;color:#2c3e50}.modal-body[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding-top:15px}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(15px)}to{opacity:1;transform:translateY(0)}}.toast-container[_ngcontent-%COMP%]{position:fixed;top:100px;right:20px;z-index:10000;display:flex;flex-direction:column;gap:10px;max-width:400px}.toast[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:16px 20px;box-shadow:0 4px 12px #00000026;display:flex;align-items:center;gap:12px;border-left:4px solid;animation:_ngcontent-%COMP%_slideInRight .3s ease-out;min-width:300px}.toast.error[_ngcontent-%COMP%]{border-left-color:#ef4444;background:#fef2f2}.toast.warning[_ngcontent-%COMP%]{border-left-color:#f59e0b;background:#fffbeb}.toast-icon[_ngcontent-%COMP%]{font-size:20px}.toast-content[_ngcontent-%COMP%]{flex:1;font-size:14px;color:#374151;line-height:1.4}.toast-close[_ngcontent-%COMP%]{background:0 0;border:0;font-size:18px;cursor:pointer;color:#9ca3af;padding:0;width:20px;height:20px;display:flex;align-items:center;justify-content:center}.toast-close[_ngcontent-%COMP%]:hover{color:#374151}@keyframes _ngcontent-%COMP%_slideInRight{0%{transform:translate(400px);opacity:0}to{transform:translate(0);opacity:1}}@media (max-width: 1024px){.document-container[_ngcontent-%COMP%], .document[_ngcontent-%COMP%]{padding:20px}}@media (max-width: 768px){.payment-agreement-container[_ngcontent-%COMP%]{padding:10px}.document-header[_ngcontent-%COMP%]{flex-direction:column;gap:15px;text-align:center}.document-actions[_ngcontent-%COMP%]{justify-content:center}.document-container[_ngcontent-%COMP%]{padding:15px}.document[_ngcontent-%COMP%]{padding:15px;font-size:11px}.editable-input[_ngcontent-%COMP%]{min-width:100px;font-size:11px}.editable-input.large-input[_ngcontent-%COMP%]{min-width:200px;width:200px}}@media (max-width: 480px){.document[_ngcontent-%COMP%]{font-size:10px;padding:10px}.editable-input[_ngcontent-%COMP%]{min-width:80px;font-size:10px;padding:4px 6px}.editable-input.large-input[_ngcontent-%COMP%]{min-width:160px;width:160px}.editable-input.number-input[_ngcontent-%COMP%]{min-width:60px;width:60px}.client-table[_ngcontent-%COMP%]{font-size:10px}.client-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:6px 8px}}"]});let o=e;return o})();var An=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=L({type:e,selectors:[["app-agreements"]],decls:1,vars:0,template:function(n,r){n&1&&P(0,"app-agreements-page")},dependencies:[ii],encapsulation:2});let o=e;return o})();export{An as AgreementsComponent};
