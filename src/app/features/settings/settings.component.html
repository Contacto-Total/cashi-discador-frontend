<div class="settings-container">
  <!-- Header -->
  <div class="settings-header">
    <div class="header-content">
      <lucide-angular name="settings" [size]="28" class="header-icon"></lucide-angular>
      <div>
        <h1 class="header-title">Configuraci&oacute;n</h1>
        <p class="header-subtitle">Personaliza tu experiencia en la aplicaci&oacute;n</p>
      </div>
    </div>
  </div>

  <!-- Settings Grid -->
  <div class="settings-grid">
    <!-- Theme Card -->
    <div class="setting-card">
      <div class="card-header">
        <lucide-angular name="palette" [size]="22" class="card-icon"></lucide-angular>
        <h2 class="card-title">Tema</h2>
      </div>
      <p class="card-description">Selecciona el modo de color que prefieras</p>

      <div class="theme-selector">
        <button
          class="theme-btn"
          [class.active]="!isDarkMode"
          (click)="setTheme('light')"
        >
          <lucide-angular name="sun" [size]="20"></lucide-angular>
          <span>Claro</span>
        </button>
        <button
          class="theme-btn"
          [class.active]="isDarkMode"
          (click)="setTheme('dark')"
        >
          <lucide-angular name="moon" [size]="20"></lucide-angular>
          <span>Oscuro</span>
        </button>
      </div>
    </div>

    <!-- Font Size Card (includes preview) -->
    <div class="setting-card font-card">
      <div class="card-header">
        <lucide-angular name="type" [size]="22" class="card-icon"></lucide-angular>
        <h2 class="card-title">Tama&ntilde;o de Letra</h2>
      </div>
      <p class="card-description">Ajusta el tama&ntilde;o del texto para mejorar la legibilidad</p>

      <div class="font-size-control">
        <div class="size-buttons">
          <button
            class="size-btn"
            (click)="decreaseFontSize()"
            [disabled]="previewFontSize <= minFontSize"
            title="Reducir"
          >
            <span class="size-label-small">A</span>
            <lucide-angular name="minus" [size]="14"></lucide-angular>
          </button>

          <span class="current-size">{{ previewFontSize }}px</span>

          <button
            class="size-btn"
            (click)="increaseFontSize()"
            [disabled]="previewFontSize >= maxFontSize"
            title="Aumentar"
          >
            <span class="size-label-large">A</span>
            <lucide-angular name="plus" [size]="14"></lucide-angular>
          </button>
        </div>

        <div class="slider-container">
          <span class="slider-label">{{ minFontSize }}px</span>
          <input
            type="range"
            class="font-slider"
            [min]="minFontSize"
            [max]="maxFontSize"
            [value]="previewFontSize"
            (input)="onFontSizeChange($event)"
            [style.--slider-percentage]="getSliderPercentage() + '%'"
          />
          <span class="slider-label">{{ maxFontSize }}px</span>
        </div>

        <!-- Preview Box -->
        <div class="preview-box">
          <span class="preview-label">Vista previa:</span>
          <p class="preview-text" [style.font-size.px]="previewFontSize">{{ previewText }}</p>
          <p class="preview-text-small" [style.font-size.px]="previewFontSize * 0.85">Texto secundario m&aacute;s peque&ntilde;o.</p>
        </div>

        <!-- Action buttons -->
        <div class="action-buttons">
          <button
            class="reset-btn"
            (click)="resetFontSize()"
            [disabled]="isDefaultFontSize()"
          >
            <lucide-angular name="refresh-cw" [size]="14"></lucide-angular>
            <span>Restablecer</span>
          </button>

          <button
            class="apply-btn"
            (click)="applyFontSize()"
            [disabled]="!hasChanges()"
          >
            <lucide-angular name="check" [size]="14"></lucide-angular>
            <span>Aplicar</span>
          </button>
        </div>

        <!-- Change indicator -->
        <div class="change-indicator" *ngIf="hasChanges()">
          <lucide-angular name="info" [size]="14"></lucide-angular>
          <span>Cambios sin guardar. Presiona "Aplicar" para guardar.</span>
        </div>
      </div>
    </div>
  </div>
</div>
