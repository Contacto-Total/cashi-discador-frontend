<mat-card class="contact-card">
  <mat-card-header>
    <mat-card-title>Current Contact</mat-card-title>
  </mat-card-header>

  <mat-card-content>
    <div *ngIf="loading" class="loading-container">
      <div class="inline-flex items-center justify-center">
        <div class="animate-spin rounded-full h-10 w-10 border-b-2 border-primary"></div>
      </div>
      <p>Loading contact...</p>
    </div>

    <div *ngIf="!loading && !contact" class="no-contact">
      <lucide-angular name="user-x" class="icon"></lucide-angular>
      <p>No contact available</p>
    </div>

    <div *ngIf="!loading && contact" class="contact-info">
      <div class="contact-avatar">
        {{ getContactInitials() }}
      </div>

      <div class="contact-details">
        <h2 class="contact-name">{{ getFullName() }}</h2>

        <div class="contact-item">
          <lucide-angular name="phone" class="icon"></lucide-angular>
          <span>{{ contact.phoneNumber }}</span>
        </div>

        <div class="contact-item" *ngIf="contact.email">
          <lucide-angular name="mail" class="icon"></lucide-angular>
          <span>{{ contact.email }}</span>
        </div>

        <div class="contact-item" *ngIf="contact.campaignId">
          <lucide-angular name="megaphone" class="icon"></lucide-angular>
          <span>Campaign ID: {{ contact.campaignId }}</span>
        </div>
      </div>

      <div class="contact-history" *ngIf="contact.attempts > 0">
        <h3>Previous Attempts</h3>
        <div class="history-item">
          <lucide-angular name="clock" class="icon"></lucide-angular>
          <span>Attempts: {{ contact.attempts }}</span>
        </div>
        <div class="history-item" *ngIf="contact.lastCallDate">
          <lucide-angular name="calendar" class="icon"></lucide-angular>
          <span>Last call: {{ contact.lastCallDate | date:'short' }}</span>
        </div>
        <div class="history-item" *ngIf="contact.status">
          <lucide-angular name="info" class="icon"></lucide-angular>
          <span>Status: {{ contact.status }}</span>
        </div>
      </div>

      <div class="contact-notes" *ngIf="contact.notes">
        <h3>Notes</h3>
        <p>{{ contact.notes }}</p>
      </div>

      <div class="contact-actions">
        <button
          mat-raised-button
          color="primary"
          (click)="onCall()"
          [disabled]="!canCall"
          class="call-button">
          <lucide-angular name="phone" class="icon"></lucide-angular>
          Call
        </button>

        <button
          mat-stroked-button
          (click)="onSkip()"
          [disabled]="!canCall"
          class="skip-button">
          <lucide-angular name="skip-forward" class="icon"></lucide-angular>
          Skip
        </button>
      </div>
    </div>
  </mat-card-content>
</mat-card>
