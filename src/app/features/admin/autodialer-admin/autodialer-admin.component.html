<div class="autodialer-container">
  <!-- Header -->
  <div class="header">
    <h1>âš™ï¸ ConfiguraciÃ³n de Discado AutomÃ¡tico</h1>
    <div class="status-badge" [style.background-color]="getStatusColor()">
      {{ getStatusText() }}
    </div>
  </div>

  <!-- Error Message -->
  <div *ngIf="error" class="error-message">
    âŒ {{ error }}
  </div>

  <!-- Success Message -->
  <div *ngIf="successMessage" class="success-message">
    âœ… {{ successMessage }}
  </div>

  <!-- Success Message Config -->
  <div *ngIf="configSuccessMessage" class="success-message">
    âœ… {{ configSuccessMessage }}
  </div>

  <!-- Main Content Grid -->
  <div class="main-grid">
    <!-- Control Panel -->
    <div class="control-panel">
      <div class="control-section">
        <h2>Control del Sistema</h2>

        <button
          class="toggle-btn"
          [class.active]="isActivo"
          [disabled]="loading"
          (click)="toggleAutoDialer()">
          <span class="btn-icon">{{ getButtonIcon() }}</span>
          <span>{{ getButtonText() }}</span>
        </button>

        <div class="info-box" *ngIf="!isActivo">
          <p>â„¹ï¸ El auto-dialer estÃ¡ inactivo. ActÃ­valo para comenzar a asignar llamadas.</p>
        </div>

        <div class="info-box active" *ngIf="isActivo">
          <p>ğŸŸ¢ Sistema activo. Las llamadas se asignan automÃ¡ticamente.</p>
        </div>
      </div>
    </div>

    <!-- ConfiguraciÃ³n Avanzada -->
    <div class="control-panel">
      <div class="control-section">
        <h2>ParÃ¡metros de MarcaciÃ³n</h2>

        <div class="config-grid">
          <!-- Intensidad de MarcaciÃ³n -->
          <div class="config-item">
            <label for="intensidad">
              <strong>ğŸ“Š Intensidad</strong>
              <span class="config-description">Llamadas por agente</span>
            </label>
            <div class="input-with-info">
              <input
                type="number"
                id="intensidad"
                [(ngModel)]="intensidadMarcacion"
                min="1.0"
                max="5.0"
                step="0.1"
                class="config-input"
                [disabled]="loadingConfig"
              />
              <span class="input-info">{{ intensidadMarcacion }}x</span>
            </div>
          </div>

          <!-- Intervalo de MarcaciÃ³n -->
          <div class="config-item">
            <label for="intervalo">
              <strong>â±ï¸ Intervalo</strong>
              <span class="config-description">Segundos entre ciclos</span>
            </label>
            <div class="input-with-info">
              <input
                type="number"
                id="intervalo"
                [(ngModel)]="intervaloMarcacionSegundos"
                min="10"
                max="300"
                step="5"
                class="config-input"
                [disabled]="loadingConfig"
              />
              <span class="input-info">{{ intervaloMarcacionSegundos }}s</span>
            </div>
          </div>
        </div>

        <button
          class="save-config-btn"
          [disabled]="loadingConfig"
          (click)="guardarConfiguracion()">
          <span *ngIf="!loadingConfig">ğŸ’¾ Guardar</span>
          <span *ngIf="loadingConfig">â³ Guardando...</span>
        </button>
      </div>
    </div>
  </div>

  <!-- EstadÃ­sticas en tiempo real -->
  <div class="statistics-panel" *ngIf="estadisticas">
    <h2>ğŸ“Š EstadÃ­sticas en Tiempo Real</h2>

    <div class="stats-grid">
      <!-- Agentes Disponibles -->
      <div class="stat-card green">
        <div class="stat-icon">ğŸ‘¥</div>
        <div class="stat-content">
          <div class="stat-value">{{ estadisticas.agentesDisponibles }}</div>
          <div class="stat-label">Agentes Disponibles</div>
        </div>
      </div>

      <!-- Contactos Pendientes -->
      <div class="stat-card blue">
        <div class="stat-icon">ğŸ“‹</div>
        <div class="stat-content">
          <div class="stat-value">{{ estadisticas.contactosPendientes }}</div>
          <div class="stat-label">Contactos Pendientes</div>
        </div>
      </div>

      <!-- Llamadas Activas -->
      <div class="stat-card orange">
        <div class="stat-icon">ğŸ“</div>
        <div class="stat-content">
          <div class="stat-value">{{ estadisticas.llamadasActivas }}</div>
          <div class="stat-label">Llamadas Activas</div>
        </div>
      </div>

      <!-- Llamadas Completadas Hoy -->
      <div class="stat-card purple">
        <div class="stat-icon">âœ…</div>
        <div class="stat-content">
          <div class="stat-value">{{ estadisticas.llamadasCompletadasHoy }}</div>
          <div class="stat-label">Completadas Hoy</div>
        </div>
      </div>

      <!-- Contactos Completados -->
      <div class="stat-card teal">
        <div class="stat-icon">ğŸ¯</div>
        <div class="stat-content">
          <div class="stat-value">{{ estadisticas.contactosCompletados }}</div>
          <div class="stat-label">Total Completados</div>
        </div>
      </div>

      <!-- Contactos Fallidos -->
      <div class="stat-card red">
        <div class="stat-icon">âŒ</div>
        <div class="stat-content">
          <div class="stat-value">{{ estadisticas.contactosFallidos }}</div>
          <div class="stat-label">Llamadas Fallidas</div>
        </div>
      </div>
    </div>
  </div>
</div>
